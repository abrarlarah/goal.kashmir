/*! For license information please see main.0118aa9e.js.LICENSE.txt */
(()=>{"use strict";var e={730(e,t,n){var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Do){var r=Do}Reflect.construct(e,[],t)}else{try{t.call()}catch(Do){r=Do}e.call(t.prototype)}else{try{throw Error()}catch(Do){r=Do}e()}}catch(Do){if(Do&&r&&"string"===typeof Do.stack){for(var s=Do.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case N:return"Portal";case I:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Qd){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Se=null,Ee=null;function Ie(e){if(e=bs(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function ke(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function _e(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ce(e,t,n)}finally{je=!1,(null!==Se||null!==Ee)&&(_e(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(i(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ke(s),e;if(a===r)return Ke(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,$e=s.unstable_requestPaint,Ye=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,St,Et,It,kt=!1,Tt=[],Ct=null,_t=null,jt=null,At=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==_t&&Ft(_t)&&(_t=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Ut),Dt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==_t&&Bt(_t,e),null!==jt&&Bt(jt,e),At.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=x.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Gt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Wt(e,t,n,r){if(Kt){var s=Xt(e,t,n,r);if(null===s)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,s),!0;case"dragenter":return _t=Lt(_t,e,t,n,r,s),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Lt(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Xt(e,t,n,r))&&Kr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=vs(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Yt?Yt.value:Yt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return En}var kn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(kn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(An),Pn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Qn(e){Fr(e,0)}function Xn(e){if(W(xs(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Hn(t,Wn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Ir(e){if(Sr[e])return Sr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var kr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),_r=Ir("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){jr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Rr=Ar[Pr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var s=Ht;break;case 4:s=Gt;break;default:s=Wt}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),a=[];e:{var o=jr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case kr:case Tr:case Cr:l=yn;break;case _r:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=De(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,vs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Kn(o))if(Yn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Jt="value"in(Yt=s)?Yt.value:Yt.textContent,zn=!0)),0<(y=Gr(r,b)).length&&(b=new xn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=De(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=De(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);zt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ps="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Ns=[],Ss=-1;function Es(e){return{current:e}}function Is(e){0>Ss||(e.current=Ns[Ss],Ns[Ss]=null,Ss--)}function ks(e,t){Ss++,Ns[Ss]=e.current,e.current=t}var Ts={},Cs=Es(Ts),_s=Es(!1),js=Ts;function As(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Is(_s),Is(Cs)}function Rs(e,t,n){if(Cs.current!==Ts)throw Error(i(168));ks(Cs,t),ks(_s,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,js=Cs.current,ks(Cs,e),ks(_s,_s.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Os(e,t,js),r.__reactInternalMemoizedMergedChildContext=e,Is(_s),Is(Cs),ks(Cs,e)):Is(_s),ks(_s,n)}var Fs=null,Us=!1,Vs=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function zs(){if(!Vs&&null!==Fs){Vs=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),We(Ze,zs),s}finally{bt=t,Vs=!1}}return null}var qs=[],Ks=0,Hs=null,Gs=0,Ws=[],Qs=0,Xs=null,$s=1,Ys="";function Js(e,t){qs[Ks++]=Gs,qs[Ks++]=Hs,Hs=e,Gs=t}function Zs(e,t,n){Ws[Qs++]=$s,Ws[Qs++]=Ys,Ws[Qs++]=Xs,Xs=e;var r=$s;e=Ys;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,$s=1<<32-at(t)+s|n<<s|r,Ys=i+e}else $s=1<<i|n<<s|r,Ys=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=qs[--Ks],qs[Ks]=null,Gs=qs[--Ks],qs[Ks]=null;for(;e===Xs;)Xs=Ws[--Qs],Ws[Qs]=null,Ys=Ws[--Qs],Ws[Qs]=null,$s=Ws[--Qs],Ws[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:$s,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Uc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case N:return(t=zc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Uc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case D:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),si&&Js(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return si&&Js(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Js(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((i=Uc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Fc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Bc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),Ni=Es(null),Si=null,Ei=null,Ii=null;function ki(){Ii=Ei=Si=null}function Ti(e){var t=Ni.current;Is(Ni),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _i(e,t){Si=e,Ii=Ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function ji(e){var t=e._currentValue;if(Ii!==e)if(e={context:e,memoizedValue:t,next:null},null===Ei){if(null===Si)throw Error(i(308));Ei=e,Si.dependencies={lanes:0,firstContext:e}}else Ei=Ei.next=e;return t}var Ai=null;function Di(e){null===Ai?Ai=[e]:Ai.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ri(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ri(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Oi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Oi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ul|=a,e.lanes=a,e.memoizedState=d}}function qi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Ki={},Hi=Es(Ki),Gi=Es(Ki),Wi=Es(Ki);function Qi(e){if(e===Ki)throw Error(i(174));return e}function Xi(e,t){switch(ks(Wi,t),ks(Gi,e),ks(Hi,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Is(Hi),ks(Hi,t)}function $i(){Is(Hi),Is(Gi),Is(Wi)}function Yi(e){Qi(Wi.current);var t=Qi(Hi.current),n=le(t,e.type);t!==n&&(ks(Gi,e),ks(Hi,n))}function Ji(e){Gi.current===e&&(Is(Hi),Is(Gi))}var Zi=Es(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=Ya,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ul|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ul|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Sa(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Oa(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,ja(9,Ia.bind(null,n,r,s,t),void 0,null),null===Dl)throw Error(i(349));0!==(30&ia)||Ea(n,t,s)}return s}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ca(e)}function ka(e,t,n){return n(function(){Ta(t)&&Ca(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Ri(e,1);null!==t&&ic(t,e,1,-1)}function _a(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return va().memoizedState}function Da(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=ja(t,n,i,r))}aa.flags|=e,s.memoizedState=ja(1|t,n,i,r)}function Ra(e,t){return Da(8390656,8,e,t)}function Oa(e,t){return Pa(2048,8,e,t)}function La(e,t){return Pa(4,2,e,t)}function Ma(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function Va(){}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ul|=n,e.baseState=!0),t)}function Ka(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ha(){return va().memoizedState}function Ga(e,t,n){var r=sc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Xa(t,n);else if(null!==(n=Pi(e,t,n,r))){ic(n,e,r,rc()),$a(n,t,r)}}function Wa(e,t,n){var r=sc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Xa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Do){}null!==(n=Pi(e,t,s,r))&&(ic(n,e,r,s=rc()),$a(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ya={readContext:ji,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:ji,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:ji,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:_a,useDebugValue:Va,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=_a(!1),t=e[0];return e=Ka.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Dl)throw Error(i(349));0!==(30&ia)||Ea(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ra(ka.bind(null,r,a,e),[e]),r.flags|=2048,ja(9,Ia.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Dl.identifierPrefix;if(si){var n=Ys;t=":"+t+"R"+(n=($s&~(1<<32-at($s)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:ji,useCallback:Ba,useContext:ji,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:za,useReducer:xa,useRef:Aa,useState:function(){return xa(ba)},useDebugValue:Va,useDeferredValue:function(e){return qa(va(),oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],va().memoizedState]},useMutableSource:Na,useSyncExternalStore:Sa,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:ji,useCallback:Ba,useContext:ji,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:za,useReducer:wa,useRef:Aa,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:Na,useSyncExternalStore:Sa,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rc(),s=sc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(ic(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rc(),s=sc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(ic(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rc(),r=sc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(ic(t,e,r,n),Vi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Ts,i=t.contextType;return"object"===typeof i&&null!==i?i=ji(i):(s=Ds(t)?js:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Ts),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=ji(i):(i=Ds(t)?js:Cs.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Ql=r),uo(0,t)},n}function po(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return _i(t,s),r=ma(e,t,n,r,i,s),n=ga(),null===e||bo?(si&&n&&ei(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function No(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Lc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,So(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return ko(e,t,n,r,s)}function Eo(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ks(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,ks(Ll,Ol),Ol|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ks(Ll,Ol),Ol|=r;return xo(e,t,s,n),t.child}function Io(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,s){var i=Ds(n)?js:Cs.current;return i=As(t,i),_i(t,s),n=ma(e,t,n,r,i,s),r=ga(),null===e||bo?(si&&r&&ei(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function To(e,t,n,r,s){if(Ds(n)){var i=!0;Ls(t)}else i=!1;if(_i(t,s),null===t.stateNode)Go(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ji(c):c=As(t,c=Ds(n)?js:Cs.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Oi=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||_s.current||Oi?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Oi||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ji(l):l=As(t,l=Ds(n)?js:Cs.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Oi=!1,h=t.memoizedState,a.state=h,zi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||_s.current||Oi?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Oi||so(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _o(e,t,n,r,i,s)}function _o(e,t,n,r,s,i){Io(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Wo(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Xi(e,t.containerInfo)}function Ao(e,t,n,r,s){return fi(),pi(s),t.flags|=256,xo(e,t,n,r),t.child}var Po,Ro,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ks(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Vc(l,s,0,null),e=Uc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Vc({mode:"visible",children:r.children},s,0,null),(a=Uc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Dl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ri(e,s),ic(r,e,s,-1))}return bc(),Vo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ws[Qs++]=$s,Ws[Qs++]=Ys,Ws[Qs++]=Xs,$s=e.id,Ys=e.overflow,Xs=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=Uc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Mc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Vc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&pi(r),xi(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ko(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ks(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qo(t,!0,n,null,i);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $o(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:case 17:return Ds(t.type)&&Ps(),Xo(t),null;case 3:return r=t.stateNode,$i(),Is(_s),Is(Cs),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(cc(ii),ii=null))),Xo(t),null;case 5:Ji(t);var s=Qi(Wi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Xo(t),null}if(e=Qi(Hi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":se(r,a),Ur("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Po(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":$(e,r),s=X(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&null!=t.stateNode)Oo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Wi.current),Qi(Hi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Xo(t),null;case 13:if(Is(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xo(t),a=!1}else null!==ii&&(cc(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ml&&(Ml=3):bc())),null!==t.updateQueue&&(t.flags|=4),Xo(t),null);case 4:return $i(),null===e&&zr(t.stateNode.containerInfo),Xo(t),null;case 10:return Ti(t.type._context),Xo(t),null;case 19:if(Is(Zi),null===(a=t.memoizedState))return Xo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Qo(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ks(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>Hl&&(t.flags|=128,r=!0,Qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Xo(t),null}else 2*Ye()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=Zi.current,ks(Zi,r?1&n|2:1&n),t):(Xo(t),null);case 22:case 23:return mc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Xo(t),6&t.subtreeFlags&&(t.flags|=8192)):Xo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ti(t),t.tag){case 1:return Ds(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),Is(_s),Is(Cs),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(Is(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Is(Zi),null;case 4:return $i(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qi(Hi.current);var i,a=null;switch(n){case"input":s=X(e,s),r=X(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Zo=!1,el="function"===typeof WeakSet?WeakSet:Set,tl=null;function nl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function rl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var sl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&rl(t,n,i)}s=s.next}while(s!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ll(e){var t=e.alternate;null!==t&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Zo||nl(n,t);case 6:var r=fl,s=pl;fl=null,ml(e,t,n),pl=s,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),zt(e)):ls(fl,n.stateNode));break;case 4:r=fl,s=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=s;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&rl(n,t,a),s=s.next}while(s!==r)}ml(e,t,n);break;case 1:if(!Zo&&(nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cc(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Zo=(r=Zo)||null!==n.memoizedState,ml(e,t,n),Zo=r):ml(e,t,n);break;default:ml(e,t,n)}}function yl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new el),t.forEach(function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(i(160));gl(a,o,s),fl=null,pl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Do){Cc(s,t,Do)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),xl(e),4&r){try{il(3,e,e.return),al(3,e)}catch(g){Cc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:vl(t,e),xl(e),512&r&&null!==n&&nl(n,n.return);break;case 5:if(vl(t,e),xl(e),512&r&&null!==n&&nl(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(vl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(vl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:vl(t,e),xl(e);break;case 13:vl(t,e),xl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Kl=Ye())),4&r&&yl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zo=(u=Zo)||d,vl(t,e),Zo=u):vl(t,e),xl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(tl=e,d=e.child;null!==d;){for(h=tl=d;null!==tl;){switch(p=(f=tl).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:nl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(null!==f.memoizedState){El(h);continue}}null!==p?(p.return=f,tl=p):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),xl(e),4&r&&yl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),hl(e,ul(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;dl(e,ul(e),a);break;default:throw Error(i(161))}}catch(Co){Cc(e,e.return,Co)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){tl=e,Nl(e,t,n)}function Nl(e,t,n){for(var r=0!==(1&e.mode);null!==tl;){var s=tl,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Jo;var c=Zo;if(Jo=a,(Zo=l)&&!c)for(tl=s;null!==tl;)l=(a=tl).child,22===a.tag&&null!==a.memoizedState?Il(s):null!==l?(l.return=a,tl=l):Il(s);for(;null!==i;)tl=i,Nl(i,t,n),i=i.sibling;tl=s,Jo=o,Zo=c}Sl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,tl=i):Sl(e)}}function Sl(e){for(;null!==tl;){var t=tl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(i(163))}Zo||512&t.flags&&ol(t)}catch(Bo){Cc(t,t.return,Bo)}}if(t===e){tl=null;break}if(null!==(n=t.sibling)){n.return=t.return,tl=n;break}tl=t.return}}function El(e){for(;null!==tl;){var t=tl;if(t===e){tl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tl=n;break}tl=t.return}}function Il(e){for(;null!==tl;){var t=tl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(Co){Cc(t,n,Co)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Co){Cc(t,s,Co)}}var i=t.return;try{ol(t)}catch(Co){Cc(t,i,Co)}break;case 5:var a=t.return;try{ol(t)}catch(Co){Cc(t,a,Co)}}}catch(Co){Cc(t,t.return,Co)}if(t===e){tl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,tl=o;break}tl=t.return}}var kl,Tl=Math.ceil,Cl=x.ReactCurrentDispatcher,_l=x.ReactCurrentOwner,jl=x.ReactCurrentBatchConfig,Al=0,Dl=null,Pl=null,Rl=0,Ol=0,Ll=Es(0),Ml=0,Fl=null,Ul=0,Vl=0,Bl=0,zl=null,ql=null,Kl=0,Hl=1/0,Gl=null,Wl=!1,Ql=null,Xl=null,$l=!1,Yl=null,Jl=0,Zl=0,ec=null,tc=-1,nc=0;function rc(){return 0!==(6&Al)?Ye():-1!==tc?tc:tc=Ye()}function sc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==mi.transition?(0===nc&&(nc=mt()),nc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ic(e,t,n,r){if(50<Zl)throw Zl=0,ec=null,Error(i(185));yt(e,n,r),0!==(2&Al)&&e===Dl||(e===Dl&&(0===(2&Al)&&(Vl|=n),4===Ml&&uc(e,Rl)),ac(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Hl=Ye()+500,Us&&zs()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Dl?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Us=!0,Bs(e)}(dc.bind(null,e)):Bs(dc.bind(null,e)),as(function(){0===(6&Al)&&zs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(tc=-1,nc=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Dl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var s=Al;Al|=2;var a=vc();for(Dl===e&&Rl===t||(Gl=null,Hl=Ye()+500,gc(e,t));;)try{Nc();break}catch(l){yc(e,l)}ki(),Cl.current=a,Al=s,null!==Pl?t=0:(Dl=null,Rl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=lc(e,s))),1===t)throw n=Fl,gc(e,0),uc(e,r),ac(e,Ye()),n;if(6===t)uc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=xc(e,r))&&(0!==(a=pt(e))&&(r=a,t=lc(e,a))),1===t))throw n=Fl,gc(e,0),uc(e,r),ac(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Ic(e,ql,Gl);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Kl+500-Ye())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){rc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(Ic.bind(null,e,ql,Gl),t);break}Ic(e,ql,Gl);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=rs(Ic.bind(null,e,ql,Gl),r);break}Ic(e,ql,Gl);break;default:throw Error(i(329))}}}return ac(e,Ye()),e.callbackNode===n?oc.bind(null,e):null}function lc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(gc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=ql,ql=n,null!==t&&cc(t)),e}function cc(e){null===ql?ql=e:ql.push.apply(ql,e)}function uc(e,t){for(t&=~Bl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&Al))throw Error(i(327));kc();var t=ht(e,0);if(0===(1&t))return ac(e,Ye()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Fl,gc(e,0),uc(e,t),ac(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,ql,Gl),ac(e,Ye()),null}function hc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Hl=Ye()+500,Us&&zs())}}function fc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&kc();var t=Al;Al|=1;var n=jl.transition,r=bt;try{if(jl.transition=null,bt=1,e)return e()}finally{bt=r,jl.transition=n,0===(6&(Al=t))&&zs()}}function mc(){Ol=Ll.current,Is(Ll)}function gc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:$i(),Is(_s),Is(Cs),na();break;case 5:Ji(r);break;case 4:$i();break;case 13:case 19:Is(Zi);break;case 10:Ti(r.type._context);break;case 22:case 23:mc()}n=n.return}if(Dl=e,Pl=e=Mc(e.current,null),Rl=Ol=t,Ml=0,Fl=null,Bl=Vl=Ul=0,ql=zl=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return e}function yc(e,t){for(;;){var n=Pl;try{if(ki(),ra.current=Ya,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,_l.current=null,null===n||null===n.return){Ml=1,Fl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),bc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Ml&&(Ml=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}Ec(n)}catch(Ho){t=Ho,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vc(){var e=Cl.current;return Cl.current=Ya,null===e?Ya:e}function bc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Dl||0===(268435455&Ul)&&0===(268435455&Vl)||uc(Dl,Rl)}function xc(e,t){var n=Al;Al|=2;var r=vc();for(Dl===e&&Rl===t||(Gl=null,gc(e,t));;)try{wc();break}catch(s){yc(e,s)}if(ki(),Al=n,Cl.current=r,null!==Pl)throw Error(i(261));return Dl=null,Rl=0,Ml}function wc(){for(;null!==Pl;)Sc(Pl)}function Nc(){for(;null!==Pl&&!Xe();)Sc(Pl)}function Sc(e){var t=kl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Ec(e):Pl=t,_l.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$o(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Ic(e,t,n){var r=bt,s=jl.transition;try{jl.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Yl);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Dl&&(Pl=Dl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Pc(tt,function(){return kc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=jl.transition,jl.transition=null;var o=bt;bt=1;var l=Al;Al|=4,_l.current=null,function(e,t){if(es=Kt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(pc){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Kt=!1,tl=t;null!==tl;)if(e=(t=tl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,tl=e;else for(;null!==tl;){t=tl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(pc){Cc(t,t.return,pc)}if(null!==(e=t.sibling)){e.return=t.return,tl=e;break}tl=t.return}m=sl,sl=!1}(e,n),bl(n,e),pr(ts),Kt=!!es,ts=es=null,e.current=n,wl(n,e,s),$e(),Al=l,bt=o,jl.transition=a}else e.current=n;if($l&&($l=!1,Yl=e,Jl=s),a=e.pendingLanes,0===a&&(Xl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Ql,Ql=null,e;0!==(1&Jl)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===ec?Zl++:(Zl=0,ec=e):Zl=0,zs()}(e,t,n,r)}finally{jl.transition=s,bt=r}return null}function kc(){if(null!==Yl){var e=xt(Jl),t=jl.transition,n=bt;try{if(jl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Al))throw Error(i(331));var s=Al;for(Al|=4,tl=e.current;null!==tl;){var a=tl,o=a.child;if(0!==(16&tl.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(tl=u;null!==tl;){var d=tl;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var h=d.child;if(null!==h)h.return=d,tl=h;else for(;null!==tl;){var f=(d=tl).sibling,p=d.return;if(ll(d),d===u){tl=null;break}if(null!==f){f.return=p,tl=f;break}tl=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}tl=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,tl=o;else e:for(;null!==tl;){if(0!==(2048&(a=tl).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,tl=v;break e}tl=a.return}}var b=e.current;for(tl=b;null!==tl;){var x=(o=tl).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,tl=x;else e:for(o=b;null!==tl;){if(0!==(2048&(l=tl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(Ho){Cc(l,l.return,Ho)}if(l===o){tl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,tl=w;break e}tl=l.return}}if(Al=s,zs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(Ho){}r=!0}return r}finally{bt=n,jl.transition=t}}return!1}function Tc(e,t,n){e=Ui(e,t=fo(0,t=lo(n,t),1),1),t=rc(),null!==e&&(yt(e,1,t),ac(e,t))}function Cc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Ui(t,e=po(t,e=lo(n,e),1),1),e=rc(),null!==t&&(yt(t,1,e),ac(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rc(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Rl&n)===n&&(4===Ml||3===Ml&&(130023424&Rl)===Rl&&500>Ye()-Kl?gc(e,0):Bl|=n),ac(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=rc();null!==(e=Ri(e,t))&&(yt(e,t,n),ac(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),jc(e,n)}function Pc(e,t){return We(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Rc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Lc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Uc(n.children,s,a,t);case E:o=8,s|=8;break;case I:return(e=Oc(12,n,t,2|s)).elementType=I,e.lanes=a,e;case _:return(e=Oc(13,n,t,s)).elementType=_,e.lanes=a,e;case j:return(e=Oc(19,n,t,s)).elementType=j,e.lanes=a,e;case P:return Vc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case T:o=9;break e;case C:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Uc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Vc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,s,i,a,o,l){return e=new qc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Hc(e){if(!e)return Ts;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Os(e,n,t)}return t}function Gc(e,t,n,r,s,i,a,o,l){return(e=Kc(n,r,!0,e,0,i,0,o,l)).context=Hc(null),n=e.current,(i=Fi(r=rc(),s=sc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,yt(e,s,r),ac(e,r),e}function Wc(e,t,n,r){var s=t.current,i=rc(),a=sc(s);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(ic(e,s,a,i),Vi(e,s,a)),a}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),fi();break;case 5:Yi(t);break;case 1:Ds(t.type)&&Ls(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ks(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ks(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(ks(Zi,1&Zi.current),null!==(e=Wo(e,t,n))?e.sibling:null);ks(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ko(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ks(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Go(e,t),e=t.pendingProps;var s=As(t,Cs.current);_i(t,n),s=ma(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Li(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=_o(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),s){case 0:t=ko(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,ko(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,To(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(jo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Wo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),Io(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Fo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,ks(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!_s.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ci(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ci(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_i(t,n),r=r(s=ji(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),No(e,t,r,s=to(r.type,s),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Go(e,t),t.tag=1,Ds(r)?(e=!0,Ls(t)):e=!1,_i(t,n),io(t,r,s),oo(t,r,s,n),_o(null,t,r,!0,e,n);case 19:return Ko(e,t,n);case 22:return Eo(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nu(){}function ru(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Qc(a);o.call(e)}}Wc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Qc(a);i.call(e)}}var a=Gc(t,r,e,0,null,!1,0,"",nu);return e._reactRootContainer=a,e[ps]=a.current,zr(8===e.nodeType?e.parentNode:e),fc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Qc(l);o.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",nu);return e._reactRootContainer=l,e[ps]=l.current,zr(8===e.nodeType?e.parentNode:e),fc(function(){Wc(t,l,n,r)}),l}(n,t,e,s,r);return Qc(a)}Zc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Zc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Wc(null,e,null,null)}),t[ps]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ac(t,Ye()),0===(6&Al)&&(Hl=Ye()+500,zs()))}break;case 13:fc(function(){var t=Ri(e,1);if(null!==t){var n=rc();ic(t,e,1,n)}}),$c(e,1)}},Nt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)ic(t,e,134217728,rc());$c(e,134217728)}},St=function(e){if(13===e.tag){var t=sc(e),n=Ri(e,t);if(null!==n)ic(n,e,t,rc());$c(e,t)}},Et=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));W(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=hc,_e=fc;var su={usingClientEntryPoint:!1,Events:[bs,xs,ws,ke,Te,hc]},iu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{st=ou.inject(au),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!eu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!eu(e))throw Error(i(299));var n=!1,r="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Kc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!tu(t))throw Error(i(200));return ru(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!eu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,zr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Zc(t)},t.render=function(e,t,n){if(!tu(t))throw Error(i(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!tu(e))throw Error(i(40));return!!e._reactRootContainer&&(fc(function(){ru(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ru(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153(e,t,n){var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!E.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(T,"$&/")+"/"),_(a,t,s,"",function(e){return e})):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(o=e[c],c);l+=_(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=_(o=o.value,t,s,u=i+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return _(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43(e,t,n){e.exports=n(202)},579(e,t,n){e.exports=n(153)},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,P(N);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function N(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,I=null,k=-1,T=5,C=-1;function _(){return!(t.unstable_now()-C<T)}function j(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?S():(E=!1,I=null)}}else E=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=j,S=function(){D.postMessage(null)}}else S=function(){y(j,0)};function P(e){I=e,E||(E=!0,S())}function R(e,n){k=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(N))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){e.exports=n(234)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let x={get action(){return p},get location(){return e(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),m=e,()=>{i.removeEventListener(l,v),m=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let s=h(x.location,e,t);n&&n(s,e),g=y()+1;let o=d(s,g),l=x.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&m&&m({action:p,location:x.location,delta:1})},replace:function(e,t){p=r.Replace;let s=h(x.location,e,t);n&&n(s,e),g=y();let i=d(s,g),o=x.createHref(s);u.replaceState(i,"",o),a&&m&&m({action:p,location:x.location,delta:0})},go:e=>u.go(e)};return x}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let s=D(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=A(s);a=_(i[o],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=V([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))s(e,t,r);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=x(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,N=3,S=2,E=1,I=10,k=-2,T=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=k),t&&(r+=S),n.filter(e=>!T(e)).reduce((e,t)=>e+(w.test(t)?N:""===t?E:I),r)}function _(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:V([i,u.pathname]),pathnameBase:B(V([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=V([i,u.pathnameBase]))}return a}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function R(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:i=""}="string"===typeof e?p(e):e;if(r)if(a=r,P.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),u(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?O(r.substring(1),"/"):O(r,t)}else n=t;var a;return{pathname:n,search:z(s),hash:q(i)}}function O(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function F(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function U(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),L("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),L("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),L("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=R(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const V=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],G=(new Set(H),["get",...H]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const Q=s.createContext(null);const X=s.createContext(null);const $=s.createContext(null);const Y=s.createContext(null);const J=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext(Y)}function te(){return ee()||c(!1),s.useContext(Y).location}function ne(e){s.useContext($).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext(J);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=s.useRef(!1);ne(()=>{n.current=!0});let r=s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},s)))},[e,t]);return r}():function(){ee()||c(!1);let e=s.useContext(Q),{basename:t,future:n,navigator:r}=s.useContext($),{matches:i}=s.useContext(J),{pathname:a}=te(),o=JSON.stringify(F(i,n.v7_relativeSplatPath)),l=s.useRef(!1);ne(()=>{l.current=!0});let u=s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=U(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:V([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e]);return u}()}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext($),{matches:i}=s.useContext(J),{pathname:a}=te(),o=JSON.stringify(F(i,r.v7_relativeSplatPath));return s.useMemo(()=>U(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,i){ee()||c(!1);let{navigator:a}=s.useContext($),{matches:o}=s.useContext(J),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let x=ue(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:V([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&x?s.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},x):x}function ae(){let e=function(){var e;let t=s.useContext(Z),n=pe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=K(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const oe=s.createElement(ae,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(J.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(J.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,c=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||oe,u&&(d<0&&0===i?(p="route-fallback",!1||ge[p]||(ge[p]=!0),c=!0,f=null):d===i&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:c?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=s.useContext(Q);return t||c(!1),t}function pe(e){let t=s.useContext(X);return t||c(!1),t}function me(e){let t=function(){let e=s.useContext(J);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const ge={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||c(!1);let{future:a,static:o}=s.useContext($),{matches:l}=s.useContext(J),{pathname:u}=te(),d=re(),h=U(t,F(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:i}),[d,f,i,n,r]),null}function be(e){c(!1)}function xe(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;ee()&&c(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:d,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,b=s.useMemo(()=>{let e=D(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,f,m,g,y,v,a]);return null==b?null:s.createElement($.Provider,{value:h},s.createElement(Y.Provider,{children:n,value:b}))}function we(e){let{children:t,location:n}=e;return ie(Ne(t),n)}new Promise(()=>{});s.Component;function Ne(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,Ne(e.props.children,i));e.type!==be&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ne(e.props.children,i)),n.push(a)}),n}var Se=n(950),Ee=n.t(Se,2);function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Te=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ce=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(GN){}const _e=s.createContext({isTransitioning:!1});new Map;const je=i.startTransition;Ee.flushSync,i.useId;function Ae(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=p(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))},function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,d]=s.useState({action:l.action,location:l.location}),{v7_startTransition:g}=r||{},y=s.useCallback(e=>{g&&je?je(()=>d(e)):d(e)},[d,g]);return s.useLayoutEffect(()=>l.listen(y),[l,y]),s.useEffect(()=>ye(r),[r]),s.createElement(xe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const De="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Pe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=ke(e,Te),{basename:g}=s.useContext($),y=!1;if("string"===typeof d&&Pe.test(d)&&(n=d,De))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(GN){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||c(!1);let{basename:r,navigator:i}=s.useContext($),{hash:a,pathname:o,search:l}=se(e,{relative:n}),u=o;return"/"!==r&&(u="/"===o?r:V([r,o])),i.createHref({pathname:u,search:l,hash:a})}(d,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=se(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});return s.createElement("a",Ie({},m,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:u}))});const Oe=s.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d}=e,h=ke(e,Ce),f=se(l,{relative:h.relative}),p=te(),m=s.useContext(X),{navigator:g,basename:y}=s.useContext($),v=null!=m&&function(e,t){void 0===t&&(t={});let n=s.useContext(_e);null==n&&c(!1);let{basename:r}=Fe(Le.useViewTransitionState),i=se(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=D(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=D(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=j(i.pathname,o)||null!=j(i.pathname,a)}(f)&&!0===u,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,x=p.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=D(w,y)||w);const N="/"!==b&&b.endsWith("/")?b.length-1:b.length;let S,E=x===b||!a&&x.startsWith(b)&&"/"===x.charAt(N),I=null!=w&&(w===b||!a&&w.startsWith(b)&&"/"===w.charAt(b.length)),k={isActive:E,isPending:I,isTransitioning:v},T=E?n:void 0;S="function"===typeof i?i(k):[i,E?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof o?o(k):o;return s.createElement(Re,Ie({},h,{"aria-current":T,className:S,ref:t,style:C,to:l,viewTransition:u}),"function"===typeof d?d(k):d)});var Le,Me;function Fe(e){let t=s.useContext(Q);return t||c(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Le||(Le={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Me||(Me={}));const Ue=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ue(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Be;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(e){return function(e){const t=Ue(e);return Ve.encodeByteArray(t,!0)}(e).replace(/\./g,"")},qe=function(e){try{return Ve.decodeString(e,!0)}catch(GN){console.error("base64Decode failed: ",GN)}return null};const Ke=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,He=()=>{try{return Ke()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/goal.kashmir",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(GN){return}const t=e&&qe(e[1]);return t&&JSON.parse(t)})()}catch(GN){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(GN))}},Ge=e=>{var t,n;return null===(n=null===(t=He())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},We=()=>{var e;return null===(e=He())||void 0===e?void 0:e.config},Qe=e=>{var t;return null===(t=He())||void 0===t?void 0:t["_".concat(e)]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function $e(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ye(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Je(){return!function(){var e;const t=null===(e=He())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(GN){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){try{return"object"===typeof indexedDB}catch(GN){return!1}}function et(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class tt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nt.prototype.create)}}class nt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(rt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new tt(n,i,t)}}const rt=/\{\$([^}]+)}/g;function st(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(it(n)&&it(i)){if(!st(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function it(e){return null!==e&&"object"===typeof e}function at(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ot(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function lt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ct{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ut),void 0===r.error&&(r.error=ut),void 0===r.complete&&(r.complete=ut);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(GN){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(GN){"undefined"!==typeof console&&console.error&&console.error(GN)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ut(){}function dt(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function ht(e){return e&&e._delegate?e._delegate:e}class ft{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pt="[DEFAULT]";class mt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(GN){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(GN){if(r)return null;throw GN}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pt})}catch(GN){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(GN){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===pt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;return this.component?this.component.multipleInstances?e:pt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class gt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const yt=[];var vt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(vt||(vt={}));const bt={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},xt=vt.INFO,wt={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},Nt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=wt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class St{constructor(e){this.name=e,this._logLevel=xt,this._logHandler=Nt,this._userLogHandler=null,yt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?bt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...t),this._logHandler(this,vt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...t),this._logHandler(this,vt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vt.INFO,...t),this._logHandler(this,vt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vt.WARN,...t),this._logHandler(this,vt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...t),this._logHandler(this,vt.ERROR,...t)}}function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function It(e){var t=function(e,t){if("object"!=Et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Et(t)?t:t+""}function kt(e,t,n){return(t=It(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach(function(t){kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let _t,jt;const At=new WeakMap,Dt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Ot=new WeakMap;let Lt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ut(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Mt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(jt||(jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Vt(this),n),Ut(At.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ut(e.apply(Vt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Vt(this),t,...r);return Pt.set(i,t.sort?t.sort():[t]),Ut(i)}}function Ft(e){return"function"===typeof e?Mt(e):(e instanceof IDBTransaction&&function(e){if(Dt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Dt.set(e,t)}(e),t=e,(_t||(_t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Lt):e);var t}function Ut(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Ut(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&At.set(t,e)}).catch(()=>{}),Ot.set(t,e),t}(e);if(Rt.has(e))return Rt.get(e);const t=Ft(e);return t!==e&&(Rt.set(e,t),Ot.set(t,e)),t}const Vt=e=>Ot.get(e);const Bt=["get","getKey","getAll","getAllKeys","count"],zt=["put","add","delete","clear"],qt=new Map;function Kt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(qt.get(t))return qt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=zt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Bt.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return qt.set(t,i),i}Lt=(e=>Ct(Ct({},e),{},{get:(t,n,r)=>Kt(t,n)||e.get(t,n,r),has:(t,n)=>!!Kt(t,n)||e.has(t,n)}))(Lt);class Ht{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Gt="@firebase/app",Wt="0.9.13",Qt=new St("@firebase/app"),Xt="@firebase/app-compat",$t="@firebase/analytics-compat",Yt="@firebase/analytics",Jt="@firebase/app-check-compat",Zt="@firebase/app-check",en="@firebase/auth",tn="@firebase/auth-compat",nn="@firebase/database",rn="@firebase/database-compat",sn="@firebase/functions",an="@firebase/functions-compat",on="@firebase/installations",ln="@firebase/installations-compat",cn="@firebase/messaging",un="@firebase/messaging-compat",dn="@firebase/performance",hn="@firebase/performance-compat",fn="@firebase/remote-config",pn="@firebase/remote-config-compat",mn="@firebase/storage",gn="@firebase/storage-compat",yn="@firebase/firestore",vn="@firebase/firestore-compat",bn="firebase",xn="[DEFAULT]",wn={[Gt]:"fire-core",[Xt]:"fire-core-compat",[Yt]:"fire-analytics",[$t]:"fire-analytics-compat",[Zt]:"fire-app-check",[Jt]:"fire-app-check-compat",[en]:"fire-auth",[tn]:"fire-auth-compat",[nn]:"fire-rtdb",[rn]:"fire-rtdb-compat",[sn]:"fire-fn",[an]:"fire-fn-compat",[on]:"fire-iid",[ln]:"fire-iid-compat",[cn]:"fire-fcm",[un]:"fire-fcm-compat",[dn]:"fire-perf",[hn]:"fire-perf-compat",[fn]:"fire-rc",[pn]:"fire-rc-compat",[mn]:"fire-gcs",[gn]:"fire-gcs-compat",[yn]:"fire-fst",[vn]:"fire-fst-compat","fire-js":"fire-js",[bn]:"fire-js-all"},Nn=new Map,Sn=new Map;function En(e,t){try{e.container.addComponent(t)}catch(GN){Qt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),GN)}}function In(e){const t=e.name;if(Sn.has(t))return Qt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Sn.set(t,e);for(const n of Nn.values())En(n,e);return!0}function kn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Tn=new nt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Cn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const _n="9.23.0";function jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:xn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Tn.create("bad-app-name",{appName:String(s)});if(n||(n=We()),!n)throw Tn.create("no-options");const i=Nn.get(s);if(i){if(st(n,i.options)&&st(r,i.config))return i;throw Tn.create("duplicate-app",{appName:s})}const a=new gt(s);for(const l of Sn.values())a.addComponent(l);const o=new Cn(n,r,a);return Nn.set(s,o),o}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;const t=Nn.get(e);if(!t&&e===xn&&We())return jn();if(!t)throw Tn.create("no-app",{appName:e});return t}function Dn(e,t,n){var r;let s=null!==(r=wn[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qt.warn(e.join(" "))}In(new ft("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Pn="firebase-heartbeat-store";let Rn=null;function On(){return Rn||(Rn=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Ut(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ut(a.result),e.oldVersion,e.newVersion,Ut(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Pn)}}).catch(e=>{throw Tn.create("idb-open",{originalErrorMessage:e.message})})),Rn}async function Ln(e,t){try{const n=(await On()).transaction(Pn,"readwrite"),r=n.objectStore(Pn);await r.put(t,Mn(e)),await n.done}catch(GN){if(GN instanceof tt)Qt.warn(GN.message);else{const t=Tn.create("idb-set",{originalErrorMessage:null===GN||void 0===GN?void 0:GN.message});Qt.warn(t.message)}}}function Mn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Fn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Un();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Un(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Bn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Bn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ze(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Un(){return(new Date).toISOString().substring(0,10)}class Vn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ze()&&et().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await On();return await t.transaction(Pn).objectStore(Pn).get(Mn(e))}catch(GN){if(GN instanceof tt)Qt.warn(GN.message);else{const t=Tn.create("idb-get",{originalErrorMessage:null===GN||void 0===GN?void 0:GN.message});Qt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ln(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ln(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Bn(e){return ze(JSON.stringify({version:2,heartbeats:e})).length}var zn;zn="",In(new ft("platform-logger",e=>new Ht(e),"PRIVATE")),In(new ft("heartbeat",e=>new Fn(e),"PRIVATE")),Dn(Gt,Wt,zn),Dn(Gt,Wt,"esm2017"),Dn("fire-js","");function qn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Kn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Hn=Kn,Gn=new nt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wn=new St("@firebase/auth");function Qn(e){if(Wn.logLevel<=vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wn.error("Auth (".concat(_n,"): ").concat(e),...n)}}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Jn(e,...n)}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jn(e,...n)}function Yn(e,t,n){const r=Object.assign(Object.assign({},Hn()),{[t]:n});return new nt("auth","Firebase",r).create(t,{appName:e.name})}function Jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Gn.create(e,...n)}function Zn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Jn(t,...r)}}function er(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qn(t),new Error(t)}function tr(e,t){e||er(t)}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function rr(){return"http:"===sr()||"https:"===sr()}function sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ir{constructor(e,t){this.shortDelay=e,this.longDelay=t,tr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(rr()||Ye()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ar(e,t){tr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class or{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},cr=new ir(3e4,6e4);function ur(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function dr(e,t,n,r){return hr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=at(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),or.fetch()(pr(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},s))})}async function hr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},lr),t);try{const t=new mr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw gr(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw gr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw gr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw gr(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Yn(e,o,a);Xn(e,o)}}catch(GN){if(GN instanceof tt)throw GN;Xn(e,"network-request-failed",{message:String(GN)})}}async function fr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await dr(e,t,n,r,s);return"mfaPendingCredential"in i&&Xn(e,"multi-factor-auth-required",{_serverResponse:i}),i}function pr(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ar(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}class mr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t($n(this.auth,"network-request-failed")),cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$n(e,t,r);return s.customData._tokenResponse=n,s}function yr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(GN){}}function vr(e){return 1e3*Number(e)}function br(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Qn("JWT malformed, contained fewer than 3 sections"),null;try{const e=qe(n);return e?JSON.parse(e):(Qn("Failed to decode base64 JWT payload"),null)}catch(GN){return Qn("Caught error parsing JWT payload as JSON",null===GN||void 0===GN?void 0:GN.toString()),null}}async function xr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(GN){throw GN instanceof tt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(GN)&&e.auth.currentUser===e&&await e.auth.signOut(),GN}}class wr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(GN){return void((null===GN||void 0===GN?void 0:GN.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Nr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sr(e){var t;const n=e.auth,r=await e.getIdToken(),s=await xr(e,async function(e,t){return dr(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Zn(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=qn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Nr(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class Er{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Zn(e.idToken,"internal-error"),Zn("undefined"!==typeof e.idToken,"internal-error"),Zn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=br(e);return Zn(t,"internal-error"),Zn("undefined"!==typeof t.exp,"internal-error"),Zn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await hr(e,{},async()=>{const n=at({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=pr(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",or.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Er;return n&&(Zn("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Zn("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Zn("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Er,this.toJSON())}_performRefresh(){return er("not implemented")}}function Ir(e,t){Zn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class kr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=qn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nr(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await xr(this,this.stsTokenManager.getToken(this.auth,e));return Zn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ht(e),r=await n.getIdToken(t),s=br(r);Zn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:yr(vr(s.auth_time)),issuedAtTime:yr(vr(s.iat)),expirationTime:yr(vr(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ht(e);await Sr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Zn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Zn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Sr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await xr(this,async function(e,t){return dr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:N}=t;Zn(v&&N,e,"internal-error");const S=Er.fromJSON(this.name,N);Zn("string"===typeof v,e,"internal-error"),Ir(u,e.name),Ir(d,e.name),Zn("boolean"===typeof b,e,"internal-error"),Zn("boolean"===typeof x,e,"internal-error"),Ir(h,e.name),Ir(f,e.name),Ir(p,e.name),Ir(m,e.name),Ir(g,e.name),Ir(y,e.name);const E=new kr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Er;r.updateFromServerResponse(t);const s=new kr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Sr(s),s}}const Tr=new Map;function Cr(e){tr(e instanceof Function,"Expected a class definition");let t=Tr.get(e);return t?(tr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Tr.set(e,t),t)}class _r{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_r.type="NONE";const jr=_r;function Ar(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Dr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Ar(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ar("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Dr(Cr(jr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Cr(jr);const i=Ar(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=kr._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Dr(s,e,n)):new Dr(s,e,n)}}function Pr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ur(t))return"Blackberry";if(Vr(t))return"Webos";if(Or(t))return"Safari";if((t.includes("chrome/")||Lr(t))&&!t.includes("edge/"))return"Chrome";if(Fr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/firefox\//i.test(e)}function Or(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/crios\//i.test(e)}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/iemobile/i.test(e)}function Fr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/android/i.test(e)}function Ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/blackberry/i.test(e)}function Vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/webos/i.test(e)}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zr(){return function(){const e=$e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return Br(e)||Fr(e)||Vr(e)||Ur(e)||/windows phone/i.test(e)||Mr(e)}function Kr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pr($e());break;case"Worker":t="".concat(Pr($e()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(_n,"/").concat(r)}async function Hr(e,t){return dr(e,"GET","/v2/recaptchaConfig",ur(e,t))}function Gr(e){return void 0!==e&&void 0!==e.enterprise}class Wr{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function Qr(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=$n("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Xr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class $r{constructor(e){this.type="recaptcha-enterprise",this.auth=es(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Gr(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Hr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Wr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Gr(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Qr("https://www.google.com/recaptcha/enterprise.js?render="+s).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Yr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new $r(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class Jr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(GN){r(GN)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(GN){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===GN||void 0===GN?void 0:GN.message})}}}class Zr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ts(this),this.idTokenSubscription=new ts(this),this.beforeStateQueue=new Jr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Dr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(GN){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(GN){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(GN))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Zn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(GN){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sr(e)}catch(GN){if((null===GN||void 0===GN?void 0:GN.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ht(e):null;return t&&Zn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Zn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}async initializeRecaptchaConfig(){const e=await Hr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Wr(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new $r(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cr(e)||this._popupRedirectResolver;Zn(t,this,"argument-error"),this.redirectPersistenceManager=await Dr.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return Zn(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Zn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Wn.logLevel<=vt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wn.warn("Auth (".concat(_n,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function es(e){return ht(e)}class ts{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ct(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Zn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ns(e,t,n){const r=es(e);Zn(r._canInitEmulator,r,"emulator-config-failed"),Zn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=rs(t),{host:a,port:o}=function(e){const t=rs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:ss(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ss(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function rs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ss(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class is{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,t){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function as(e,t){return dr(e,"POST","/v1/accounts:update",t)}async function os(e,t){return fr(e,"POST","/v1/accounts:signInWithPassword",ur(e,t))}class ls extends is{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ls(e,t,"password")}static _fromEmailAndCode(e,t){return new ls(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Yr(e,n,"signInWithPassword");return os(e,t)}return os(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Yr(e,n,"signInWithPassword");return os(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return fr(e,"POST","/v1/accounts:signInWithEmailLink",ur(e,t))}(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return as(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return fr(e,"POST","/v1/accounts:signInWithEmailLink",ur(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function cs(e,t){return fr(e,"POST","/v1/accounts:signInWithIdp",ur(e,t))}class us extends is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=qn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new us(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return cs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,cs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=at(t)}return e}}const ds={USER_NOT_FOUND:"user-not-found"};class hs extends is{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new hs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new hs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return fr(e,"POST","/v1/accounts:signInWithPhoneNumber",ur(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await fr(e,"POST","/v1/accounts:signInWithPhoneNumber",ur(e,t));if(n.temporaryProof)throw gr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return fr(e,"POST","/v1/accounts:signInWithPhoneNumber",ur(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ds)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new hs({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class fs{constructor(e){var t,n,r,s,i,a;const o=ot(lt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Zn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ot(lt(e)).link,n=t?ot(lt(t)).deep_link_id:null,r=ot(lt(e)).deep_link_id;return(r?ot(lt(r)).link:null)||r||n||t||e}(e);try{return new fs(t)}catch(n){return null}}}class ps{constructor(){this.providerId=ps.PROVIDER_ID}static credential(e,t){return ls._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=fs.parseLink(t);return Zn(n,"argument-error"),ls._fromEmailAndCode(e,n.code,n.tenantId)}}ps.PROVIDER_ID="password",ps.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ps.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ms{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gs extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ys extends gs{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ys.credential(t.oauthAccessToken)}catch(n){return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com",ys.PROVIDER_ID="facebook.com";class vs extends gs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return us._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return vs.credential(n,r)}catch(s){return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com",vs.PROVIDER_ID="google.com";class bs extends gs{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return bs.credential(t.oauthAccessToken)}catch(n){return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com",bs.PROVIDER_ID="github.com";class xs extends gs{constructor(){super("twitter.com")}static credential(e,t){return us._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xs.credential(n,r)}catch(s){return null}}}async function ws(e,t){return fr(e,"POST","/v1/accounts:signUp",ur(e,t))}xs.TWITTER_SIGN_IN_METHOD="twitter.com",xs.PROVIDER_ID="twitter.com";class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await kr._fromIdTokenResponse(e,n,r),i=Ss(n);return new Ns({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ss(n);return new Ns({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ss(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Es extends tt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Es.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Es(e,t,n,r)}}function Is(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Es._fromErrorAndOperation(e,n,t,r);throw n})}async function ks(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await xr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ns._forOperation(e,"link",r)}async function Ts(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const i=await xr(e,Is(r,s,t,e),n);Zn(i.idToken,r,"internal-error");const a=br(i.idToken);Zn(a,r,"internal-error");const{sub:o}=a;return Zn(e.uid===o,r,"user-mismatch"),Ns._forOperation(e,s,i)}catch(GN){throw(null===GN||void 0===GN?void 0:GN.code)==="auth/".concat("user-not-found")&&Xn(r,"user-mismatch"),GN}}async function Cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await Is(e,r,t),i=await Ns._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function _s(e,t){return Cs(es(e),t)}new WeakMap;const js="__sak";class As{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(js,"1"),this.storage.removeItem(js),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ds extends As{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=$e();return Or(e)||Br(e)}()&&function(){try{return!(!window||window===window.top)}catch(GN){return!1}}(),this.fallbackToPolling=qr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);zr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ds.type="LOCAL";const Ps=Ds;class Rs extends As{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rs.type="SESSION";const Os=Rs;class Ls{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ls(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ls.receivers=[];class Fs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Ms("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Us(){return window}function Vs(){return"undefined"!==typeof Us().WorkerGlobalScope&&"function"===typeof Us().importScripts}const Bs="firebaseLocalStorageDb",zs="firebaseLocalStorage",qs="fbase_key";class Ks{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hs(e,t){return e.transaction([zs],t?"readwrite":"readonly").objectStore(zs)}function Gs(){const e=indexedDB.open(Bs,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(zs,{keyPath:qs})}catch(GN){n(GN)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(zs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bs);return new Ks(e).toPromise()}(),t(await Gs()))})})}async function Ws(e,t,n){const r=Hs(e,!0).put({[qs]:t,value:n});return new Ks(r).toPromise()}function Qs(e,t){const n=Hs(e,!0).delete(t);return new Ks(n).toPromise()}class Xs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Gs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(GN){if(t++>3)throw GN;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ls._getInstance(Vs()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Fs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gs();return await Ws(e,js,"1"),await Qs(e,js),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ws(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Hs(e,!1).get(t),r=await new Ks(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qs(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Hs(e,!1).getAll();return new Ks(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Xs.type="LOCAL";const $s=Xs;Xr("rcb"),new ir(3e4,6e4);const Ys="recaptcha";async function Js(e,t,n){var r;const s=await n.verify();try{let i;if(Zn("string"===typeof s,e,"argument-error"),Zn(n.type===Ys,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Zn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return dr(e,"POST","/v2/accounts/mfaEnrollment:start",ur(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Zn("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Zn(n,e,"missing-multi-factor-info");const a=await function(e,t){return dr(e,"POST","/v2/accounts/mfaSignIn:start",ur(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return dr(e,"POST","/v1/accounts:sendVerificationCode",ur(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Zs{constructor(e){this.providerId=Zs.PROVIDER_ID,this.auth=es(e)}verifyPhoneNumber(e,t){return Js(this.auth,e,ht(t))}static credential(e,t){return hs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Zs.credentialFromTaggedObject(t)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?hs._fromTokenResponse(n,r):null}}function ei(e,t){return t?Cr(t):(Zn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zs.PROVIDER_ID="phone",Zs.PHONE_SIGN_IN_METHOD="phone";class ti extends is{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ni(e){return Cs(e.auth,new ti(e),e.bypassAuthState)}function ri(e){const{auth:t,user:n}=e;return Zn(n,t,"internal-error"),Ts(n,new ti(e),e.bypassAuthState)}async function si(e){const{auth:t,user:n}=e;return Zn(n,t,"internal-error"),ks(n,new ti(e),e.bypassAuthState)}class ii{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(GN){this.reject(GN)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(GN){this.reject(GN)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ni;case"linkViaPopup":case"linkViaRedirect":return si;case"reauthViaPopup":case"reauthViaRedirect":return ri;default:Xn(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ai=new ir(2e3,1e4);class oi extends ii{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,oi.currentPopupAction&&oi.currentPopupAction.cancel(),oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Zn(e,this.auth,"internal-error"),e}async onExecution(){tr(1===this.filter.length,"Popup operations only handle one event");const e=Ms();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ai.get())};e()}}oi.currentPopupAction=null;const li=new Map;class ci extends ii{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=li.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=hi(t),r=di(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(GN){e=()=>Promise.reject(GN)}li.set(this.auth._key(),e)}return this.bypassAuthState||li.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ui(e,t){li.set(e._key(),t)}function di(e){return Cr(e._redirectPersistence)}function hi(e){return Ar("pendingRedirect",e.config.apiKey,e.name)}async function fi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=es(e),s=ei(r,t),i=new ci(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class pi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!gi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($n(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mi(e))}saveEventToCache(e){this.cachedEventUids.add(mi(e)),this.lastProcessedEventTime=Date.now()}}function mi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function gi(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const yi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vi=/^https?/;async function bi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return dr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(xi(r))return}catch(n){}Xn(e,"unauthorized-domain")}function xi(e){const t=nr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!vi.test(n))return!1;if(yi.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const wi=new ir(3e4,6e4);function Ni(){const e=Us().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Si=null;function Ei(e){return Si=Si||function(e){return new Promise((t,n)=>{var r,s,i;function a(){Ni(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ni(),n($n(e,"network-request-failed"))},timeout:wi.get()})}if(null===(s=null===(r=Us().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Us().gapi)||void 0===i?void 0:i.load)){const t=Xr("iframefcb");return Us()[t]=()=>{gapi.load?a():n($n(e,"network-request-failed"))},Qr("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Si=null,e})}(e),Si}const Ii=new ir(5e3,15e3),ki={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ti=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ci(e){const t=e.config;Zn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ar(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:_n},s=Ti.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(at(r).slice(1))}const _i={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ji{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(GN){}}}function Ai(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},_i),{width:r.toString(),height:s.toString(),top:i,left:a}),c=$e().toLowerCase();n&&(o=Lr(c)?"_blank":n),Rr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Br(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new ji(null);const d=window.open(t||"",o,u);Zn(d,e,"popup-blocked");try{d.focus()}catch(GN){}return new ji(d)}const Di="__/auth/handler",Pi="emulator/auth/handler",Ri=encodeURIComponent("fac");async function Oi(e,t,n,r,s,i){Zn(e.config.authDomain,e,"auth-domain-config-required"),Zn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:_n,eventId:s};if(t instanceof ms){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof gs){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ri,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Di);return ar(t,Pi)}(e),"?").concat(at(o).slice(1)).concat(c)}const Li="webStorageSupport";const Mi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Os,this._completeRedirectFn=fi,this._overrideRedirectResult=ui}async _openPopup(e,t,n,r){var s;tr(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Ai(e,await Oi(e,t,n,nr(),r),Ms())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Us().location.href=e}(await Oi(e,t,n,nr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(tr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Ei(e),n=Us().gapi;return Zn(n,e,"internal-error"),t.open({where:document.body,url:Ci(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ki,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=$n(e,"network-request-failed"),i=Us().setTimeout(()=>{r(s)},Ii.get());function a(){Us().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}(e),n=new pi(e);return t.register("authEvent",t=>{Zn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Li,{type:Li},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Li];void 0!==s&&t(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qr()||Or()||Br()}};var Fi="@firebase/auth",Ui="0.23.2";class Vi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Zn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Bi=Qe("authIdTokenMaxAge")||300;let zi=null;var qi;qi="Browser",In(new ft("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Zn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:qi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kr(qi)},c=new Zr(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),In(new ft("auth-internal",e=>(e=>new Vi(e))(es(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(Fi,Ui,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(qi)),Dn(Fi,Ui,"esm2017");Dn("firebase","9.23.0","app");let Ki,Hi;const Gi=new WeakMap,Wi=new WeakMap,Qi=new WeakMap,Xi=new WeakMap,$i=new WeakMap;let Yi={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Wi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Qi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ea(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ji(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Hi||(Hi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ta(this),n),ea(Gi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ea(e.apply(ta(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ta(this),t,...r);return Qi.set(i,t.sort?t.sort():[t]),ea(i)}}function Zi(e){return"function"===typeof e?Ji(e):(e instanceof IDBTransaction&&function(e){if(Wi.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Wi.set(e,t)}(e),t=e,(Ki||(Ki=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Yi):e);var t}function ea(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ea(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Gi.set(t,e)}).catch(()=>{}),$i.set(t,e),t}(e);if(Xi.has(e))return Xi.get(e);const t=Zi(e);return t!==e&&(Xi.set(e,t),$i.set(t,e)),t}const ta=e=>$i.get(e);const na=["get","getKey","getAll","getAllKeys","count"],ra=["put","add","delete","clear"],sa=new Map;function ia(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(sa.get(t))return sa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=ra.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!na.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return sa.set(t,i),i}!function(e){Yi=e(Yi)}(e=>Ct(Ct({},e),{},{get:(t,n,r)=>ia(t,n)||e.get(t,n,r),has:(t,n)=>!!ia(t,n)||e.has(t,n)}));const aa="@firebase/installations",oa="0.6.4",la=1e4,ca="w:".concat(oa),ua="FIS_v2",da=36e5,ha=new nt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fa(e){return e instanceof tt&&e.code.includes("request-failed")}function pa(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function ma(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ga(e,t){const n=(await t.json()).error;return ha.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ya(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function va(e,t){let{refreshToken:n}=t;const r=ya(e);return r.append("Authorization",function(e){return"".concat(ua," ").concat(e)}(n)),r}async function ba(e){const t=await e();return t.status>=500&&t.status<600?e():t}function xa(e){return new Promise(t=>{setTimeout(t,e)})}const wa=/^[cdef][\w-]{21}$/;function Na(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return wa.test(t)?t:""}catch(e){return""}}function Sa(e){return"".concat(e.appName,"!").concat(e.appId)}const Ea=new Map;function Ia(e,t){const n=Sa(e);ka(n,t),function(e,t){const n=Ca();n&&n.postMessage({key:e,fid:t});_a()}(n,t)}function ka(e,t){const n=Ea.get(e);if(n)for(const r of n)r(t)}let Ta=null;function Ca(){return!Ta&&"BroadcastChannel"in self&&(Ta=new BroadcastChannel("[Firebase] FID Change"),Ta.onmessage=e=>{ka(e.data.key,e.data.fid)}),Ta}function _a(){0===Ea.size&&Ta&&(Ta.close(),Ta=null)}const ja="firebase-installations-store";let Aa=null;function Da(){return Aa||(Aa=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ea(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ea(a.result),e.oldVersion,e.newVersion,ea(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",()=>s())}).catch(()=>{}),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ja)}})),Aa}async function Pa(e,t){const n=Sa(e),r=(await Da()).transaction(ja,"readwrite"),s=r.objectStore(ja),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||Ia(e,t.fid),t}async function Ra(e){const t=Sa(e),n=(await Da()).transaction(ja,"readwrite");await n.objectStore(ja).delete(t),await n.done}async function Oa(e,t){const n=Sa(e),r=(await Da()).transaction(ja,"readwrite"),s=r.objectStore(ja),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||Ia(e,a.fid),a}async function La(e){let t;const n=await Oa(e.appConfig,n=>{const r=function(e){const t=e||{fid:Na(),registrationStatus:0};return Ua(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(ha.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=pa(n),a=ya(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:ua,appId:n.appId,sdkVersion:ca},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await ba(()=>fetch(i,c));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:ma(e.authToken)}}throw await ga("Create Installation",u)}(e,t);return Pa(e.appConfig,n)}catch(GN){throw fa(GN)&&409===GN.customData.serverCode?await Ra(e.appConfig):await Pa(e.appConfig,{fid:t.fid,registrationStatus:0}),GN}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ma(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Ma(e){let t=await Fa(e.appConfig);for(;1===t.registrationStatus;)await xa(100),t=await Fa(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await La(e);return n||t}return t}function Fa(e){return Oa(e,e=>{if(!e)throw ha.create("installation-not-found");return Ua(e)})}function Ua(e){return 1===(t=e).registrationStatus&&t.registrationTime+la<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Va(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(pa(e),"/").concat(n,"/authTokens:generate")}(n,t),i=va(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:ca,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await ba(()=>fetch(s,l));if(c.ok){return ma(await c.json())}throw await ga("Generate Auth Token",c)}async function Ba(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Oa(e.appConfig,r=>{if(!qa(r))throw ha.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+da}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await za(e.appConfig);for(;1===n.authToken.requestStatus;)await xa(100),n=await za(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Ba(e,t):r}(e,n),r;{if(!navigator.onLine)throw ha.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Va(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Pa(e.appConfig,r),n}catch(GN){if(!fa(GN)||401!==GN.customData.serverCode&&404!==GN.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Pa(e.appConfig,n)}else await Ra(e.appConfig);throw GN}}(e,n),n}});return t?await t:r.authToken}function za(e){return Oa(e,e=>{if(!qa(e))throw ha.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+la<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function qa(e){return void 0!==e&&2===e.registrationStatus}async function Ka(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await La(e);t&&await t}(n);return(await Ba(n,t)).token}function Ha(e){return ha.create("missing-app-config-values",{valueName:e})}const Ga="installations",Wa=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ha("App Configuration");if(!e.name)throw Ha("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ha(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:kn(t,"heartbeat"),_delete:()=>Promise.resolve()}},Qa=e=>{const t=kn(e.getProvider("app").getImmediate(),Ga).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await La(t);return r?r.catch(console.error):Ba(t).catch(console.error),n.fid}(t),getToken:e=>Ka(t,e)}};In(new ft(Ga,Wa,"PUBLIC")),In(new ft("installations-internal",Qa,"PRIVATE")),Dn(aa,oa),Dn(aa,oa,"esm2017");const Xa="analytics",$a="https://www.googletagmanager.com/gtag/js",Ya=new St("@firebase/analytics"),Ja=new nt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Za(e){if(!e.startsWith($a)){const t=Ja.create("invalid-gtag-resource",{gtagURL:e});return Ya.warn(t.message),""}return e}function eo(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function to(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Za}),r=document.createElement("script"),s="".concat($a,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function no(e,t,n,r){return async function(s){try{for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("event"===s){const[r,s]=a;await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await eo(n);for(const n of e){const e=r.find(e=>e.measurementId===n),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(GN){Ya.error(GN)}}(e,t,n,r,s)}else if("config"===s){const[s,i]=a;await async function(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const e=(await eo(n)).find(e=>e.measurementId===s);e&&await t[e.appId]}}catch(GN){Ya.error(GN)}e("config",s,i)}(e,t,n,r,s,i)}else if("consent"===s){const[t]=a;e("consent","update",t)}else if("get"===s){const[t,n,r]=a;e("get",t,n,r)}else if("set"===s){const[t]=a;e("set",t)}else e(s,...a)}catch(GN){Ya.error(GN)}}}const ro=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function so(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ro,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw Ja.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ja.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new oo;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),ao({appId:r,apiKey:s,measurementId:i},a,o,t)}async function ao(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ro;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(Ja.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(GN){if(l)return Ya.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===GN||void 0===GN?void 0:GN.message,"]")),{appId:o,measurementId:l};throw GN}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:so(r)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(i,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Ja.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(o),t}catch(GN){const r=GN;if(!function(e){if(!(e instanceof tt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(i.deleteThrottleMetadata(o),l)return Ya.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:o,measurementId:l};throw GN}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?dt(s,i.intervalMillis,30):dt(s,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:s+1};return i.setThrottleMetadata(o,u),Ya.debug("Calling attemptFetch again in ".concat(c," millis")),ao(e,u,n,i)}}class oo{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let lo,co;function uo(e){co=e}function ho(e){lo=e}async function fo(e,t,n,r,s,i,a){var o;const l=io(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ya.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>Ya.error(e)),t.push(l);const c=async function(){if(!Ze())return Ya.warn(Ja.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await et()}catch(GN){return Ya.warn(Ja.create("indexeddb-unavailable",{errorInfo:null===GN||void 0===GN?void 0:GN.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes($a)&&n.src.includes(e))return n;return null})(i)||to(i,u.measurementId),co&&(s("consent","default",co),uo(void 0)),s("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),lo&&(s("set",lo),ho(void 0)),u.measurementId}class po{constructor(e){this.app=e}_delete(){return delete mo[this.app.options.appId],Promise.resolve()}}let mo={},go=[];const yo={};let vo,bo,xo="dataLayer",wo="gtag",No=!1;function So(){const e=[];if(Ye()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=Ja.create("invalid-analytics-context",{errorInfo:t});Ya.warn(n.message)}}function Eo(e,t,n){So();const r=e.options.appId;if(!r)throw Ja.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ja.create("no-api-key");Ya.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=mo[r])throw Ja.create("already-exists",{id:r});if(!No){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(xo);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(i=window[s]),window[s]=no(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(mo,go,yo,xo,wo);bo=e,vo=t,No=!0}mo[r]=fo(e,go,yo,t,vo,xo,n);return new po(e)}function Io(e,t,n,r){e=ht(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(bo,mo[e.app.options.appId],t,n,r).catch(e=>Ya.error(e))}const ko="@firebase/analytics",To="0.10.0";In(new ft(Xa,(e,t)=>{let{options:n}=t;return Eo(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),In(new ft("analytics-internal",function(e){try{const t=e.getProvider(Xa).getImmediate();return{logEvent:(e,n,r)=>Io(t,e,n,r)}}catch(GN){throw Ja.create("interop-component-reg-failed",{reason:GN})}},"PRIVATE")),Dn(ko,To),Dn(ko,To,"esm2017");var Co,_o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},jo={},Ao=Ao||{},Do=_o||self;function Po(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ro(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Oo="closure_uid_"+(1e9*Math.random()>>>0),Lo=0;function Mo(e,t,n){return e.call.apply(e.bind,arguments)}function Fo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Uo(e,t,n){return(Uo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mo:Fo).apply(null,arguments)}function Vo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Bo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function zo(){this.s=this.s,this.o=this.o}zo.prototype.s=!1,zo.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Oo)&&e[Oo]||(e[Oo]=++Lo))},zo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ko(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ho(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Po(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function Go(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Go.prototype.h=function(){this.defaultPrevented=!0};var Wo=function(){if(!Do.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Do.addEventListener("test",()=>{},t),Do.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Qo(e){return/^[\s\xa0]*$/.test(e)}function Xo(){var e=Do.navigator;return e&&(e=e.userAgent)?e:""}function $o(e){return-1!=Xo().indexOf(e)}function Yo(e){return Yo[" "](e),e}Yo[" "]=function(){};var Jo,Zo,el=$o("Opera"),tl=$o("Trident")||$o("MSIE"),nl=$o("Edge"),rl=nl||tl,sl=$o("Gecko")&&!(-1!=Xo().toLowerCase().indexOf("webkit")&&!$o("Edge"))&&!($o("Trident")||$o("MSIE"))&&!$o("Edge"),il=-1!=Xo().toLowerCase().indexOf("webkit")&&!$o("Edge");function al(){var e=Do.document;return e?e.documentMode:void 0}e:{var ol="",ll=function(){var e=Xo();return sl?/rv:([^\);]+)(\)|;)/.exec(e):nl?/Edge\/([\d\.]+)/.exec(e):tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):il?/WebKit\/(\S+)/.exec(e):el?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ll&&(ol=ll?ll[1]:""),tl){var cl=al();if(null!=cl&&cl>parseFloat(ol)){Jo=String(cl);break e}}Jo=ol}if(Do.document&&tl){var ul=al();Zo=ul||(parseInt(Jo,10)||void 0)}else Zo=void 0;var dl=Zo;function hl(e,t){if(Go.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sl){e:{try{Yo(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:fl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&hl.$.h.call(this)}}Bo(hl,Go);var fl={2:"touch",3:"pen",4:"mouse"};hl.prototype.h=function(){hl.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var pl="closure_listenable_"+(1e6*Math.random()|0),ml=0;function gl(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++ml,this.fa=this.ia=!1}function yl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function vl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function bl(e){const t={};for(const n in e)t[n]=e[n];return t}const xl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wl(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<xl.length;t++)n=xl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nl(e){this.src=e,this.g={},this.h=0}function Sl(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=qo(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(yl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function El(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}Nl.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=El(e,t,r,s);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new gl(t,this.src,i,!!r,s)).ia=n,e.push(t)),t};var Il="closure_lm_"+(1e6*Math.random()|0),kl={};function Tl(e,t,n,r,s){if(r&&r.once)return _l(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Tl(e,t[i],n,r,s);return null}return n=Ll(n),e&&e[pl]?e.O(t,n,Ro(r)?!!r.capture:!!r,s):Cl(e,t,n,!1,r,s)}function Cl(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=Ro(s)?!!s.capture:!!s,o=Rl(e);if(o||(e[Il]=o=new Nl(e)),(n=o.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Pl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wo||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Dl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _l(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)_l(e,t[i],n,r,s);return null}return n=Ll(n),e&&e[pl]?e.P(t,n,Ro(r)?!!r.capture:!!r,s):Cl(e,t,n,!0,r,s)}function jl(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)jl(e,t[i],n,r,s);else r=Ro(r)?!!r.capture:!!r,n=Ll(n),e&&e[pl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=El(i=e.g[t],n,r,s))&&(yl(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Rl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=El(t,n,r,s)),(n=-1<e?t[e]:null)&&Al(n))}function Al(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[pl])Sl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Dl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Rl(t))?(Sl(n,e),0==n.h&&(n.src=null,t[Il]=null)):yl(e)}}}function Dl(e){return e in kl?kl[e]:kl[e]="on"+e}function Pl(e,t){if(e.fa)e=!0;else{t=new hl(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Al(e),e=n.call(r,t)}return e}function Rl(e){return(e=e[Il])instanceof Nl?e:null}var Ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ll(e){return"function"===typeof e?e:(e[Ol]||(e[Ol]=function(t){return e.handleEvent(t)}),e[Ol])}function Ml(){zo.call(this),this.i=new Nl(this),this.S=this,this.J=null}function Fl(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Go(t,e);else if(t instanceof Go)t.target=t.target||e;else{var s=t;wl(t=new Go(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=Ul(a,r,!0,t)&&s}if(s=Ul(a=t.g=e,r,!0,t)&&s,s=Ul(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=Ul(a=t.g=n[i],r,!1,t)&&s}function Ul(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&Sl(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}Bo(Ml,zo),Ml.prototype[pl]=!0,Ml.prototype.removeEventListener=function(e,t,n,r){jl(this,e,t,n,r)},Ml.prototype.N=function(){if(Ml.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yl(n[r]);delete t.g[e],t.h--}}this.J=null},Ml.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ml.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Vl=Do.JSON.stringify;function Bl(){var e=Ql;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var zl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ql,e=>e.reset());class ql{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Kl(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Hl(e){Do.setTimeout(()=>{throw e},0)}let Gl,Wl=!1,Ql=new class{constructor(){this.h=this.g=null}add(e,t){const n=zl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Xl=()=>{const e=Do.Promise.resolve(void 0);Gl=()=>{e.then($l)}};var $l=()=>{for(var e;e=Bl();){try{e.h.call(e.g)}catch(n){Hl(n)}var t=zl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Wl=!1};function Yl(e,t){Ml.call(this),this.h=e||1,this.g=t||Do,this.j=Uo(this.qb,this),this.l=Date.now()}function Jl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Zl(e,t,n){if("function"===typeof e)n&&(e=Uo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Uo(e.handleEvent,e)}return 2147483647<Number(t)?-1:Do.setTimeout(e,t||0)}function ec(e){e.g=Zl(()=>{e.g=null,e.i&&(e.i=!1,ec(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Bo(Yl,Ml),(Co=Yl.prototype).ga=!1,Co.T=null,Co.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Fl(this,"tick"),this.ga&&(Jl(this),this.start()))}},Co.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Co.N=function(){Yl.$.N.call(this),Jl(this),delete this.g};class tc extends zo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ec(this)}N(){super.N(),this.g&&(Do.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nc(e){zo.call(this),this.h=e,this.g={}}Bo(nc,zo);var rc=[];function sc(e,t,n,r){Array.isArray(n)||(n&&(rc[0]=n.toString()),n=rc);for(var s=0;s<n.length;s++){var i=Tl(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function ic(e){vl(e.g,function(e,t){this.g.hasOwnProperty(t)&&Al(e)},e),e.g={}}function ac(){this.g=!0}function oc(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return Vl(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}nc.prototype.N=function(){nc.$.N.call(this),ic(this)},nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ac.prototype.Ea=function(){this.g=!1},ac.prototype.info=function(){};var lc={},cc=null;function uc(){return cc=cc||new Ml}function dc(e){Go.call(this,lc.Ta,e)}function hc(e){const t=uc();Fl(t,new dc(t))}function fc(e,t){Go.call(this,lc.STAT_EVENT,e),this.stat=t}function pc(e){const t=uc();Fl(t,new fc(t,e))}function mc(e,t){Go.call(this,lc.Ua,e),this.size=t}function gc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Do.setTimeout(function(){e()},t)}lc.Ta="serverreachability",Bo(dc,Go),lc.STAT_EVENT="statevent",Bo(fc,Go),lc.Ua="timingevent",Bo(mc,Go);var yc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bc(){}function xc(e){return e.h||(e.h=e.i())}function wc(){}bc.prototype.h=null;var Nc,Sc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ec(){Go.call(this,"d")}function Ic(){Go.call(this,"c")}function kc(){}function Tc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new nc(this),this.P=_c,e=rl?125:void 0,this.V=new Yl(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Cc}function Cc(){this.i=null,this.g="",this.h=!1}Bo(Ec,Go),Bo(Ic,Go),Bo(kc,bc),kc.prototype.g=function(){return new XMLHttpRequest},kc.prototype.i=function(){return{}},Nc=new kc;var _c=45e3,jc={},Ac={};function Dc(e,t,n){e.L=1,e.v=Yc(Gc(t)),e.s=n,e.S=!0,Pc(e,null)}function Pc(e,t){e.G=Date.now(),Mc(e),e.A=Gc(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),uu(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Cc,e.g=dd(e.l,n?t:null,!e.s),0<e.O&&(e.M=new tc(Uo(e.Pa,e,e.g),e.O)),sc(e.U,e.g,"readystatechange",e.nb),t=e.I?bl(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),hc(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Rc(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Oc(e,t,n){let r,s=!0;for(;!e.J&&e.C<n.length;){if(r=Lc(e,n),r==Ac){4==t&&(e.o=4,pc(14),s=!1),oc(e.j,e.m,null,"[Incomplete Response]");break}if(r==jc){e.o=4,pc(15),oc(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}oc(e.j,e.m,r,null),zc(e,r)}Rc(e)&&r!=Ac&&r!=jc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,pc(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),rd(t),t.M=!0,pc(11))):(oc(e.j,e.m,n,"[Invalid Chunked Response]"),Bc(e),Vc(e))}function Lc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ac:(n=Number(t.substring(n,r)),isNaN(n)?jc:(r+=1)+n>t.length?Ac:(t=t.slice(r,r+n),e.C=r+n,t))}function Mc(e){e.Y=Date.now()+e.P,Fc(e,e.P)}function Fc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=gc(Uo(e.lb,e),t)}function Uc(e){e.B&&(Do.clearTimeout(e.B),e.B=null)}function Vc(e){0==e.l.H||e.J||ad(e.l,e)}function Bc(e){Uc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Jl(e.V),ic(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function zc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||yu(n.i,e)))if(!e.K&&yu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;id(n),Xu(n)}nd(n),pc(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=gc(Uo(n.ib,n),6e3));if(1>=gu(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ld(n,11)}else if((e.K||n.g==e)&&id(n),!Qo(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=c[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(vu(i,i.h),i.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,$c(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=ud(r,r.J?r.pa:null,r.Y),a.K){bu(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.B&&(Uc(o),Mc(o)),r.g=a}else td(r);0<n.j.length&&Yu(n)}else"stop"!=c[0]&&"close"!=c[0]||ld(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ld(n,7):Qu(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}hc()}catch(c){}}function qc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Po(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Po(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Po(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}(Co=Tc.prototype).setTimeout=function(e){this.P=e},Co.nb=function(e){e=e.target;const t=this.M;t&&3==zu(e)?t.l():this.Pa(e)},Co.Pa=function(e){try{if(e==this.g)e:{const u=zu(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||rl||this.g&&(this.h.h||this.g.ja()||qu(this.g)))){this.J||4!=u||7==t||hc(),Uc(this);var n=this.g.da();this.ca=n;t:if(Rc(this)){var r=qu(this.g);e="";var s=r.length,i=4==zu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Bc(this),Vc(this);var a="";break t}this.h.i=new Do.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qo(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,pc(12),Bc(this),Vc(this);break e}oc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zc(this,n)}this.S?(Oc(this,u,a),rl&&this.i&&3==u&&(sc(this.U,this.V,"tick",this.mb),this.V.start())):(oc(this.j,this.m,a,null),zc(this,a)),4==u&&Bc(this),this.i&&!this.J&&(4==u?ad(this.l,this):(this.i=!1,Mc(this)))}else(function(e){const t={};e=(e.g&&2<=zu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Qo(e[r]))continue;var n=Kl(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,pc(12)):(this.o=0,pc(13)),Bc(this),Vc(this)}}}catch(u){}},Co.mb=function(){if(this.g){var e=zu(this.g),t=this.g.ja();this.C<t.length&&(Uc(this),Oc(this,e,t),this.i&&4!=e&&Mc(this))}},Co.cancel=function(){this.J=!0,Bc(this)},Co.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(hc(),pc(17)),Bc(this),this.o=2,Vc(this)):Fc(this,this.Y-e)};var Kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Hc){this.h=e.h,Wc(this,e.j),this.s=e.s,this.g=e.g,Qc(this,e.m),this.l=e.l;var t=e.i,n=new au;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Xc(this,n),this.o=e.o}else e&&(t=String(e).match(Kc))?(this.h=!1,Wc(this,t[1]||"",!0),this.s=Jc(t[2]||""),this.g=Jc(t[3]||"",!0),Qc(this,t[4]),this.l=Jc(t[5]||"",!0),Xc(this,t[6]||"",!0),this.o=Jc(t[7]||"")):(this.h=!1,this.i=new au(null,this.h))}function Gc(e){return new Hc(e)}function Wc(e,t,n){e.j=n?Jc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xc(e,t,n){t instanceof au?(e.i=t,function(e,t){t&&!e.j&&(ou(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(lu(this,t),uu(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Zc(t,su)),e.i=new au(t,e.h))}function $c(e,t,n){e.i.set(t,n)}function Yc(e){return $c(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Jc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,eu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function eu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Hc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zc(t,tu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Zc(t,tu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Zc(n,"/"==n.charAt(0)?ru:nu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zc(n,iu)),e.join("")};var tu=/[#\/\?@]/g,nu=/[#\?:]/g,ru=/[#\?]/g,su=/[#\?@]/g,iu=/#/g;function au(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ou(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function lu(e,t){ou(e),t=du(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function cu(e,t){return ou(e),t=du(e,t),e.g.has(t)}function uu(e,t,n){lu(e,t),0<n.length&&(e.i=null,e.g.set(du(e,t),Ko(n)),e.h+=n.length)}function du(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Co=au.prototype).add=function(e,t){ou(this),this.i=null,e=du(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Co.forEach=function(e,t){ou(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Co.ta=function(){ou(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},Co.Z=function(e){ou(this);let t=[];if("string"===typeof e)cu(this,e)&&(t=t.concat(this.g.get(du(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Co.set=function(e,t){return ou(this),this.i=null,cu(this,e=du(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Co.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Co.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")};var hu=class{constructor(e,t){this.g=e,this.map=t}};function fu(e){this.l=e||pu,Do.PerformanceNavigationTiming?e=0<(e=Do.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Do.g&&Do.g.Ka&&Do.g.Ka()&&Do.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pu=10;function mu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function gu(e){return e.h?1:e.g?e.g.size:0}function yu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function vu(e,t){e.g?e.g.add(t):e.h=t}function bu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function xu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ko(e.i)}fu.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var wu,Nu=class{stringify(e){return Do.JSON.stringify(e,void 0)}parse(e){return Do.JSON.parse(e,void 0)}};function Su(){this.g=new Nu}function Eu(e,t,n){const r=n||"";try{qc(e,function(e,n){let s=e;Ro(e)&&(s=Vl(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(GN){throw t.push(r+"type="+encodeURIComponent("_badmap")),GN}}function Iu(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function ku(e){this.l=e.fc||null,this.j=e.ob||!1}function Tu(e,t){Ml.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Cu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bo(ku,bc),ku.prototype.g=function(){return new Tu(this.l,this.j)},ku.prototype.i=(wu={},function(){return wu}),Bo(Tu,Ml);var Cu=0;function _u(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ju(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Au(e)}function Au(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Co=Tu.prototype).open=function(e,t){if(this.readyState!=Cu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Au(this)},Co.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Do).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Co.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ju(this)),this.readyState=Cu},Co.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Au(this)),this.g&&(this.readyState=3,Au(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Do.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_u(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Co.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ju(this):Au(this),3==this.readyState&&_u(this)}},Co.Za=function(e){this.g&&(this.response=this.responseText=e,ju(this))},Co.Ya=function(e){this.g&&(this.response=e,ju(this))},Co.ka=function(){this.g&&ju(this)},Co.setRequestHeader=function(e,t){this.v.append(e,t)},Co.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Co.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Du=Do.JSON.parse;function Pu(e){Ml.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ru,this.L=this.M=!1}Bo(Pu,Ml);var Ru="",Ou=/^https?$/i,Lu=["POST","PUT"];function Mu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fu(e),Vu(e)}function Fu(e){e.F||(e.F=!0,Fl(e,"complete"),Fl(e,"error"))}function Uu(e){if(e.h&&"undefined"!=typeof Ao&&(!e.C[1]||4!=zu(e)||2!=e.da()))if(e.v&&4==zu(e))Zl(e.La,0,e);else if(Fl(e,"readystatechange"),4==zu(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var s=String(e.I).match(Kc)[1]||null;!s&&Do.self&&Do.self.location&&(s=Do.self.location.protocol.slice(0,-1)),r=!Ou.test(s?s.toLowerCase():"")}n=r}if(n)Fl(e,"complete"),Fl(e,"success");else{e.m=6;try{var i=2<zu(e)?e.g.statusText:""}catch(a){i=""}e.j=i+" ["+e.da()+"]",Fu(e)}}finally{Vu(e)}}}function Vu(e,t){if(e.g){Bu(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Fl(e,"ready");try{n.onreadystatechange=r}catch(GN){}}}function Bu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Do.clearTimeout(e.A),e.A=null)}function zu(e){return e.g?e.g.readyState:0}function qu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ru:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qd){return null}}function Ku(e){let t="";return vl(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Hu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ku(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$c(e,t,n))}function Gu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wu(e){this.Ga=0,this.j=[],this.l=new ac,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gu("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gu("baseRetryDelayMs",5e3,e),this.hb=Gu("retryDelaySeedMs",1e4,e),this.eb=Gu("forwardChannelMaxRetries",2,e),this.xa=Gu("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new fu(e&&e.concurrentRequestLimit),this.Ja=new Su,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Qu(e){if($u(e),3==e.H){var t=e.W++,n=Gc(e.I);if($c(n,"SID",e.K),$c(n,"RID",t),$c(n,"TYPE","terminate"),Zu(e,n),(t=new Tc(e,e.l,t)).L=2,t.v=Yc(Gc(n)),n=!1,Do.navigator&&Do.navigator.sendBeacon)try{n=Do.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Do.Image&&((new Image).src=t.v,n=!0),n||(t.g=dd(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Mc(t)}cd(e)}function Xu(e){e.g&&(rd(e),e.g.cancel(),e.g=null)}function $u(e){Xu(e),e.u&&(Do.clearTimeout(e.u),e.u=null),id(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Do.clearTimeout(e.m),e.m=null)}function Yu(e){if(!mu(e.i)&&!e.m){e.m=!0;var t=e.Na;Gl||Xl(),Wl||(Gl(),Wl=!0),Ql.add(t,e),e.C=0}}function Ju(e,t){var n;n=t?t.m:e.W++;const r=Gc(e.I);$c(r,"SID",e.K),$c(r,"RID",n),$c(r,"AID",e.V),Zu(e,r),e.o&&e.s&&Hu(r,e.o,e.s),n=new Tc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ed(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),vu(e.i,n),Dc(n,r,t)}function Zu(e,t){e.na&&vl(e.na,function(e,n){$c(t,n,e)}),e.h&&qc({},function(e,n){$c(t,n,e)})}function ed(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Uo(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Eu(o,e,"req"+n+"_")}catch(ih){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function td(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Gl||Xl(),Wl||(Gl(),Wl=!0),Ql.add(t,e),e.A=0}}function nd(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=gc(Uo(e.Ma,e),od(e,e.A)),e.A++,!0)}function rd(e){null!=e.B&&(Do.clearTimeout(e.B),e.B=null)}function sd(e){e.g=new Tc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Gc(e.wa);$c(t,"RID","rpc"),$c(t,"SID",e.K),$c(t,"AID",e.V),$c(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&$c(t,"TO",e.qa),$c(t,"TYPE","xmlhttp"),Zu(e,t),e.o&&e.s&&Hu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Yc(Gc(t)),n.s=null,n.S=!0,Pc(n,e)}function id(e){null!=e.v&&(Do.clearTimeout(e.v),e.v=null)}function ad(e,t){var n=null;if(e.g==t){id(e),rd(e),e.g=null;var r=2}else{if(!yu(e.i,t))return;n=t.F,bu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;Fl(r=uc(),new mc(r,n)),Yu(e)}else td(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==r&&function(e,t){return!(gu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=gc(Uo(e.Na,e,t),od(e,e.C)),e.C++,!0))}(e,t)||2==r&&nd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:ld(e,5);break;case 4:ld(e,10);break;case 3:ld(e,6);break;default:ld(e,2)}}function od(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ld(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Uo(e.pb,e);n||(n=new Hc("//www.google.com/images/cleardot.gif"),Do.location&&"http"==Do.location.protocol||Wc(n,"https"),Yc(n)),function(e,t){const n=new ac;if(Do.Image){const r=new Image;r.onload=Vo(Iu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vo(Iu,n,r,"TestLoadImage: error",!1,t),r.onabort=Vo(Iu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vo(Iu,n,r,"TestLoadImage: timeout",!1,t),Do.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else pc(2);e.H=0,e.h&&e.h.za(t),cd(e),$u(e)}function cd(e){if(e.H=0,e.ma=[],e.h){const t=xu(e.i);0==t.length&&0==e.j.length||(Ho(e.ma,t),Ho(e.ma,e.j),e.i.i.length=0,Ko(e.j),e.j.length=0),e.h.ya()}}function ud(e,t,n){var r=n instanceof Hc?Gc(n):new Hc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Qc(r,r.m);else{var s=Do.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Hc(null);r&&Wc(i,r),t&&(i.g=t),s&&Qc(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&$c(r,n,t),$c(r,"VER",e.ra),Zu(e,r),r}function dd(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Pu(new ku({ob:!0})):new Pu(e.va)).Oa(e.J),t}function hd(){}function fd(){if(tl&&!(10<=Number(dl)))throw Error("Environmental error: no available transport.")}function pd(e,t){Ml.call(this),this.g=new Wu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Qo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Qo(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yd(this)}function md(e){Ec.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gd(){Ic.call(this),this.status=1}function yd(e){this.g=e}function vd(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bd(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function xd(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}(Co=Pu.prototype).Oa=function(e){this.M=e},Co.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nc.g(),this.C=this.u?xc(this.u):xc(Nc),this.g.onreadystatechange=Uo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void Mu(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=Do.FormData&&e instanceof Do.FormData,!(0<=qo(Lu,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Bu(this),0<this.B&&((this.L=function(e){return tl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Uo(this.ua,this)):this.A=Zl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Mu(this,i)}},Co.ua=function(){"undefined"!=typeof Ao&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fl(this,"timeout"),this.abort(8))},Co.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Fl(this,"complete"),Fl(this,"abort"),Vu(this))},Co.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vu(this,!0)),Pu.$.N.call(this)},Co.La=function(){this.s||(this.G||this.v||this.l?Uu(this):this.kb())},Co.kb=function(){Uu(this)},Co.isActive=function(){return!!this.g},Co.da=function(){try{return 2<zu(this)?this.g.status:-1}catch(wu){return-1}},Co.ja=function(){try{return this.g?this.g.responseText:""}catch(wu){return""}},Co.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Du(t)}},Co.Ia=function(){return this.m},Co.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Co=Wu.prototype).ra=8,Co.H=1,Co.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Tc(this,this.l,e);let i=this.s;if(this.U&&(i?(i=bl(i),wl(i,this.U)):i=this.U),null!==this.o||this.O||(s.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ed(this,s,t),$c(n=Gc(this.I),"RID",e),$c(n,"CVER",22),this.F&&$c(n,"X-HTTP-Session-Id",this.F),Zu(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ku(i)))+"&"+t:this.o&&Hu(n,this.o,i)),vu(this.i,s),this.bb&&$c(n,"TYPE","init"),this.P?($c(n,"$req",t),$c(n,"SID","null"),s.aa=!0,Dc(s,n,null)):Dc(s,n,t),this.H=2}}else 3==this.H&&(e?Ju(this,e):0==this.j.length||mu(this.i)||Ju(this))},Co.Ma=function(){if(this.u=null,sd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=gc(Uo(this.jb,this),e)}},Co.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,pc(10),Xu(this),sd(this))},Co.ib=function(){null!=this.v&&(this.v=null,Xu(this),nd(this),pc(19))},Co.pb=function(e){e?(this.l.info("Successfully pinged google.com"),pc(2)):(this.l.info("Failed to ping google.com"),pc(1))},Co.isActive=function(){return!!this.h&&this.h.isActive(this)},(Co=hd.prototype).Ba=function(){},Co.Aa=function(){},Co.za=function(){},Co.ya=function(){},Co.isActive=function(){return!0},Co.Va=function(){},fd.prototype.g=function(e,t){return new pd(e,t)},Bo(pd,Ml),pd.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;pc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ud(e,null,e.Y),Yu(e)},pd.prototype.close=function(){Qu(this.g)},pd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Vl(e),e=n);t.j.push(new hu(t.fb++,e)),3==t.H&&Yu(t)},pd.prototype.N=function(){this.g.h=null,delete this.j,Qu(this.g),delete this.g,pd.$.N.call(this)},Bo(md,Ec),Bo(gd,Ic),Bo(yd,hd),yd.prototype.Ba=function(){Fl(this.g,"a")},yd.prototype.Aa=function(e){Fl(this.g,new md(e))},yd.prototype.za=function(e){Fl(this.g,new gd)},yd.prototype.ya=function(){Fl(this.g,"b")},Bo(vd,function(){this.blockSize=-1}),vd.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vd.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(0==s)for(;i<=n;)bd(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){bd(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){bd(this,r),s=0;break}}this.h=s,this.i+=t},vd.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var wd={};function Nd(e){return-128<=e&&128>e?function(e,t){var n=wd;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new xd([0|e],0>e?-1:0)}):new xd([0|e],0>e?-1:0)}function Sd(e){if(isNaN(e)||!isFinite(e))return Id;if(0>e)return jd(Sd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ed;return new xd(t,0)}var Ed=4294967296,Id=Nd(0),kd=Nd(1),Td=Nd(16777216);function Cd(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function _d(e){return-1==e.h}function jd(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new xd(n,~e.h).add(kd)}function Ad(e,t){return e.add(jd(t))}function Dd(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Pd(e,t){this.g=e,this.h=t}function Rd(e,t){if(Cd(t))throw Error("division by zero");if(Cd(e))return new Pd(Id,Id);if(_d(e))return t=Rd(jd(e),t),new Pd(jd(t.g),jd(t.h));if(_d(t))return t=Rd(e,jd(t)),new Pd(jd(t.g),t.h);if(30<e.g.length){if(_d(e)||_d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=kd,r=t;0>=r.X(e);)n=Od(n),r=Od(r);var s=Ld(n,1),i=Ld(r,1);for(r=Ld(r,2),n=Ld(n,2);!Cd(r);){var a=i.add(r);0>=a.X(e)&&(s=s.add(n),i=a),r=Ld(r,1),n=Ld(n,1)}return t=Ad(e,s.R(t)),new Pd(s,t)}for(s=Id;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=Sd(n)).R(t);_d(a)||0<a.X(e);)a=(i=Sd(n-=r)).R(t);Cd(i)&&(i=kd),s=s.add(i),e=Ad(e,a)}return new Pd(s,e)}function Od(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new xd(n,e.h)}function Ld(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new xd(s,e.h)}(Co=xd.prototype).ea=function(){if(_d(this))return-jd(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ed+r)*t,t*=Ed}return e},Co.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Cd(this))return"0";if(_d(this))return"-"+jd(this).toString(e);for(var t=Sd(Math.pow(e,6)),n=this,r="";;){var s=Rd(n,t).g,i=((0<(n=Ad(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Cd(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},Co.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Co.X=function(e){return _d(e=Ad(this,e))?-1:Cd(e)?0:1},Co.abs=function(){return _d(this)?jd(this):this},Co.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(65535&this.D(s))+(65535&e.D(s)),a=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=a>>>16,i&=65535,a&=65535,n[s]=a<<16|i}return new xd(n,-2147483648&n[n.length-1]?-1:0)},Co.R=function(e){if(Cd(this)||Cd(e))return Id;if(_d(this))return _d(e)?jd(this).R(jd(e)):jd(jd(this).R(e));if(_d(e))return jd(this.R(jd(e)));if(0>this.X(Td)&&0>e.X(Td))return Sd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,a=65535&this.D(r),o=e.D(s)>>>16,l=65535&e.D(s);n[2*r+2*s]+=a*l,Dd(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Dd(n,2*r+2*s+1),n[2*r+2*s+1]+=a*o,Dd(n,2*r+2*s+1),n[2*r+2*s+2]+=i*o,Dd(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new xd(n,0)},Co.gb=function(e){return Rd(this,e).h},Co.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new xd(n,this.h&e.h)},Co.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new xd(n,this.h|e.h)},Co.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new xd(n,this.h^e.h)},fd.prototype.createWebChannel=fd.prototype.g,pd.prototype.send=pd.prototype.u,pd.prototype.open=pd.prototype.m,pd.prototype.close=pd.prototype.close,yc.NO_ERROR=0,yc.TIMEOUT=8,yc.HTTP_ERROR=6,vc.COMPLETE="complete",wc.EventType=Sc,Sc.OPEN="a",Sc.CLOSE="b",Sc.ERROR="c",Sc.MESSAGE="d",Ml.prototype.listen=Ml.prototype.O,Pu.prototype.listenOnce=Pu.prototype.P,Pu.prototype.getLastError=Pu.prototype.Sa,Pu.prototype.getLastErrorCode=Pu.prototype.Ia,Pu.prototype.getStatus=Pu.prototype.da,Pu.prototype.getResponseJson=Pu.prototype.Wa,Pu.prototype.getResponseText=Pu.prototype.ja,Pu.prototype.send=Pu.prototype.ha,Pu.prototype.setWithCredentials=Pu.prototype.Oa,vd.prototype.digest=vd.prototype.l,vd.prototype.reset=vd.prototype.reset,vd.prototype.update=vd.prototype.j,xd.prototype.add=xd.prototype.add,xd.prototype.multiply=xd.prototype.R,xd.prototype.modulo=xd.prototype.gb,xd.prototype.compare=xd.prototype.X,xd.prototype.toNumber=xd.prototype.ea,xd.prototype.toString=xd.prototype.toString,xd.prototype.getBits=xd.prototype.D,xd.fromNumber=Sd,xd.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return jd(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Sd(Math.pow(n,8)),s=Id,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=Sd(Math.pow(n,a)),s=s.R(a).add(Sd(o))):s=(s=s.R(r)).add(Sd(o))}return s};var Md=jo.createWebChannelTransport=function(){return new fd},Fd=jo.getStatEventTarget=function(){return uc()},Ud=jo.ErrorCode=yc,Vd=jo.EventType=vc,Bd=jo.Event=lc,zd=jo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qd=jo.FetchXmlHttpFactory=ku,Kd=jo.WebChannel=wc,Hd=jo.XhrIo=Pu,Gd=jo.Md5=vd,Wd=jo.Integer=xd;const Qd="@firebase/firestore";class Xd{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xd.UNAUTHENTICATED=new Xd(null),Xd.GOOGLE_CREDENTIALS=new Xd("google-credentials-uid"),Xd.FIRST_PARTY=new Xd("first-party-uid"),Xd.MOCK_USER=new Xd("mock-user");let $d="9.23.0";const Yd=new St("@firebase/firestore");function Jd(){return Yd.logLevel}function Zd(e){if(Yd.logLevel<=vt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(nh);Yd.debug("Firestore (".concat($d,"): ").concat(e),...s)}}function eh(e){if(Yd.logLevel<=vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(nh);Yd.error("Firestore (".concat($d,"): ").concat(e),...s)}}function th(e){if(Yd.logLevel<=vt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(nh);Yd.warn("Firestore (".concat($d,"): ").concat(e),...s)}}function nh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat($d,") INTERNAL ASSERTION FAILED: ")+e;throw eh(t),new Error(t)}function sh(e,t){e||rh()}function ih(e,t){return e}const ah={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oh extends tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class lh{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ch{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class uh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xd.UNAUTHENTICATED))}shutdown(){}}class dh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hh{constructor(e){this.t=e,this.currentUser=Xd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new lh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lh,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Zd("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Zd("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lh)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Zd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(sh("string"==typeof t.accessToken),new ch(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sh(null===e||"string"==typeof e),new Xd(e)}}class fh{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Xd.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ph{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new fh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xd.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gh{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Zd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Zd("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Zd("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Zd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(sh("string"==typeof e.token),this.T=e.token,new mh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class vh{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=yh(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function bh(e,t){return e<t?-1:e>t?1:0}function xh(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function wh(e){return e+"\0"}class Nh{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oh(ah.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oh(ah.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new oh(ah.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oh(ah.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nh.fromMillis(Date.now())}static fromDate(e){return Nh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Nh(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bh(this.nanoseconds,e.nanoseconds):bh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sh(e)}static min(){return new Sh(new Nh(0,0))}static max(){return new Sh(new Nh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Eh{constructor(e,t,n){void 0===t?t=0:t>e.length&&rh(),void 0===n?n=e.length-t:n>e.length-t&&rh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Eh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Eh?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ih extends Eh{construct(e,t,n){return new Ih(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new oh(ah.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Ih(e)}static emptyPath(){return new Ih([])}}const kh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Th extends Eh{construct(e,t,n){return new Th(e,t,n)}static isValidIdentifier(e){return kh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Th.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Th(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new oh(ah.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new oh(ah.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new oh(ah.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new oh(ah.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Th(t)}static emptyPath(){return new Th([])}}class Ch{constructor(e){this.path=e}static fromPath(e){return new Ch(Ih.fromString(e))}static fromName(e){return new Ch(Ih.fromString(e).popFirst(5))}static empty(){return new Ch(Ih.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ih.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ih.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ch(new Ih(e.slice()))}}class _h{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function jh(e){return e.fields.find(e=>2===e.kind)}function Ah(e){return e.fields.filter(e=>2!==e.kind)}_h.UNKNOWN_ID=-1;class Dh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ph(0,Lh.min())}}function Rh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Sh.fromTimestamp(1e9===r?new Nh(n+1,0):new Nh(n,r));return new Lh(s,Ch.empty(),t)}function Oh(e){return new Lh(e.readTime,e.key,-1)}class Lh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Lh(Sh.min(),Ch.empty(),-1)}static max(){return new Lh(Sh.max(),Ch.empty(),-1)}}function Mh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ch.comparator(e.documentKey,t.documentKey),0!==n?n:bh(e.largestBatchId,t.largestBatchId))}const Fh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Vh(e){if(e.code!==ah.FAILED_PRECONDITION||e.message!==Fh)throw e;Zd("LocalStore","Unexpectedly lost primary lease")}class Bh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bh((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bh?t:Bh.resolve(t)}catch(e){return Bh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bh.reject(t)}static resolve(e){return new Bh((t,n)=>{t(e)})}static reject(e){return new Bh((t,n)=>{n(e)})}static waitFor(e){return new Bh((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Bh.resolve(!1);for(const n of e)t=t.next(e=>e?Bh.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Bh((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Bh((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}class zh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new lh,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Hh(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=$h(t.target.error);this.v.reject(new Hh(e,n))}}static open(e,t,n,r){try{return new zh(t,e.transaction(r,n))}catch(e){throw new Hh(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Zd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Wh(t)}}class qh{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===qh.S($e())&&eh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Zd("SimpleDb","Removing database:",e),Qh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ze())return!1;if(qh.C())return!0;const e=$e(),t=qh.S(e),n=0<t&&t<10,r=qh.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/goal.kashmir",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(Zd("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Hh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new oh(ah.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new oh(ah.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Hh(e,r))},r.onupgradeneeded=e=>{Zd("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next(()=>{Zd("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.$(e);const t=zh.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.P(),e)).catch(e=>(t.abort(e),Bh.reject(e))).toPromise();return i.catch(()=>{}),await t.R,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(Zd("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Kh{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Qh(this.L.delete())}}class Hh extends oh{constructor(e,t){super(ah.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Gh(e){return"IndexedDbTransactionError"===e.name}class Wh{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Zd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Zd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Qh(n)}add(e){return Zd("SimpleDb","ADD",this.store.name,e,e),Qh(this.store.add(e))}get(e){return Qh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Zd("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Zd("SimpleDb","DELETE",this.store.name,e),Qh(this.store.delete(e))}count(){return Zd("SimpleDb","COUNT",this.store.name),Qh(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new Bh((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Bh((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}J(e,t){Zd("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new Bh((n,r)=>{t.onerror=e=>{const t=$h(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new Bh((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new Kh(s),a=t(s.primaryKey,s.value,i);if(a instanceof Bh){const e=a.catch(e=>(i.done(),Bh.reject(e)));n.push(e)}i.isDone?r():null===i.K?s.continue():s.continue(i.K)}}).next(()=>Bh.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qh(e){return new Bh((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=$h(e.target.error);n(t)}})}let Xh=!1;function $h(e){const t=qh.S($e());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new oh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Xh||(Xh=!0,setTimeout(()=>{throw e},0)),e}}return e}class Yh{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){Zd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Zd("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){Gh(e)?Zd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Vh(e)}await this.et(6e4)})}}class Jh{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.st(t,e))}st(e,t){const n=new Set;let r=t,s=!0;return Bh.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return Zd("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.rt(r,n)).next(n=>(Zd("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}rt(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Oh(t);Mh(r,n)>0&&(n=r)}),new Lh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function ef(e){return null==e}function tf(e){return 0===e&&1/e==-1/0}function nf(e){return"number"==typeof e&&Number.isInteger(e)&&!tf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function rf(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=af(t)),t=sf(e.get(n),t);return af(t)}function sf(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function af(e){return e+"\x01\x01"}function of(e){const t=e.length;if(sh(t>=2),2===t)return sh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ih.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&rh(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:rh()}i=t+2}return new Ih(r)}Zh.ct=-1;const lf=["userId","batchId"];function cf(e,t){return[e,rf(t)]}function uf(e,t,n){return[e,rf(t),n]}const df={},hf=["prefixPath","collectionGroup","readTime","documentId"],ff=["prefixPath","collectionGroup","documentId"],pf=["collectionGroup","readTime","prefixPath","documentId"],mf=["canonicalId","targetId"],gf=["targetId","path"],yf=["path","targetId"],vf=["collectionId","parent"],bf=["indexId","uid"],xf=["uid","sequenceNumber"],wf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nf=["indexId","uid","orderedDocumentKey"],Sf=["userId","collectionPath","documentId"],Ef=["userId","collectionPath","largestBatchId"],If=["userId","collectionGroup","largestBatchId"],kf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tf=[...kf,"documentOverlays"],Cf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_f=Cf,jf=[..._f,"indexConfiguration","indexState","indexEntries"];class Af extends Uh{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Df(e,t){const n=ih(e);return qh.M(n.ht,t)}function Pf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Of(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Lf{constructor(e,t){this.comparator=e,this.root=t||Ff.EMPTY}insert(e,t){return new Lf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ff.BLACK,null,null))}remove(e){return new Lf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ff.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mf(this.root,e,this.comparator,!0)}}class Mf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ff{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ff.RED,this.left=null!=r?r:Ff.EMPTY,this.right=null!=s?s:Ff.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ff(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ff.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ff.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ff.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ff.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rh();if(this.right.isRed())throw rh();const e=this.left.check();if(e!==this.right.check())throw rh();return e+(this.isRed()?0:1)}}Ff.EMPTY=null,Ff.RED=!0,Ff.BLACK=!1,Ff.EMPTY=new class{constructor(){this.size=0}get key(){throw rh()}get value(){throw rh()}get color(){throw rh()}get left(){throw rh()}get right(){throw rh()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ff(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Uf{constructor(e){this.comparator=e,this.data=new Lf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vf(this.data.getIterator())}getIteratorFrom(e){return new Vf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Uf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Uf(this.comparator);return t.data=e,t}}class Vf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bf(e){return e.hasNext()?e.getNext():void 0}class zf{constructor(e){this.fields=e,e.sort(Th.comparator)}static empty(){return new zf([])}unionWith(e){let t=new Uf(Th.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new zf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xh(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class qf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qf("Invalid base64 string: "+e):e}}(e);return new Kf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Kf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kf.EMPTY_BYTE_STRING=new Kf("");const Hf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gf(e){if(sh(!!e),"string"==typeof e){let t=0;const n=Hf.exec(e);if(sh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Wf(e.seconds),nanos:Wf(e.nanos)}}function Wf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qf(e){return"string"==typeof e?Kf.fromBase64String(e):Kf.fromUint8Array(e)}function Xf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $f(e){const t=e.mapValue.fields.__previous_value__;return Xf(t)?$f(t):t}function Yf(e){const t=Gf(e.mapValue.fields.__local_write_time__.timestampValue);return new Nh(t.seconds,t.nanos)}class Jf{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Zf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zf&&e.projectId===this.projectId&&e.database===this.database}}const ep={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tp={nullValue:"NULL_VALUE"};function np(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xf(e)?4:gp(e)?9007199254740991:10:rh()}function rp(e,t){if(e===t)return!0;const n=np(e);if(n!==np(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Yf(e).isEqual(Yf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Gf(e.timestampValue),r=Gf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qf(e.bytesValue).isEqual(Qf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wf(e.geoPointValue.latitude)===Wf(t.geoPointValue.latitude)&&Wf(e.geoPointValue.longitude)===Wf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wf(e.integerValue)===Wf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Wf(e.doubleValue),r=Wf(t.doubleValue);return n===r?tf(n)===tf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xh(e.arrayValue.values||[],t.arrayValue.values||[],rp);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Pf(n)!==Pf(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!rp(n[s],r[s])))return!1;return!0}(e,t);default:return rh()}}function sp(e,t){return void 0!==(e.values||[]).find(e=>rp(e,t))}function ip(e,t){if(e===t)return 0;const n=np(e),r=np(t);if(n!==r)return bh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Wf(e.integerValue||e.doubleValue),r=Wf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ap(e.timestampValue,t.timestampValue);case 4:return ap(Yf(e),Yf(t));case 5:return bh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Qf(e),r=Qf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=bh(n[s],r[s]);if(0!==e)return e}return bh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=bh(Wf(e.latitude),Wf(t.latitude));return 0!==n?n:bh(Wf(e.longitude),Wf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=ip(n[s],r[s]);if(e)return e}return bh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ep.mapValue&&t===ep.mapValue)return 0;if(e===ep.mapValue)return 1;if(t===ep.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=bh(r[a],i[a]);if(0!==e)return e;const t=ip(n[r[a]],s[i[a]]);if(0!==t)return t}return bh(r.length,i.length)}(e.mapValue,t.mapValue);default:throw rh()}}function ap(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bh(e,t);const n=Gf(e),r=Gf(t),s=bh(n.seconds,r.seconds);return 0!==s?s:bh(n.nanos,r.nanos)}function op(e){return lp(e)}function lp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Gf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qf(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ch.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=lp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(lp(e.fields[s]));return n+"}"}(e.mapValue):rh();var t,n}function cp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function up(e){return!!e&&"integerValue"in e}function dp(e){return!!e&&"arrayValue"in e}function hp(e){return!!e&&"nullValue"in e}function fp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pp(e){return!!e&&"mapValue"in e}function mp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Rf(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=mp(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function gp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yp(e){return"nullValue"in e?tp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cp(Zf.empty(),Ch.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:rh()}function vp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cp(Zf.empty(),Ch.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ep:rh()}function bp(e,t){const n=ip(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function xp(e,t){const n=ip(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class wp{constructor(e){this.value=e}static empty(){return new wp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!pp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mp(t)}setAll(e){let t=Th.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=mp(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());pp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];pp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Rf(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new wp(mp(this.value))}}function Np(e){const t=[];return Rf(e.fields,(e,n)=>{const r=new Th([e]);if(pp(n)){const e=Np(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new zf(t)}class Sp{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Sp(e,0,Sh.min(),Sh.min(),Sh.min(),wp.empty(),0)}static newFoundDocument(e,t,n,r){return new Sp(e,1,t,Sh.min(),n,r,0)}static newNoDocument(e,t){return new Sp(e,2,t,Sh.min(),Sh.min(),wp.empty(),0)}static newUnknownDocument(e,t){return new Sp(e,3,t,Sh.min(),Sh.min(),wp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Sh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ep{constructor(e,t){this.position=e,this.inclusive=t}}function Ip(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ch.comparator(Ch.fromName(a.referenceValue),n.key):ip(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function kp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rp(e.position[n],t.position[n]))return!1;return!0}class Tp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Cp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _p{}class jp extends _p{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Vp(e,t,n):"array-contains"===t?new Kp(e,n):"in"===t?new Hp(e,n):"not-in"===t?new Gp(e,n):"array-contains-any"===t?new Wp(e,n):new jp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Bp(e,n):new zp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ip(t,this.value)):null!==t&&np(this.value)===np(t)&&this.matchesComparison(ip(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rh()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ap extends _p{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ap(e,t)}matches(e){return Dp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Dp(e){return"and"===e.op}function Pp(e){return"or"===e.op}function Rp(e){return Op(e)&&Dp(e)}function Op(e){for(const t of e.filters)if(t instanceof Ap)return!1;return!0}function Lp(e){if(e instanceof jp)return e.field.canonicalString()+e.op.toString()+op(e.value);if(Rp(e))return e.filters.map(e=>Lp(e)).join(",");{const t=e.filters.map(e=>Lp(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Mp(e,t){return e instanceof jp?function(e,t){return t instanceof jp&&e.op===t.op&&e.field.isEqual(t.field)&&rp(e.value,t.value)}(e,t):e instanceof Ap?function(e,t){return t instanceof Ap&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Mp(n,t.filters[r]),!0)}(e,t):void rh()}function Fp(e,t){const n=e.filters.concat(t);return Ap.create(n,e.op)}function Up(e){return e instanceof jp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(op(e.value))}(e):e instanceof Ap?function(e){return e.op.toString()+" {"+e.getFilters().map(Up).join(" ,")+"}"}(e):"Filter"}class Vp extends jp{constructor(e,t,n){super(e,t,n),this.key=Ch.fromName(n.referenceValue)}matches(e){const t=Ch.comparator(e.key,this.key);return this.matchesComparison(t)}}class Bp extends jp{constructor(e,t){super(e,"in",t),this.keys=qp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zp extends jp{constructor(e,t){super(e,"not-in",t),this.keys=qp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ch.fromName(e.referenceValue))}class Kp extends jp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dp(t)&&sp(t.arrayValue,this.value)}}class Hp extends jp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sp(this.value.arrayValue,t)}}class Gp extends jp{constructor(e,t){super(e,"not-in",t)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sp(this.value.arrayValue,t)}}class Wp extends jp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>sp(this.value.arrayValue,e))}}class Qp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.dt=null}}function Xp(e){return new Qp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $p(e){const t=ih(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Lp(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ef(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>op(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>op(e)).join(",")),t.dt=e}return t.dt}function Yp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Cp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kp(e.startAt,t.startAt)&&kp(e.endAt,t.endAt)}function Jp(e){return Ch.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zp(e,t){return e.filters.filter(e=>e instanceof jp&&e.field.isEqual(t))}function em(e,t,n){let r=tp,s=!0;for(const i of Zp(e,t)){let e=tp,t=!0;switch(i.op){case"<":case"<=":e=yp(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=tp}bp({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];bp({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function tm(e,t,n){let r=ep,s=!0;for(const i of Zp(e,t)){let e=ep,t=!0;switch(i.op){case">=":case">":e=vp(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=ep}xp({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];xp({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class nm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function rm(e,t,n,r,s,i,a,o){return new nm(e,t,n,r,s,i,a,o)}function sm(e){return new nm(e)}function im(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function am(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function om(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function lm(e){return null!==e.collectionGroup}function cm(e){const t=ih(e);if(null===t.wt){t.wt=[];const e=om(t),n=am(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Tp(e)),t.wt.push(new Tp(Th.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Tp(Th.keyField(),e))}}}return t.wt}function um(e){const t=ih(e);if(!t._t)if("F"===t.limitType)t._t=Xp(t.path,t.collectionGroup,cm(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of cm(t)){const t="desc"===s.dir?"asc":"desc";e.push(new Tp(s.field,t))}const n=t.endAt?new Ep(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ep(t.startAt.position,t.startAt.inclusive):null;t._t=Xp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function dm(e,t,n){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hm(e,t){return Yp(um(e),um(t))&&e.limitType===t.limitType}function fm(e){return"".concat($p(um(e)),"|lt:").concat(e.limitType)}function pm(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Up(e)).join(", "),"]")),ef(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>op(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>op(e)).join(",")),"Target(".concat(t,")")}(um(e)),"; limitType=").concat(e.limitType,")")}function mm(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ch.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of cm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ip(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cm(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ip(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cm(e),t))}(e,t)}function gm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ym(e){return(t,n)=>{let r=!1;for(const s of cm(e)){const e=vm(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function vm(e,t,n){const r=e.field.isKeyField()?Ch.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ip(r,s):rh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rh()}}class bm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rf(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Of(this.inner)}size(){return this.innerSize}}const xm=new Lf(Ch.comparator);function wm(){return xm}const Nm=new Lf(Ch.comparator);function Sm(){let e=Nm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Em(e){let t=Nm;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Im(){return Tm()}function km(){return Tm()}function Tm(){return new bm(e=>e.toString(),(e,t)=>e.isEqual(t))}const Cm=new Lf(Ch.comparator),_m=new Uf(Ch.comparator);function jm(){let e=_m;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Am=new Uf(bh);function Dm(){return Am}function Pm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(t)?"-0":t}}function Rm(e){return{integerValue:""+e}}function Om(e,t){return nf(t)?Rm(t):Pm(e,t)}class Lm{constructor(){this._=void 0}}function Mm(e,t,n){return e instanceof Vm?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xf(t)&&(t=$f(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Bm?zm(e,t):e instanceof qm?Km(e,t):function(e,t){const n=Um(e,t),r=Gm(n)+Gm(e.gt);return up(n)&&up(e.gt)?Rm(r):Pm(e.serializer,r)}(e,t)}function Fm(e,t,n){return e instanceof Bm?zm(e,t):e instanceof qm?Km(e,t):n}function Um(e,t){return e instanceof Hm?up(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Vm extends Lm{}class Bm extends Lm{constructor(e){super(),this.elements=e}}function zm(e,t){const n=Wm(t);for(const r of e.elements)n.some(e=>rp(e,r))||n.push(r);return{arrayValue:{values:n}}}class qm extends Lm{constructor(e){super(),this.elements=e}}function Km(e,t){let n=Wm(t);for(const r of e.elements)n=n.filter(e=>!rp(e,r));return{arrayValue:{values:n}}}class Hm extends Lm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Gm(e){return Wf(e.integerValue||e.doubleValue)}function Wm(e){return dp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Qm{constructor(e,t){this.field=e,this.transform=t}}class Xm{constructor(e,t){this.version=e,this.transformResults=t}}class $m{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $m}static exists(e){return new $m(void 0,e)}static updateTime(e){return new $m(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ym(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Jm{}function Zm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new cg(e.key,$m.none()):new sg(e.key,e.data,$m.none());{const n=e.data,r=wp.empty();let s=new Uf(Th.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ig(e.key,r,new zf(s.toArray()),$m.none())}}function eg(e,t,n){e instanceof sg?function(e,t,n){const r=e.value.clone(),s=og(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ig?function(e,t,n){if(!Ym(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=og(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(ag(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function tg(e,t,n,r){return e instanceof sg?function(e,t,n,r){if(!Ym(e.precondition,t))return n;const s=e.value.clone(),i=lg(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ig?function(e,t,n,r){if(!Ym(e.precondition,t))return n;const s=lg(e.fieldTransforms,r,t),i=t.data;return i.setAll(ag(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ym(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ng(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Um(r.transform,e||null);null!=s&&(null===n&&(n=wp.empty()),n.set(r.field,s))}return n||null}function rg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xh(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Bm&&t instanceof Bm||e instanceof qm&&t instanceof qm?xh(e.elements,t.elements,rp):e instanceof Hm&&t instanceof Hm?rp(e.gt,t.gt):e instanceof Vm&&t instanceof Vm}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sg extends Jm{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ig extends Jm{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ag(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function og(e,t,n){const r=new Map;sh(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Fm(a,o,n[s]))}return r}function lg(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Mm(e,i,t))}return r}class cg extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ug extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&eg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=tg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=tg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=km();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Zm(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Sh.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jm())}isEqual(e){return this.batchId===e.batchId&&xh(this.mutations,e.mutations,(e,t)=>rg(e,t))&&xh(this.baseMutations,e.baseMutations,(e,t)=>rg(e,t))}}class hg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){sh(e.mutations.length===n.length);let r=Cm;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new hg(e,t,n,r)}}class fg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class pg{constructor(e,t){this.count=e,this.unchangedNames=t}}var mg,gg;function yg(e){switch(e){default:return rh();case ah.CANCELLED:case ah.UNKNOWN:case ah.DEADLINE_EXCEEDED:case ah.RESOURCE_EXHAUSTED:case ah.INTERNAL:case ah.UNAVAILABLE:case ah.UNAUTHENTICATED:return!1;case ah.INVALID_ARGUMENT:case ah.NOT_FOUND:case ah.ALREADY_EXISTS:case ah.PERMISSION_DENIED:case ah.FAILED_PRECONDITION:case ah.ABORTED:case ah.OUT_OF_RANGE:case ah.UNIMPLEMENTED:case ah.DATA_LOSS:return!0}}function vg(e){if(void 0===e)return eh("GRPC error has no .code"),ah.UNKNOWN;switch(e){case mg.OK:return ah.OK;case mg.CANCELLED:return ah.CANCELLED;case mg.UNKNOWN:return ah.UNKNOWN;case mg.DEADLINE_EXCEEDED:return ah.DEADLINE_EXCEEDED;case mg.RESOURCE_EXHAUSTED:return ah.RESOURCE_EXHAUSTED;case mg.INTERNAL:return ah.INTERNAL;case mg.UNAVAILABLE:return ah.UNAVAILABLE;case mg.UNAUTHENTICATED:return ah.UNAUTHENTICATED;case mg.INVALID_ARGUMENT:return ah.INVALID_ARGUMENT;case mg.NOT_FOUND:return ah.NOT_FOUND;case mg.ALREADY_EXISTS:return ah.ALREADY_EXISTS;case mg.PERMISSION_DENIED:return ah.PERMISSION_DENIED;case mg.FAILED_PRECONDITION:return ah.FAILED_PRECONDITION;case mg.ABORTED:return ah.ABORTED;case mg.OUT_OF_RANGE:return ah.OUT_OF_RANGE;case mg.UNIMPLEMENTED:return ah.UNIMPLEMENTED;case mg.DATA_LOSS:return ah.DATA_LOSS;default:return rh()}}(gg=mg||(mg={}))[gg.OK=0]="OK",gg[gg.CANCELLED=1]="CANCELLED",gg[gg.UNKNOWN=2]="UNKNOWN",gg[gg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gg[gg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gg[gg.NOT_FOUND=5]="NOT_FOUND",gg[gg.ALREADY_EXISTS=6]="ALREADY_EXISTS",gg[gg.PERMISSION_DENIED=7]="PERMISSION_DENIED",gg[gg.UNAUTHENTICATED=16]="UNAUTHENTICATED",gg[gg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gg[gg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gg[gg.ABORTED=10]="ABORTED",gg[gg.OUT_OF_RANGE=11]="OUT_OF_RANGE",gg[gg.UNIMPLEMENTED=12]="UNIMPLEMENTED",gg[gg.INTERNAL=13]="INTERNAL",gg[gg.UNAVAILABLE=14]="UNAVAILABLE",gg[gg.DATA_LOSS=15]="DATA_LOSS";class bg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xg}static getOrCreateInstance(){return null===xg&&(xg=new bg),xg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xg=null;function wg(){return new TextEncoder}const Ng=new Wd([4294967295,4294967295],0);function Sg(e){const t=wg().encode(e),n=new Gd;return n.update(t),new Uint8Array(n.digest())}function Eg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Wd([n,r],0),new Wd([s,i],0)]}class Ig{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new kg("Invalid padding: ".concat(t));if(n<0)throw new kg("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new kg("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new kg("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Wd.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Wd.fromNumber(n)));return 1===r.compare(Ng)&&(r=new Wd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Sg(e),[n,r]=Eg(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Ig(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Sg(e),[n,r]=Eg(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class kg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tg{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Cg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Tg(Sh.min(),r,new Lf(bh),wm(),jm())}}class Cg{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Cg(n,t,jm(),jm(),jm())}}class _g{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class jg{constructor(e,t){this.targetId=e,this.Vt=t}}class Ag{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Dg{constructor(){this.St=0,this.Dt=Og(),this.Ct=Kf.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=jm(),t=jm(),n=jm();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rh()}}),new Cg(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Og()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Pg{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=wm(),this.zt=Rg(),this.Wt=new Lf(bh)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:rh()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const i=s.target;if(Jp(i))if(0===r){const e=new Ch(i.path);this.Yt(n,e,Sp.newNoDocument(e,Sh.min()))}else sh(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=bg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,i,a,o,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(i=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===i?void 0:i.length)&&void 0!==a?a:0,padding:null!==(l=null===(o=null==u?void 0:u.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=Qf(s).toUint8Array()}catch(e){if(e instanceof qf)return th("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Ig(o,i,a)}catch(e){return th(e instanceof kg?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const s=this.Gt.ue(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());t.vt(i)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const s=this.se(r);if(s){if(n.current&&Jp(s.target)){const t=new Ch(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Sp.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=jm();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Tg(e,t,this.Wt,this.jt,n);return this.jt=wm(),this.zt=Rg(),this.Wt=new Lf(bh),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Dg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Uf(bh),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Zd("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Dg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Rg(){return new Lf(Ch.comparator)}function Og(){return new Lf(Ch.comparator)}const Lg={asc:"ASCENDING",desc:"DESCENDING"},Mg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fg={and:"AND",or:"OR"};class Ug{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vg(e,t){return e.useProto3Json||ef(t)?t:{value:t}}function Bg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function zg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qg(e,t){return Bg(e,t.toTimestamp())}function Kg(e){return sh(!!e),Sh.fromTimestamp(function(e){const t=Gf(e);return new Nh(t.seconds,t.nanos)}(e))}function Hg(e,t){return function(e){return new Ih(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Gg(e){const t=Ih.fromString(e);return sh(py(t)),t}function Wg(e,t){return Hg(e.databaseId,t.path)}function Qg(e,t){const n=Gg(t);if(n.get(1)!==e.databaseId.projectId)throw new oh(ah.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new oh(ah.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ch(Jg(n))}function Xg(e,t){return Hg(e.databaseId,t)}function $g(e){const t=Gg(e);return 4===t.length?Ih.emptyPath():Jg(t)}function Yg(e){return new Ih(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jg(e){return sh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Zg(e,t,n){return{name:Wg(e,t),fields:n.value.mapValue.fields}}function ey(e,t,n){const r=Qg(e,t.name),s=Kg(t.updateTime),i=t.createTime?Kg(t.createTime):Sh.min(),a=new wp({mapValue:{fields:t.fields}}),o=Sp.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ty(e,t){let n;if(t instanceof sg)n={update:Zg(e,t.key,t.value)};else if(t instanceof cg)n={delete:Wg(e,t.key)};else if(t instanceof ig)n={update:Zg(e,t.key,t.data),updateMask:fy(t.fieldMask)};else{if(!(t instanceof ug))return rh();n={verify:Wg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Vm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hm)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw rh()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:rh()}(e,t.precondition)),n}function ny(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?$m.updateTime(Kg(e.updateTime)):void 0!==e.exists?$m.exists(e.exists):$m.none()}(t.currentDocument):$m.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)sh("REQUEST_TIME"===t.setToServerValue),n=new Vm;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Bm(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new qm(e)}else"increment"in t?n=new Hm(e,t.increment):rh();const r=Th.fromServerFormat(t.fieldPath);return new Qm(r,n)}(e,t)):[];if(t.update){t.update.name;const s=Qg(e,t.update.name),i=new wp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new zf(t.map(e=>Th.fromServerFormat(e)))}(t.updateMask);return new ig(s,i,e,n,r)}return new sg(s,i,n,r)}if(t.delete){const r=Qg(e,t.delete);return new cg(r,n)}if(t.verify){const r=Qg(e,t.verify);return new ug(r,n)}return rh()}function ry(e,t){return{documents:[Xg(e,t.path)]}}function sy(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Xg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Xg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return hy(Ap.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:uy(e.field),direction:oy(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const a=Vg(e,t.limit);var o;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function iy(e){let t=$g(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){sh(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=ay(e);return t instanceof Ap&&Rp(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>function(e){return new Tp(dy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ef(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ep(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ep(n,t)}(n.endAt)),rm(t,s,a,i,o,"F",l,c)}function ay(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dy(e.unaryFilter.field);return jp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dy(e.unaryFilter.field);return jp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dy(e.unaryFilter.field);return jp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dy(e.unaryFilter.field);return jp.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rh()}}(e):void 0!==e.fieldFilter?function(e){return jp.create(dy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rh()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ap.create(e.compositeFilter.filters.map(e=>ay(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return rh()}}(e.compositeFilter.op))}(e):rh()}function oy(e){return Lg[e]}function ly(e){return Mg[e]}function cy(e){return Fg[e]}function uy(e){return{fieldPath:e.canonicalString()}}function dy(e){return Th.fromServerFormat(e.fieldPath)}function hy(e){return e instanceof jp?function(e){if("=="===e.op){if(fp(e.value))return{unaryFilter:{field:uy(e.field),op:"IS_NAN"}};if(hp(e.value))return{unaryFilter:{field:uy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fp(e.value))return{unaryFilter:{field:uy(e.field),op:"IS_NOT_NAN"}};if(hp(e.value))return{unaryFilter:{field:uy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uy(e.field),op:ly(e.op),value:e.value}}}(e):e instanceof Ap?function(e){const t=e.getFilters().map(e=>hy(e));return 1===t.length?t[0]:{compositeFilter:{op:cy(e.op),filters:t}}}(e):rh()}function fy(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function py(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class my{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sh.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Sh.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kf.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new my(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new my(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new my(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new my(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gy{constructor(e){this.fe=e}}function yy(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Wg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Bg(e,t.version.toTimestamp()),createTime:Bg(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:by(t.version)};else{if(!t.isUnknownDocument())return rh();r.unknownDocument={path:n.path.toArray(),version:by(t.version)}}return r}function vy(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function by(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function xy(e){const t=new Nh(e.seconds,e.nanoseconds);return Sh.fromTimestamp(t)}function wy(e,t){const n=(t.baseMutations||[]).map(t=>ny(e.fe,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>ny(e.fe,t)),s=Nh.fromMillis(t.localWriteTimeMs);return new dg(t.batchId,s,n,r)}function Ny(e){const t=xy(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?xy(e.lastLimboFreeSnapshotVersion):Sh.min();let r;var s;return void 0!==e.query.documents?(sh(1===(s=e.query).documents.length),r=um(sm($g(s.documents[0])))):r=function(e){return um(iy(e))}(e.query),new my(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Kf.fromBase64String(e.resumeToken))}function Sy(e,t){const n=by(t.snapshotVersion),r=by(t.lastLimboFreeSnapshotVersion);let s;s=Jp(t.target)?ry(e.fe,t.target):sy(e.fe,t.target);const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$p(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ey(e){const t=iy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?dm(t,t.limit,"L"):t}function Iy(e,t){return new fg(t.largestBatchId,ny(e.fe,t.overlayMutation))}function ky(e,t){const n=t.path.lastSegment();return[e,rf(t.path.popLast()),n]}function Ty(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:by(r.readTime),documentKey:rf(r.documentKey.path),largestBatchId:r.largestBatchId}}class Cy{getBundleMetadata(e,t){return _y(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:xy(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return _y(e).put({bundleId:(n=t).id,createTime:by(Kg(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return jy(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Ey(t.bundledQuery),readTime:xy(t.readTime)};var t})}saveNamedQuery(e,t){return jy(e).put(function(e){return{name:e.name,readTime:by(Kg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function _y(e){return Df(e,"bundles")}function jy(e){return Df(e,"namedQueries")}class Ay{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new Ay(e,n)}getOverlay(e,t){return Dy(e).get(ky(this.userId,t)).next(e=>e?Iy(this.serializer,e):null)}getOverlays(e,t){const n=Im();return Bh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new fg(t,s);r.push(this.we(e,i))}),Bh.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(rf(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(Dy(e).J("collectionPathOverlayIndex",r))}),Bh.waitFor(s)}getOverlaysForCollection(e,t,n){const r=Im(),s=rf(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dy(e).j("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=Iy(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=Im();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dy(e).X({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{const a=Iy(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}we(e,t){return Dy(e).put(function(e,t,n){const[r,s,i]=ky(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ty(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Dy(e){return Df(e,"documentOverlays")}class Py{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Wf(e.integerValue));else if("doubleValue"in e){const n=Wf(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),tf(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Qf(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?gp(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rh()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Ch.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Ry(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Oy(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ry(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Py.Ve=new Py;class Ly{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Oy(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=Oy(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class My{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Fy{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Uy{constructor(){this.je=new Ly,this.ze=new My(this.je),this.We=new Fy(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Vy{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Vy(this.indexId,this.documentKey,this.arrayValue,n)}}function By(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=zy(e.arrayValue,t.arrayValue),0!==n?n:(n=zy(e.directionalValue,t.directionalValue),0!==n?n:Ch.comparator(e.documentKey,t.documentKey)))}function zy(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class qy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){sh(e.collectionGroup===this.collectionId);const t=jh(e);if(void 0!==t&&!this.en(t))return!1;const n=Ah(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.en(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[s];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[i++],e))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.Ye.length||!this.sn(this.Ye[i++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ky(e){var t,n;if(sh(e instanceof jp||e instanceof Ap),e instanceof jp){if(e instanceof Hp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>jp.create(e.field,"==",t)))||[];return Ap.create(r,"or")}return e}const r=e.filters.map(e=>Ky(e));return Ap.create(r,e.op)}function Hy(e){if(0===e.getFilters().length)return[];const t=Xy(Ky(e));return sh(Qy(t)),Gy(t)||Wy(t)?[t]:t.getFilters()}function Gy(e){return e instanceof jp}function Wy(e){return e instanceof Ap&&Rp(e)}function Qy(e){return Gy(e)||Wy(e)||function(e){if(e instanceof Ap&&Pp(e)){for(const t of e.getFilters())if(!Gy(t)&&!Wy(t))return!1;return!0}return!1}(e)}function Xy(e){if(sh(e instanceof jp||e instanceof Ap),e instanceof jp)return e;if(1===e.filters.length)return Xy(e.filters[0]);const t=e.filters.map(e=>Xy(e));let n=Ap.create(t,e.op);return n=Jy(n),Qy(n)?n:(sh(n instanceof Ap),sh(Dp(n)),sh(n.filters.length>1),n.filters.reduce((e,t)=>$y(e,t)))}function $y(e,t){let n;return sh(e instanceof jp||e instanceof Ap),sh(t instanceof jp||t instanceof Ap),n=e instanceof jp?t instanceof jp?function(e,t){return Ap.create([e,t],"and")}(e,t):Yy(e,t):t instanceof jp?Yy(t,e):function(e,t){if(sh(e.filters.length>0&&t.filters.length>0),Dp(e)&&Dp(t))return Fp(e,t.getFilters());const n=Pp(e)?e:t,r=Pp(e)?t:e,s=n.filters.map(e=>$y(e,r));return Ap.create(s,"or")}(e,t),Jy(n)}function Yy(e,t){if(Dp(t))return Fp(t,e.getFilters());{const n=t.filters.map(t=>$y(e,t));return Ap.create(n,"or")}}function Jy(e){if(sh(e instanceof jp||e instanceof Ap),e instanceof jp)return e;const t=e.getFilters();if(1===t.length)return Jy(t[0]);if(Op(e))return e;const n=t.map(e=>Jy(e)),r=[];return n.forEach(t=>{t instanceof jp?r.push(t):t instanceof Ap&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Ap.create(r,e.op)}class Zy{constructor(){this.rn=new ev}addToCollectionParentIndex(e,t){return this.rn.add(t),Bh.resolve()}getCollectionParents(e,t){return Bh.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Bh.resolve()}deleteFieldIndex(e,t){return Bh.resolve()}getDocumentsMatchingTarget(e,t){return Bh.resolve(null)}getIndexType(e,t){return Bh.resolve(0)}getFieldIndexes(e,t){return Bh.resolve([])}getNextCollectionGroupToUpdate(e){return Bh.resolve(null)}getMinOffset(e,t){return Bh.resolve(Lh.min())}getMinOffsetFromCollectionGroup(e,t){return Bh.resolve(Lh.min())}updateCollectionGroup(e,t,n){return Bh.resolve()}updateIndexEntries(e,t){return Bh.resolve()}}class ev{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Uf(Ih.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Uf(Ih.comparator)).toArray()}}const tv=new Uint8Array(0);class nv{constructor(e,t){this.user=e,this.databaseId=t,this.on=new ev,this.un=new bm(e=>$p(e),(e,t)=>Yp(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:n,parent:rf(r)};return rv(e).put(s)}return Bh.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[wh(t),""],!1,!0);return rv(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(of(r.parent))}return n})}addFieldIndex(e,t){const n=iv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=av(e);return s.next(e=>{n.put(Ty(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=iv(e),r=av(e),s=sv(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=sv(e);let r=!0;const s=new Map;return Bh.forEach(this.cn(t),t=>this.an(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=jm();const r=[];return Bh.forEach(s,(s,i)=>{var a;Zd("IndexedDbIndexManager","Using index ".concat((a=s,"id=".concat(a.indexId,"|cg=").concat(a.collectionGroup,"|f=").concat(a.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(",")))," to execute ").concat($p(t)));const o=function(e,t){const n=jh(t);if(void 0===n)return null;for(const r of Zp(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),l=function(e,t){const n=new Map;for(const r of Ah(t))for(const t of Zp(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of Ah(t)){const t=0===s.kind?em(e,s.fieldPath,e.startAt):tm(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ep(n,r)}(i,s),u=function(e,t){const n=[];let r=!0;for(const s of Ah(t)){const t=0===s.kind?tm(e,s.fieldPath,e.endAt):em(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ep(n,r)}(i,s),d=this.hn(s,i,c),h=this.hn(s,i,u),f=this.ln(s,i,l),p=this.fn(s.indexId,o,d,c.inclusive,h,u.inclusive,f);return Bh.forEach(p,s=>n.H(s,t.limit).next(t=>{t.forEach(t=>{const n=Ch.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Bh.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Hy(Ap.create(e.filters,"and")).map(t=>Xp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.dn(t[u/l]):tv,d=this.wn(e,o,n[u%l],r),h=this._n(e,o,s[u%l],i),f=a.map(t=>this.wn(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}wn(e,t,n,r){const s=new Vy(e,Ch.empty(),t,n);return r?s:s.Je()}_n(e,t,n,r){const s=new Vy(e,Ch.empty(),t,n);return r?s.Je():s}an(e,t){const n=new qy(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.cn(t);return Bh.forEach(r,t=>this.an(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Uf(Th.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}mn(e,t){const n=new Uy;for(const r of Ah(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.He(r.kind);Py.Ve._e(e,s)}return n.Qe()}dn(e){const t=new Uy;return Py.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new Uy;return Py.Ve._e(cp(this.databaseId,t),n.He(function(e){const t=Ah(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Uy);let s=0;for(const i of Ah(e)){const e=n[s++];for(const n of r)if(this.yn(t,i.fieldPath)&&dp(e))r=this.pn(r,i,e);else{const t=n.He(i.kind);Py.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new Uy;n.seed(e.Qe()),Py.Ve._e(i,n.He(t.kind)),s.push(n)}return s}yn(e,t){return!!e.filters.find(e=>e instanceof jp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=iv(e),r=av(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return Bh.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Ph(t.sequenceNumber,new Lh(xy(t.readTime),new Ch(of(t.documentKey)),t.largestBatchId)):Ph.empty(),r=e.fields.map(e=>{let[t,n]=e;return new Dh(Th.fromServerFormat(t),n)});return new _h(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:bh(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=iv(e),s=av(e);return this.Tn(e).next(e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>Bh.forEach(t,t=>s.put(Ty(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Bh.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?Bh.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),Bh.forEach(s,n=>this.En(e,t,n).next(t=>{const s=this.An(r,n);return t.isEqual(s)?Bh.resolve():this.vn(e,r,n,t,s)}))))})}Rn(e,t,n,r){return sv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return sv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=sv(e);let s=new Uf(By);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(e,r)=>{s=s.add(new Vy(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>s)}An(e,t){let n=new Uf(By);const r=this.mn(t,e);if(null==r)return n;const s=jh(t);if(null!=s){const i=e.data.field(s.fieldPath);if(dp(i))for(const s of i.arrayValue.values||[])n=n.add(new Vy(t.indexId,e.key,this.dn(s),r))}else n=n.add(new Vy(t.indexId,e.key,tv,r));return n}vn(e,t,n,r,s){Zd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=Bf(i),l=Bf(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=Bf(a)):t?(s(o),o=Bf(i)):(o=Bf(i),l=Bf(a))}}(r,s,By,r=>{i.push(this.Rn(e,t,n,r))},r=>{i.push(this.Pn(e,t,n,r))}),Bh.waitFor(i)}Tn(e){let t=1;return av(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>By(e,t)).filter((e,t,n)=>!t||0!==By(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=By(i,e),s=By(i,t);if(0===n)r[0]=e.Je();else if(n>0&&s<0)r.push(i),r.push(i.Je());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.bn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,tv,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,tv,[]];s.push(IDBKeyRange.bound(e,t))}return s}bn(e,t){return By(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ov)}getMinOffset(e,t){return Bh.mapArray(this.cn(t),t=>this.an(e,t).next(e=>e||rh())).next(ov)}}function rv(e){return Df(e,"collectionParents")}function sv(e){return Df(e,"indexEntries")}function iv(e){return Df(e,"indexConfiguration")}function av(e){return Df(e,"indexState")}function ov(e){sh(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Mh(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Lh(t.readTime,t.documentKey,n)}const lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new cv(e,cv.DEFAULT_COLLECTION_PERCENTILE,cv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uv(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.X({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{sh(1===o)}));const c=[];for(const u of n.mutations){const e=uf(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return Bh.waitFor(i).next(()=>c)}function dv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rh();t=e.noDocument}return JSON.stringify(t).length}cv.DEFAULT_COLLECTION_PERCENTILE=10,cv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cv.DEFAULT=new cv(41943040,cv.DEFAULT_COLLECTION_PERCENTILE,cv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cv.DISABLED=new cv(-1,0,0);class hv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){sh(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new hv(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pv(e).X({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=mv(e),i=pv(e);return i.add({}).next(a=>{sh("number"==typeof a);const o=new dg(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>ty(e.fe,t)),s=n.mutations.map(t=>ty(e.fe,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new Uf((e,t)=>bh(e.canonicalString(),t.canonicalString()));for(const e of r){const t=uf(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,df))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Vn[a]=o.keys()}),Bh.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return pv(e).get(t).next(e=>e?(sh(e.userId===this.userId),wy(this.serializer,e)):null)}Sn(e,t){return this.Vn[t]?Bh.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return pv(e).X({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(sh(t.batchId>=n),s=wy(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return pv(e).X({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pv(e).j("userMutationsIndex",t).next(e=>e.map(e=>wy(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=cf(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return mv(e).X({range:r},(n,r,i)=>{const[a,o,l]=n,c=of(o);if(a===this.userId&&t.path.isEqual(c))return pv(e).get(l).next(e=>{if(!e)throw rh();sh(e.userId===this.userId),s.push(wy(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Uf(bh);const r=[];return t.forEach(t=>{const s=cf(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=mv(e).X({range:i},(e,r,s)=>{const[i,a,o]=e,l=of(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),Bh.waitFor(r).next(()=>this.Dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=cf(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new Uf(bh);return mv(e).X({range:i},(e,t,s)=>{const[i,o,l]=e,c=of(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.Dn(e,a))}Dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(pv(e).get(t).next(e=>{if(null===e)throw rh();sh(e.userId===this.userId),n.push(wy(this.serializer,e))}))}),Bh.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return uv(e.ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Bh.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Bh.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return mv(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=of(e[1]);r.push(t)}else n.done()}).next(()=>{sh(0===r.length)})})}containsKey(e,t){return fv(e,this.userId,t)}xn(e){return gv(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fv(e,t,n){const r=cf(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return mv(e).X({range:i,Y:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function pv(e){return Df(e,"mutations")}function mv(e){return Df(e,"documentMutations")}function gv(e){return Df(e,"mutationQueues")}class yv{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new yv(0)}static Mn(){return new yv(-1)}}class vv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const n=new yv(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(e=>Sh.fromTimestamp(new Nh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bv(e).delete(t.targetId)).next(()=>this.$n(e)).next(t=>(sh(t.targetCount>0),t.targetCount-=1,this.On(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return bv(e).X((i,a)=>{const o=Ny(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>Bh.waitFor(s)).next(()=>r)}forEachTarget(e,t){return bv(e).X((e,n)=>{const r=Ny(n);t(r)})}$n(e){return xv(e).get("targetGlobalKey").next(e=>(sh(null!==e),e))}On(e,t){return xv(e).put("targetGlobalKey",t)}Fn(e,t){return bv(e).put(Sy(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next(e=>e.targetCount)}getTargetData(e,t){const n=$p(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return bv(e).X({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const i=Ny(n);Yp(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=wv(e);return t.forEach(t=>{const i=rf(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),Bh.waitFor(r)}removeMatchingKeys(e,t,n){const r=wv(e);return Bh.forEach(t,t=>{const s=rf(t.path);return Bh.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=wv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=wv(e);let s=jm();return r.X({range:n,Y:!0},(e,t,n)=>{const r=of(e[1]),i=new Ch(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=rf(t.path),r=IDBKeyRange.bound([n],[wh(n)],!1,!0);let s=0;return wv(e).X({index:"documentTargetsIndex",Y:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}le(e,t){return bv(e).get(t).next(e=>e?Ny(e):null)}}function bv(e){return Df(e,"targets")}function xv(e){return Df(e,"targetGlobal")}function wv(e){return Df(e,"targetDocuments")}function Nv(e,t){let[n,r]=e,[s,i]=t;const a=bh(n,s);return 0===a?bh(r,i):a}class Sv{constructor(e){this.Ln=e,this.buffer=new Uf(Nv),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Nv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ev{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){Zd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Gh(e)?Zd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Vh(e)}await this.Qn(3e5)})}}class Iv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Bh.resolve(Zh.ct);const n=new Sv(t);return this.jn.forEachTarget(e,e=>n.Kn(e.sequenceNumber)).next(()=>this.jn.Wn(e,e=>n.Kn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Zd("LruGarbageCollector","Garbage collection skipped; disabled"),Bh.resolve(lv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Zd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),lv):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Zd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Jd()<=vt.DEBUG&&Zd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Bh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function kv(e,t){return new Iv(e,t)}class Tv{constructor(e,t){this.db=e,this.garbageCollector=kv(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Jn(e){let t=0;return this.Wn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(e,n)=>t(n))}addReference(e,t,n){return Cv(e,n)}removeReference(e,t,n){return Cv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Cv(e,t)}Xn(e,t){return function(e,t){let n=!1;return gv(e).Z(r=>fv(e,r,t).next(e=>(e&&(n=!0),Bh.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(i,a)=>{if(a<=t){const t=this.Xn(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Sh.min()),wv(e).delete([0,rf(i.path)])))});r.push(t)}}).next(()=>Bh.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Cv(e,t)}Yn(e,t){const n=wv(e);let r,s=Zh.ct;return n.X({index:"documentTargetsIndex"},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==Zh.ct&&t(new Ch(of(r)),s),s=l,r=o):s=Zh.ct}).next(()=>{s!==Zh.ct&&t(new Ch(of(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cv(e,t){return wv(e).put(function(e,t){return{targetId:0,path:rf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class _v{constructor(){this.changes=new bm(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Rv(e).put(n)}removeEntry(e,t,n){return Rv(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],vy(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Zn(e,n)))}getEntry(e,t){let n=Sp.newInvalidDocument(t);return Rv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ov(t))},(e,r)=>{n=this.ts(t,r)}).next(()=>n)}es(e,t){let n={size:0,document:Sp.newInvalidDocument(t)};return Rv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ov(t))},(e,r)=>{n={document:this.ts(t,r),size:dv(r)}}).next(()=>n)}getEntries(e,t){let n=wm();return this.ns(e,t,(e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)}).next(()=>n)}ss(e,t){let n=wm(),r=new Lf(Ch.comparator);return this.ns(e,t,(e,t)=>{const s=this.ts(e,t);n=n.insert(e,s),r=r.insert(e,dv(t))}).next(()=>({documents:n,rs:r}))}ns(e,t,n){if(t.isEmpty())return Bh.resolve();let r=new Uf(Mv);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Ov(r.first()),Ov(r.last())),i=r.getIterator();let a=i.getNext();return Rv(e).X({index:"documentKeyIndex",range:s},(e,t,r)=>{const s=Ch.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Mv(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.G(Ov(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r){const s=t.path,i=[s.popLast().toArray(),s.lastSegment(),vy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rv(e).j(IDBKeyRange.bound(i,a,!0)).next(e=>{let n=wm();for(const s of e){const e=this.ts(Ch.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(mm(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=wm();const i=Lv(t,n),a=Lv(t,Lh.max());return Rv(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.ts(Ch.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Dv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Pv(e).get("remoteDocumentGlobalKey").next(e=>(sh(!!e),e))}Zn(e,t){return Pv(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=ey(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ch.fromSegments(t.noDocument.path),r=xy(t.noDocument.readTime);n=Sp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return rh();{const e=Ch.fromSegments(t.unknownDocument.path),r=xy(t.unknownDocument.version);n=Sp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Nh(e[0],e[1]);return Sh.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Sh.min()))return e}return Sp.newInvalidDocument(e)}}function Av(e){return new jv(e)}class Dv extends _v{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new bm(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Uf((e,t)=>bh(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.us.get(s);if(t.push(this.os.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=yy(this.os.serializer,i);r=r.add(s.path.popLast());const l=dv(o);n+=l-a.size,t.push(this.os.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=yy(this.os.serializer,i.convertToNoDocument(Sh.min()));t.push(this.os.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.os.updateMetadata(e,n)),Bh.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(e=>{let{documents:t,rs:n}=e;return n.forEach((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Pv(e){return Df(e,"remoteDocumentGlobal")}function Rv(e){return Df(e,"remoteDocumentsV14")}function Ov(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Lv(e,t){const n=t.documentKey.path.toArray();return[e,vy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Mv(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=bh(n[i],r[i]),s)return s;return s=bh(n.length,r.length),s||(s=bh(n[n.length-2],r[r.length-2]),s||bh(n[n.length-1],r[r.length-1]))}class Fv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Uv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&tg(n.mutation,e,zf.empty(),Nh.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,jm()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jm();const r=Im();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Sm();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Im();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,jm()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=wm();const i=Tm(),a=Tm();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ig)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),tg(a.mutation,t,a.mutation.getFieldMask(),Nh.now())):i.set(t.key,zf.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Fv(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Tm();let r=new Lf((e,t)=>e-t),s=jm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||zf.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||jm()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=km();l.forEach(e=>{if(!s.has(e)){const r=Zm(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Bh.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ch.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Bh.resolve(Im());let a=-1,o=s;return i.next(t=>Bh.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Bh.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,jm())).next(e=>({batchId:a,changes:Em(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ch(t)).next(e=>{let t=Sm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=Sm();return this.indexManager.getCollectionParents(e,r).next(i=>Bh.forEach(i,i=>{const a=function(e,t){return new nm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Sp.newInvalidDocument(r)))});let n=Sm();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&tg(i.mutation,s,zf.empty(),Nh.now()),mm(t,s)&&(n=n.insert(e,s))}),n})}}class Vv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Bh.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Kg(n.createTime)}),Bh.resolve()}getNamedQuery(e,t){return Bh.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Ey(e.bundledQuery),readTime:Kg(e.readTime)}}(t)),Bh.resolve()}}class Bv{constructor(){this.overlays=new Lf(Ch.comparator),this.ls=new Map}getOverlay(e,t){return Bh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Im();return Bh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),Bh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),Bh.resolve()}getOverlaysForCollection(e,t,n){const r=Im(),s=t.length+1,i=new Ch(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Lf((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Im(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Im(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Bh.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new fg(t,n));let s=this.ls.get(t);void 0===s&&(s=jm(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class zv{constructor(){this.fs=new Uf(qv.ds),this.ws=new Uf(qv._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new qv(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new qv(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new Ch(new Ih([])),n=new qv(t,e),r=new qv(t,e+1),s=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),s.push(e.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ch(new Ih([])),n=new qv(t,e),r=new qv(t,e+1);let s=jm();return this.ws.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new qv(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class qv{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ch.comparator(e.key,t.key)||bh(e.As,t.As)}static _s(e,t){return bh(e.As,t.As)||Ch.comparator(e.key,t.key)}}class Kv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Uf(qv.ds)}checkEmpty(e){return Bh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new dg(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Rs=this.Rs.add(new qv(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Bh.resolve(i)}lookupMutationBatch(e,t){return Bh.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return Bh.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Bh.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Bh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new qv(t,0),r=new qv(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);s.push(t)}),Bh.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Uf(bh);return t.forEach(e=>{const t=new qv(e,0),r=new qv(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),Bh.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ch.isDocumentKey(s)||(s=s.child(""));const i=new qv(new Ch(s),0);let a=new Uf(bh);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)},i),Bh.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){sh(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Bh.forEach(t.mutations,r=>{const s=new qv(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new qv(t,0),r=this.Rs.firstAfterOrEqual(n);return Bh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bh.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Hv{constructor(e){this.Ds=e,this.docs=new Lf(Ch.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bh.resolve(n?n.document.mutableCopy():Sp.newInvalidDocument(t))}getEntries(e,t){let n=wm();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Sp.newInvalidDocument(e))}),Bh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=wm();const i=t.path,a=new Ch(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Mh(Oh(a),n)<=0||(r.has(a.key)||mm(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Bh.resolve(s)}getAllFromCollectionGroup(e,t,n,r){rh()}Cs(e,t){return Bh.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Gv(this)}getSize(e){return Bh.resolve(this.size)}}class Gv extends _v{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),Bh.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Wv{constructor(e){this.persistence=e,this.xs=new bm(e=>$p(e),Yp),this.lastRemoteSnapshotVersion=Sh.min(),this.highestTargetId=0,this.Ns=0,this.ks=new zv,this.targetCount=0,this.Ms=yv.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),Bh.resolve()}getLastRemoteSnapshotVersion(e){return Bh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bh.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Bh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Bh.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new yv(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Bh.resolve()}updateTargetData(e,t){return this.Fn(t),Bh.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Bh.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Bh.waitFor(s).next(()=>r)}getTargetCount(e){return Bh.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Bh.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Bh.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Bh.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Bh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Bh.resolve(n)}containsKey(e,t){return Bh.resolve(this.ks.containsKey(t))}}class Qv{constructor(e,t){this.$s={},this.overlays={},this.Os=new Zh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Wv(this),this.indexManager=new Zy,this.remoteDocumentCache=function(e){return new Hv(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new gy(t),this.qs=new Vv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Kv(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Zd("MemoryPersistence","Starting transaction:",e);const r=new Xv(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return Bh.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Xv extends Uh{constructor(e){super(),this.currentSequenceNumber=e}}class $v{constructor(e){this.persistence=e,this.Qs=new zv,this.js=null}static zs(e){return new $v(e)}get Ws(){if(this.js)return this.js;throw rh()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Bh.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Bh.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Bh.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bh.forEach(this.Ws,n=>{const r=Ch.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Sh.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Bh.or([()=>Bh.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Yv{constructor(e){this.serializer=e}O(e,t,n,r){const s=new zh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lf,{unique:!0}),e.createObjectStore("documentMutations")}(e),Jv(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=Bh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Jv(e)),i=i.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store("mutations").j().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lf,{unique:!0});const r=t.store("mutations"),s=n.map(e=>r.put(e));return Bh.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.Ys(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),n<7&&r>=7&&(i=i.next(()=>this.Zs(s))),n<8&&r>=8&&(i=i.next(()=>this.ti(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.ei(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Sf});t.createIndex("collectionPathOverlayIndex",Ef,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",If,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:hf});t.createIndex("documentKeyIndex",ff),t.createIndex("collectionGroupIndex",pf)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(i=i.next(()=>this.si(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:bf}).createIndex("sequenceNumberIndex",xf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:wf}).createIndex("documentKeyIndex",Nf,{unique:!1})}(e))),i}Xs(e){let t=0;return e.store("remoteDocuments").X((e,n)=>{t+=dv(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next(t=>Bh.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next(n=>Bh.forEach(n,n=>{sh(n.userId===t.userId);const r=wy(this.serializer,n);return uv(e,t.userId,r).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.X((n,s)=>{const i=new Ih(n),a=function(e){return[0,rf(e)]}(i);r.push(t.get(a).next(n=>n?Bh.resolve():(n=>t.put({targetId:0,path:rf(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>Bh.waitFor(r))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:vf});const n=t.store("collectionParents"),r=new ev,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:rf(r)})}};return t.store("remoteDocuments").X({Y:!0},(e,t)=>{const n=new Ih(e);return s(n.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},(e,t)=>{let[n,r,i]=e;const a=of(r);return s(a.popLast())}))}ei(e){const t=e.store("targets");return t.X((e,n)=>{const r=Ny(n),s=Sy(this.serializer,r);return t.put(s)})}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X((e,n)=>{const s=t.store("remoteDocumentsV14"),i=(a=n,a.document?new Ch(Ih.fromString(a.document.name).popFirst(5)):a.noDocument?Ch.fromSegments(a.noDocument.path):a.unknownDocument?Ch.fromSegments(a.unknownDocument.path):rh()).path.toArray();var a;const o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(o))}).next(()=>Bh.waitFor(r))}si(e,t){const n=t.store("mutations"),r=Av(this.serializer),s=new Qv($v.zs,this.serializer.fe);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:jm();wy(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Bh.forEach(n,(e,n)=>{const i=new Xd(n),a=Ay.de(this.serializer,i),o=s.getIndexManager(i),l=hv.de(i,this.serializer,o,s.referenceDelegate);return new Uv(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new Af(t,Zh.ct),e).next()})})}}function Jv(e){e.createObjectStore("targetDocuments",{keyPath:gf}).createIndex("documentTargetsIndex",yf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mf,{unique:!0}),e.createObjectStore("targetGlobal")}const Zv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class eb{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=s,this.window=i,this.document=a,this.ri=l,this.oi=c,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!eb.D())throw new oh(ah.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tv(this,r),this.di=t+"main",this.serializer=new gy(o),this.wi=new qh(this.di,this.ui,new Yv(this.serializer)),this.Bs=new vv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Av(this.serializer),this.qs=new Cy,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&eh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oh(ah.FAILED_PRECONDITION,Zv);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Zh(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Gh(e))return Zd("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Zd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return tb(e).get("owner").next(e=>Bh.resolve(this.Ri(e)))}Pi(e){return nb(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Df(e,"clientMetadata");return t.j().next(e=>{const n=this.Si(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return Bh.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Bh.resolve(!0):tb(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new oh(ah.FAILED_PRECONDITION,Zv);return!1}}return!(!this.networkEnabled||!this.inForeground)||nb(e).j().next(e=>void 0===this.Si(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Zd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Af(e,Zh.ct);return this.Ai(t).next(()=>this.Pi(t))}),this.wi.close(),this.Mi()}Si(e,t){return e.filter(e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>nb(e).j().next(e=>this.Si(e,18e5).map(e=>e.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return hv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nv(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Ay.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){Zd("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?jf:14===i?_f:13===i?Cf:12===i?Tf:11===i?kf:void rh();var i;let a;return this.wi.runTransaction(e,r,s,r=>(a=new Af(r,this.Os?this.Os.next():Zh.ct),"readwrite-primary"===t?this.Ti(a).next(e=>!!e||this.Ei(a)).next(t=>{if(!t)throw eh("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new oh(ah.FAILED_PRECONDITION,Fh);return n(a)}).next(e=>this.vi(a).next(()=>e)):this.Oi(a).next(()=>n(a)))).then(e=>(a.raiseOnCommittedEvent(),e))}Oi(e){return tb(e).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new oh(ah.FAILED_PRECONDITION,Zv)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tb(e).put("owner",t)}static D(){return qh.D()}Ai(e){const t=tb(e);return t.get("owner").next(e=>this.Ri(e)?(Zd("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Bh.resolve())}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(eh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Je()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Zd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return eh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){eh("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function tb(e){return Df(e,"owner")}function nb(e){return Df(e,"clientMetadata")}function rb(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class sb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=jm(),r=jm();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new sb(e,t.fromCache,n,r)}}class ib{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(im(t))return Bh.resolve(null);let n=um(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=dm(t,null,"F"),n=um(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=jm(...r);return this.Ui.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,r);return this.zi(t,i,s,n.readTime)?this.Ki(e,dm(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,r){return im(t)||r.isEqual(Sh.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(s=>{const i=this.ji(t,s);return this.zi(t,i,n,r)?this.Qi(e,t):(Jd()<=vt.DEBUG&&Zd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pm(t)),this.Wi(e,i,t,Rh(r,-1)))})}ji(e,t){let n=new Uf(ym(e));return t.forEach((t,r)=>{mm(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return Jd()<=vt.DEBUG&&Zd("QueryEngine","Using full collection scan to execute query:",pm(t)),this.Ui.getDocumentsMatchingQuery(e,t,Lh.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class ab{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Lf(bh),this.Yi=new bm(e=>$p(e),Yp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ob(e,t,n,r){return new ab(e,t,n,r)}async function lb(e,t){const n=ih(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=jm();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({er:e,removedBatchIds:s,addedBatchIds:i}))})})}function cb(e){const t=ih(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function ub(e,t,n){let r=jm(),s=jm();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=wm();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Sh.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Zd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{nr:r,sr:s}})}function db(e,t){const n=ih(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function hb(e,t){const n=ih(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(s=>s?(r=s,Bh.resolve(r)):n.Bs.allocateTargetId(e).next(s=>(r=new my(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function fb(e,t,n){const r=ih(e),s=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Gh(e))throw e;Zd("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function pb(e,t,n){const r=ih(e);let s=Sh.min(),i=jm();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=ih(e),s=r.Yi.get(n);return void 0!==s?Bh.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,um(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:Sh.min(),n?i:jm())).next(e=>(mb(r,gm(t),e),{documents:e,ir:i})))}function mb(e,t,n){let r=e.Xi.get(t)||Sh.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class gb{constructor(){this.activeTargetIds=Dm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yb{constructor(){this.Hr=new gb,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new gb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vb{Yr(e){}shutdown(){}}class bb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Zd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Zd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xb=null;function wb(){return null===xb?xb=268435456+Math.round(2147483648*Math.random()):xb++,"0x"+xb.toString(16)}const Nb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sb{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Eb="WebChannelConnection";class Ib extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const i=wb(),a=this.To(e,t);Zd("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={};return this.Eo(o,r,s),this.Ao(e,a,o,n).then(t=>(Zd("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw th("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}vo(e,t,n,r,s,i){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$d,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Nb[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=wb();return new Promise((i,a)=>{const o=new Hd;o.setWithCredentials(!0),o.listenOnce(Vd.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Ud.NO_ERROR:const t=o.getResponseJson();Zd(Eb,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Ud.TIMEOUT:Zd(Eb,"RPC '".concat(e,"' ").concat(s," timed out")),a(new oh(ah.DEADLINE_EXCEEDED,"Request time out"));break;case Ud.HTTP_ERROR:const n=o.getStatus();if(Zd(Eb,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ah).indexOf(t)>=0?t:ah.UNKNOWN}(t.status);a(new oh(e,t.message))}else a(new oh(ah.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new oh(ah.UNAVAILABLE,"Connection failed."));break;default:rh()}}finally{Zd(Eb,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Zd(Eb,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=wb(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Md(),a=Fd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new qd({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Zd(Eb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new Sb({ro:t=>{h?Zd(Eb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Zd(Eb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Kd.EventType.OPEN,()=>{h||Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,Kd.EventType.CLOSE,()=>{h||(h=!0,Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,Kd.EventType.ERROR,t=>{h||(h=!0,th(Eb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new oh(ah.UNAVAILABLE,"The operation could not be completed")))}),p(u,Kd.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];sh(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=mg[e];if(void 0!==t)return vg(t)}(t),s=a.message;void 0===n&&(n=ah.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.wo(new oh(n,s)),u.close()}else Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f._o(s)}}),p(a,Bd.STAT_EVENT,t=>{t.stat===zd.PROXY?Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===zd.NOPROXY&&Zd(Eb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function kb(){return"undefined"!=typeof window?window:null}function Tb(){return"undefined"!=typeof document?document:null}function Cb(e){return new Ug(e,!0)}class _b{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Zd("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class jb{constructor(e,t,n,r,s,i,a,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new _b(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===ah.RESOURCE_EXHAUSTED?(eh(t.toString()),eh("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===ah.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new oh(ah.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Zd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Zd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ab extends jb{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:rh()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(sh(void 0===t||"string"==typeof t),Kf.fromBase64String(t||"")):(sh(void 0===t||t instanceof Uint8Array),Kf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?ah.UNKNOWN:vg(e.code);return new oh(t,e.message||"")}(a);n=new Ag(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Qg(e,r.document.name),i=Kg(r.document.updateTime),a=r.document.createTime?Kg(r.document.createTime):Sh.min(),o=new wp({mapValue:{fields:r.document.fields}}),l=Sp.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new _g(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Qg(e,r.document),i=r.readTime?Kg(r.readTime):Sh.min(),a=Sp.newNoDocument(s,i),o=r.removedTargetIds||[];n=new _g([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Qg(e,r.document),i=r.removedTargetIds||[];n=new _g([],i,s,null)}else{if(!("filter"in t))return rh();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new pg(r,s),a=e.targetId;n=new jg(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Sh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Sh.min():t.readTime?Kg(t.readTime):Sh.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Yg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Jp(r)?{documents:ry(e,r)}:{query:sy(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=zg(e,t.resumeToken);const r=Vg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Sh.min())>0){n.readTime=Bg(e,t.snapshotVersion.toTimestamp());const r=Vg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rh()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Yg(this.serializer),t.removeTarget=e,this.Wo(t)}}class Db extends jb{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(sh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(sh(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Kg(e.updateTime):Kg(t);return n.isEqual(Sh.min())&&(n=Kg(t)),new Xm(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Kg(e.commitTime);return this.listener.cu(n,t)}return sh(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Yg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ty(this.serializer,e))};this.Wo(t)}}class Pb extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new oh(ah.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,i]=r;return this.connection.Io(e,t,n,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ah.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new oh(ah.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.vo(e,t,n,i,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ah.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new oh(ah.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Rb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(eh(t),this.mu=!1):Zd("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ob{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Kb(this)&&(Zd("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ih(e);t.vu.add(4),await Mb(t),t.bu.set("Unknown"),t.vu.delete(4),await Lb(t)}(this))})}),this.bu=new Rb(n,r)}}async function Lb(e){if(Kb(e))for(const t of e.Ru)await t(!0)}async function Mb(e){for(const t of e.Ru)await t(!1)}function Fb(e,t){const n=ih(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),qb(n)?zb(n):lx(n).Ko()&&Vb(n,t))}function Ub(e,t){const n=ih(e),r=lx(n);n.Au.delete(t),r.Ko()&&Bb(n,t),0===n.Au.size&&(r.Ko()?r.jo():Kb(n)&&n.bu.set("Unknown"))}function Vb(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Sh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}lx(e).su(t)}function Bb(e,t){e.Vu.qt(t),lx(e).iu(t)}function zb(e){e.Vu=new Pg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),lx(e).start(),e.bu.gu()}function qb(e){return Kb(e)&&!lx(e).Uo()&&e.Au.size>0}function Kb(e){return 0===ih(e).vu.size}function Hb(e){e.Vu=void 0}async function Gb(e){e.Au.forEach((t,n)=>{Vb(e,t)})}async function Wb(e,t){Hb(e),qb(e)?(e.bu.Iu(t),zb(e)):e.bu.set("Unknown")}async function Qb(e,t,n){if(e.bu.set("Online"),t instanceof Ag&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Zd("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xb(e,n)}else if(t instanceof _g?e.Vu.Ht(t):t instanceof jg?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Sh.min()))try{const t=await cb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Kf.EMPTY_BYTE_STRING,r.snapshotVersion)),Bb(e,t);const s=new my(r.target,t,n,r.sequenceNumber);Vb(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Zd("RemoteStore","Failed to raise snapshot:",t),await Xb(e,t)}}async function Xb(e,t,n){if(!Gh(t))throw t;e.vu.add(1),await Mb(e),e.bu.set("Offline"),n||(n=()=>cb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Zd("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Lb(e)})}function $b(e,t){return t().catch(n=>Xb(e,n,t))}async function Yb(e){const t=ih(e),n=cx(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Jb(t);)try{const e=await db(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Zb(t,e)}catch(e){await Xb(t,e)}ex(t)&&tx(t)}function Jb(e){return Kb(e)&&e.Eu.length<10}function Zb(e,t){e.Eu.push(t);const n=cx(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function ex(e){return Kb(e)&&!cx(e).Uo()&&e.Eu.length>0}function tx(e){cx(e).start()}async function nx(e){cx(e).hu()}async function rx(e){const t=cx(e);for(const n of e.Eu)t.uu(n.mutations)}async function sx(e,t,n){const r=e.Eu.shift(),s=hg.from(r,t,n);await $b(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Yb(e)}async function ix(e,t){t&&cx(e).ou&&await async function(e,t){if(yg(n=t.code)&&n!==ah.ABORTED){const n=e.Eu.shift();cx(e).Qo(),await $b(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Yb(e)}var n}(e,t),ex(e)&&tx(e)}async function ax(e,t){const n=ih(e);n.asyncQueue.verifyOperationInProgress(),Zd("RemoteStore","RemoteStore received new credentials");const r=Kb(n);n.vu.add(3),await Mb(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Lb(n)}async function ox(e,t){const n=ih(e);t?(n.vu.delete(2),await Lb(n)):t||(n.vu.add(2),await Mb(n),n.bu.set("Unknown"))}function lx(e){return e.Su||(e.Su=function(e,t,n){const r=ih(e);return r.fu(),new Ab(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Gb.bind(null,e),ao:Wb.bind(null,e),nu:Qb.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),qb(e)?zb(e):e.bu.set("Unknown")):(await e.Su.stop(),Hb(e))})),e.Su}function cx(e){return e.Du||(e.Du=function(e,t,n){const r=ih(e);return r.fu(),new Db(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:nx.bind(null,e),ao:ix.bind(null,e),au:rx.bind(null,e),cu:sx.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Yb(e)):(await e.Du.stop(),e.Eu.length>0&&(Zd("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class ux{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new lh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new ux(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new oh(ah.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dx(e,t){if(eh("AsyncQueue","".concat(t,": ").concat(e)),Gh(e))return new oh(ah.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class hx{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ch.comparator(t.key,n.key):(e,t)=>Ch.comparator(e.key,t.key),this.keyedMap=Sm(),this.sortedSet=new Lf(this.comparator)}static emptySet(e){return new hx(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hx))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class fx{constructor(){this.Cu=new Lf(Ch.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rh():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class px{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new px(e,t,hx.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class mx{constructor(){this.Nu=void 0,this.listeners=[]}}class gx{constructor(){this.queries=new bm(e=>fm(e),hm),this.onlineState="Unknown",this.ku=new Set}}async function yx(e,t){const n=ih(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new mx),s)try{i.Nu=await n.onListen(r)}catch(e){const n=dx(e,"Initialization of query '".concat(pm(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Mu(n.onlineState),i.Nu&&t.$u(i.Nu)&&wx(n)}async function vx(e,t){const n=ih(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function bx(e,t){const n=ih(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&wx(n)}function xx(e,t,n){const r=ih(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function wx(e){e.ku.forEach(e=>{e.next()})}class Nx{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new px(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=px.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Sx{constructor(e){this.key=e}}class Ex{constructor(e){this.key=e}}class Ix{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=jm(),this.mutatedKeys=jm(),this.tc=ym(e),this.ec=new hx(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new fx,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=mm(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.tc(u,o)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rh()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==s.length||o?{snapshot:new px(this.query,e.ec,r,s,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new fx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=jm(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Ex(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Sx(n))}),t}hc(e){this.Yu=e.ir,this.Zu=jm();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return px.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class kx{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tx{constructor(e){this.key=e,this.fc=!1}}class Cx{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new bm(e=>fm(e),hm),this._c=new Map,this.mc=new Set,this.gc=new Lf(Ch.comparator),this.yc=new Map,this.Ic=new zv,this.Tc={},this.Ec=new Map,this.Ac=yv.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function _x(e,t){const n=Wx(e);let r,s;const i=n.wc.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const e=await hb(n.localStore,um(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await jx(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&Fb(n.remoteStore,e)}return s}async function jx(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await pb(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i);return Bx(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const i=await pb(e.localStore,t,!0),a=new Ix(t,i.ir),o=a.sc(i.documents),l=Cg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Bx(e,n,c.cc);const u=new kx(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Ax(e,t){const n=ih(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(e=>!hm(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await fb(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ub(n.remoteStore,r.targetId),Ux(n,r.targetId)}).catch(Vh)):(Ux(n,r.targetId),await fb(n.localStore,r.targetId,!0))}async function Dx(e,t){const n=ih(e);try{const e=await function(e,t){const n=ih(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Kf.EMPTY_BYTE_STRING,Sh.min()).withLastLimboFreeSnapshotVersion(Sh.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Bs.updateTargetData(e,c))});let o=wm(),l=jm();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(ub(e,i,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!r.isEqual(Sh.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Bh.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(sh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?sh(r.fc):e.removedDocuments.size>0&&(sh(r.fc),r.fc=!1))}),await Kx(n,e,t)}catch(e){await Vh(e)}}function Px(e,t,n){const r=ih(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=ih(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)}),r&&wx(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Rx(e,t,n){const r=ih(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),i=s&&s.key;if(i){let e=new Lf(Ch.comparator);e=e.insert(i,Sp.newNoDocument(i,Sh.min()));const n=jm().add(i),s=new Tg(Sh.min(),new Map,new Lf(bh),e,n);await Dx(r,s),r.gc=r.gc.remove(i),r.yc.delete(t),qx(r)}else await fb(r.localStore,t,!1).then(()=>Ux(r,t,n)).catch(Vh)}async function Ox(e,t){const n=ih(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ih(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Bh.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);sh(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=jm();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Fx(n,r,null),Mx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kx(n,e)}catch(e){await Vh(e)}}async function Lx(e,t,n){const r=ih(e);try{const e=await function(e,t){const n=ih(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(sh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Fx(r,t,n),Mx(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Kx(r,e)}catch(n){await Vh(n)}}function Mx(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Fx(e,t,n){const r=ih(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function Ux(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Vx(e,t)})}function Vx(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Ub(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),qx(e))}function Bx(e,t,n){for(const r of n)r instanceof Sx?(e.Ic.addReference(r.key,t),zx(e,r)):r instanceof Ex?(Zd("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Vx(e,r.key)):rh()}function zx(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Zd("SyncEngine","New document in limbo: "+n),e.mc.add(r),qx(e))}function qx(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Ch(Ih.fromString(t)),r=e.Ac.next();e.yc.set(r,new Tx(n)),e.gc=e.gc.insert(n,r),Fb(e.remoteStore,new my(um(sm(n.path)),r,"TargetPurposeLimboResolution",Zh.ct))}}async function Kx(e,t,n){const r=ih(e),s=[],i=[],a=[];r.wc.isEmpty()||(r.wc.forEach((e,o)=>{a.push(r.Rc(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=sb.Li(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.dc.nu(s),await async function(e,t){const n=ih(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bh.forEach(t,t=>Bh.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bh.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Gh(e))throw e;Zd("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,i))}async function Hx(e,t){const n=ih(e);if(!n.currentUser.isEqual(t)){Zd("SyncEngine","User change. New user:",t.toKey());const e=await lb(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new oh(ah.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Kx(n,e.er)}}function Gx(e,t){const n=ih(e),r=n.yc.get(t);if(r&&r.fc)return jm().add(r.key);{let e=jm();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Wx(e){const t=ih(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rx.bind(null,t),t.dc.nu=bx.bind(null,t.eventManager),t.dc.Pc=xx.bind(null,t.eventManager),t}function Qx(e){const t=ih(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ox.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lx.bind(null,t),t}class Xx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Cb(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ob(this.persistence,new ib,e.initialUser,this.serializer)}createPersistence(e){return new Qv($v.zs,this.serializer)}createSharedClientState(e){return new yb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $x extends Xx{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Qx(this.Vc.syncEngine),await Yb(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return ob(this.persistence,new ib,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Ev(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Jh(t,this.persistence);return new Yh(e.asyncQueue,n)}createPersistence(e){const t=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cv.withCacheSize(this.cacheSizeBytes):cv.DEFAULT;return new eb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kb(),Tb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new yb}}class Yx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Px(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hx.bind(null,this.syncEngine),await ox(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gx}createDatastore(e){const t=Cb(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Ib(r));var r;return function(e,t,n,r){return new Pb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>Px(this.syncEngine,e,0),i=bb.D()?new bb:new vb,new Ob(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Cx(e,t,n,r,s,i);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ih(e);Zd("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Mb(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Jx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):eh("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zx{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Xd.UNAUTHENTICATED,this.clientId=vh.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Zd("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Zd("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new oh(ah.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(GN){const n=dx(GN,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ew(e,t){e.asyncQueue.verifyOperationInProgress(),Zd("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await lb(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await rw(e);Zd("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>ax(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>ax(t.remoteStore,n)),e._onlineComponents=t}function nw(e){return"FirebaseError"===e.name?e.code===ah.FAILED_PRECONDITION||e.code===ah.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function rw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Zd("FirestoreClient","Using user provided OfflineComponentProvider");try{await ew(e,e._uninitializedComponentsProvider._offline)}catch(GN){const n=GN;if(!nw(n))throw n;th("Error using user provided cache. Falling back to memory cache: "+n),await ew(e,new Xx)}}else Zd("FirestoreClient","Using default OfflineComponentProvider"),await ew(e,new Xx);return e._offlineComponents}async function sw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Zd("FirestoreClient","Using user provided OnlineComponentProvider"),await tw(e,e._uninitializedComponentsProvider._online)):(Zd("FirestoreClient","Using default OnlineComponentProvider"),await tw(e,new Yx))),e._onlineComponents}function iw(e){return sw(e).then(e=>e.syncEngine)}async function aw(e){const t=await sw(e),n=t.eventManager;return n.onListen=_x.bind(null,t.syncEngine),n.onUnlisten=Ax.bind(null,t.syncEngine),n}function ow(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const lw=new Map;function cw(e,t,n){if(!n)throw new oh(ah.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uw(e){if(!Ch.isDocumentKey(e))throw new oh(ah.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dw(e){if(Ch.isDocumentKey(e))throw new oh(ah.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":rh()}function fw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new oh(ah.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hw(e);throw new oh(ah.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class pw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new oh(ah.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new oh(ah.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new oh(ah.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ow(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new oh(ah.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new oh(ah.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new oh(ah.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class mw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new oh(ah.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new oh(ah.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new uh;switch(e.type){case"firstParty":return new ph(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new oh(ah.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lw.get(e);t&&(Zd("ComponentProvider","Removing Datastore"),lw.delete(e),t.terminate())}(this),Promise.resolve()}}function gw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=fw(e,mw))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&th("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Xd.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new oh(ah.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Xd(i)}e._authCredentials=new dh(new ch(t,n))}}class yw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yw(this.firestore,e,this._key)}}class vw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vw(this.firestore,e,this._query)}}class bw extends vw{constructor(e,t,n){super(e,t,sm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yw(this.firestore,null,new Ch(e))}withConverter(e){return new bw(this.firestore,e,this._path)}}function xw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=ht(e),cw("collection","path",t),e instanceof mw){const n=Ih.fromString(t,...r);return dw(n),new bw(e,null,n)}{if(!(e instanceof yw||e instanceof bw))throw new oh(ah.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ih.fromString(t,...r));return dw(n),new bw(e.firestore,null,n)}}function ww(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=ht(e),1===arguments.length&&(t=vh.A()),cw("doc","path",t),e instanceof mw){const n=Ih.fromString(t,...r);return uw(n),new yw(e,null,new Ch(n))}{if(!(e instanceof yw||e instanceof bw))throw new oh(ah.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ih.fromString(t,...r));return uw(n),new yw(e.firestore,e instanceof bw?e.converter:null,new Ch(n))}}class Nw{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new _b(this,"async_queue_retry"),this.Xc=()=>{const e=Tb();e&&Zd("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Tb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Tb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new lh;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Gh(e))throw e;Zd("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw eh("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=ux.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&rh()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Sw(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Ew extends mw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Nw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kw(this),this._firestoreClient.terminate()}}function Iw(e){return e._firestoreClient||kw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kw(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Jf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ow(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new Zx(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function Tw(e,t,n){const r=new lh;return e.asyncQueue.enqueue(async()=>{try{await ew(e,n),await tw(e,t),r.resolve()}catch(e){const n=e;if(!nw(n))throw n;th("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}}).then(()=>r.promise)}function Cw(e){if(e._initialized||e._terminated)throw new oh(ah.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _w{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _w(Kf.fromBase64String(e))}catch(e){throw new oh(ah.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _w(Kf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new oh(ah.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Th(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Aw{constructor(e){this._methodName=e}}class Dw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oh(ah.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oh(ah.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bh(this._lat,e._lat)||bh(this._long,e._long)}}const Pw=/^__.*__$/;class Rw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ig(e,this.data,this.fieldMask,t,this.fieldTransforms):new sg(e,this.data,t,this.fieldTransforms)}}class Ow{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ig(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rh()}}class Mw{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Mw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Yw(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Lw(this.ca)&&Pw.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Fw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Cb(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mw({ca:e,methodName:t,ga:n,path:Th.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uw(e){const t=e._freezeSettings(),n=Cb(e._databaseId);return new Fw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vw(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(i.merge||i.mergeFields?2:0,t,n,s);Ww("Data must be an object, but it was:",a,r);const o=Hw(r,a);let l,c;if(i.merge)l=new zf(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Qw(t,r,n);if(!a.contains(s))throw new oh(ah.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Jw(e,s)||e.push(s)}l=new zf(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Rw(new wp(o),l,c)}class Bw extends Aw{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bw}}function zw(e,t,n,r){const s=e.ya(1,t,n);Ww("Data must be an object, but it was:",s,r);const i=[],a=wp.empty();Rf(r,(e,r)=>{const o=$w(t,e,n);r=ht(r);const l=s.da(o);if(r instanceof Bw)i.push(o);else{const e=Kw(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new zf(i);return new Ow(a,o,s.fieldTransforms)}function qw(e,t,n,r,s,i){const a=e.ya(1,t,n),o=[Qw(t,r,n)],l=[s];if(i.length%2!=0)throw new oh(ah.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(Qw(t,i[h])),l.push(i[h+1]);const c=[],u=wp.empty();for(let h=o.length-1;h>=0;--h)if(!Jw(c,o[h])){const e=o[h];let t=l[h];t=ht(t);const n=a.da(e);if(t instanceof Bw)c.push(e);else{const r=Kw(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new zf(c);return new Ow(u,d,a.fieldTransforms)}function Kw(e,t){if(Gw(e=ht(e)))return Ww("Unsupported field value:",t,e),Hw(e,t);if(e instanceof Aw)return function(e,t){if(!Lw(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Kw(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ht(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Om(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Nh.fromDate(e);return{timestampValue:Bg(t.serializer,n)}}if(e instanceof Nh){const n=new Nh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bg(t.serializer,n)}}if(e instanceof Dw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _w)return{bytesValue:zg(t.serializer,e._byteString)};if(e instanceof yw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Hg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(hw(e)))}(e,t)}function Hw(e,t){const n={};return Of(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rf(e,(e,r)=>{const s=Kw(r,t.ha(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Gw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Nh||e instanceof Dw||e instanceof _w||e instanceof yw||e instanceof Aw)}function Ww(e,t,n){if(!Gw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hw(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Qw(e,t,n){if((t=ht(t))instanceof jw)return t._internalPath;if("string"==typeof t)return $w(e,t);throw Yw("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xw=new RegExp("[~\\*/\\[\\]]");function $w(e,t,n){if(t.search(Xw)>=0)throw Yw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new jw(...t.split("."))._internalPath}catch(r){throw Yw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yw(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new oh(ah.INVALID_ARGUMENT,o+e+l)}function Jw(e,t){return e.some(e=>e.isEqual(t))}class Zw{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eN extends Zw{data(){return super.data()}}function tN(e,t){return"string"==typeof t?$w(e,t):t instanceof jw?t._internalPath:t._delegate._internalPath}function nN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new oh(ah.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rN{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(np(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rh()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Rf(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Dw(Wf(e.latitude),Wf(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=$f(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Yf(e));default:return null}}convertTimestamp(e){const t=Gf(e);return new Nh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ih.fromString(e);sh(py(n));const r=new Zf(n.get(1),n.get(3)),s=new Ch(n.popFirst(5));return r.isEqual(t)||eh("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function sN(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class iN{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aN extends Zw{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new oN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class oN extends aN{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class lN{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new iN(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new oN(this._firestore,this._userDataWriter,n.key,n,new iN(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new oh(ah.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new oN(e._firestore,e._userDataWriter,n.doc.key,n.doc,new iN(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new oN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:cN(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function cN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rh()}}class uN extends rN{constructor(e){super(),this.firestore=e}convertBytes(e){return new _w(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yw(this.firestore,null,t)}}function dN(e,t,n){e=fw(e,yw);const r=fw(e.firestore,Ew),s=Uw(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=ht(t))||t instanceof jw?qw(s,"updateDoc",e._key,t,n,o):zw(s,"updateDoc",e._key,t),mN(r,[i.toMutation(e._key,$m.exists(!0))])}function hN(e){return mN(fw(e.firestore,Ew),[new cg(e._key,$m.none())])}function fN(e,t){const n=fw(e.firestore,Ew),r=ww(e),s=sN(e.converter,t);return mN(n,[Vw(Uw(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,$m.exists(!1))]).then(()=>r)}function pN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=ht(e);let o={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Sw(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(Sw(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof yw)d=fw(e.firestore,Ew),h=sm(e._key.path),u={next:t=>{n[l]&&n[l](gN(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=fw(e,vw);d=fw(t.firestore,Ew),h=t._query;const r=new uN(d);u={next:e=>{n[l]&&n[l](new lN(d,r,t,e))},error:n[l+1],complete:n[l+2]},nN(e._query)}return function(e,t,n,r){const s=new Jx(r),i=new Nx(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>yx(await aw(e),i)),()=>{s.Dc(),e.asyncQueue.enqueueAndForget(async()=>vx(await aw(e),i))}}(Iw(d),h,c,u)}function mN(e,t){return function(e,t){const n=new lh;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Qx(e);try{const e=await function(e,t){const n=ih(e),r=Nh.now(),s=t.reduce((e,t)=>e.add(t.key),jm());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=wm(),l=jm();return n.Zi.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=ng(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new ig(e.key,t,Np(t.value.mapValue),$m.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Em(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Lf(bh)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Kx(r,e.changes),await Yb(r.remoteStore)}catch(e){const t=dx(e,"Failed to persist write");n.reject(t)}}(await iw(e),t,n)),n.promise}(Iw(e),t)}function gN(e,t,n){const r=n.docs.get(t._key),s=new uN(e);return new aN(e,s,t._key,r,new iN(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){$d=e}(_n),In(new ft("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Ew(new hh(e.getProvider("auth-internal")),new gh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new oh(ah.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zf(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Dn(Qd,"3.13.0",e),Dn(Qd,"3.13.0","esm2017")}();const yN=jn({apiKey:"AIzaSyCyH8h0OqHmI3vXsW_ee1qugqCAHRiL3vk",authDomain:"soccer-app-e81d0.firebaseapp.com",projectId:"soccer-app-e81d0",storageBucket:"soccer-app-e81d0.appspot.com",messagingSenderId:"199836947592",appId:"1:199836947592:web:8388db5a944f98b6d57b3d",measurementId:"G-JQZVTJX6TJ"}),vN=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();e=ht(e);const t=kn(e,Xa);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=kn(e,Xa);if(n.isInitialized()){const e=n.getImmediate();if(st(t,n.getOptions()))return e;throw Ja.create("already-initialized")}const r=n.initialize({options:t})}(e)}(yN),function(e,t){const n="string"==typeof e?e:t||"(default)",r=kn("object"==typeof e?e:An(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Ge(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&gw(r,...e)}return r}(yN)),bN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();const t=kn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=kn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(st(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Xn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Mi,persistence:[$s,Ps,Os]}),r=Qe("authTokenSyncURL");if(r){const e=(s=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Bi)return;const r=null===t||void 0===t?void 0:t.token;zi!==r&&(zi=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ht(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){ht(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var s;const i=Ge("auth");return i&&ns(n,"http://".concat(i)),n}(yN);(function(e,t){Cw(e=fw(e,Ew));const n=Iw(e);if(n._uninitializedComponentsProvider)throw new oh(ah.FAILED_PRECONDITION,"SDK cache is already specified.");th("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),s=new Yx;return Tw(n,s,new $x(s,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))})(vN).catch(e=>{"failed-precondition"===e.code?console.warn("Firebase persistence failed: Multiple tabs open"):"unimplemented"===e.code&&console.warn("Firebase persistence not supported")});var xN=n(579);const wN=(0,s.createContext)();function NN(){return(0,s.useContext)(wN)}function SN(e){let{children:t}=e;const[n,r]=(0,s.useState)(),[i,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=function(e,t,n,r){return ht(e).onAuthStateChanged(t,n,r)}(bN,e=>{r(e),a(!1)});return e},[]);const o={currentUser:n,isAdmin:!!n,signup:function(e,t){return async function(e,t,n){var r;const s=es(e),i={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Yr(s,i,"signUpPassword");a=ws(s,e)}else a=ws(s,i).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Yr(s,i,"signUpPassword");return ws(s,e)}return Promise.reject(e)});const o=await a.catch(e=>Promise.reject(e)),l=await Ns._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}(bN,e,t)},login:function(e,t){return function(e,t,n){return _s(ht(e),ps.credential(t,n))}(bN,e,t)},logout:function(){return function(e){return ht(e).signOut()}(bN)}};return(0,xN.jsx)(wN.Provider,{value:o,children:!i&&t})}const EN=()=>{const{currentUser:e,logout:t}=NN(),n=re(),[r,i]=(0,s.useState)(!1),a=async()=>{try{await t(),n("/login")}catch(e){console.error("Failed to log out",e)}},o=()=>{i(!1)};return(0,xN.jsxs)("nav",{className:"bg-gray-800 sticky top-0 z-50 shadow-lg",children:[(0,xN.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,xN.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,xN.jsx)("div",{className:"flex items-center",children:(0,xN.jsx)("div",{className:"flex-shrink-0",children:(0,xN.jsx)(Re,{to:"/",className:"text-white font-bold text-xl",onClick:o,children:"\u26bd SoccerHub"})})}),(0,xN.jsx)("div",{className:"hidden md:block",children:(0,xN.jsxs)("div",{className:"ml-10 flex items-baseline space-x-4",children:[(0,xN.jsx)(Oe,{to:"/",className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(t?"bg-gray-900 text-white shadow-inner border-b-2 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Dashboard"}),(0,xN.jsx)(Oe,{to:"/tournaments",className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(t?"bg-gray-900 text-white shadow-inner border-b-2 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Tournaments"}),(0,xN.jsx)(Oe,{to:"/teams",className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(t?"bg-gray-900 text-white shadow-inner border-b-2 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Teams"}),(0,xN.jsx)(Oe,{to:"/players",className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(t?"bg-gray-900 text-white shadow-inner border-b-2 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Players"}),(0,xN.jsx)(Oe,{to:"/leaderboard",className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(t?"bg-gray-900 text-white shadow-inner border-b-2 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Leaderboard"}),e&&(0,xN.jsx)(Oe,{to:"/admin",className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(t?"bg-gray-900 text-white shadow-inner border-b-2 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Admin Panel"})]})}),(0,xN.jsx)("div",{className:"hidden md:block",children:(0,xN.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:e?(0,xN.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white transition-colors",children:"Logout"}):(0,xN.jsxs)("div",{className:"flex space-x-2",children:[(0,xN.jsx)(Re,{to:"/login",className:"px-4 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition-colors",children:"Login"}),(0,xN.jsx)(Re,{to:"/signup",className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white transition-colors",children:"Sign Up"})]})})}),(0,xN.jsx)("div",{className:"md:hidden",children:(0,xN.jsxs)("button",{onClick:()=>i(!r),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-expanded":"false",children:[(0,xN.jsx)("span",{className:"sr-only",children:"Open main menu"}),r?(0,xN.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):(0,xN.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),r&&(0,xN.jsxs)("div",{className:"md:hidden bg-gray-900",children:[(0,xN.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,xN.jsx)(Oe,{to:"/",onClick:o,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(t?"bg-gray-900 text-white border-l-4 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Dashboard"}),(0,xN.jsx)(Oe,{to:"/tournaments",onClick:o,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(t?"bg-gray-900 text-white border-l-4 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Tournaments"}),(0,xN.jsx)(Oe,{to:"/teams",onClick:o,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(t?"bg-gray-900 text-white border-l-4 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Teams"}),(0,xN.jsx)(Oe,{to:"/players",onClick:o,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(t?"bg-gray-900 text-white border-l-4 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Players"}),(0,xN.jsx)(Oe,{to:"/leaderboard",onClick:o,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(t?"bg-gray-900 text-white border-l-4 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Leaderboard"}),e&&(0,xN.jsx)(Oe,{to:"/admin",onClick:o,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(t?"bg-gray-900 text-white border-l-4 border-green-500":"text-gray-300 hover:bg-gray-700 hover:text-white")},children:"Admin Panel"})]}),(0,xN.jsx)("div",{className:"pt-4 pb-3 border-t border-gray-700",children:(0,xN.jsx)("div",{className:"px-2 space-y-1",children:e?(0,xN.jsx)("button",{onClick:()=>{a(),o()},className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-white bg-red-600 hover:bg-red-700 transition-colors",children:"Logout"}):(0,xN.jsxs)(xN.Fragment,{children:[(0,xN.jsx)(Re,{to:"/login",onClick:o,className:"block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",children:"Login"}),(0,xN.jsx)(Re,{to:"/signup",onClick:o,className:"block px-3 py-2 rounded-md text-base font-medium text-white bg-green-600 hover:bg-green-700 transition-colors",children:"Sign Up"})]})})})]})]})},IN=(0,s.createContext)(),kN=()=>(0,s.useContext)(IN),TN=e=>{let{children:t}=e;const[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[d,h]=(0,s.useState)([]),[f,p]=(0,s.useState)(!0);(0,s.useEffect)(()=>{p(!0);let e={teams:!1,players:!1,matches:!1,tournaments:!1,lineups:!1};const t=()=>{e.teams&&e.players&&e.matches&&e.tournaments&&e.lineups&&p(!1)},n=pN(xw(vN,"teams"),n=>{r(n.docs.map(e=>Ct({id:e.id},e.data()))),e.teams=!0,t()},e=>{console.error("Error fetching teams (likely permission denied):",e)}),s=pN(xw(vN,"players"),n=>{a(n.docs.map(e=>Ct({id:e.id},e.data()))),e.players=!0,t()},e=>{console.error("Error fetching players:",e)}),i=pN(xw(vN,"matches"),n=>{l(n.docs.map(e=>Ct({id:e.id},e.data()))),e.matches=!0,t()},e=>{console.error("Error fetching matches:",e)}),o=pN(xw(vN,"tournaments"),n=>{u(n.docs.map(e=>Ct({id:e.id},e.data()))),e.tournaments=!0,t()},e=>{console.error("Error fetching tournaments:",e)}),c=pN(xw(vN,"lineups"),n=>{h(n.docs.map(e=>Ct({id:e.id},e.data()))),e.lineups=!0,t()},n=>{console.error("Error fetching lineups:",n),e.lineups=!0,t()}),d=setTimeout(()=>{p(!1)},5e3);return()=>{clearTimeout(d),n(),s(),i(),o(),c()}},[]);const m={teams:n,players:i,matches:o,tournaments:c,lineups:d,loading:f};return(0,xN.jsx)(IN.Provider,{value:m,children:t})},CN=e=>{let{lineup:t,players:n}=e;if(!t||!t.starting11||0===t.starting11.length)return(0,xN.jsx)("div",{className:"text-center text-gray-400 py-8",children:(0,xN.jsx)("p",{children:"No lineup available"})});const r=e=>n.find(t=>t.id===e),s=(()=>{const e={Goalkeeper:[],Defender:[],Midfielder:[],Forward:[]};return t.starting11.forEach(t=>{const n=r(t);n&&e[n.position]&&e[n.position].push(n)}),e})(),i=e=>{let{player:t}=e;return(0,xN.jsxs)("div",{className:"bg-green-700 rounded-lg p-2 text-center shadow-lg border-2 border-green-500 min-w-[70px]",children:[(0,xN.jsx)("div",{className:"text-xs font-bold text-white truncate",children:t.name.split(" ").pop()}),(0,xN.jsx)("div",{className:"text-[10px] text-green-200",children:t.position.substring(0,3).toUpperCase()})]})};return(0,xN.jsxs)("div",{className:"bg-gradient-to-b from-green-800 to-green-900 rounded-lg p-4 relative overflow-hidden",children:[(0,xN.jsxs)("div",{className:"absolute inset-0 opacity-20",children:[(0,xN.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-px h-full bg-white"}),(0,xN.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 border-2 border-white rounded-full"})]}),(0,xN.jsxs)("div",{className:"relative space-y-4",children:[s.Forward.length>0&&(0,xN.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Forward.map(e=>(0,xN.jsx)(i,{player:e},e.id))}),s.Midfielder.length>0&&(0,xN.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Midfielder.map(e=>(0,xN.jsx)(i,{player:e},e.id))}),s.Defender.length>0&&(0,xN.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Defender.map(e=>(0,xN.jsx)(i,{player:e},e.id))}),s.Goalkeeper.length>0&&(0,xN.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Goalkeeper.map(e=>(0,xN.jsx)(i,{player:e},e.id))})]}),t.bench&&t.bench.length>0&&(0,xN.jsxs)("div",{className:"mt-4 pt-4 border-t border-green-700",children:[(0,xN.jsx)("div",{className:"text-xs text-green-200 mb-2 font-semibold",children:"Bench"}),(0,xN.jsx)("div",{className:"flex gap-2 flex-wrap",children:t.bench.map(e=>{const t=r(e);return t?(0,xN.jsx)("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-white",children:t.name.split(" ").pop()},t.id):null})})]})]})},_N=()=>{const{matches:e,players:t,teams:n,tournaments:r,lineups:i,loading:a}=kN(),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(null);s.useEffect(()=>{(!o||"All"===o)&&r.length>0&&l("All")},[r,o]);const d=o&&"All"!==o?e.filter(e=>e.competition===o):e,h=o&&"All"!==o?n.filter(e=>(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(o)).map(e=>e.name):null,f=h?t.filter(e=>h.includes(e.team)):t,p=d.filter(e=>"live"===e.status),m=d.filter(e=>"scheduled"===e.status),g=d.filter(e=>"finished"===e.status).slice(0,10),y=[...f].sort((e,t)=>(t.goals||0)-(e.goals||0)).slice(0,5),v=[...f].sort((e,t)=>(t.assists||0)-(e.assists||0)).slice(0,5),b=o&&"All"!==o?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"All";if(!e||0===e.length)return[];const r={};return e.filter(e=>!n||"All"===n||(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(n)).forEach(e=>{r[e.name]={id:e.id,name:e.name,shortName:e.shortName||e.name.substring(0,3).toUpperCase(),played:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,points:0,form:[]}}),t.filter(e=>("All"===n||!n||e.competition===n)&&"finished"===e.status).forEach(e=>{const t=r[e.teamA],n=r[e.teamB];if(!t||!n)return;t.played++,n.played++;const s=Number(e.scoreA),i=Number(e.scoreB);t.goalsFor+=s,t.goalsAgainst+=i,n.goalsFor+=i,n.goalsAgainst+=s,s>i?(t.wins++,t.points+=3,n.losses++,t.form.push("W"),n.form.push("L")):s<i?(n.wins++,n.points+=3,t.losses++,n.form.push("W"),t.form.push("L")):(t.draws++,n.draws++,t.points+=1,n.points+=1,t.form.push("D"),n.form.push("D"))}),Object.values(r).sort((e,t)=>{if(t.points!==e.points)return t.points-e.points;const n=e.goalsFor-e.goalsAgainst,r=t.goalsFor-t.goalsAgainst;return r!==n?r-n:t.goalsFor-e.goalsFor})}(n,e,o):[],x=b.slice(0,5),w=e=>n.find(t=>t.name===e)||{};return a&&0===e.length?(0,xN.jsx)("div",{className:"text-center text-white py-20",children:"Loading Dashboard..."}):(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,xN.jsx)("div",{className:"mb-8 bg-gray-800 p-4 rounded-lg shadow-lg border-l-4 border-green-500",children:(0,xN.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,xN.jsxs)("div",{className:"flex items-center gap-3",children:[(0,xN.jsx)("span",{className:"text-gray-400 font-medium",children:"Tournament Filter:"}),(0,xN.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,xN.jsx)("button",{onClick:()=>l("All"),className:"px-4 py-1.5 rounded-full text-sm font-semibold transition-all shadow-md ".concat("All"===o?"bg-green-600 text-white scale-105":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"All"}),r.map(e=>(0,xN.jsx)("button",{onClick:()=>l(e.name),className:"px-4 py-1.5 rounded-full text-sm font-semibold transition-all shadow-md ".concat(o===e.name?"bg-green-600 text-white scale-105":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.name},e.id))]})]}),(0,xN.jsxs)("div",{className:"text-sm font-medium",children:[(0,xN.jsx)("span",{className:"text-gray-400",children:"Viewing: "}),(0,xN.jsx)("span",{className:"text-green-400",children:"All"===o?"Everything":o})]})]})}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,xN.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[(0,xN.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full mr-2 animate-pulse"}),"Live Matches"]}),(0,xN.jsxs)("div",{className:"space-y-4",children:[p.map(e=>{const n=(r=e.id,i.filter(e=>e.matchId===r));var r;const s=c===e.id;return(0,xN.jsxs)("div",{className:"bg-gray-700 rounded",children:[(0,xN.jsxs)("div",{className:"p-3 flex justify-between items-center",children:[(0,xN.jsxs)("div",{className:"flex-1",children:[(0,xN.jsx)("div",{className:"text-sm text-gray-300",children:e.competition}),(0,xN.jsxs)("div",{className:"font-bold",children:[e.teamA," vs ",e.teamB]}),(e.date||e.time||e.managerA||e.managerB||w(e.teamA).stadium)&&(0,xN.jsxs)("div",{className:"text-[10px] text-gray-400 mt-1 space-y-0.5",children:[(e.date||e.time)&&(0,xN.jsxs)("div",{className:"flex items-center gap-1",children:[(0,xN.jsxs)("span",{children:["\ud83d\udcc5 ",e.date&&new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),e.date&&e.time&&" \u2022 ",(0,xN.jsx)("span",{children:e.time})]}),(0,xN.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(e.managerA||w(e.teamA).manager)&&(0,xN.jsxs)("div",{className:"italic text-blue-400",children:["Mgrs: ",e.managerA||w(e.teamA).manager," vs ",e.managerB||w(e.teamB).manager||"N/A"]}),(e.stadium||w(e.teamA).stadium)&&(0,xN.jsx)("div",{className:"text-gray-500 flex items-center gap-1",children:(0,xN.jsxs)("span",{children:["\ud83c\udfdf\ufe0f ",e.stadium||w(e.teamA).stadium]})})]})]})]}),(0,xN.jsxs)("div",{className:"text-xl font-bold text-green-400 mr-2",children:[e.scoreA," - ",e.scoreB]}),(0,xN.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,xN.jsxs)(Re,{to:"/live/".concat(e.id),className:"flex items-center justify-center gap-1 text-xs bg-green-600 hover:bg-green-500 px-3 py-1.5 rounded-full font-semibold transition-all shadow-md",children:[(0,xN.jsx)("span",{children:"WATCH"}),(0,xN.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})]}),n.length>0&&(0,xN.jsxs)("button",{onClick:()=>u(s?null:e.id),className:"flex items-center justify-center gap-1 text-xs bg-blue-600 hover:bg-blue-500 px-3 py-1.5 rounded-full font-semibold transition-all shadow-md",children:[(0,xN.jsx)("span",{children:s?"HIDE":"LINEUP"}),(0,xN.jsx)("svg",{className:"w-3 h-3 transition-transform ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]})]}),s&&n.length>0&&(0,xN.jsx)("div",{className:"p-3 border-t border-gray-600",children:(0,xN.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(e=>(0,xN.jsxs)("div",{children:[(0,xN.jsx)("h4",{className:"text-sm font-semibold mb-2 text-center",children:e.teamName}),(0,xN.jsx)(CN,{lineup:e,players:t})]},e.id))})})]},e.id)}),0===p.length&&(0,xN.jsx)("div",{className:"text-gray-400 text-sm",children:"No live matches currently."})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,xN.jsx)("h2",{className:"text-xl font-bold mb-4 uppercase tracking-wider text-blue-400",children:"Upcoming Matches"}),(0,xN.jsxs)("div",{className:"max-h-[280px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:[(0,xN.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-700 p-4 rounded flex justify-between items-center border border-transparent hover:border-blue-500 transition-all",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"text-sm text-gray-300",children:e.competition}),(0,xN.jsxs)("div",{className:"font-bold text-white mb-1",children:[e.teamA," vs ",e.teamB]}),(0,xN.jsxs)("div",{className:"text-[10px] text-gray-400 space-y-0.5",children:[(e.date||e.time)&&(0,xN.jsxs)("div",{children:[e.date&&new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),e.date&&e.time&&" \u2022 ",e.time]}),(0,xN.jsxs)("div",{className:"flex flex-col gap-0.5 italic mt-1",children:[(e.managerA||w(e.teamA).manager)&&(0,xN.jsxs)("div",{className:"text-blue-400",children:["Mgrs: ",e.managerA||w(e.teamA).manager," / ",e.managerB||w(e.teamB).manager||"?"]}),(e.stadium||w(e.teamA).stadium)&&(0,xN.jsxs)("div",{className:"text-gray-500",children:["\ud83c\udfdf\ufe0f ",e.stadium||w(e.teamA).stadium]})]})]})]}),(0,xN.jsx)("div",{className:"flex flex-col items-end gap-2 text-right",children:(0,xN.jsx)(Re,{to:"/live/".concat(e.id),className:"flex items-center gap-1 text-[10px] text-gray-300 hover:text-white bg-gray-600 hover:bg-gray-500 px-2.5 py-1 rounded-full transition-all",children:(0,xN.jsx)("span",{children:"Details"})})})]},e.id))}),0===m.length&&(0,xN.jsx)("div",{className:"text-gray-400 text-sm w-full text-center py-4",children:"No upcoming matches scheduled."})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,xN.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Recent Results"}),(0,xN.jsxs)("div",{className:"max-h-[310px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:[(0,xN.jsx)("div",{className:"space-y-3",children:g.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-700 p-4 rounded border border-transparent hover:border-gray-500 transition-all",children:[(0,xN.jsxs)("div",{className:"text-[10px] text-gray-400 mb-1 flex justify-between",children:[(0,xN.jsx)("span",{children:e.competition}),(0,xN.jsx)("span",{children:e.date&&new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,xN.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,xN.jsx)("span",{className:"text-sm font-medium text-white",children:e.teamA}),(0,xN.jsx)("span",{className:"font-bold ".concat(e.scoreA>e.scoreB?"text-green-400":"text-gray-400"),children:e.scoreA})]}),(0,xN.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,xN.jsx)("span",{className:"text-sm font-medium text-white",children:e.teamB}),(0,xN.jsx)("span",{className:"font-bold ".concat(e.scoreB>e.scoreA?"text-green-400":"text-gray-400"),children:e.scoreB})]}),(e.managerA||w(e.teamA).manager||e.stadium||w(e.teamA).stadium)&&(0,xN.jsxs)("div",{className:"text-[9px] text-gray-500 italic mb-2 px-1 flex flex-col gap-0.5",children:[(e.managerA||w(e.teamA).manager)&&(0,xN.jsxs)("div",{children:["Mgrs: ",e.managerA||w(e.teamA).manager," vs ",e.managerB||w(e.teamB).manager||"N/A"]}),(e.stadium||w(e.teamA).stadium)&&(0,xN.jsxs)("div",{className:"not-italic opacity-70",children:["\ud83c\udfdf\ufe0f ",e.stadium||w(e.teamA).stadium]})]}),(0,xN.jsx)("div",{className:"pt-2 border-t border-gray-600 flex justify-center",children:(0,xN.jsx)(Re,{to:"/live/".concat(e.id),className:"text-[10px] font-bold text-gray-400 hover:text-white transition-colors",children:"MATCH REPORT"})})]},e.id))}),0===g.length&&(0,xN.jsx)("div",{className:"text-gray-400 text-sm w-full text-center py-4",children:"No recent results available."})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,xN.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,xN.jsx)("span",{children:"\u26bd"})," Top Scorers"]}),(0,xN.jsxs)("ol",{className:"space-y-2",children:[y.map((e,t)=>(0,xN.jsxs)("li",{className:"flex justify-between items-center border-b border-gray-700 pb-2",children:[(0,xN.jsxs)("span",{className:"flex items-center",children:[(0,xN.jsxs)("span",{className:"font-bold mr-2 text-gray-400",children:[t+1,"."]}),(0,xN.jsx)("span",{className:"text-sm",children:e.name})," ",(0,xN.jsxs)("span",{className:"text-[10px] text-gray-500 ml-1",children:["(",e.team,")"]})]}),(0,xN.jsxs)("span",{className:"font-bold text-yellow-500 text-sm",children:[e.goals||0," Goals"]})]},e.id)),0===y.length&&(0,xN.jsx)("div",{className:"text-gray-400 text-sm",children:"No goal data available."})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,xN.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,xN.jsx)("span",{children:"\ud83c\udfaf"})," Top Assists"]}),(0,xN.jsxs)("ol",{className:"space-y-2",children:[v.map((e,t)=>(0,xN.jsxs)("li",{className:"flex justify-between items-center border-b border-gray-700 pb-2",children:[(0,xN.jsxs)("span",{className:"flex items-center",children:[(0,xN.jsxs)("span",{className:"font-bold mr-2 text-gray-400",children:[t+1,"."]}),(0,xN.jsx)("span",{className:"text-sm",children:e.name})," ",(0,xN.jsxs)("span",{className:"text-[10px] text-gray-500 ml-1",children:["(",e.team,")"]})]}),(0,xN.jsxs)("span",{className:"font-bold text-blue-400 text-sm",children:[e.assists||0," Assists"]})]},e.id)),0===v.length&&(0,xN.jsx)("div",{className:"text-gray-400 text-sm",children:"No assist data available."})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg col-span-full md:col-span-1 min-w-full lg:col-span-3",children:[(0,xN.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[(0,xN.jsx)("div",{className:"flex flex-wrap items-center gap-4",children:(0,xN.jsx)("h2",{className:"text-xl font-bold",children:"Leaderboard"})}),(0,xN.jsx)(Re,{to:"/leaderboard",className:"text-sm text-green-400 hover:text-green-300",children:"View Full"})]}),(0,xN.jsxs)("div",{className:"overflow-x-auto",children:[(0,xN.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,xN.jsx)("thead",{className:"text-gray-400 border-b border-gray-700 uppercase text-xs",children:(0,xN.jsxs)("tr",{children:[(0,xN.jsx)("th",{className:"py-2 px-2",title:"Position",children:"Pos"}),(0,xN.jsx)("th",{className:"py-2 px-2",title:"Team Name",children:"Team"}),(0,xN.jsx)("th",{className:"py-2 px-2 text-center",title:"Played",children:"P"}),(0,xN.jsx)("th",{className:"py-2 px-2 text-center",title:"Won",children:"W"}),(0,xN.jsx)("th",{className:"py-2 px-2 text-center",title:"Drawn",children:"D"}),(0,xN.jsx)("th",{className:"py-2 px-2 text-center",title:"Lost",children:"L"}),(0,xN.jsx)("th",{className:"py-2 px-2 text-center",title:"Goal Difference",children:"GD"}),(0,xN.jsx)("th",{className:"py-2 px-2 text-center font-bold text-white",title:"Points",children:"Pts"})]})}),(0,xN.jsx)("tbody",{className:"divide-y divide-gray-700",children:x.map((e,t)=>{const n=e.goalsFor-e.goalsAgainst;return(0,xN.jsxs)("tr",{className:"hover:bg-gray-700 transition-colors",children:[(0,xN.jsx)("td",{className:"py-3 px-2 text-gray-400",children:t+1}),(0,xN.jsx)("td",{className:"py-3 px-2 font-medium",children:e.name}),(0,xN.jsx)("td",{className:"py-3 px-2 text-center text-gray-300",children:e.played}),(0,xN.jsx)("td",{className:"py-3 px-2 text-center text-gray-300",children:e.wins}),(0,xN.jsx)("td",{className:"py-3 px-2 text-center text-gray-300",children:e.draws}),(0,xN.jsx)("td",{className:"py-3 px-2 text-center text-gray-300",children:e.losses}),(0,xN.jsxs)("td",{className:"py-3 px-2 text-center ".concat(n>0?"text-green-400":n<0?"text-red-400":"text-gray-400"),children:[n>0?"+":"",n]}),(0,xN.jsx)("td",{className:"py-3 px-2 text-center font-bold text-yellow-400",children:e.points})]},e.id)})})]}),"All"===o?(0,xN.jsx)("div",{className:"text-gray-400 text-center py-10",children:(0,xN.jsx)("p",{children:"Select a specific tournament above to view its standings."})}):0===x.length&&(0,xN.jsxs)("div",{className:"text-gray-400 text-center py-6 text-sm",children:["No standings available yet for ",o,"."]})]})]})]})]})},jN=()=>{const{tournaments:e,loading:t}=kN(),{isAdmin:n}=NN();return t&&0===e.length?(0,xN.jsx)("div",{className:"text-center text-white py-20",children:"Loading Tournaments..."}):(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,xN.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,xN.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Tournaments"}),n&&(0,xN.jsxs)(Re,{to:"/admin/tournaments",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded flex items-center",children:[(0,xN.jsx)("span",{className:"mr-2",children:"+"})," Add Tournament"]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(e=>(0,xN.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300",children:(0,xN.jsxs)("div",{className:"p-6",children:[(0,xN.jsx)("div",{className:"flex justify-between items-start",children:(0,xN.jsxs)("div",{children:[(0,xN.jsx)("h2",{className:"text-xl font-bold text-white",children:e.name}),(0,xN.jsx)("div",{className:"mt-2 flex items-center",children:(0,xN.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("ongoing"===e.status?"bg-green-100 text-green-800":"finished"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})}),(0,xN.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("p",{className:"text-gray-400",children:"Start Date"}),(0,xN.jsx)("p",{className:"text-white",children:e.startDate?new Date(e.startDate).toLocaleDateString():"TBD"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("p",{className:"text-gray-400",children:"End Date"}),(0,xN.jsx)("p",{className:"text-white",children:e.endDate?new Date(e.endDate).toLocaleDateString():"TBD"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("p",{className:"text-gray-400",children:"Teams"}),(0,xN.jsx)("p",{className:"text-white",children:e.teamsCount})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("p",{className:"text-gray-400",children:"Matches"}),(0,xN.jsx)("p",{className:"text-white",children:e.matchesCount})]})]}),(0,xN.jsx)("div",{className:"mt-6",children:(0,xN.jsx)(Re,{to:"/leaderboard",className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"View Details"})})]})},e.id)),0===e.length&&(0,xN.jsx)("div",{className:"col-span-full text-center text-gray-400 py-10",children:"No tournaments found."})]})]})},AN=()=>{const{teams:e,loading:t}=kN(),{isAdmin:n}=NN(),[r,i]=(0,s.useState)("");if(t&&0===e.length)return(0,xN.jsx)("div",{className:"text-center text-white py-20",children:"Loading Teams..."});const a=e.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()));return(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,xN.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,xN.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Teams"}),n&&(0,xN.jsxs)(Re,{to:"/admin/teams",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded flex items-center",children:[(0,xN.jsx)("span",{className:"mr-2",children:"+"})," Add Team"]})]}),(0,xN.jsx)("div",{className:"mb-6",children:(0,xN.jsx)("input",{type:"text",placeholder:"Search teams...",className:"bg-gray-700 text-white rounded px-4 py-2 w-full md:w-1/3",value:r,onChange:e=>i(e.target.value)})}),(0,xN.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,xN.jsxs)("div",{className:"p-6 flex items-center space-x-4",children:[(0,xN.jsx)("div",{className:"flex-shrink-0 h-16 w-16 bg-gray-700 rounded-full flex items-center justify-center text-2xl font-bold text-white",children:e.logoUrl?(0,xN.jsx)("img",{src:e.logoUrl,alt:e.name,className:"h-full w-full rounded-full object-cover"}):(0,xN.jsx)("span",{children:e.name.charAt(0)})}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("h2",{className:"text-xl font-bold text-white",children:e.name}),(0,xN.jsxs)("p",{className:"text-gray-400 text-sm",children:[(0,xN.jsx)("span",{className:"text-gray-500 font-semibold uppercase text-xs mr-2",children:"Stadium:"}),e.stadium||"Unknown"]})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-750 px-6 py-3 border-t border-gray-700 flex justify-between items-center",children:[(0,xN.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,xN.jsx)("span",{className:"text-gray-500 font-semibold mr-1",children:"Coach:"}),e.manager||e.coach||"N/A"]}),(0,xN.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full border ".concat("Inactive"===e.status?"bg-gray-900 text-gray-400 border-gray-700":"Suspended"===e.status?"bg-red-900/30 text-red-500 border-red-500/20":"Dissolved"===e.status?"bg-black text-gray-600 border-gray-800":"bg-green-900/30 text-green-400 border-green-500/20"),children:e.status||"Active"})]})]},e.id))}),0===a.length&&(0,xN.jsx)("div",{className:"text-center text-gray-400 py-10",children:"No teams found matching your search."})]})},DN=()=>{const{players:e,loading:t}=kN(),[n,r]=(0,s.useState)("All"),[i,a]=(0,s.useState)(""),{isAdmin:o}=NN(),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)({}),h=(e,t,n)=>{d(r=>Ct(Ct({},r),{},{[e]:Ct(Ct({},r[e]),{},{[t]:Number(n)})}))},f=e.filter(e=>{const t="All"===n||e.position===n,r=e.name.toLowerCase().includes(i.toLowerCase())||e.team.toLowerCase().includes(i.toLowerCase());return t&&r});return t&&0===e.length?(0,xN.jsx)("div",{className:"text-center text-white py-20",children:"Loading Players..."}):(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,xN.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,xN.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Players"}),(0,xN.jsx)("div",{className:"flex items-center gap-4",children:o&&(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsxs)(Re,{to:"/admin/players",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded flex items-center",children:[(0,xN.jsx)("span",{className:"mr-2",children:"+"})," Add Player"]}),l?(0,xN.jsxs)(xN.Fragment,{children:[(0,xN.jsx)("button",{onClick:async()=>{if(window.confirm("Save all changes?"))try{const e=Object.entries(u).map(e=>{let[t,n]=e;return dN(ww(vN,"players",t),n)});await Promise.all(e),d({}),c(!1),alert("Changes saved!")}catch(e){console.error("Save failed:",e),alert("Error saving changes")}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Save Changes"}),(0,xN.jsx)("button",{onClick:()=>{c(!1),d({})},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Cancel"})]}):(0,xN.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Edit Stats"})]})})]}),(0,xN.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,xN.jsx)("input",{type:"text",placeholder:"Search players or teams...",className:"bg-gray-700 text-white rounded px-4 py-2",value:i,onChange:e=>a(e.target.value)}),(0,xN.jsx)("select",{className:"bg-gray-700 text-white rounded px-4 py-2",value:n,onChange:e=>r(e.target.value),children:["All","Forward","Midfielder","Defender","Goalkeeper"].map(e=>(0,xN.jsx)("option",{value:e,children:"All"===e?"All Positions":e},e))})]}),(0,xN.jsxs)("div",{className:"overflow-x-auto bg-gray-800 rounded-lg",children:[(0,xN.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,xN.jsx)("thead",{className:"bg-gray-700",children:(0,xN.jsxs)("tr",{children:[(0,xN.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-300",children:"Player"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-300",children:"Team"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-300",children:"Position"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-center text-xs text-gray-300",children:"Matches"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-center text-xs text-gray-300",children:"Goals"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-center text-xs text-gray-300",children:"Assists"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-center text-xs text-gray-300",children:"Cards"})]})}),(0,xN.jsx)("tbody",{className:"divide-y divide-gray-700",children:f.map(e=>{const t=u[e.id],n=Ct(Ct({},e),t);return(0,xN.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,xN.jsx)("td",{className:"px-6 py-4 text-white",children:e.name}),(0,xN.jsx)("td",{className:"px-6 py-4 text-white",children:e.team}),(0,xN.jsx)("td",{className:"px-6 py-4 text-white",children:e.position}),(0,xN.jsx)("td",{className:"px-6 py-4 text-center ".concat(n.matches>0?"text-white":"text-gray-600"),children:l?(0,xN.jsx)("input",{type:"number",className:"w-16 bg-gray-900 border border-gray-600 rounded px-1 text-white",value:n.matches||0,onChange:t=>h(e.id,"matches",t.target.value)}):n.matches}),(0,xN.jsx)("td",{className:"px-6 py-4 text-center font-bold ".concat(n.goals>0?"text-yellow-400":"text-gray-700"),children:l?(0,xN.jsx)("input",{type:"number",className:"w-16 bg-gray-900 border border-gray-600 rounded px-1 text-white",value:n.goals||0,onChange:t=>h(e.id,"goals",t.target.value)}):n.goals}),(0,xN.jsx)("td",{className:"px-6 py-4 text-center ".concat(n.assists>0?"text-blue-400":"text-gray-700"),children:l?(0,xN.jsx)("input",{type:"number",className:"w-16 bg-gray-900 border border-gray-600 rounded px-1 text-white",value:n.assists||0,onChange:t=>h(e.id,"assists",t.target.value)}):n.assists}),(0,xN.jsx)("td",{className:"px-6 py-4",children:(0,xN.jsxs)("div",{className:"flex justify-center gap-1",children:[Array(n.yellowCards||0).fill(0).map((t,n)=>(0,xN.jsx)("span",{className:"h-4 w-2 bg-yellow-400 rounded-sm"},"yellow-".concat(e.id,"-").concat(n))),Array(n.redCards||0).fill(0).map((t,n)=>(0,xN.jsx)("span",{className:"h-4 w-2 bg-red-500 rounded-sm"},"red-".concat(e.id,"-").concat(n)))]})})]},e.id)})})]}),0===f.length&&(0,xN.jsx)("div",{className:"text-center py-10 text-gray-400",children:"No players found."})]})]})},PN=()=>{const{teams:e,matches:t,tournaments:n,loading:r}=kN(),[i,a]=(0,s.useState)("All"),o=["All",...n.map(e=>e.name)],l=(()=>{if(r||0===e.length)return[];const n={};e.filter(e=>{if("All"===i)return!0;return(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(i)}).forEach(e=>{n[e.name]={id:e.id,name:e.name,shortName:e.shortName||e.name.substring(0,3).toUpperCase(),played:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,points:0,form:[]}});return t.filter(e=>("All"===i||!i||e.competition===i)&&"finished"===e.status).forEach(e=>{const t=n[e.teamA],r=n[e.teamB];if(!t||!r)return;t.played++,r.played++;const s=Number(e.scoreA),i=Number(e.scoreB);t.goalsFor+=s,t.goalsAgainst+=i,r.goalsFor+=i,r.goalsAgainst+=s,s>i?(t.wins++,t.points+=3,r.losses++,t.form.push("W"),r.form.push("L")):s<i?(r.wins++,r.points+=3,t.losses++,r.form.push("W"),t.form.push("L")):(t.draws++,r.draws++,t.points+=1,r.points+=1,t.form.push("D"),r.form.push("D"))}),Object.values(n).sort((e,t)=>{if(t.points!==e.points)return t.points-e.points;const n=e.goalsFor-e.goalsAgainst,r=t.goalsFor-t.goalsAgainst;return r!==n?r-n:t.goalsFor-e.goalsFor})})();return r&&0===e.length?(0,xN.jsx)("div",{className:"text-center text-white py-20",children:"Loading Standings..."}):(0,xN.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,xN.jsxs)("div",{className:"mb-8",children:[(0,xN.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:"Leaderboard"}),(0,xN.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[o.length>1&&o.map(e=>(0,xN.jsx)("button",{onClick:()=>a("All"===e?"All":e),className:"px-4 py-2 rounded-md font-medium ".concat(i===e||"All"===i&&"All"===e?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e},e)),0===n.length&&(0,xN.jsx)("div",{className:"text-gray-400",children:"No tournaments found."})]}),(0,xN.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,xN.jsxs)("div",{className:"overflow-x-auto",children:[(0,xN.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,xN.jsx)("thead",{className:"bg-gray-700",children:(0,xN.jsxs)("tr",{children:[(0,xN.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"#"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Team"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"P"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"W"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"D"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"L"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"GF"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"GA"}),(0,xN.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"GD"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"PTS"}),(0,xN.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Form"})]})}),(0,xN.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:l.map((e,t)=>{const n=e.goalsFor-e.goalsAgainst;return(0,xN.jsxs)("tr",{className:"hover:bg-gray-700 transition-colors",children:[(0,xN.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-300",children:t+1}),(0,xN.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-white font-medium",children:e.name}),(0,xN.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.played}),(0,xN.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.wins}),(0,xN.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.draws}),(0,xN.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.losses}),(0,xN.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.goalsFor}),(0,xN.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.goalsAgainst}),(0,xN.jsxs)("td",{className:"px-3 py-4 text-center font-medium ".concat(n>0?"text-green-400":n<0?"text-red-400":"text-gray-300"),children:[n>0?"+":"",n]}),(0,xN.jsx)("td",{className:"px-6 py-4 text-center font-bold text-yellow-400",children:e.points}),(0,xN.jsx)("td",{className:"px-6 py-4",children:(0,xN.jsx)("div",{className:"flex justify-center space-x-1",children:e.form.slice(-5).map((e,t)=>(0,xN.jsx)("span",{className:"w-5 h-5 flex items-center justify-center rounded-full text-xs text-white ".concat("W"===e?"bg-green-500":"D"===e?"bg-yellow-500":"bg-red-500"),children:e},t))})})]},e.id)})})]}),0===l.length&&(0,xN.jsx)("div",{className:"text-center py-10 text-gray-400",children:"No standings data available. Add teams and finish matches to see them here."})]})})]})})},RN=e=>{var t,n;let{lineup:r,players:i,onSubstitutionComplete:a}=e;const[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1),f=e=>i.find(t=>t.id===e);return(0,xN.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg border-2 border-yellow-500",children:[(0,xN.jsx)("h3",{className:"text-lg font-bold mb-4 text-yellow-400 flex items-center",children:"\ud83d\udd04 Make Substitution"}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Player to Replace (Starting 11)"}),(0,xN.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600",children:[(0,xN.jsx)("option",{value:"",children:"Select player to replace"}),r.starting11.map(e=>{const t=f(e);return t?(0,xN.jsxs)("option",{value:e,children:[t.name," (",t.position,")"]},e):null})]})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Substitute (Bench)"}),(0,xN.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600",children:[(0,xN.jsx)("option",{value:"",children:"Select substitute"}),r.bench&&r.bench.map(e=>{const t=f(e);return t?(0,xN.jsxs)("option",{value:e,children:[t.name," (",t.position,")"]},e):null})]})]})]}),o&&c&&(0,xN.jsx)("div",{className:"bg-gray-700 p-3 rounded mb-4 text-sm",children:(0,xN.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,xN.jsxs)("span",{className:"text-red-400",children:["\u2b07\ufe0f ",null===(t=f(o))||void 0===t?void 0:t.name]}),(0,xN.jsx)("span",{className:"text-gray-400",children:"\u2192"}),(0,xN.jsxs)("span",{className:"text-green-400",children:["\u2b06\ufe0f ",null===(n=f(c))||void 0===n?void 0:n.name]})]})}),(0,xN.jsx)("button",{onClick:async()=>{if(o&&c){h(!0);try{const t=f(o),n=f(c),s=r.starting11.map(e=>e===o?c:e),i=r.bench.map(e=>e===c?o:e);if(await dN(ww(vN,"lineups",r.id),{starting11:s,bench:i,lastSubstitution:{playerOut:o,playerIn:c,playerOutName:null===t||void 0===t?void 0:t.name,playerInName:null===n||void 0===n?void 0:n.name,timestamp:new Date}}),r.matchId)try{await fN(xw(vN,"matches",r.matchId,"events"),{type:"substitution",team:r.teamName,playerOut:(null===t||void 0===t?void 0:t.name)||"Unknown",playerIn:(null===n||void 0===n?void 0:n.name)||"Unknown",minute:(new Date).getMinutes(),timestamp:new Date})}catch(e){console.error("Error adding substitution event:",e)}l(""),u(""),a&&a(),alert("Substitution: ".concat(null===t||void 0===t?void 0:t.name," \u27a1\ufe0f ").concat(null===n||void 0===n?void 0:n.name))}catch(e){console.error("Error making substitution:",e),alert("Error making substitution: "+e.message)}finally{h(!1)}}else alert("Please select both a player to replace and a substitute")},disabled:!o||!c||d,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded transition-colors",children:d?"Making Substitution...":"Confirm Substitution"}),(0,xN.jsx)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"This will swap the selected players between starting 11 and bench"})]})},ON=()=>{const{matchId:e}=function(){let{matches:e}=s.useContext(J),t=e[e.length-1];return t?t.params:{}}(),[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[p,m]=(0,s.useState)(!0),[g,y]=(0,s.useState)(""),{isAdmin:v}=NN(),{players:b,lineups:x,teams:w}=kN();(0,s.useEffect)(()=>{const t=pN(ww(vN,"matches",e),e=>{e.exists()?(n(Ct({id:e.id},e.data())),m(!1)):(y("Match not found"),m(!1))},e=>{console.error("Error getting match:",e),y("Error loading match data"),m(!1)}),r=pN(xw(vN,"matches",e,"events"),e=>{const t=[];e.forEach(e=>{t.push(Ct({id:e.id},e.data()))}),i(t.sort((e,t)=>t.minute-e.minute))},e=>{console.error("Error getting events:",e)});return()=>{t(),r()}},[e]),(0,s.useEffect)(()=>{if(e&&x){const t=x.filter(t=>t.matchId===e);o(t)}},[e,x]);const N=async(n,r)=>{const s="A"===n?"scoreA":"scoreB",i=(t[s]||0)+1;try{if(await dN(ww(vN,"matches",e),{[s]:i}),await fN(xw(vN,"matches",e,"events"),{type:"goal",team:"A"===n?t.teamA:t.teamB,minute:t.currentMinute||0,player:r?r.name:"Unknown Player",playerId:r?r.id:null,timestamp:Date.now()}),r&&r.id){const e=ww(vN,"players",r.id),t=b.find(e=>e.id===r.id);await dN(e,{goals:((null===t||void 0===t?void 0:t.goals)||0)+1})}d(null)}catch(a){console.error("Error recording goal:",a),alert("Error recording goal. Check console.")}},S=async(n,r)=>{if(r>0)return void(e=>{d({team:e})})(n);if(r<0)return void(e=>{f({team:e})})(n);const s="A"===n?"scoreA":"scoreB",i=(t[s]||0)+r;if(!(i<0))try{await dN(ww(vN,"matches",e),{[s]:i})}catch(a){console.error("Error updating score:",a)}},E=async n=>{const r=(t.currentMinute||0)+n;if(!(r<0))try{await dN(ww(vN,"matches",e),{currentMinute:r})}catch(s){console.error("Error updating minute:",s)}};return p?(0,xN.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,xN.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):g?(0,xN.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:[(0,xN.jsx)("p",{className:"font-bold",children:"Error"}),(0,xN.jsx)("p",{children:g})]}):t?(0,xN.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,xN.jsxs)("div",{className:"max-w-4xl mx-auto",children:[v&&(0,xN.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 border border-green-600",children:[(0,xN.jsx)("h3",{className:"text-green-400 font-bold mb-2",children:"Admin Controls (Live Updates)"}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,xN.jsxs)("div",{className:"p-2 border border-gray-600 rounded",children:[(0,xN.jsx)("p",{className:"text-white mb-2",children:t.teamA}),(0,xN.jsx)("button",{onClick:()=>S("A",1),className:"bg-green-600 text-white px-3 py-1 rounded mx-1 hover:bg-green-700",children:"+ Goal"}),(0,xN.jsx)("button",{onClick:()=>S("A",-1),className:"bg-red-600 text-white px-3 py-1 rounded mx-1 hover:bg-red-700",children:"- Goal"})]}),(0,xN.jsxs)("div",{className:"p-2 border border-gray-600 rounded",children:[(0,xN.jsxs)("p",{className:"text-white mb-2",children:["Minute: ",t.currentMinute,"'"]}),(0,xN.jsx)("button",{onClick:()=>E(-1),className:"bg-red-600 text-white px-3 py-1 rounded mx-1 hover:bg-red-700",children:"-1 Min"}),(0,xN.jsx)("button",{onClick:()=>E(1),className:"bg-blue-600 text-white px-3 py-1 rounded mx-1 hover:bg-blue-700",children:"+1 Min"}),(0,xN.jsx)("button",{onClick:()=>E(5),className:"bg-blue-600 text-white px-3 py-1 rounded mx-1 hover:bg-blue-700",children:"+5 Min"}),(0,xN.jsx)("div",{className:"mt-2",children:(0,xN.jsx)("button",{onClick:async()=>{const n="live"===t.status?"finished":"live";try{await dN(ww(vN,"matches",e),{status:n})}catch(r){console.error("Error updating status:",r)}},className:"px-4 py-1 rounded text-white ".concat("live"===t.status?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"),children:"live"===t.status?"End Match":"Start Match"})})]}),(0,xN.jsxs)("div",{className:"p-2 border border-gray-600 rounded",children:[(0,xN.jsx)("p",{className:"text-white mb-2",children:t.teamB}),(0,xN.jsx)("button",{onClick:()=>S("B",1),className:"bg-green-600 text-white px-3 py-1 rounded mx-1 hover:bg-green-700",children:"+ Goal"}),(0,xN.jsx)("button",{onClick:()=>S("B",-1),className:"bg-red-600 text-white px-3 py-1 rounded mx-1 hover:bg-red-700",children:"- Goal"})]})]}),u&&(0,xN.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg border border-yellow-500 shadow-xl",children:[(0,xN.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,xN.jsxs)("h4",{className:"text-yellow-400 font-bold uppercase tracking-wider",children:["Select Scorer for ","A"===u.team?t.teamA:t.teamB]}),(0,xN.jsx)("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-white",children:(0,xN.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:[b.filter(e=>e.team===("A"===u.team?t.teamA:t.teamB)).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,xN.jsx)("button",{onClick:()=>N(u.team,e),className:"bg-gray-600 hover:bg-green-600 text-white text-xs py-2 px-3 rounded transition-colors text-left truncate",title:e.name,children:e.name},e.id)),(0,xN.jsx)("button",{onClick:()=>N(u.team,null),className:"bg-gray-500 hover:bg-gray-400 text-white text-xs py-2 px-3 rounded transition-colors",children:"Unknown Player"})]})]}),h&&(0,xN.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg border border-red-500 shadow-xl",children:[(0,xN.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,xN.jsxs)("h4",{className:"text-red-400 font-bold uppercase tracking-wider",children:["Cancel Goal for ","A"===h.team?t.teamA:t.teamB]}),(0,xN.jsx)("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-white",children:(0,xN.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,xN.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,xN.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:r.filter(e=>"goal"===e.type&&e.team===("A"===h.team?t.teamA:t.teamB)).length>0?r.filter(e=>"goal"===e.type&&e.team===("A"===h.team?t.teamA:t.teamB)).map(n=>(0,xN.jsxs)("div",{className:"flex justify-between items-center bg-gray-600 p-2 rounded",children:[(0,xN.jsxs)("span",{className:"text-sm text-white",children:[n.player," (",n.minute,"')"]}),(0,xN.jsx)("button",{onClick:()=>(async n=>{const r="A"===(n.team===t.teamA?"A":"B")?"scoreA":"scoreB",s=Math.max(0,(t[r]||0)-1);try{if(await dN(ww(vN,"matches",e),{[r]:s}),await hN(ww(vN,"matches",e,"events",n.id)),n.playerId){const e=ww(vN,"players",n.playerId),t=b.find(e=>e.id===n.playerId);t&&await dN(e,{goals:Math.max(0,(t.goals||0)-1)})}f(null)}catch(i){console.error("Error cancelling goal:",i),alert("Error cancelling goal. Check console.")}})(n),className:"bg-red-600 hover:bg-red-700 text-white text-[10px] py-1 px-3 rounded font-bold uppercase transition-colors",children:"Revoke"})]},n.id)):(0,xN.jsx)("div",{className:"text-center text-gray-400 py-4 text-sm",children:"No goal events found to cancel."})})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-t-lg p-6 text-center shadow-lg border-b border-gray-700",children:[(0,xN.jsxs)("div",{className:"text-sm text-gray-400 mb-2 uppercase tracking-[0.2em]",children:[t.competition," \u2022 ","live"===t.status?"Live":"Finished"]}),(0,xN.jsx)("div",{className:"text-[11px] text-gray-500 mb-4 flex items-center justify-center gap-1",children:(0,xN.jsxs)("span",{children:["\ud83c\udfdf\ufe0f ",t.stadium||(I=t.teamA,(w||[]).find(e=>e.name===I)||{}).stadium||"Unknown Stadium"]})}),(0,xN.jsxs)("div",{className:"flex items-start justify-center space-x-4",children:[(0,xN.jsxs)("div",{className:"flex-1 text-right",children:[(0,xN.jsx)("div",{className:"text-2xl font-bold text-white",children:t.teamA}),(0,xN.jsxs)("div",{className:"text-xs text-gray-400 mb-3 italic",children:["Manager: ",t.managerA||"N/A"]}),(0,xN.jsx)("div",{className:"space-y-1",children:r.filter(e=>"goal"===e.type&&e.team===t.teamA).sort((e,t)=>e.minute-t.minute).map((e,t)=>(0,xN.jsxs)("div",{className:"text-[11px] text-gray-300 flex items-center justify-end gap-1.5",children:[(0,xN.jsx)("span",{children:e.player}),(0,xN.jsxs)("span",{className:"text-gray-500 font-mono",children:[e.minute,"'"]}),(0,xN.jsx)("span",{className:"text-yellow-500",children:"\u26bd"})]},t))})]}),(0,xN.jsxs)("div",{className:"mx-6 text-center min-w-[120px]",children:[(0,xN.jsxs)("div",{className:"text-6xl font-black text-white tracking-tighter mb-2",children:[t.scoreA," - ",t.scoreB]}),(0,xN.jsx)("div",{className:"text-sm",children:"live"===t.status?(0,xN.jsxs)("div",{className:"inline-flex items-center gap-2 bg-red-900/30 text-red-500 px-3 py-1 rounded-full font-bold border border-red-500/20",children:[(0,xN.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,xN.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,xN.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),t.currentMinute,"'"]}):(0,xN.jsx)("span",{className:"bg-gray-700 text-gray-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest",children:"Full Time"})})]}),(0,xN.jsxs)("div",{className:"flex-1 text-left",children:[(0,xN.jsx)("div",{className:"text-2xl font-bold text-white",children:t.teamB}),(0,xN.jsxs)("div",{className:"text-xs text-gray-400 mb-3 italic",children:["Manager: ",t.managerB||"N/A"]}),(0,xN.jsx)("div",{className:"space-y-1",children:r.filter(e=>"goal"===e.type&&e.team===t.teamB).sort((e,t)=>e.minute-t.minute).map((e,t)=>(0,xN.jsxs)("div",{className:"text-[11px] text-gray-300 flex items-center justify-start gap-1.5",children:[(0,xN.jsx)("span",{className:"text-yellow-500",children:"\u26bd"}),(0,xN.jsx)("span",{children:e.player}),(0,xN.jsxs)("span",{className:"text-gray-500 font-mono",children:[e.minute,"'"]})]},t))})]})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-700 p-4 grid grid-cols-3 gap-4 text-center text-sm",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"font-medium",children:"Possession"}),(0,xN.jsxs)("div",{className:"flex items-center justify-center mt-1",children:[(0,xN.jsxs)("span",{className:"w-10 text-right",children:[t.possessionA||50,"%"]}),(0,xN.jsx)("div",{className:"mx-2 w-32 h-2 bg-gray-600 rounded-full overflow-hidden",children:(0,xN.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(t.possessionA||50,"%")}})}),(0,xN.jsxs)("span",{className:"w-10 text-left",children:[t.possessionB||50,"%"]})]})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"font-medium",children:"Shots"}),(0,xN.jsxs)("div",{children:[t.shotsA||0," - ",t.shotsB||0]})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"font-medium",children:"Shots on Target"}),(0,xN.jsxs)("div",{children:[t.shotsOnTargetA||0," - ",t.shotsOnTargetB||0]})]})]}),a.length>0&&(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 mt-6 rounded-lg",children:[(0,xN.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Team Lineups"}),(0,xN.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(e=>(0,xN.jsxs)("div",{className:"space-y-4",children:[(0,xN.jsxs)("div",{className:"flex justify-between items-center",children:[(0,xN.jsx)("h4",{className:"text-lg font-semibold",children:e.teamName}),v&&"live"===t.status&&(0,xN.jsx)("button",{onClick:()=>c(l===e.id?null:e.id),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded text-sm",children:l===e.id?"Hide Substitution":"\ud83d\udd04 Make Substitution"})]}),v&&l===e.id&&(0,xN.jsx)(RN,{lineup:e,players:b,onSubstitutionComplete:()=>c(null)}),(0,xN.jsx)(CN,{lineup:e,players:b})]},e.id))})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 rounded-b-lg p-6",children:[(0,xN.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Match Events"}),r.length>0?(0,xN.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,xN.jsxs)("div",{className:"flex items-center p-3 bg-gray-700 rounded-lg",children:[(0,xN.jsxs)("div",{className:"w-16 text-center text-sm text-gray-400",children:[e.minute,"'"]}),(0,xN.jsxs)("div",{className:"flex-1",children:["goal"===e.type&&(0,xN.jsxs)("div",{className:"flex items-center",children:[(0,xN.jsx)("span",{className:"text-green-400 mr-2",children:"\u26bd"}),(0,xN.jsx)("span",{className:"font-medium",children:e.player}),(0,xN.jsxs)("span",{className:"text-gray-400 ml-2",children:["scores for ",e.team]})]}),"substitution"===e.type&&(0,xN.jsxs)("div",{className:"flex items-center",children:[(0,xN.jsx)("span",{className:"text-yellow-400 mr-2",children:"\ud83d\udd04"}),(0,xN.jsxs)("span",{className:"text-gray-200",children:[(0,xN.jsxs)("span",{className:"text-red-400",children:["\u2b07\ufe0f ",e.playerOut]}),(0,xN.jsx)("span",{className:"mx-2 text-gray-500",children:"\u2192"}),(0,xN.jsxs)("span",{className:"text-green-400",children:["\u2b06\ufe0f ",e.playerIn]})]}),(0,xN.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.team,")"]})]})]})]},e.id))}):(0,xN.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No events to display"})]})]})}):(0,xN.jsx)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4",role:"alert",children:(0,xN.jsx)("p",{children:"Match data not available"})});var I},LN=()=>{var e,t;const[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),{login:d}=NN(),h=re(),f=(null===(e=te().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return(0,xN.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,xN.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Sign in to your account"}),(0,xN.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",(0,xN.jsx)(Re,{to:"/",className:"font-medium text-green-500 hover:text-green-400",children:"continue as guest"})]})]}),o&&(0,xN.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",role:"alert",children:[(0,xN.jsx)("p",{className:"font-bold",children:"Error"}),(0,xN.jsx)("p",{children:o})]}),(0,xN.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault();try{l(""),u(!0),await d(n,i),h(f,{replace:!0})}catch(t){l("Failed to sign in: "+t.message),console.error(t)}u(!1)},children:[(0,xN.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"}),(0,xN.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,xN.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:n,onChange:e=>r(e.target.value)})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,xN.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Password",value:i,onChange:e=>a(e.target.value)})]})]}),(0,xN.jsxs)("div",{className:"flex items-center justify-between",children:[(0,xN.jsxs)("div",{className:"flex items-center",children:[(0,xN.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-600 rounded"}),(0,xN.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-300",children:"Remember me"})]}),(0,xN.jsx)("div",{className:"text-sm",children:(0,xN.jsx)("a",{href:"#",className:"font-medium text-green-500 hover:text-green-400",children:"Forgot your password?"})})]}),(0,xN.jsx)("div",{children:(0,xN.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:c?"Signing in...":"Sign in"})}),(0,xN.jsx)("div",{className:"text-center mt-4",children:(0,xN.jsxs)("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",(0,xN.jsx)(Re,{to:"/signup",className:"font-medium text-green-500 hover:text-green-400",children:"Sign up"})]})})]})]})})},MN=()=>{const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),{signup:d}=NN(),h=re();return(0,xN.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,xN.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Create a new account"}),(0,xN.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",(0,xN.jsx)(Re,{to:"/login",className:"font-medium text-green-500 hover:text-green-400",children:"Sign in"})]})]}),o&&(0,xN.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",role:"alert",children:[(0,xN.jsx)("p",{className:"font-bold",children:"Error"}),(0,xN.jsx)("p",{children:o})]}),(0,xN.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),n!==i)return l("Passwords do not match");try{l(""),u(!0),await d(e,n),h("/")}catch(r){l("Failed to create an account: "+r.message),console.error(r)}u(!1)},children:[(0,xN.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,xN.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,xN.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:e=>r(e.target.value)})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),(0,xN.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:i,onChange:e=>a(e.target.value)})]})]}),(0,xN.jsx)("div",{children:(0,xN.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:c?"Creating account...":"Sign up"})})]})]})})},FN=()=>(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,xN.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,xN.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"})}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,xN.jsxs)(Re,{to:"/admin/matches",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,xN.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Matches"}),(0,xN.jsx)("p",{className:"text-gray-400",children:"Update live scores and match details"})]}),(0,xN.jsxs)(Re,{to:"/admin/teams",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,xN.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Teams"}),(0,xN.jsx)("p",{className:"text-gray-400",children:"Add, edit, and remove teams"})]}),(0,xN.jsxs)(Re,{to:"/admin/players",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,xN.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Players"}),(0,xN.jsx)("p",{className:"text-gray-400",children:"Update player stats and info"})]}),(0,xN.jsxs)(Re,{to:"/admin/lineups",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,xN.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"\u26bd Manage Lineups"}),(0,xN.jsx)("p",{className:"text-gray-400",children:"Set starting 11 and bench players for matches"})]}),(0,xN.jsxs)(Re,{to:"/admin/tournaments",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,xN.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Tournaments"}),(0,xN.jsx)("p",{className:"text-gray-400",children:"Create and manage tournaments"})]})]})]}),UN=()=>{const{matches:e,teams:t,tournaments:n}=kN(),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)({teamA:"",teamB:"",scoreA:0,scoreB:0,status:"scheduled",currentMinute:0,competition:"",date:"",time:"",managerA:"",managerB:""}),[l,c]=(0,s.useState)(""),u=()=>a.competition?t.filter(e=>(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(a.competition)):[],[d,h]=(0,s.useState)(null),f=e=>{const{name:n,value:r}=e.target;o(e=>{const s=Ct({},e);if(s[n]=n.includes("score")||"currentMinute"===n?parseInt(r)||0:r,"competition"===n&&(s.teamA="",s.teamB="",s.managerA="",s.managerB=""),"teamA"===n&&r){const e=t.find(e=>e.name===r);e&&(s.managerA=e.manager||"")}if("teamB"===n&&r){const e=t.find(e=>e.name===r);e&&(s.managerB=e.manager||"")}return s})},p=e=>{o(Ct(Ct({},e),{},{managerA:e.managerA||"",managerB:e.managerB||""})),h(e.id),c("")},m=async(t,n,r)=>{const s=e.find(e=>e.id===t);if(!s)return;const i="A"===n?(s.scoreA||0)+r:(s.scoreB||0)+r;if(!(i<0))try{await dN(ww(vN,"matches",t),{["A"===n?"scoreA":"scoreB"]:i})}catch(a){console.error("Error updating score: ",a)}},g=e.filter(e=>"live"===e.status),y=e.filter(e=>"live"!==e.status);return(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,xN.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Matches"}),l&&(0,xN.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:l}),g.length>0&&(0,xN.jsxs)("div",{className:"mb-8 p-4 bg-gray-800 rounded-lg border border-green-500",children:[(0,xN.jsxs)("h3",{className:"text-xl font-bold mb-4 text-green-400 flex items-center",children:[(0,xN.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Matches Control"]}),(0,xN.jsx)("div",{className:"grid gap-4",children:g.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-700 p-4 rounded flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,xN.jsxs)("div",{className:"text-center md:text-left flex-1",children:[(0,xN.jsxs)("div",{className:"font-medium text-gray-300",children:[e.competition," - ",e.currentMinute,"'"]}),(0,xN.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-4 text-2xl font-bold mt-2",children:[(0,xN.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,xN.jsx)("span",{children:e.teamA}),(0,xN.jsxs)("div",{className:"flex items-center gap-2",children:[(0,xN.jsx)("button",{onClick:()=>m(e.id,"A",-1),className:"w-8 h-8 rounded bg-gray-600 hover:bg-gray-500 text-sm",children:"-"}),(0,xN.jsx)("span",{children:e.scoreA}),(0,xN.jsx)("button",{onClick:()=>m(e.id,"A",1),className:"w-8 h-8 rounded bg-green-600 hover:bg-green-500 text-sm",children:"+"})]})]}),(0,xN.jsx)("span",{className:"text-gray-400",children:"vs"}),(0,xN.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,xN.jsx)("span",{children:e.teamB}),(0,xN.jsxs)("div",{className:"flex items-center gap-2",children:[(0,xN.jsx)("button",{onClick:()=>m(e.id,"B",-1),className:"w-8 h-8 rounded bg-gray-600 hover:bg-gray-500 text-sm",children:"-"}),(0,xN.jsx)("span",{children:e.scoreB}),(0,xN.jsx)("button",{onClick:()=>m(e.id,"B",1),className:"w-8 h-8 rounded bg-green-600 hover:bg-green-500 text-sm",children:"+"})]})]})]})]}),(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsx)("button",{onClick:()=>p(e),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm",children:"Edit Info"}),(0,xN.jsx)("button",{onClick:()=>(async(e,t)=>{try{await dN(ww(vN,"matches",e),{status:t}),c("Match marked as ".concat(t,"!")),setTimeout(()=>c(""),3e3)}catch(n){console.error("Error updating status: ",n)}})(e.id,"finished"),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm",children:"End Match"})]})]},e.id))})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:d?"Edit Match":"Add New Match"}),(0,xN.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(!0),c("");(d?dN(ww(vN,"matches",d),a):fN(xw(vN,"matches"),a)).catch(e=>{console.error("Error saving match: ",e),alert("Error saving: "+e.message)}),c(d?"Match updated successfully!":"Match added successfully!"),o({teamA:"",teamB:"",scoreA:0,scoreB:0,status:"scheduled",currentMinute:0,competition:"",date:"",time:"",managerA:"",managerB:""}),h(null),window.scrollTo(0,0),setTimeout(()=>c(""),3e3),i(!1)},className:"grid grid-cols-1 gap-4",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Competition / Tournament"}),(0,xN.jsxs)("select",{name:"competition",value:a.competition,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,xN.jsx)("option",{value:"",disabled:!0,children:"Select Competition"}),n.map(e=>(0,xN.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Home Team"}),(0,xN.jsxs)("select",{name:"teamA",value:a.teamA,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,xN.jsx)("option",{value:"",disabled:!0,children:"Select Home Team"}),u().map(e=>(0,xN.jsx)("option",{value:e.name,disabled:e.name===a.teamB,children:e.name},e.id))]}),(0,xN.jsx)("input",{type:"text",name:"managerA",placeholder:"Home Manager",value:a.managerA||"",onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full mt-2 text-sm"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Away Team"}),(0,xN.jsxs)("select",{name:"teamB",value:a.teamB,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,xN.jsx)("option",{value:"",disabled:!0,children:"Select Away Team"}),u().map(e=>(0,xN.jsx)("option",{value:e.name,disabled:e.name===a.teamA,children:e.name},e.id))]}),(0,xN.jsx)("input",{type:"text",name:"managerB",placeholder:"Away Manager",value:a.managerB||"",onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full mt-2 text-sm"})]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Match Date"}),(0,xN.jsx)("input",{type:"date",name:"date",value:a.date,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Match Time"}),(0,xN.jsx)("input",{type:"time",name:"time",value:a.time,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,xN.jsxs)("div",{className:"w-full",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Home Score"}),(0,xN.jsx)("input",{type:"number",name:"scoreA",placeholder:"0",value:a.scoreA,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{className:"w-full",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Away Score"}),(0,xN.jsx)("input",{type:"number",name:"scoreB",placeholder:"0",value:a.scoreB,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Match Status"}),(0,xN.jsxs)("select",{name:"status",value:a.status,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",children:[(0,xN.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,xN.jsx)("option",{value:"live",children:"Live"}),(0,xN.jsx)("option",{value:"finished",children:"Finished"})]})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Current Minute"}),(0,xN.jsx)("input",{type:"number",name:"currentMinute",placeholder:"0'",value:a.currentMinute,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,xN.jsx)("button",{type:"submit",disabled:r,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(r?"opacity-50 cursor-not-allowed":""),children:r?"Saving...":d?"Update Match":"Add Match"}),d&&(0,xN.jsx)("button",{type:"button",onClick:()=>{h(null),o({teamA:"",teamB:"",scoreA:0,scoreB:0,status:"scheduled",currentMinute:0,competition:"",date:"",time:""})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,xN.jsx)("h3",{className:"text-xl font-bold mb-4",children:"All Matches"}),(0,xN.jsxs)("div",{className:"grid gap-4",children:[y.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex justify-between items-center",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsxs)("div",{className:"font-bold text-lg",children:[e.teamA," ",(0,xN.jsx)("span",{className:"text-green-400",children:e.scoreA})," - ",(0,xN.jsx)("span",{className:"text-green-400",children:e.scoreB})," ",e.teamB]}),(0,xN.jsxs)("div",{className:"text-sm text-gray-400",children:[e.competition," \u2022 ",e.status," ","live"===e.status&&"\u2022 ".concat(e.currentMinute,"'")]})]}),(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsx)("button",{onClick:()=>p(e),className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm",children:"Edit"}),(0,xN.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this match?"))try{await hN(ww(vN,"matches",e)),c("Match deleted successfully!"),setTimeout(()=>c(""),3e3)}catch(t){console.error("Error deleting match: ",t)}})(e.id),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm",children:"Delete"})]})]},e.id)),0===y.length&&!r&&(0,xN.jsx)("p",{className:"text-center text-gray-400",children:"No scheduled or finished matches found."})]})]})},VN=()=>{const{teams:e,tournaments:t}=kN(),[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)({name:"",shortName:"",founded:"",stadium:"",manager:"",status:"Active",players:0,tournaments:[]}),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(""),d=e=>{const{name:t,value:n}=e.target;a(e=>Ct(Ct({},e),{},{[t]:"founded"===t||"players"===t?Number(n):n}))};return(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,xN.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Teams"}),c&&(0,xN.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:c}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:o?"Edit Team":"Add New Team"}),(0,xN.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(!0),u("");const t=Ct(Ct({},i),{},{tournaments:Array.isArray(i.tournaments)?i.tournaments:[]});(o?dN(ww(vN,"teams",o),t):fN(xw(vN,"teams"),t)).catch(e=>{console.error("Error saving team: ",e),alert("Error saving team: "+e.message),u("")}),u(o?"Team updated successfully!":"Team added successfully!"),a({name:"",shortName:"",founded:"",stadium:"",manager:"",status:"Active",players:0,tournaments:[]}),l(null),window.scrollTo(0,0),setTimeout(()=>u(""),3e3),r(!1)},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Team Name"}),(0,xN.jsx)("input",{type:"text",name:"name",placeholder:"Team Name",value:i.name,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Short Name"}),(0,xN.jsx)("input",{type:"text",name:"shortName",placeholder:"e.g. MUN",value:i.shortName,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Founded Year"}),(0,xN.jsx)("input",{type:"number",name:"founded",placeholder:"Year",value:i.founded,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Stadium"}),(0,xN.jsx)("input",{type:"text",name:"stadium",placeholder:"Stadium",value:i.stadium,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Manager Name"}),(0,xN.jsx)("input",{type:"text",name:"manager",placeholder:"Manager's Name",value:i.manager||"",onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Squad Size"}),(0,xN.jsx)("input",{type:"number",name:"players",placeholder:"0",value:i.players,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Team Status"}),(0,xN.jsxs)("select",{name:"status",value:i.status||"Active",onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",children:[(0,xN.jsx)("option",{value:"Active",children:"Active"}),(0,xN.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,xN.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,xN.jsx)("option",{value:"Dissolved",children:"Dissolved"})]})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Participating Tournaments"}),(0,xN.jsxs)("div",{className:"flex flex-wrap gap-2 bg-gray-700 p-2 rounded min-h-[42px] items-center",children:[t.map(e=>(0,xN.jsx)("button",{type:"button",onClick:()=>{return t=e.name,void a(e=>{const n=Array.isArray(e.tournaments)?e.tournaments:[];return n.includes(t)?Ct(Ct({},e),{},{tournaments:n.filter(e=>e!==t)}):Ct(Ct({},e),{},{tournaments:[...n,t]})});var t},className:"text-xs px-2 py-1 rounded transition-colors ".concat(Array.isArray(i.tournaments)&&i.tournaments.includes(e.name)?"bg-green-600 text-white shadow-sm":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:e.name},e.id)),0===t.length&&(0,xN.jsx)("span",{className:"text-gray-500 text-xs italic",children:"No tournaments available. Create one first."})]})]}),(0,xN.jsx)("button",{type:"submit",disabled:n,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":o?"Update Team":"Add Team"}),o&&(0,xN.jsx)("button",{type:"button",onClick:()=>{l(null),a({name:"",shortName:"",founded:"",stadium:"",manager:"",status:"Active",players:0,tournaments:""})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex justify-between items-center",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsxs)("div",{className:"font-bold text-lg",children:[e.name," (",e.shortName,")"]}),(0,xN.jsxs)("div",{className:"text-sm text-gray-400",children:["Stadium: ",e.stadium," \u2022 Manager: ",e.manager||"N/A"]})]}),(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsx)("button",{onClick:()=>(e=>{a(Ct(Ct({},e),{},{tournaments:Array.isArray(e.tournaments)?e.tournaments:[]})),l(e.id),u("")})(e),className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm",children:"Edit"}),(0,xN.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this team?"))try{await hN(ww(vN,"teams",e)),u("Team deleted successfully!"),setTimeout(()=>u(""),3e3)}catch(t){console.error("Error deleting team: ",t)}})(e.id),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm",children:"Delete"})]})]},e.id)),0===e.length&&!n&&(0,xN.jsx)("p",{className:"text-center text-gray-400 col-span-full",children:"No teams found."})]})]})},BN=()=>{const{players:e,teams:t}=kN(),[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)({name:"",team:"",position:"Forward",nationality:"",age:"",matches:0,goals:0,assists:0,yellowCards:0,redCards:0}),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(""),d=e=>{const{name:t,value:n}=e.target,r=["age","matches","goals","assists","yellowCards","redCards"];a(e=>Ct(Ct({},e),{},{[t]:r.includes(t)?Number(n):n}))};return(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,xN.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Players"}),c&&(0,xN.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:c}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:o?"Edit Player":"Add New Player"}),(0,xN.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(!0),u("");(o?dN(ww(vN,"players",o),i):fN(xw(vN,"players"),i)).catch(e=>{console.error("Error saving player: ",e),alert("Error saving player: "+e.message)}),u(o?"Player updated successfully!":"Player added successfully!"),a({name:"",team:"",position:"Forward",nationality:"",age:"",matches:0,goals:0,assists:0,yellowCards:0,redCards:0}),l(null),window.scrollTo(0,0),setTimeout(()=>u(""),3e3),r(!1)},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,xN.jsxs)("div",{className:"md:col-span-2",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Player Name"}),(0,xN.jsx)("input",{type:"text",name:"name",placeholder:"Full Name",value:i.name,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Team"}),(0,xN.jsxs)("select",{name:"team",value:i.team,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,xN.jsx)("option",{value:"",disabled:!0,children:"Select Team"}),t.map(e=>(0,xN.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Position"}),(0,xN.jsx)("select",{name:"position",value:i.position,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",children:["Forward","Midfielder","Defender","Goalkeeper"].map(e=>(0,xN.jsx)("option",{value:e,children:e},e))})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Nationality"}),(0,xN.jsx)("input",{type:"text",name:"nationality",placeholder:"Nationality",value:i.nationality,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Age"}),(0,xN.jsx)("input",{type:"number",name:"age",placeholder:"0",value:i.age,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Matches"}),(0,xN.jsx)("input",{type:"number",name:"matches",placeholder:"0",value:i.matches,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Goals"}),(0,xN.jsx)("input",{type:"number",name:"goals",placeholder:"0",value:i.goals,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Assists"}),(0,xN.jsx)("input",{type:"number",name:"assists",placeholder:"0",value:i.assists,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Yellow Cards"}),(0,xN.jsx)("input",{type:"number",name:"yellowCards",placeholder:"0",value:i.yellowCards,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Red Cards"}),(0,xN.jsx)("input",{type:"number",name:"redCards",placeholder:"0",value:i.redCards,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsx)("button",{type:"submit",disabled:n,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":o?"Update Player":"Add Player"}),o&&(0,xN.jsx)("button",{type:"button",onClick:()=>{l(null),a({name:"",team:"",position:"Forward",nationality:"",age:"",matches:0,goals:0,assists:0,yellowCards:0,redCards:0})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,xN.jsxs)("div",{className:"overflow-x-auto",children:[(0,xN.jsxs)("table",{className:"w-full text-left text-gray-300",children:[(0,xN.jsx)("thead",{className:"bg-gray-800 text-xs uppercase",children:(0,xN.jsxs)("tr",{children:[(0,xN.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,xN.jsx)("th",{className:"px-4 py-3",children:"Team"}),(0,xN.jsx)("th",{className:"px-4 py-3",children:"Pos"}),(0,xN.jsx)("th",{className:"px-4 py-3",children:"Stats"}),(0,xN.jsx)("th",{className:"px-4 py-3",children:"Action"})]})}),(0,xN.jsx)("tbody",{children:e.map(e=>(0,xN.jsxs)("tr",{className:"border-b border-gray-700 bg-gray-800 hover:bg-gray-700",children:[(0,xN.jsx)("td",{className:"px-4 py-3 font-medium text-white",children:e.name}),(0,xN.jsx)("td",{className:"px-4 py-3",children:e.team}),(0,xN.jsx)("td",{className:"px-4 py-3",children:e.position}),(0,xN.jsxs)("td",{className:"px-4 py-3",children:[e.goals," G, ",e.assists," A"]}),(0,xN.jsxs)("td",{className:"px-4 py-3",children:[(0,xN.jsx)("button",{onClick:()=>(e=>{a(e),l(e.id),u("")})(e),className:"text-blue-500 hover:text-blue-400 mr-3",children:"Edit"}),(0,xN.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this player?"))try{await hN(ww(vN,"players",e)),u("Player deleted successfully!"),setTimeout(()=>u(""),3e3)}catch(t){console.error("Error deleting player: ",t)}})(e.id),className:"text-red-500 hover:text-red-400",children:"Delete"})]})]},e.id))})]}),0===e.length&&!n&&(0,xN.jsx)("p",{className:"text-center text-gray-400 mt-4",children:"No players found."})]})]})},zN=()=>{const{tournaments:e}=kN(),[t,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(""),[a,o]=(0,s.useState)({name:"",startDate:"",endDate:"",teamsCount:0,matchesCount:0,status:"upcoming",type:"league"}),[l,c]=(0,s.useState)(null),u=e=>{const{name:t,value:n}=e.target;o(e=>Ct(Ct({},e),{},{[t]:"teamsCount"===t||"matchesCount"===t?Number(n):n}))};return(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,xN.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Tournaments"}),r&&(0,xN.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:r}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:l?"Edit Tournament":"Add New Tournament"}),(0,xN.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(!0),i("");(l?dN(ww(vN,"tournaments",l),a):fN(xw(vN,"tournaments"),a)).catch(e=>{console.error("Error saving tournament: ",e),alert("Error saving: "+e.message)}),i(l?"Tournament updated successfully!":"Tournament added successfully!"),o({name:"",startDate:"",endDate:"",teamsCount:0,matchesCount:0,status:"upcoming",type:"league"}),c(null),window.scrollTo(0,0),setTimeout(()=>i(""),3e3),n(!1)},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,xN.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Tournament Name"}),(0,xN.jsx)("input",{type:"text",name:"name",placeholder:"Tournament Name",value:a.name,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsxs)("div",{className:"w-full",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Start Date"}),(0,xN.jsx)("input",{type:"date",name:"startDate",value:a.startDate,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{className:"w-full",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"End Date"}),(0,xN.jsx)("input",{type:"date",name:"endDate",value:a.endDate,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsxs)("div",{className:"w-full",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Teams Count"}),(0,xN.jsx)("input",{type:"number",name:"teamsCount",placeholder:"0",value:a.teamsCount,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,xN.jsxs)("div",{className:"w-full",children:[(0,xN.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Matches Count"}),(0,xN.jsx)("input",{type:"number",name:"matchesCount",placeholder:"0",value:a.matchesCount,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,xN.jsxs)("select",{name:"status",value:a.status,onChange:u,className:"bg-gray-700 p-2 rounded text-white",children:[(0,xN.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,xN.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,xN.jsx)("option",{value:"finished",children:"Finished"})]}),(0,xN.jsxs)("select",{name:"type",value:a.type,onChange:u,className:"bg-gray-700 p-2 rounded text-white",children:[(0,xN.jsx)("option",{value:"league",children:"League"}),(0,xN.jsx)("option",{value:"knockout",children:"Knockout"})]}),(0,xN.jsx)("button",{type:"submit",disabled:t,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(t?"opacity-50 cursor-not-allowed":""),children:t?"Saving...":l?"Update Tournament":"Add Tournament"}),l&&(0,xN.jsx)("button",{type:"button",onClick:()=>{c(null),o({name:"",startDate:"",endDate:"",teamsCount:0,matchesCount:0,status:"upcoming",type:"league"})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,xN.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(e=>(0,xN.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex justify-between items-start",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"font-bold text-lg text-white",children:e.name}),(0,xN.jsxs)("div",{className:"text-sm text-gray-400",children:[e.status," \u2022 ",e.type]}),(0,xN.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.startDate," - ",e.endDate]})]}),(0,xN.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,xN.jsx)("button",{onClick:()=>(e=>{o(e),c(e.id),i("")})(e),className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm text-white",children:"Edit"}),(0,xN.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this tournament?"))try{await hN(ww(vN,"tournaments",e)),i("Tournament deleted successfully!"),setTimeout(()=>i(""),3e3)}catch(t){console.error("Error deleting: ",t)}})(e.id),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm text-white",children:"Delete"})]})]},e.id)),0===e.length&&!t&&(0,xN.jsx)("div",{className:"text-gray-400 col-span-full text-center",children:"No tournaments found."})]})]})},qN=()=>{const{matches:e,players:t,teams:n,lineups:r}=kN(),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)({id:"",matchId:"",teamName:"",starting11:[],bench:[]}),[d,h]=(0,s.useState)(""),f=e.find(e=>e.id===i),p=t.filter(e=>e.team===o),m=[...c.starting11,...c.bench],g=e=>{l(e);const t=r.find(t=>t.matchId===i&&t.teamName===e);u(t?{id:t.id,matchId:t.matchId,teamName:t.teamName,starting11:t.starting11||[],bench:t.bench||[]}:{id:"",matchId:i,teamName:e,starting11:[],bench:[]})},y=e=>t.find(t=>t.id===e);return(0,xN.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,xN.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"\u26bd Manage Match Lineups"}),d&&(0,xN.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:d}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-6",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:"Select Match"}),(0,xN.jsxs)("select",{value:i,onChange:e=>{return t=e.target.value,a(t),l(""),void u({id:"",matchId:"",teamName:"",starting11:[],bench:[]});var t},className:"bg-gray-700 p-3 rounded text-white w-full mb-4",children:[(0,xN.jsx)("option",{value:"",children:"Select a match"}),e.filter(e=>"finished"!==e.status).map(e=>(0,xN.jsxs)("option",{value:e.id,children:[e.competition," - ",e.teamA," vs ",e.teamB,e.date&&" (".concat(new Date(e.date).toLocaleDateString(),")")]},e.id))]}),f&&(0,xN.jsxs)("div",{className:"mt-4",children:[(0,xN.jsx)("h4",{className:"text-lg mb-2",children:"Select Team"}),(0,xN.jsxs)("div",{className:"flex gap-4",children:[(0,xN.jsx)("button",{onClick:()=>g(f.teamA),className:"flex-1 p-3 rounded ".concat(o===f.teamA?"bg-green-600":"bg-gray-700 hover:bg-gray-600"),children:f.teamA}),(0,xN.jsx)("button",{onClick:()=>g(f.teamB),className:"flex-1 p-3 rounded ".concat(o===f.teamB?"bg-green-600":"bg-gray-700 hover:bg-gray-600"),children:f.teamB})]})]})]}),o&&(0,xN.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:"Available Players"}),(0,xN.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[p.filter(e=>!m.includes(e.id)).map(e=>(0,xN.jsxs)("div",{className:"bg-gray-700 p-3 rounded flex justify-between items-center",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"font-medium",children:e.name}),(0,xN.jsx)("div",{className:"text-xs text-gray-400",children:e.position})]}),(0,xN.jsxs)("div",{className:"flex gap-2",children:[(0,xN.jsx)("button",{onClick:()=>{return t=e.id,void(c.starting11.length<11&&u(e=>Ct(Ct({},e),{},{starting11:[...e.starting11,t]})));var t},disabled:c.starting11.length>=11,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded text-xs",children:"Starting"}),(0,xN.jsx)("button",{onClick:()=>{return t=e.id,void(c.bench.length<6&&u(e=>Ct(Ct({},e),{},{bench:[...e.bench,t]})));var t},disabled:c.bench.length>=6,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded text-xs",children:"Bench"})]})]},e.id)),0===p.filter(e=>!m.includes(e.id)).length&&(0,xN.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"All players assigned"})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,xN.jsxs)("h3",{className:"text-xl mb-4",children:["Starting 11",(0,xN.jsxs)("span",{className:"ml-2 text-sm ".concat(11===c.starting11.length?"text-green-400":"text-yellow-400"),children:["(",c.starting11.length,"/11)"]})]}),(0,xN.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[c.starting11.map((e,t)=>{const n=y(e);return n?(0,xN.jsxs)("div",{className:"bg-green-900 p-3 rounded flex justify-between items-center",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsxs)("div",{className:"font-medium",children:["#",t+1," ",n.name]}),(0,xN.jsx)("div",{className:"text-xs text-gray-300",children:n.position})]}),(0,xN.jsx)("button",{onClick:()=>(e=>{u(t=>Ct(Ct({},t),{},{starting11:t.starting11.filter(t=>t!==e)}))})(e),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs",children:"Remove"})]},e):null}),0===c.starting11.length&&(0,xN.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"No players selected"})]})]}),(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,xN.jsxs)("h3",{className:"text-xl mb-4",children:["Bench",(0,xN.jsxs)("span",{className:"ml-2 text-sm ".concat(6===c.bench.length?"text-green-400":"text-gray-400"),children:["(",c.bench.length,"/6)"]})]}),(0,xN.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[c.bench.map(e=>{const t=y(e);return t?(0,xN.jsxs)("div",{className:"bg-blue-900 p-3 rounded flex justify-between items-center",children:[(0,xN.jsxs)("div",{children:[(0,xN.jsx)("div",{className:"font-medium",children:t.name}),(0,xN.jsx)("div",{className:"text-xs text-gray-300",children:t.position})]}),(0,xN.jsx)("button",{onClick:()=>(e=>{u(t=>Ct(Ct({},t),{},{bench:t.bench.filter(t=>t!==e)}))})(e),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs",children:"Remove"})]},e):null}),0===c.bench.length&&(0,xN.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"No bench players"})]})]})]}),o&&(0,xN.jsx)("div",{className:"mt-6 flex justify-center",children:(0,xN.jsx)("button",{onClick:async()=>{if(11===c.starting11.length)try{c.id?(await dN(ww(vN,"lineups",c.id),{starting11:c.starting11,bench:c.bench,updatedAt:new Date}),h("Lineup updated successfully!")):(await fN(xw(vN,"lineups"),{matchId:c.matchId,teamName:c.teamName,starting11:c.starting11,bench:c.bench,createdAt:new Date}),h("Lineup saved successfully!")),setTimeout(()=>h(""),3e3),u({id:"",matchId:"",teamName:"",starting11:[],bench:[]}),a(""),l("")}catch(e){console.error("Error saving lineup:",e),alert("Error saving lineup: "+e.message)}else alert("Please select exactly 11 starting players")},disabled:11!==c.starting11.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-8 py-3 rounded-lg text-lg font-medium",children:"Save Lineup"})}),!i&&(0,xN.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mt-6",children:[(0,xN.jsx)("h3",{className:"text-xl mb-4",children:"\ud83d\udccb How to Create a Lineup"}),(0,xN.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-300",children:[(0,xN.jsx)("li",{children:"Select a match from the dropdown"}),(0,xN.jsx)("li",{children:"Choose which team you want to create a lineup for"}),(0,xN.jsx)("li",{children:"Add 11 players to the Starting 11"}),(0,xN.jsx)("li",{children:"Add up to 6 players to the Bench (optional)"}),(0,xN.jsx)("li",{children:'Click "Save Lineup" to confirm'})]})]})]})};function KN(e){let{children:t}=e;const{currentUser:n}=NN(),r=te();return n?t:(0,xN.jsx)(ve,{to:"/login",state:{from:r},replace:!0})}const HN=function(){return(0,xN.jsx)(TN,{children:(0,xN.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,xN.jsx)(EN,{}),(0,xN.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,xN.jsxs)(we,{children:[(0,xN.jsx)(be,{path:"/",element:(0,xN.jsx)(_N,{})}),(0,xN.jsx)(be,{path:"/tournaments",element:(0,xN.jsx)(jN,{})}),(0,xN.jsx)(be,{path:"/teams",element:(0,xN.jsx)(AN,{})}),(0,xN.jsx)(be,{path:"/players",element:(0,xN.jsx)(DN,{})}),(0,xN.jsx)(be,{path:"/leaderboard",element:(0,xN.jsx)(PN,{})}),(0,xN.jsx)(be,{path:"/live/:matchId",element:(0,xN.jsx)(ON,{})}),(0,xN.jsx)(be,{path:"/login",element:(0,xN.jsx)(LN,{})}),(0,xN.jsx)(be,{path:"/signup",element:(0,xN.jsx)(MN,{})}),(0,xN.jsx)(be,{path:"/admin",element:(0,xN.jsx)(KN,{children:(0,xN.jsx)(FN,{})})}),(0,xN.jsx)(be,{path:"/admin/matches",element:(0,xN.jsx)(KN,{children:(0,xN.jsx)(UN,{})})}),(0,xN.jsx)(be,{path:"/admin/teams",element:(0,xN.jsx)(KN,{children:(0,xN.jsx)(VN,{})})}),(0,xN.jsx)(be,{path:"/admin/players",element:(0,xN.jsx)(KN,{children:(0,xN.jsx)(BN,{})})}),(0,xN.jsx)(be,{path:"/admin/lineups",element:(0,xN.jsx)(KN,{children:(0,xN.jsx)(qN,{})})}),(0,xN.jsx)(be,{path:"/admin/tournaments",element:(0,xN.jsx)(KN,{children:(0,xN.jsx)(zN,{})})})]})})]})})};a.createRoot(document.getElementById("root")).render((0,xN.jsx)(s.StrictMode,{children:(0,xN.jsx)(Ae,{children:(0,xN.jsx)(SN,{children:(0,xN.jsx)(HN,{})})})}))})();
//# sourceMappingURL=main.0118aa9e.js.map