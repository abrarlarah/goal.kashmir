/*! For license information please see main.74438ef9.js.LICENSE.txt */
(()=>{"use strict";var e={730(e,t,n){var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Ro){var r=Ro}Reflect.construct(e,[],t)}else{try{t.call()}catch(Ro){r=Ro}e.call(t.prototype)}else{try{throw Error()}catch(Ro){r=Ro}e()}}catch(Ro){if(Ro&&r&&"string"===typeof Ro.stack){for(var s=Ro.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case T:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Yd){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ee=null,Se=null;function Te(e){if(e=bs(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),ke(e.stateNode,e.type,t))}}function Ne(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ie(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function _e(e,t){return e(t)}function Ce(){}var Ae=!1;function je(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return _e(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Se)&&(Ce(),Ie())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function Me(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,Ve=null,Ue={onError:function(e){Oe=!0,Le=e}};function Be(e,t,n,r,s,i,a,o,l){Oe=!1,Le=null,Me.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(i(188))}function Ke(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,$e=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,Et,St,Tt,Nt=!1,It=[],_t=null,Ct=null,At=null,jt=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ot(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=vs(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Nt=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),jt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Bt(_t,e),null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),jt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var qt=x.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Wt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Gt(e,t,n,r){if(Ht){var s=Xt(e,t,n,r);if(null===s)Hr(e,t,r,Qt,n),Mt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return _t=Ot(_t,e,t,n,r,s),!0;case"dragenter":return Ct=Ot(Ct,e,t,n,r,s),!0;case"mouseover":return At=Ot(At,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return jt.set(i,Ot(jt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dt.set(i,Ot(Dt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Xt(e,t,n,r))&&Hr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=vs(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in $t?$t.value:$t.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var Nn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Nn),_n=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(jn),Pn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var On=u&&"TextEvent"in window&&!Mn,Ln=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ne(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Qn(e){Fr(e,0)}function Xn(e){if(G(xs(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Kn(t,Gn,e,we(e)),je(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},Sr={};function Tr(e){if(Er[e])return Er[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=Tr("animationend"),Ir=Tr("animationiteration"),_r=Tr("animationstart"),Cr=Tr("transitionend"),Ar=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<jr.length;Pr++){var Rr=jr[Pr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Nr,"onAnimationEnd"),Dr(Ir,"onAnimationIteration"),Dr(_r,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Lr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Lr(s,o,c),i=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var s=Kt;break;case 4:s=Wt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=i,s=we(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Nr:case Ir:case _r:l=yn;break;case Cr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=De(p,h))&&u.push(Kr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,vs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Hn(o))if($n)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Kn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Jt="value"in($t=s)?$t.value:$t.textContent,zn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=De(e,n))&&r.unshift(Kr(e,i,s)),null!=(i=De(e,t))&&r.push(Kr(e,i,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,i))&&a.unshift(Kr(n,l,o)):s||null!=(l=De(n,i))&&a.push(Kr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);zt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ps="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var ks=[],Es=-1;function Ss(e){return{current:e}}function Ts(e){0>Es||(e.current=ks[Es],ks[Es]=null,Es--)}function Ns(e,t){Es++,ks[Es]=e.current,e.current=t}var Is={},_s=Ss(Is),Cs=Ss(!1),As=Is;function js(e,t){var n=e.type.contextTypes;if(!n)return Is;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ts(Cs),Ts(_s)}function Rs(e,t,n){if(_s.current!==Is)throw Error(i(168));Ns(_s,t),Ns(Cs,n)}function Ms(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return L({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,As=_s.current,Ns(_s,e),Ns(Cs,Cs.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ms(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,Ts(Cs),Ts(_s),Ns(_s,e)):Ts(Cs),Ns(Cs,n)}var Fs=null,Vs=!1,Us=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function zs(){if(!Us&&null!==Fs){Us=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Vs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(Ze,zs),s}finally{bt=t,Us=!1}}return null}var qs=[],Hs=0,Ks=null,Ws=0,Gs=[],Qs=0,Xs=null,Ys=1,$s="";function Js(e,t){qs[Hs++]=Ws,qs[Hs++]=Ks,Ks=e,Ws=t}function Zs(e,t,n){Gs[Qs++]=Ys,Gs[Qs++]=$s,Gs[Qs++]=Xs,Xs=e;var r=Ys;e=$s;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,$s=i+e}else Ys=1<<i|n<<s|r,$s=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Ks;)Ks=qs[--Hs],qs[Hs]=null,Ws=qs[--Hs],qs[Hs]=null;for(;e===Xs;)Xs=Gs[--Qs],Gs[Qs]=null,$s=Gs[--Qs],Gs[Qs]=null,Ys=Gs[--Qs],Gs[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Ys,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Vc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case k:return(t=zc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Vc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case k:return n.key===s?u(e,t,n,r):null;case D:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||M(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case D:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),si&&Js(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return si&&Js(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Js(s,m),c}function g(s,o,l,c){var u=M(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((i=Vc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Fc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(a,r.mode,l)).return=r,r=i}return o(r);case D:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(M(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Bc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),ki=Ss(null),Ei=null,Si=null,Ti=null;function Ni(){Ti=Si=Ei=null}function Ii(e){var t=ki.current;Ts(ki),e._currentValue=t}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){Ei=e,Ti=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(Ti!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ei)throw Error(i(308));Si=e,Ei.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var ji=null;function Di(e){null===ji?ji=[e]:ji.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ri(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ri(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Mi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Mi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Vl|=a,e.lanes=a,e.memoizedState=d}}function qi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},Ki=Ss(Hi),Wi=Ss(Hi),Gi=Ss(Hi);function Qi(e){if(e===Hi)throw Error(i(174));return e}function Xi(e,t){switch(Ns(Gi,t),Ns(Wi,e),Ns(Ki,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ts(Ki),Ns(Ki,t)}function Yi(){Ts(Ki),Ts(Wi),Ts(Gi)}function $i(e){Qi(Gi.current);var t=Qi(Ki.current),n=le(t,e.type);t!==n&&(Ns(Wi,e),Ns(Ki,n))}function Ji(e){Wi.current===e&&(Ts(Ki),Ts(Wi))}var Zi=Ss(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=$a,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Vl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Vl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function Ea(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Ma(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,Ta.bind(null,n,r,s,t),void 0,null),null===Dl)throw Error(i(349));0!==(30&ia)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&_a(e)}function Na(e,t,n){return n(function(){Ia(t)&&_a(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function _a(e){var t=Ri(e,1);null!==t&&ic(t,e,1,-1)}function Ca(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return va().memoizedState}function Da(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&pa(r,a.deps))return void(s.memoizedState=Aa(t,n,i,r))}aa.flags|=e,s.memoizedState=Aa(1|t,n,i,r)}function Ra(e,t){return Da(8390656,8,e,t)}function Ma(e,t){return Pa(2048,8,e,t)}function Oa(e,t){return Pa(4,2,e,t)}function La(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function Ua(){}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Vl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ka(){return va().memoizedState}function Wa(e,t,n){var r=sc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Xa(t,n);else if(null!==(n=Pi(e,t,n,r))){ic(n,e,r,rc()),Ya(n,t,r)}}function Ga(e,t,n){var r=sc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Xa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Ro){}null!==(n=Pi(e,t,s,r))&&(ic(n,e,r,s=rc()),Ya(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:Ai,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ai,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ca,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Dl)throw Error(i(349));0!==(30&ia)||Sa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ra(Na.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Dl.identifierPrefix;if(si){var n=$s;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ai,useCallback:Ba,useContext:Ai,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:za,useReducer:xa,useRef:ja,useState:function(){return xa(ba)},useDebugValue:Ua,useDeferredValue:function(e){return qa(va(),oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1},eo={readContext:Ai,useCallback:Ba,useContext:Ai,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:za,useReducer:wa,useRef:ja,useState:function(){return wa(ba)},useDebugValue:Ua,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rc(),s=sc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(ic(t,e,s,r),Ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rc(),s=sc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(ic(t,e,s,r),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rc(),r=sc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Vi(e,s,r))&&(ic(t,e,r,n),Ui(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Is,i=t.contextType;return"object"===typeof i&&null!==i?i=Ai(i):(s=Ds(t)?As:_s.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?js(e,s):Is),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ai(i):(i=Ds(t)?As:_s.current,s.context=js(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Ql=r),uo(0,t)},n}function po(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Vi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ci(t,s),r=ma(e,t,n,r,i,s),n=ga(),null===e||bo?(si&&n&&ei(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function ko(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Lc(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Ol,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Ol,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ns(Ol,Ml),Ml|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ns(Ol,Ml),Ml|=r;return xo(e,t,s,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,s){var i=Ds(n)?As:_s.current;return i=js(t,i),Ci(t,s),n=ma(e,t,n,r,i,s),r=ga(),null===e||bo?(si&&r&&ei(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Io(e,t,n,r,s){if(Ds(n)){var i=!0;Os(t)}else i=!1;if(Ci(t,s),null===t.stateNode)Ko(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ai(c):c=js(t,c=Ds(n)?As:_s.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Mi=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Cs.current||Mi?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Mi||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Li(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ai(l):l=js(t,l=Ds(n)?As:_s.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Mi=!1,h=t.memoizedState,a.state=h,zi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Cs.current||Mi?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Mi||so(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _o(e,t,n,r,i,s)}function _o(e,t,n,r,s,i){To(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ls(t,n,!1),Wo(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Xi(e,t.containerInfo)}function jo(e,t,n,r,s){return fi(),pi(s),t.flags|=256,xo(e,t,n,r),t.child}var Do,Po,Mo,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ns(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Uc(l,s,0,null),e=Vc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Vo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Uc({mode:"visible",children:r.children},s,0,null),(a=Vc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Dl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ri(e,s),ic(r,e,s,-1))}return bc(),Uo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Gs[Qs++]=Ys,Gs[Qs++]=$s,Gs[Qs++]=Xs,Ys=e.id,$s=e.overflow,Xs=t),t=Vo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Lc(r,o):(o=Vc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,s}return e=(o=e.child).sibling,s=Lc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Vo(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&pi(r),xi(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function zo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ho(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zo(t,!0,n,null,i);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:case 17:return Ds(t.type)&&Ps(),Xo(t),null;case 3:return r=t.stateNode,Yi(),Ts(Cs),Ts(_s),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(cc(ii),ii=null))),Xo(t),null;case 5:Ji(t);var s=Qi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Xo(t),null}if(e=Qi(Ki.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(s=0;s<Mr.length;s++)Vr(Mr[s],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":se(r,a),Vr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Do(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),s=r;break;case"iframe":case"object":case"embed":Vr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)Vr(Mr[s],e);s=r;break;case"source":Vr("error",e),s=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),s=r;break;case"details":Vr("toggle",e),s=r;break;case"input":Y(e,r),s=X(e,r),Vr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=L({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Vr("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&null!=t.stateNode)Mo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Gi.current),Qi(Ki.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Xo(t),null;case 13:if(Ts(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xo(t),a=!1}else null!==ii&&(cc(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ll&&(Ll=3):bc())),null!==t.updateQueue&&(t.flags|=4),Xo(t),null);case 4:return Yi(),null===e&&zr(t.stateNode.containerInfo),Xo(t),null;case 10:return Ii(t.type._context),Xo(t),null;case 19:if(Ts(Zi),null===(a=t.memoizedState))return Xo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Qo(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ns(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Kl&&(t.flags|=128,r=!0,Qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Xo(t),null}else 2*$e()-a.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zi.current,Ns(Zi,r?1&n|2:1&n),t):(Xo(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Xo(t),6&t.subtreeFlags&&(t.flags|=8192)):Xo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function $o(e,t){switch(ti(t),t.tag){case 1:return Ds(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Ts(Cs),Ts(_s),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(Ts(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ts(Zi),null;case 4:return Yi(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qi(Ki.current);var i,a=null;switch(n){case"input":s=X(e,s),r=X(e,r),a=[];break;case"select":s=L({},s,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Zo=!1,el="function"===typeof WeakSet?WeakSet:Set,tl=null;function nl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function rl(e,t,n){try{n()}catch(r){_c(e,t,r)}}var sl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&rl(t,n,i)}s=s.next}while(s!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ll(e){var t=e.alternate;null!==t&&(e.alternate=null,ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var fl=null,pl=!1;function ml(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Zo||nl(n,t);case 6:var r=fl,s=pl;fl=null,ml(e,t,n),pl=s,null!==(fl=r)&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fl.removeChild(n.stateNode));break;case 18:null!==fl&&(pl?(e=fl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),zt(e)):ls(fl,n.stateNode));break;case 4:r=fl,s=pl,fl=n.stateNode.containerInfo,pl=!0,ml(e,t,n),fl=r,pl=s;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&rl(n,t,a),s=s.next}while(s!==r)}ml(e,t,n);break;case 1:if(!Zo&&(nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_c(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Zo=(r=Zo)||null!==n.memoizedState,ml(e,t,n),Zo=r):ml(e,t,n);break;default:ml(e,t,n)}}function yl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new el),t.forEach(function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:fl=l.stateNode,pl=!1;break e;case 3:case 4:fl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===fl)throw Error(i(160));gl(a,o,s),fl=null,pl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Ro){_c(s,t,Ro)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),xl(e),4&r){try{il(3,e,e.return),al(3,e)}catch(g){_c(e,e.return,g)}try{il(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:vl(t,e),xl(e),512&r&&null!==n&&nl(n,n.return);break;case 5:if(vl(t,e),xl(e),512&r&&null!==n&&nl(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){_c(e,e.return,g)}}break;case 6:if(vl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){_c(e,e.return,g)}}break;case 3:if(vl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:vl(t,e),xl(e);break;case 13:vl(t,e),xl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Hl=$e())),4&r&&yl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zo=(u=Zo)||d,vl(t,e),Zo=u):vl(t,e),xl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(tl=e,d=e.child;null!==d;){for(h=tl=d;null!==tl;){switch(p=(f=tl).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:nl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:nl(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,tl=p):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),xl(e),4&r&&yl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),hl(e,ul(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;dl(e,ul(e),a);break;default:throw Error(i(161))}}catch(Ao){_c(e,e.return,Ao)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){tl=e,kl(e,t,n)}function kl(e,t,n){for(var r=0!==(1&e.mode);null!==tl;){var s=tl,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Jo;var c=Zo;if(Jo=a,(Zo=l)&&!c)for(tl=s;null!==tl;)l=(a=tl).child,22===a.tag&&null!==a.memoizedState?Tl(s):null!==l?(l.return=a,tl=l):Tl(s);for(;null!==i;)tl=i,kl(i,t,n),i=i.sibling;tl=s,Jo=o,Zo=c}El(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,tl=i):El(e)}}function El(e){for(;null!==tl;){var t=tl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(i(163))}Zo||512&t.flags&&ol(t)}catch(qo){_c(t,t.return,qo)}}if(t===e){tl=null;break}if(null!==(n=t.sibling)){n.return=t.return,tl=n;break}tl=t.return}}function Sl(e){for(;null!==tl;){var t=tl;if(t===e){tl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,tl=n;break}tl=t.return}}function Tl(e){for(;null!==tl;){var t=tl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(Ao){_c(t,n,Ao)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Ao){_c(t,s,Ao)}}var i=t.return;try{ol(t)}catch(Ao){_c(t,i,Ao)}break;case 5:var a=t.return;try{ol(t)}catch(Ao){_c(t,a,Ao)}}}catch(Ao){_c(t,t.return,Ao)}if(t===e){tl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,tl=o;break}tl=t.return}}var Nl,Il=Math.ceil,_l=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Al=x.ReactCurrentBatchConfig,jl=0,Dl=null,Pl=null,Rl=0,Ml=0,Ol=Ss(0),Ll=0,Fl=null,Vl=0,Ul=0,Bl=0,zl=null,ql=null,Hl=0,Kl=1/0,Wl=null,Gl=!1,Ql=null,Xl=null,Yl=!1,$l=null,Jl=0,Zl=0,ec=null,tc=-1,nc=0;function rc(){return 0!==(6&jl)?$e():-1!==tc?tc:tc=$e()}function sc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Rl?Rl&-Rl:null!==mi.transition?(0===nc&&(nc=mt()),nc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ic(e,t,n,r){if(50<Zl)throw Zl=0,ec=null,Error(i(185));yt(e,n,r),0!==(2&jl)&&e===Dl||(e===Dl&&(0===(2&jl)&&(Ul|=n),4===Ll&&uc(e,Rl)),ac(e,r),1===n&&0===jl&&0===(1&t.mode)&&(Kl=$e()+500,Vs&&zs()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Dl?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vs=!0,Bs(e)}(dc.bind(null,e)):Bs(dc.bind(null,e)),as(function(){0===(6&jl)&&zs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(tc=-1,nc=0,0!==(6&jl))throw Error(i(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===Dl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var s=jl;jl|=2;var a=vc();for(Dl===e&&Rl===t||(Wl=null,Kl=$e()+500,mc(e,t));;)try{kc();break}catch(l){yc(e,l)}Ni(),_l.current=a,jl=s,null!==Pl?t=0:(Dl=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=lc(e,s))),1===t)throw n=Fl,mc(e,0),uc(e,r),ac(e,$e()),n;if(6===t)uc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=xc(e,r))&&(0!==(a=pt(e))&&(r=a,t=lc(e,a))),1===t))throw n=Fl,mc(e,0),uc(e,r),ac(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Tc(e,ql,Wl);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Hl+500-$e())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){rc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(Tc.bind(null,e,ql,Wl),t);break}Tc(e,ql,Wl);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=rs(Tc.bind(null,e,ql,Wl),r);break}Tc(e,ql,Wl);break;default:throw Error(i(329))}}}return ac(e,$e()),e.callbackNode===n?oc.bind(null,e):null}function lc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=ql,ql=n,null!==t&&cc(t)),e}function cc(e){null===ql?ql=e:ql.push.apply(ql,e)}function uc(e,t){for(t&=~Bl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function dc(e){if(0!==(6&jl))throw Error(i(327));Nc();var t=ht(e,0);if(0===(1&t))return ac(e,$e()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Fl,mc(e,0),uc(e,t),ac(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,ql,Wl),ac(e,$e()),null}function hc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(Kl=$e()+500,Vs&&zs())}}function fc(e){null!==$l&&0===$l.tag&&0===(6&jl)&&Nc();var t=jl;jl|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(jl=t))&&zs()}}function pc(){Ml=Ol.current,Ts(Ol)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:Yi(),Ts(Cs),Ts(_s),na();break;case 5:Ji(r);break;case 4:Yi();break;case 13:case 19:Ts(Zi);break;case 10:Ii(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Dl=e,Pl=e=Lc(e.current,null),Rl=Ml=t,Ll=0,Fl=null,Bl=Ul=Vl=0,ql=zl=null,null!==ji){for(t=0;t<ji.length;t++)if(null!==(r=(n=ji[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}ji=null}return e}function yc(e,t){for(;;){var n=Pl;try{if(Ni(),ra.current=$a,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,Cl.current=null,null===n||null===n.return){Ll=1,Fl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),bc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),pi(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(a,l,t));break e}}a=a.return}while(null!==a)}Sc(n)}catch(Go){t=Go,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vc(){var e=_l.current;return _l.current=$a,null===e?$a:e}function bc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Dl||0===(268435455&Vl)&&0===(268435455&Ul)||uc(Dl,Rl)}function xc(e,t){var n=jl;jl|=2;var r=vc();for(Dl===e&&Rl===t||(Wl=null,mc(e,t));;)try{wc();break}catch(s){yc(e,s)}if(Ni(),jl=n,_l.current=r,null!==Pl)throw Error(i(261));return Dl=null,Rl=0,Ll}function wc(){for(;null!==Pl;)Ec(Pl)}function kc(){for(;null!==Pl&&!Xe();)Ec(Pl)}function Ec(e){var t=Nl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?Sc(e):Pl=t,Cl.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ml)))return void(Pl=n)}else{if(null!==(n=$o(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ll=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Tc(e,t,n){var r=bt,s=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{Nc()}while(null!==$l);if(0!==(6&jl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Dl&&(Pl=Dl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,function(){return Nc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=bt;bt=1;var l=jl;jl|=4,Cl.current=null,function(e,t){if(es=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(gc){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,tl=t;null!==tl;)if(e=(t=tl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,tl=e;else for(;null!==tl;){t=tl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(gc){_c(t,t.return,gc)}if(null!==(e=t.sibling)){e.return=t.return,tl=e;break}tl=t.return}m=sl,sl=!1}(e,n),bl(n,e),pr(ts),Ht=!!es,ts=es=null,e.current=n,wl(n,e,s),Ye(),jl=l,bt=o,Al.transition=a}else e.current=n;if(Yl&&(Yl=!1,$l=e,Jl=s),a=e.pendingLanes,0===a&&(Xl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Gl)throw Gl=!1,e=Ql,Ql=null,e;0!==(1&Jl)&&0!==e.tag&&Nc(),a=e.pendingLanes,0!==(1&a)?e===ec?Zl++:(Zl=0,ec=e):Zl=0,zs()}(e,t,n,r)}finally{Al.transition=s,bt=r}return null}function Nc(){if(null!==$l){var e=xt(Jl),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Jl=0,0!==(6&jl))throw Error(i(331));var s=jl;for(jl|=4,tl=e.current;null!==tl;){var a=tl,o=a.child;if(0!==(16&tl.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(tl=u;null!==tl;){var d=tl;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var h=d.child;if(null!==h)h.return=d,tl=h;else for(;null!==tl;){var f=(d=tl).sibling,p=d.return;if(ll(d),d===u){tl=null;break}if(null!==f){f.return=p,tl=f;break}tl=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}tl=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,tl=o;else e:for(;null!==tl;){if(0!==(2048&(a=tl).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,tl=v;break e}tl=a.return}}var b=e.current;for(tl=b;null!==tl;){var x=(o=tl).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,tl=x;else e:for(o=b;null!==tl;){if(0!==(2048&(l=tl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(Go){_c(l,l.return,Go)}if(l===o){tl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,tl=w;break e}tl=l.return}}if(jl=s,zs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(Go){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function Ic(e,t,n){e=Vi(e,t=fo(0,t=lo(n,t),1),1),t=rc(),null!==e&&(yt(e,1,t),ac(e,t))}function _c(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Vi(t,e=po(t,e=lo(n,e),1),1),e=rc(),null!==t&&(yt(t,1,e),ac(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=rc(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>$e()-Hl?mc(e,0):Bl|=n),ac(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=rc();null!==(e=Ri(e,t))&&(yt(e,t,n),ac(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ac(e,n)}function Pc(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Vc(n.children,s,a,t);case S:o=8,s|=8;break;case T:return(e=Mc(12,n,t,2|s)).elementType=T,e.lanes=a,e;case C:return(e=Mc(13,n,t,s)).elementType=C,e.lanes=a,e;case A:return(e=Mc(19,n,t,s)).elementType=A,e.lanes=a,e;case P:return Uc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case I:o=9;break e;case _:o=11;break e;case j:o=14;break e;case D:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Mc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Vc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,s,i,a,o,l){return e=new qc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Mc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function Kc(e){if(!e)return Is;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Ms(e,n,t)}return t}function Wc(e,t,n,r,s,i,a,o,l){return(e=Hc(n,r,!0,e,0,i,0,o,l)).context=Kc(null),n=e.current,(i=Fi(r=rc(),s=sc(n))).callback=void 0!==t&&null!==t?t:null,Vi(n,i,s),e.current.lanes=s,yt(e,s,r),ac(e,r),e}function Gc(e,t,n,r){var s=t.current,i=rc(),a=sc(s);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vi(s,t,a))&&(ic(e,s,a,i),Ui(e,s,a)),a}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Cs.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Co(t),fi();break;case 5:$i(t);break;case 1:Ds(t.type)&&Os(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(ki,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Ns(Zi,1&Zi.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ns(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ko(e,t),e=t.pendingProps;var s=js(t,_s.current);Ci(t,n),s=ma(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(a=!0,Os(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Oi(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=_o(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ko(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===j)return 14}return 2}(r),e=to(r,e),s){case 0:t=No(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=ko(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Io(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Co(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Li(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=jo(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=jo(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Wo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),To(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Fo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ns(ki,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Cs.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),_i(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_i(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ci(t,n),r=r(s=Ai(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),ko(e,t,r,s=to(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Ko(e,t),t.tag=1,Ds(r)?(e=!0,Os(t)):e=!1,Ci(t,n),io(t,r,s),oo(t,r,s,n),_o(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nu(){}function ru(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Qc(a);o.call(e)}}Gc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Qc(a);i.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",nu);return e._reactRootContainer=a,e[ps]=a.current,zr(8===e.nodeType?e.parentNode:e),fc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Qc(l);o.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",nu);return e._reactRootContainer=l,e[ps]=l.current,zr(8===e.nodeType?e.parentNode:e),fc(function(){Gc(t,l,n,r)}),l}(n,t,e,s,r);return Qc(a)}Zc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Gc(e,t,null,null)},Zc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc(function(){Gc(null,e,null,null)}),t[ps]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ac(t,$e()),0===(6&jl)&&(Kl=$e()+500,zs()))}break;case 13:fc(function(){var t=Ri(e,1);if(null!==t){var n=rc();ic(t,e,1,n)}}),Yc(e,1)}},kt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)ic(t,e,134217728,rc());Yc(e,134217728)}},Et=function(e){if(13===e.tag){var t=sc(e),n=Ri(e,t);if(null!==n)ic(n,e,t,rc());Yc(e,t)}},St=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));G(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=hc,Ce=fc;var su={usingClientEntryPoint:!1,Events:[bs,xs,ws,Ne,Ie,hc]},iu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{st=ou.inject(au),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!eu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!eu(e))throw Error(i(299));var n=!1,r="",s=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!tu(t))throw Error(i(200));return ru(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!eu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ps]=t.current,zr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Zc(t)},t.render=function(e,t,n){if(!tu(t))throw Error(i(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!tu(e))throw Error(i(40));return!!e._reactRootContainer&&(fc(function(){ru(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ru(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153(e,t,n){var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:E.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+_(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(I,"$&/")+"/"),C(a,t,s,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+_(o=e[c],c);l+=C(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,s,u=i+_(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],s=0;return C(e,r,"","",function(e){return t.call(n,e,s++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43(e,t,n){e.exports=n(202)},579(e,t,n){e.exports=n(153)},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,P(k);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,T=null,N=-1,I=5,_=-1;function C(){return!(t.unstable_now()-_<I)}function A(){if(null!==T){var e=t.unstable_now();_=e;var n=!0;try{n=T(!0,e)}finally{n?E():(S=!1,T=null)}}else S=!1}if("function"===typeof b)E=function(){b(A)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,D=j.port2;j.port1.onmessage=A,E=function(){D.postMessage(null)}}else E=function(){y(A,0)};function P(e){T=e,S||(S=!0,E())}function R(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(N),N=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(k))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){e.exports=n(234)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let x={get action(){return p},get location(){return e(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),m=e,()=>{i.removeEventListener(l,v),m=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let s=h(x.location,e,t);n&&n(s,e),g=y()+1;let o=d(s,g),l=x.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&m&&m({action:p,location:x.location,delta:1})},replace:function(e,t){p=r.Replace;let s=h(x.location,e,t);n&&n(s,e),g=y();let i=d(s,g),o=x.createHref(s);u.replaceState(i,"",o),a&&m&&m({action:p,location:x.location,delta:0})},go:e=>u.go(e)};return x}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let s=D(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=j(s);a=C(i[o],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=U([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:_(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))s(e,t,r);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=x(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,k=3,E=2,S=1,T=10,N=-2,I=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=N),t&&(r+=E),n.filter(e=>!I(e)).reduce((e,t)=>e+(w.test(t)?k:""===t?S:T),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:U([i,u.pathname]),pathnameBase:B(U([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=U([i,u.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function j(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function R(e,t){void 0===t&&(t="/");let n,{pathname:r,search:s="",hash:i=""}="string"===typeof e?p(e):e;if(r)if(a=r,P.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),u(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?M(r.substring(1),"/"):M(r,t)}else n=t;var a;return{pathname:n,search:z(s),hash:q(i)}}function M(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function F(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function V(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),O("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),O("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),O("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=R(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const U=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],W=(new Set(K),["get",...K]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const Q=s.createContext(null);const X=s.createContext(null);const Y=s.createContext(null);const $=s.createContext(null);const J=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext($)}function te(){return ee()||c(!1),s.useContext($).location}function ne(e){s.useContext(Y).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext(J);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=s.useRef(!1);ne(()=>{n.current=!0});let r=s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},s)))},[e,t]);return r}():function(){ee()||c(!1);let e=s.useContext(Q),{basename:t,future:n,navigator:r}=s.useContext(Y),{matches:i}=s.useContext(J),{pathname:a}=te(),o=JSON.stringify(F(i,n.v7_relativeSplatPath)),l=s.useRef(!1);ne(()=>{l.current=!0});let u=s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=V(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:U([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e]);return u}()}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(Y),{matches:i}=s.useContext(J),{pathname:a}=te(),o=JSON.stringify(F(i,r.v7_relativeSplatPath));return s.useMemo(()=>V(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,i){ee()||c(!1);let{navigator:a}=s.useContext(Y),{matches:o}=s.useContext(J),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let x=ue(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:U([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:U([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&x?s.createElement($.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},x):x}function ae(){let e=function(){var e;let t=s.useContext(Z),n=pe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const oe=s.createElement(ae,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(J.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(J.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,c=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||oe,u&&(d<0&&0===i?(p="route-fallback",!1||ge[p]||(ge[p]=!0),c=!0,f=null):d===i&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:c?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=s.useContext(Q);return t||c(!1),t}function pe(e){let t=s.useContext(X);return t||c(!1),t}function me(e){let t=function(){let e=s.useContext(J);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const ge={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||c(!1);let{future:a,static:o}=s.useContext(Y),{matches:l}=s.useContext(J),{pathname:u}=te(),d=re(),h=V(t,F(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:i}),[d,f,i,n,r]),null}function be(e){c(!1)}function xe(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;ee()&&c(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:d,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,b=s.useMemo(()=>{let e=D(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,f,m,g,y,v,a]);return null==b?null:s.createElement(Y.Provider,{value:h},s.createElement($.Provider,{children:n,value:b}))}function we(e){let{children:t,location:n}=e;return ie(ke(t),n)}new Promise(()=>{});s.Component;function ke(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,ke(e.props.children,i));e.type!==be&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ke(e.props.children,i)),n.push(a)}),n}var Ee=n(950),Se=n.t(Ee,2);function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_e=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(AM){}const Ce=s.createContext({isTransitioning:!1});new Map;const Ae=i.startTransition;Se.flushSync,i.useId;function je(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=p(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))},function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,d]=s.useState({action:l.action,location:l.location}),{v7_startTransition:g}=r||{},y=s.useCallback(e=>{g&&Ae?Ae(()=>d(e)):d(e)},[d,g]);return s.useLayoutEffect(()=>l.listen(y),[l,y]),s.useEffect(()=>ye(r),[r]),s.createElement(xe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const De="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Pe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=Ne(e,Ie),{basename:g}=s.useContext(Y),y=!1;if("string"===typeof d&&Pe.test(d)&&(n=d,De))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(AM){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||c(!1);let{basename:r,navigator:i}=s.useContext(Y),{hash:a,pathname:o,search:l}=se(e,{relative:n}),u=o;return"/"!==r&&(u="/"===o?r:U([r,o])),i.createHref({pathname:u,search:l,hash:a})}(d,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=se(e,{relative:o});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});return s.createElement("a",Te({},m,{href:n||v,onClick:y||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:u}))});const Me=s.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d}=e,h=Ne(e,_e),f=se(l,{relative:h.relative}),p=te(),m=s.useContext(X),{navigator:g,basename:y}=s.useContext(Y),v=null!=m&&function(e,t){void 0===t&&(t={});let n=s.useContext(Ce);null==n&&c(!1);let{basename:r}=Fe(Oe.useViewTransitionState),i=se(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=D(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=D(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=A(i.pathname,o)||null!=A(i.pathname,a)}(f)&&!0===u,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,x=p.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=D(w,y)||w);const k="/"!==b&&b.endsWith("/")?b.length-1:b.length;let E,S=x===b||!a&&x.startsWith(b)&&"/"===x.charAt(k),T=null!=w&&(w===b||!a&&w.startsWith(b)&&"/"===w.charAt(b.length)),N={isActive:S,isPending:T,isTransitioning:v},I=S?n:void 0;E="function"===typeof i?i(N):[i,S?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof o?o(N):o;return s.createElement(Re,Te({},h,{"aria-current":I,className:E,ref:t,style:_,to:l,viewTransition:u}),"function"===typeof d?d(N):d)});var Oe,Le;function Fe(e){let t=s.useContext(Q);return t||c(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Oe||(Oe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));const Ve=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ve(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Be;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(e){return function(e){const t=Ve(e);return Ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},qe=function(e){try{return Ue.decodeString(e,!0)}catch(AM){console.error("base64Decode failed: ",AM)}return null};const He=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ke=()=>{try{return He()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/goal.kashmir",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(AM){return}const t=e&&qe(e[1]);return t&&JSON.parse(t)})()}catch(AM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(AM))}},We=e=>{var t,n;return null===(n=null===(t=Ke())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ge=e=>{const t=We(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Qe=()=>{var e;return null===(e=Ke())||void 0===e?void 0:e.config},Xe=e=>{var t;return null===(t=Ke())||void 0===t?void 0:t["_".concat(e)]};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function $e(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(i)),""].join(".")}function Je(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ze(){var e;const t=null===(e=Ke())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(AM){return!1}}function et(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function tt(){try{return"object"===typeof indexedDB}catch(AM){return!1}}function nt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class rt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(it,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new rt(n,i,t)}}const it=/\{\$([^}]+)}/g;function at(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(ot(n)&&ot(i)){if(!at(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ot(e){return null!==e&&"object"===typeof e}function lt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ct(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ut(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class dt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ht),void 0===r.error&&(r.error=ht),void 0===r.complete&&(r.complete=ht);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(AM){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(AM){"undefined"!==typeof console&&console.error&&console.error(AM)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ht(){}function ft(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function pt(e){return e&&e._delegate?e._delegate:e}class mt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gt="[DEFAULT]";class yt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ye;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(AM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(AM){if(r)return null;throw AM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:gt})}catch(AM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(AM){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===gt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;return this.component?this.component.multipleInstances?e:gt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class vt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const bt=[];var xt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xt||(xt={}));const wt={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},kt=xt.INFO,Et={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},St=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Et[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Tt{constructor(e){this.name=e,this._logLevel=kt,this._logHandler=St,this._userLogHandler=null,bt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?wt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...t),this._logHandler(this,xt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...t),this._logHandler(this,xt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xt.INFO,...t),this._logHandler(this,xt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xt.WARN,...t),this._logHandler(this,xt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...t),this._logHandler(this,xt.ERROR,...t)}}function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function It(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nt(t)?t:t+""}function _t(e,t,n){return(t=It(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach(function(t){_t(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let jt,Dt;const Pt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,Lt=new WeakMap;let Ft={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Rt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Vt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Dt||(Dt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(zt(this),n),Bt(Pt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bt(e.apply(zt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(zt(this),t,...r);return Mt.set(i,t.sort?t.sort():[t]),Bt(i)}}function Ut(e){return"function"===typeof e?Vt(e):(e instanceof IDBTransaction&&function(e){if(Rt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Rt.set(e,t)}(e),t=e,(jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ft):e);var t}function Bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Bt(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Pt.set(t,e)}).catch(()=>{}),Lt.set(t,e),t}(e);if(Ot.has(e))return Ot.get(e);const t=Ut(e);return t!==e&&(Ot.set(e,t),Lt.set(t,e)),t}const zt=e=>Lt.get(e);const qt=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],Kt=new Map;function Wt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Kt.get(t))return Kt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Ht.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!qt.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Kt.set(t,i),i}Ft=(e=>At(At({},e),{},{get:(t,n,r)=>Wt(t,n)||e.get(t,n,r),has:(t,n)=>!!Wt(t,n)||e.has(t,n)}))(Ft);class Gt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Qt="@firebase/app",Xt="0.9.13",Yt=new Tt("@firebase/app"),$t="@firebase/app-compat",Jt="@firebase/analytics-compat",Zt="@firebase/analytics",en="@firebase/app-check-compat",tn="@firebase/app-check",nn="@firebase/auth",rn="@firebase/auth-compat",sn="@firebase/database",an="@firebase/database-compat",on="@firebase/functions",ln="@firebase/functions-compat",cn="@firebase/installations",un="@firebase/installations-compat",dn="@firebase/messaging",hn="@firebase/messaging-compat",fn="@firebase/performance",pn="@firebase/performance-compat",mn="@firebase/remote-config",gn="@firebase/remote-config-compat",yn="@firebase/storage",vn="@firebase/storage-compat",bn="@firebase/firestore",xn="@firebase/firestore-compat",wn="firebase",kn="[DEFAULT]",En={[Qt]:"fire-core",[$t]:"fire-core-compat",[Zt]:"fire-analytics",[Jt]:"fire-analytics-compat",[tn]:"fire-app-check",[en]:"fire-app-check-compat",[nn]:"fire-auth",[rn]:"fire-auth-compat",[sn]:"fire-rtdb",[an]:"fire-rtdb-compat",[on]:"fire-fn",[ln]:"fire-fn-compat",[cn]:"fire-iid",[un]:"fire-iid-compat",[dn]:"fire-fcm",[hn]:"fire-fcm-compat",[fn]:"fire-perf",[pn]:"fire-perf-compat",[mn]:"fire-rc",[gn]:"fire-rc-compat",[yn]:"fire-gcs",[vn]:"fire-gcs-compat",[bn]:"fire-fst",[xn]:"fire-fst-compat","fire-js":"fire-js",[wn]:"fire-js-all"},Sn=new Map,Tn=new Map;function Nn(e,t){try{e.container.addComponent(t)}catch(AM){Yt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),AM)}}function In(e){const t=e.name;if(Tn.has(t))return Yt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tn.set(t,e);for(const n of Sn.values())Nn(n,e);return!0}function _n(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Cn=new st("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class An{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}const jn="9.23.0";function Dn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:kn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Cn.create("bad-app-name",{appName:String(s)});if(n||(n=Qe()),!n)throw Cn.create("no-options");const i=Sn.get(s);if(i){if(at(n,i.options)&&at(r,i.config))return i;throw Cn.create("duplicate-app",{appName:s})}const a=new vt(s);for(const l of Tn.values())a.addComponent(l);const o=new An(n,r,a);return Sn.set(s,o),o}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn;const t=Sn.get(e);if(!t&&e===kn&&Qe())return Dn();if(!t)throw Cn.create("no-app",{appName:e});return t}function Rn(e,t,n){var r;let s=null!==(r=En[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Yt.warn(e.join(" "))}In(new mt("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Mn="firebase-heartbeat-store";let On=null;function Ln(){return On||(On=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Bt(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Bt(a.result),e.oldVersion,e.newVersion,Bt(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Mn)}}).catch(e=>{throw Cn.create("idb-open",{originalErrorMessage:e.message})})),On}async function Fn(e,t){try{const n=(await Ln()).transaction(Mn,"readwrite"),r=n.objectStore(Mn);await r.put(t,Vn(e)),await n.done}catch(AM){if(AM instanceof rt)Yt.warn(AM.message);else{const t=Cn.create("idb-set",{originalErrorMessage:null===AM||void 0===AM?void 0:AM.message});Yt.warn(t.message)}}}function Vn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Un{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Bn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Bn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),qn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),qn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ze(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Bn(){return(new Date).toISOString().substring(0,10)}class zn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!tt()&&nt().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ln();return await t.transaction(Mn).objectStore(Mn).get(Vn(e))}catch(AM){if(AM instanceof rt)Yt.warn(AM.message);else{const t=Cn.create("idb-get",{originalErrorMessage:null===AM||void 0===AM?void 0:AM.message});Yt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Fn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Fn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qn(e){return ze(JSON.stringify({version:2,heartbeats:e})).length}var Hn;Hn="",In(new mt("platform-logger",e=>new Gt(e),"PRIVATE")),In(new mt("heartbeat",e=>new Un(e),"PRIVATE")),Rn(Qt,Xt,Hn),Rn(Qt,Xt,"esm2017"),Rn("fire-js","");function Kn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Wn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gn=Wn,Qn=new st("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xn=new Tt("@firebase/auth");function Yn(e){if(Xn.logLevel<=xt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xn.error("Auth (".concat(jn,"): ").concat(e),...n)}}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw er(e,...n)}function Jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return er(e,...n)}function Zn(e,t,n){const r=Object.assign(Object.assign({},Gn()),{[t]:n});return new st("auth","Firebase",r).create(t,{appName:e.name})}function er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Qn.create(e,...n)}function tr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw er(t,...r)}}function nr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yn(t),new Error(t)}function rr(e,t){e||nr(t)}function sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ir(){return"http:"===ar()||"https:"===ar()}function ar(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class or{constructor(e,t){this.shortDelay=e,this.longDelay=t,rr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ir()||et()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function lr(e,t){rr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class cr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ur={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},dr=new or(3e4,6e4);function hr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function fr(e,t,n,r){return pr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=lt(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),cr.fetch()(gr(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},s))})}async function pr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ur),t);try{const t=new yr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw vr(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw vr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw vr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw vr(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Zn(e,o,a);$n(e,o)}}catch(AM){if(AM instanceof rt)throw AM;$n(e,"network-request-failed",{message:String(AM)})}}async function mr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await fr(e,t,n,r,s);return"mfaPendingCredential"in i&&$n(e,"multi-factor-auth-required",{_serverResponse:i}),i}function gr(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?lr(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}class yr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Jn(this.auth,"network-request-failed")),dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Jn(e,t,r);return s.customData._tokenResponse=n,s}function br(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(AM){}}function xr(e){return 1e3*Number(e)}function wr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Yn("JWT malformed, contained fewer than 3 sections"),null;try{const e=qe(n);return e?JSON.parse(e):(Yn("Failed to decode base64 JWT payload"),null)}catch(AM){return Yn("Caught error parsing JWT payload as JSON",null===AM||void 0===AM?void 0:AM.toString()),null}}async function kr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(AM){throw AM instanceof rt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(AM)&&e.auth.currentUser===e&&await e.auth.signOut(),AM}}class Er{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(AM){return void((null===AM||void 0===AM?void 0:AM.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Sr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=br(this.lastLoginAt),this.creationTime=br(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tr(e){var t;const n=e.auth,r=await e.getIdToken(),s=await kr(e,async function(e,t){return fr(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));tr(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=Kn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sr(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class Nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tr(e.idToken,"internal-error"),tr("undefined"!==typeof e.idToken,"internal-error"),tr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=wr(e);return tr(t,"internal-error"),tr("undefined"!==typeof t.exp,"internal-error"),tr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tr(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await pr(e,{},async()=>{const n=lt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=gr(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cr.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Nr;return n&&(tr("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(tr("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(tr("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nr,this.toJSON())}_performRefresh(){return nr("not implemented")}}function Ir(e,t){tr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _r{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Kn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sr(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await kr(this,this.stsTokenManager.getToken(this.auth,e));return tr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=pt(e),r=await n.getIdToken(t),s=wr(r);tr(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:br(xr(s.auth_time)),issuedAtTime:br(xr(s.iat)),expirationTime:br(xr(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=pt(e);await Tr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(tr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Tr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await kr(this,async function(e,t){return fr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:k}=t;tr(v&&k,e,"internal-error");const E=Nr.fromJSON(this.name,k);tr("string"===typeof v,e,"internal-error"),Ir(u,e.name),Ir(d,e.name),tr("boolean"===typeof b,e,"internal-error"),tr("boolean"===typeof x,e,"internal-error"),Ir(h,e.name),Ir(f,e.name),Ir(p,e.name),Ir(m,e.name),Ir(g,e.name),Ir(y,e.name);const S=new _r({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(S.providerData=w.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Nr;r.updateFromServerResponse(t);const s=new _r({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Tr(s),s}}const Cr=new Map;function Ar(e){rr(e instanceof Function,"Expected a class definition");let t=Cr.get(e);return t?(rr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cr.set(e,t),t)}class jr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jr.type="NONE";const Dr=jr;function Pr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Rr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Pr(this.userKey,r.apiKey,s),this.fullPersistenceKey=Pr("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Rr(Ar(Dr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Ar(Dr);const i=Pr(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=_r._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Rr(s,e,n)):new Rr(s,e,n)}}function Mr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Vr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Or(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Br(t))return"Blackberry";if(zr(t))return"Webos";if(Lr(t))return"Safari";if((t.includes("chrome/")||Fr(t))&&!t.includes("edge/"))return"Chrome";if(Ur(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/firefox\//i.test(e)}function Lr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/crios\//i.test(e)}function Vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/iemobile/i.test(e)}function Ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/android/i.test(e)}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/blackberry/i.test(e)}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/webos/i.test(e)}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Hr(){return function(){const e=Je();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je();return qr(e)||Ur(e)||zr(e)||Br(e)||/windows phone/i.test(e)||Vr(e)}function Wr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Mr(Je());break;case"Worker":t="".concat(Mr(Je()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(jn,"/").concat(r)}async function Gr(e,t){return fr(e,"GET","/v2/recaptchaConfig",hr(e,t))}function Qr(e){return void 0!==e&&void 0!==e.enterprise}class Xr{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function Yr(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Jn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function $r(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Jr{constructor(e){this.type="recaptcha-enterprise",this.auth=ns(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Qr(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Gr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Xr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Qr(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Yr("https://www.google.com/recaptcha/enterprise.js?render="+s).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Zr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Jr(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class es{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(AM){r(AM)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(AM){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===AM||void 0===AM?void 0:AM.message})}}}class ts{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rs(this),this.idTokenSubscription=new rs(this),this.beforeStateQueue=new es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Rr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(AM){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(AM){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(AM))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(AM){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tr(e)}catch(AM){if((null===AM||void 0===AM?void 0:AM.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?pt(e):null;return t&&tr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&tr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}async initializeRecaptchaConfig(){const e=await Gr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Xr(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Jr(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new st("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;tr(t,this,"argument-error"),this.redirectPersistenceManager=await Rr.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return tr(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xn.logLevel<=xt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xn.warn("Auth (".concat(jn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ns(e){return pt(e)}class rs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new dt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return tr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ss(e,t,n){const r=ns(e);tr(r._canInitEmulator,r,"emulator-config-failed"),tr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=is(t),{host:a,port:o}=function(e){const t=is(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:as(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:as(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function is(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function as(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class os{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,t){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}}async function ls(e,t){return fr(e,"POST","/v1/accounts:update",t)}async function cs(e,t){return mr(e,"POST","/v1/accounts:signInWithPassword",hr(e,t))}class us extends os{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new us(e,t,"password")}static _fromEmailAndCode(e,t){return new us(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Zr(e,n,"signInWithPassword");return cs(e,t)}return cs(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Zr(e,n,"signInWithPassword");return cs(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithEmailLink",hr(e,t))}(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ls(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithEmailLink",hr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ds(e,t){return mr(e,"POST","/v1/accounts:signInWithIdp",hr(e,t))}class hs extends os{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Kn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new hs(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ds(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ds(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ds(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lt(t)}return e}}const fs={USER_NOT_FOUND:"user-not-found"};class ps extends os{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ps({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ps({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithPhoneNumber",hr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await mr(e,"POST","/v1/accounts:signInWithPhoneNumber",hr(e,t));if(n.temporaryProof)throw vr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return mr(e,"POST","/v1/accounts:signInWithPhoneNumber",hr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fs)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new ps({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class ms{constructor(e){var t,n,r,s,i,a;const o=ct(ut(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);tr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ct(ut(e)).link,n=t?ct(ut(t)).deep_link_id:null,r=ct(ut(e)).deep_link_id;return(r?ct(ut(r)).link:null)||r||n||t||e}(e);try{return new ms(t)}catch(n){return null}}}class gs{constructor(){this.providerId=gs.PROVIDER_ID}static credential(e,t){return us._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ms.parseLink(t);return tr(n,"argument-error"),us._fromEmailAndCode(e,n.code,n.tenantId)}}gs.PROVIDER_ID="password",gs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",gs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ys{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vs extends ys{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bs extends vs{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return bs.credential(t.oauthAccessToken)}catch(n){return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com",bs.PROVIDER_ID="facebook.com";class xs extends vs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hs._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return xs.credential(n,r)}catch(s){return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com",xs.PROVIDER_ID="google.com";class ws extends vs{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ws.credential(t.oauthAccessToken)}catch(n){return null}}}ws.GITHUB_SIGN_IN_METHOD="github.com",ws.PROVIDER_ID="github.com";class ks extends vs{constructor(){super("twitter.com")}static credential(e,t){return hs._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ks.credential(n,r)}catch(s){return null}}}async function Es(e,t){return mr(e,"POST","/v1/accounts:signUp",hr(e,t))}ks.TWITTER_SIGN_IN_METHOD="twitter.com",ks.PROVIDER_ID="twitter.com";class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await _r._fromIdTokenResponse(e,n,r),i=Ts(n);return new Ss({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ts(n);return new Ss({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ts(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ns extends rt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ns.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ns(e,t,n,r)}}function Is(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ns._fromErrorAndOperation(e,n,t,r);throw n})}async function _s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await kr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ss._forOperation(e,"link",r)}async function Cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const i=await kr(e,Is(r,s,t,e),n);tr(i.idToken,r,"internal-error");const a=wr(i.idToken);tr(a,r,"internal-error");const{sub:o}=a;return tr(e.uid===o,r,"user-mismatch"),Ss._forOperation(e,s,i)}catch(AM){throw(null===AM||void 0===AM?void 0:AM.code)==="auth/".concat("user-not-found")&&$n(r,"user-mismatch"),AM}}async function As(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await Is(e,r,t),i=await Ss._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function js(e,t){return As(ns(e),t)}new WeakMap;const Ds="__sak";class Ps{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ds,"1"),this.storage.removeItem(Ds),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Rs extends Ps{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Je();return Lr(e)||qr(e)}()&&function(){try{return!(!window||window===window.top)}catch(AM){return!1}}(),this.fallbackToPolling=Kr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Hr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rs.type="LOCAL";const Ms=Rs;class Os extends Ps{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Os.type="SESSION";const Ls=Os;class Fs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Fs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fs.receivers=[];class Us{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Vs("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Bs(){return window}function zs(){return"undefined"!==typeof Bs().WorkerGlobalScope&&"function"===typeof Bs().importScripts}const qs="firebaseLocalStorageDb",Hs="firebaseLocalStorage",Ks="fbase_key";class Ws{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gs(e,t){return e.transaction([Hs],t?"readwrite":"readonly").objectStore(Hs)}function Qs(){const e=indexedDB.open(qs,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Hs,{keyPath:Ks})}catch(AM){n(AM)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Hs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(qs);return new Ws(e).toPromise()}(),t(await Qs()))})})}async function Xs(e,t,n){const r=Gs(e,!0).put({[Ks]:t,value:n});return new Ws(r).toPromise()}function Ys(e,t){const n=Gs(e,!0).delete(t);return new Ws(n).toPromise()}class $s{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Qs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(AM){if(t++>3)throw AM;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fs._getInstance(zs()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Us(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qs();return await Xs(e,Ds,"1"),await Ys(e,Ds),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xs(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Gs(e,!1).get(t),r=await new Ws(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ys(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Gs(e,!1).getAll();return new Ws(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$s.type="LOCAL";const Js=$s;$r("rcb"),new or(3e4,6e4);const Zs="recaptcha";async function ei(e,t,n){var r;const s=await n.verify();try{let i;if(tr("string"===typeof s,e,"argument-error"),tr(n.type===Zs,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){tr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return fr(e,"POST","/v2/accounts/mfaEnrollment:start",hr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{tr("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;tr(n,e,"missing-multi-factor-info");const a=await function(e,t){return fr(e,"POST","/v2/accounts/mfaSignIn:start",hr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return fr(e,"POST","/v1/accounts:sendVerificationCode",hr(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class ti{constructor(e){this.providerId=ti.PROVIDER_ID,this.auth=ns(e)}verifyPhoneNumber(e,t){return ei(this.auth,e,pt(t))}static credential(e,t){return ps._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ti.credentialFromTaggedObject(t)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ps._fromTokenResponse(n,r):null}}function ni(e,t){return t?Ar(t):(tr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ti.PROVIDER_ID="phone",ti.PHONE_SIGN_IN_METHOD="phone";class ri extends os{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ds(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function si(e){return As(e.auth,new ri(e),e.bypassAuthState)}function ii(e){const{auth:t,user:n}=e;return tr(n,t,"internal-error"),Cs(n,new ri(e),e.bypassAuthState)}async function ai(e){const{auth:t,user:n}=e;return tr(n,t,"internal-error"),_s(n,new ri(e),e.bypassAuthState)}class oi{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(AM){this.reject(AM)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(AM){this.reject(AM)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return si;case"linkViaPopup":case"linkViaRedirect":return ai;case"reauthViaPopup":case"reauthViaRedirect":return ii;default:$n(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const li=new or(2e3,1e4);class ci extends oi{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,ci.currentPopupAction&&ci.currentPopupAction.cancel(),ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tr(e,this.auth,"internal-error"),e}async onExecution(){rr(1===this.filter.length,"Popup operations only handle one event");const e=Vs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,li.get())};e()}}ci.currentPopupAction=null;const ui=new Map;class di extends oi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ui.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=pi(t),r=fi(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(AM){e=()=>Promise.reject(AM)}ui.set(this.auth._key(),e)}return this.bypassAuthState||ui.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function hi(e,t){ui.set(e._key(),t)}function fi(e){return Ar(e._redirectPersistence)}function pi(e){return Pr("pendingRedirect",e.config.apiKey,e.name)}async function mi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ns(e),s=ni(r,t),i=new di(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class gi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!vi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yi(e))}saveEventToCache(e){this.cachedEventUids.add(yi(e)),this.lastProcessedEventTime=Date.now()}}function yi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vi(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const bi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xi=/^https?/;async function wi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return fr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ki(r))return}catch(n){}$n(e,"unauthorized-domain")}function ki(e){const t=sr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!xi.test(n))return!1;if(bi.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Ei=new or(3e4,6e4);function Si(){const e=Bs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Ti=null;function Ni(e){return Ti=Ti||function(e){return new Promise((t,n)=>{var r,s,i;function a(){Si(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Si(),n(Jn(e,"network-request-failed"))},timeout:Ei.get()})}if(null===(s=null===(r=Bs().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Bs().gapi)||void 0===i?void 0:i.load)){const t=$r("iframefcb");return Bs()[t]=()=>{gapi.load?a():n(Jn(e,"network-request-failed"))},Yr("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Ti=null,e})}(e),Ti}const Ii=new or(5e3,15e3),_i={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ci=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ai(e){const t=e.config;tr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?lr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:jn},s=Ci.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(lt(r).slice(1))}const ji={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Di{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(AM){}}}function Pi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ji),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Je().toLowerCase();n&&(o=Fr(c)?"_blank":n),Or(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return qr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Di(null);const d=window.open(t||"",o,u);tr(d,e,"popup-blocked");try{d.focus()}catch(AM){}return new Di(d)}const Ri="__/auth/handler",Mi="emulator/auth/handler",Oi=encodeURIComponent("fac");async function Li(e,t,n,r,s,i){tr(e.config.authDomain,e,"auth-domain-config-required"),tr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:jn,eventId:s};if(t instanceof ys){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof vs){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Oi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ri);return lr(t,Mi)}(e),"?").concat(lt(o).slice(1)).concat(c)}const Fi="webStorageSupport";const Vi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=mi,this._overrideRedirectResult=hi}async _openPopup(e,t,n,r){var s;rr(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Pi(e,await Li(e,t,n,sr(),r),Vs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Bs().location.href=e}(await Li(e,t,n,sr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(rr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Ni(e),n=Bs().gapi;return tr(n,e,"internal-error"),t.open({where:document.body,url:Ai(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_i,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Jn(e,"network-request-failed"),i=Bs().setTimeout(()=>{r(s)},Ii.get());function a(){Bs().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}(e),n=new gi(e);return t.register("authEvent",t=>{tr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fi,{type:Fi},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Fi];void 0!==s&&t(!!s),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kr()||Lr()||qr()}};var Ui="@firebase/auth",Bi="0.23.2";class zi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const qi=Xe("authIdTokenMaxAge")||300;let Hi=null;var Ki;Ki="Browser",In(new mt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;tr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ki,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wr(Ki)},c=new ts(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ar);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),In(new mt("auth-internal",e=>(e=>new zi(e))(ns(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(Ui,Bi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ki)),Rn(Ui,Bi,"esm2017");Rn("firebase","9.23.0","app");let Wi,Gi;const Qi=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,$i=new WeakMap,Ji=new WeakMap;let Zi={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return na(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ea(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gi||(Gi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ra(this),n),na(Qi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return na(e.apply(ra(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ra(this),t,...r);return Yi.set(i,t.sort?t.sort():[t]),na(i)}}function ta(e){return"function"===typeof e?ea(e):(e instanceof IDBTransaction&&function(e){if(Xi.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Xi.set(e,t)}(e),t=e,(Wi||(Wi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Zi):e);var t}function na(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(na(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Qi.set(t,e)}).catch(()=>{}),Ji.set(t,e),t}(e);if($i.has(e))return $i.get(e);const t=ta(e);return t!==e&&($i.set(e,t),Ji.set(t,e)),t}const ra=e=>Ji.get(e);const sa=["get","getKey","getAll","getAllKeys","count"],ia=["put","add","delete","clear"],aa=new Map;function oa(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(aa.get(t))return aa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=ia.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!sa.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return aa.set(t,i),i}!function(e){Zi=e(Zi)}(e=>At(At({},e),{},{get:(t,n,r)=>oa(t,n)||e.get(t,n,r),has:(t,n)=>!!oa(t,n)||e.has(t,n)}));const la="@firebase/installations",ca="0.6.4",ua=1e4,da="w:".concat(ca),ha="FIS_v2",fa=36e5,pa=new st("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ma(e){return e instanceof rt&&e.code.includes("request-failed")}function ga(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function ya(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function va(e,t){const n=(await t.json()).error;return pa.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ba(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xa(e,t){let{refreshToken:n}=t;const r=ba(e);return r.append("Authorization",function(e){return"".concat(ha," ").concat(e)}(n)),r}async function wa(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ka(e){return new Promise(t=>{setTimeout(t,e)})}const Ea=/^[cdef][\w-]{21}$/;function Sa(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Ea.test(t)?t:""}catch(e){return""}}function Ta(e){return"".concat(e.appName,"!").concat(e.appId)}const Na=new Map;function Ia(e,t){const n=Ta(e);_a(n,t),function(e,t){const n=Aa();n&&n.postMessage({key:e,fid:t});ja()}(n,t)}function _a(e,t){const n=Na.get(e);if(n)for(const r of n)r(t)}let Ca=null;function Aa(){return!Ca&&"BroadcastChannel"in self&&(Ca=new BroadcastChannel("[Firebase] FID Change"),Ca.onmessage=e=>{_a(e.data.key,e.data.fid)}),Ca}function ja(){0===Na.size&&Ca&&(Ca.close(),Ca=null)}const Da="firebase-installations-store";let Pa=null;function Ra(){return Pa||(Pa=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=na(a);return r&&a.addEventListener("upgradeneeded",e=>{r(na(a.result),e.oldVersion,e.newVersion,na(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",()=>s())}).catch(()=>{}),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Da)}})),Pa}async function Ma(e,t){const n=Ta(e),r=(await Ra()).transaction(Da,"readwrite"),s=r.objectStore(Da),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||Ia(e,t.fid),t}async function Oa(e){const t=Ta(e),n=(await Ra()).transaction(Da,"readwrite");await n.objectStore(Da).delete(t),await n.done}async function La(e,t){const n=Ta(e),r=(await Ra()).transaction(Da,"readwrite"),s=r.objectStore(Da),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||Ia(e,a.fid),a}async function Fa(e){let t;const n=await La(e.appConfig,n=>{const r=function(e){const t=e||{fid:Sa(),registrationStatus:0};return Ba(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(pa.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=ga(n),a=ba(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:ha,appId:n.appId,sdkVersion:da},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await wa(()=>fetch(i,c));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:ya(e.authToken)}}throw await va("Create Installation",u)}(e,t);return Ma(e.appConfig,n)}catch(AM){throw ma(AM)&&409===AM.customData.serverCode?await Oa(e.appConfig):await Ma(e.appConfig,{fid:t.fid,registrationStatus:0}),AM}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Va(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Va(e){let t=await Ua(e.appConfig);for(;1===t.registrationStatus;)await ka(100),t=await Ua(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Fa(e);return n||t}return t}function Ua(e){return La(e,e=>{if(!e)throw pa.create("installation-not-found");return Ba(e)})}function Ba(e){return 1===(t=e).registrationStatus&&t.registrationTime+ua<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function za(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(ga(e),"/").concat(n,"/authTokens:generate")}(n,t),i=xa(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:da,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await wa(()=>fetch(s,l));if(c.ok){return ya(await c.json())}throw await va("Generate Auth Token",c)}async function qa(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await La(e.appConfig,r=>{if(!Ka(r))throw pa.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+fa}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Ha(e.appConfig);for(;1===n.authToken.requestStatus;)await ka(100),n=await Ha(e.appConfig);const r=n.authToken;return 0===r.requestStatus?qa(e,t):r}(e,n),r;{if(!navigator.onLine)throw pa.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await za(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ma(e.appConfig,r),n}catch(AM){if(!ma(AM)||401!==AM.customData.serverCode&&404!==AM.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ma(e.appConfig,n)}else await Oa(e.appConfig);throw AM}}(e,n),n}});return t?await t:r.authToken}function Ha(e){return La(e,e=>{if(!Ka(e))throw pa.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ua<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Ka(e){return void 0!==e&&2===e.registrationStatus}async function Wa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Fa(e);t&&await t}(n);return(await qa(n,t)).token}function Ga(e){return pa.create("missing-app-config-values",{valueName:e})}const Qa="installations",Xa=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ga("App Configuration");if(!e.name)throw Ga("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ga(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:_n(t,"heartbeat"),_delete:()=>Promise.resolve()}},Ya=e=>{const t=_n(e.getProvider("app").getImmediate(),Qa).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Fa(t);return r?r.catch(console.error):qa(t).catch(console.error),n.fid}(t),getToken:e=>Wa(t,e)}};In(new mt(Qa,Xa,"PUBLIC")),In(new mt("installations-internal",Ya,"PRIVATE")),Rn(la,ca),Rn(la,ca,"esm2017");const $a="analytics",Ja="https://www.googletagmanager.com/gtag/js",Za=new Tt("@firebase/analytics"),eo=new st("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function to(e){if(!e.startsWith(Ja)){const t=eo.create("invalid-gtag-resource",{gtagURL:e});return Za.warn(t.message),""}return e}function no(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function ro(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:to}),r=document.createElement("script"),s="".concat(Ja,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function so(e,t,n,r){return async function(s){try{for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("event"===s){const[r,s]=a;await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await no(n);for(const n of e){const e=r.find(e=>e.measurementId===n),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(AM){Za.error(AM)}}(e,t,n,r,s)}else if("config"===s){const[s,i]=a;await async function(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const e=(await no(n)).find(e=>e.measurementId===s);e&&await t[e.appId]}}catch(AM){Za.error(AM)}e("config",s,i)}(e,t,n,r,s,i)}else if("consent"===s){const[t]=a;e("consent","update",t)}else if("get"===s){const[t,n,r]=a;e("get",t,n,r)}else if("set"===s){const[t]=a;e("set",t)}else e(s,...a)}catch(AM){Za.error(AM)}}}const io=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ao(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function oo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:io,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw eo.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw eo.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new co;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),lo({appId:r,apiKey:s,measurementId:i},a,o,t)}async function lo(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:io;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(eo.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(AM){if(l)return Za.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===AM||void 0===AM?void 0:AM.message,"]")),{appId:o,measurementId:l};throw AM}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:ao(r)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(i,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw eo.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(o),t}catch(AM){const r=AM;if(!function(e){if(!(e instanceof rt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(i.deleteThrottleMetadata(o),l)return Za.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:o,measurementId:l};throw AM}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?ft(s,i.intervalMillis,30):ft(s,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:s+1};return i.setThrottleMetadata(o,u),Za.debug("Calling attemptFetch again in ".concat(c," millis")),lo(e,u,n,i)}}class co{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let uo,ho;function fo(e){ho=e}function po(e){uo=e}async function mo(e,t,n,r,s,i,a){var o;const l=oo(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Za.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>Za.error(e)),t.push(l);const c=async function(){if(!tt())return Za.warn(eo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await nt()}catch(AM){return Za.warn(eo.create("indexeddb-unavailable",{errorInfo:null===AM||void 0===AM?void 0:AM.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Ja)&&n.src.includes(e))return n;return null})(i)||ro(i,u.measurementId),ho&&(s("consent","default",ho),fo(void 0)),s("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),uo&&(s("set",uo),po(void 0)),u.measurementId}class go{constructor(e){this.app=e}_delete(){return delete yo[this.app.options.appId],Promise.resolve()}}let yo={},vo=[];const bo={};let xo,wo,ko="dataLayer",Eo="gtag",So=!1;function To(){const e=[];if(et()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=eo.create("invalid-analytics-context",{errorInfo:t});Za.warn(n.message)}}function No(e,t,n){To();const r=e.options.appId;if(!r)throw eo.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw eo.create("no-api-key");Za.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=yo[r])throw eo.create("already-exists",{id:r});if(!So){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ko);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(i=window[s]),window[s]=so(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(yo,vo,bo,ko,Eo);wo=e,xo=t,So=!0}yo[r]=mo(e,vo,bo,t,xo,ko,n);return new go(e)}function Io(e,t,n,r){e=pt(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(wo,yo[e.app.options.appId],t,n,r).catch(e=>Za.error(e))}const _o="@firebase/analytics",Co="0.10.0";In(new mt($a,(e,t)=>{let{options:n}=t;return No(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),In(new mt("analytics-internal",function(e){try{const t=e.getProvider($a).getImmediate();return{logEvent:(e,n,r)=>Io(t,e,n,r)}}catch(AM){throw eo.create("interop-component-reg-failed",{reason:AM})}},"PRIVATE")),Rn(_o,Co),Rn(_o,Co,"esm2017");var Ao,jo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Do={},Po=Po||{},Ro=jo||self;function Mo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Oo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Lo="closure_uid_"+(1e9*Math.random()>>>0),Fo=0;function Vo(e,t,n){return e.call.apply(e.bind,arguments)}function Uo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bo(e,t,n){return(Bo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vo:Uo).apply(null,arguments)}function zo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function Ho(){this.s=this.s,this.o=this.o}Ho.prototype.s=!1,Ho.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Lo)&&e[Lo]||(e[Lo]=++Fo))},Ho.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ko=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Wo(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Go(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Mo(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function Qo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Qo.prototype.h=function(){this.defaultPrevented=!0};var Xo=function(){if(!Ro.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ro.addEventListener("test",()=>{},t),Ro.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Yo(e){return/^[\s\xa0]*$/.test(e)}function $o(){var e=Ro.navigator;return e&&(e=e.userAgent)?e:""}function Jo(e){return-1!=$o().indexOf(e)}function Zo(e){return Zo[" "](e),e}Zo[" "]=function(){};var el,tl,nl=Jo("Opera"),rl=Jo("Trident")||Jo("MSIE"),sl=Jo("Edge"),il=sl||rl,al=Jo("Gecko")&&!(-1!=$o().toLowerCase().indexOf("webkit")&&!Jo("Edge"))&&!(Jo("Trident")||Jo("MSIE"))&&!Jo("Edge"),ol=-1!=$o().toLowerCase().indexOf("webkit")&&!Jo("Edge");function ll(){var e=Ro.document;return e?e.documentMode:void 0}e:{var cl="",ul=function(){var e=$o();return al?/rv:([^\);]+)(\)|;)/.exec(e):sl?/Edge\/([\d\.]+)/.exec(e):rl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ol?/WebKit\/(\S+)/.exec(e):nl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ul&&(cl=ul?ul[1]:""),rl){var dl=ll();if(null!=dl&&dl>parseFloat(cl)){el=String(dl);break e}}el=cl}if(Ro.document&&rl){var hl=ll();tl=hl||(parseInt(el,10)||void 0)}else tl=void 0;var fl=tl;function pl(e,t){if(Qo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(al){e:{try{Zo(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ml[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&pl.$.h.call(this)}}qo(pl,Qo);var ml={2:"touch",3:"pen",4:"mouse"};pl.prototype.h=function(){pl.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var gl="closure_listenable_"+(1e6*Math.random()|0),yl=0;function vl(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++yl,this.fa=this.ia=!1}function bl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function xl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function wl(e){const t={};for(const n in e)t[n]=e[n];return t}const kl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function El(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<kl.length;t++)n=kl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sl(e){this.src=e,this.g={},this.h=0}function Tl(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Ko(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(bl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Nl(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}Sl.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=Nl(e,t,r,s);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new vl(t,this.src,i,!!r,s)).ia=n,e.push(t)),t};var Il="closure_lm_"+(1e6*Math.random()|0),_l={};function Cl(e,t,n,r,s){if(r&&r.once)return jl(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Cl(e,t[i],n,r,s);return null}return n=Fl(n),e&&e[gl]?e.O(t,n,Oo(r)?!!r.capture:!!r,s):Al(e,t,n,!1,r,s)}function Al(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=Oo(s)?!!s.capture:!!s,o=Ol(e);if(o||(e[Il]=o=new Sl(e)),(n=o.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Ml;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xo||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Rl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function jl(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)jl(e,t[i],n,r,s);return null}return n=Fl(n),e&&e[gl]?e.P(t,n,Oo(r)?!!r.capture:!!r,s):Al(e,t,n,!0,r,s)}function Dl(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Dl(e,t[i],n,r,s);else r=Oo(r)?!!r.capture:!!r,n=Fl(n),e&&e[gl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Nl(i=e.g[t],n,r,s))&&(bl(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Ol(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Nl(t,n,r,s)),(n=-1<e?t[e]:null)&&Pl(n))}function Pl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[gl])Tl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Rl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ol(t))?(Tl(n,e),0==n.h&&(n.src=null,t[Il]=null)):bl(e)}}}function Rl(e){return e in _l?_l[e]:_l[e]="on"+e}function Ml(e,t){if(e.fa)e=!0;else{t=new pl(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Pl(e),e=n.call(r,t)}return e}function Ol(e){return(e=e[Il])instanceof Sl?e:null}var Ll="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fl(e){return"function"===typeof e?e:(e[Ll]||(e[Ll]=function(t){return e.handleEvent(t)}),e[Ll])}function Vl(){Ho.call(this),this.i=new Sl(this),this.S=this,this.J=null}function Ul(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Qo(t,e);else if(t instanceof Qo)t.target=t.target||e;else{var s=t;El(t=new Qo(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=Bl(a,r,!0,t)&&s}if(s=Bl(a=t.g=e,r,!0,t)&&s,s=Bl(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=Bl(a=t.g=n[i],r,!1,t)&&s}function Bl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.fa&&a.capture==n){var o=a.listener,l=a.la||a.src;a.ia&&Tl(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}qo(Vl,Ho),Vl.prototype[gl]=!0,Vl.prototype.removeEventListener=function(e,t,n,r){Dl(this,e,t,n,r)},Vl.prototype.N=function(){if(Vl.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bl(n[r]);delete t.g[e],t.h--}}this.J=null},Vl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vl.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zl=Ro.JSON.stringify;function ql(){var e=Yl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Hl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Kl,e=>e.reset());class Kl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Wl(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Gl(e){Ro.setTimeout(()=>{throw e},0)}let Ql,Xl=!1,Yl=new class{constructor(){this.h=this.g=null}add(e,t){const n=Hl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},$l=()=>{const e=Ro.Promise.resolve(void 0);Ql=()=>{e.then(Jl)}};var Jl=()=>{for(var e;e=ql();){try{e.h.call(e.g)}catch(n){Gl(n)}var t=Hl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xl=!1};function Zl(e,t){Vl.call(this),this.h=e||1,this.g=t||Ro,this.j=Bo(this.qb,this),this.l=Date.now()}function ec(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function tc(e,t,n){if("function"===typeof e)n&&(e=Bo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bo(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ro.setTimeout(e,t||0)}function nc(e){e.g=tc(()=>{e.g=null,e.i&&(e.i=!1,nc(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}qo(Zl,Vl),(Ao=Zl.prototype).ga=!1,Ao.T=null,Ao.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ul(this,"tick"),this.ga&&(ec(this),this.start()))}},Ao.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ao.N=function(){Zl.$.N.call(this),ec(this),delete this.g};class rc extends Ho{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nc(this)}N(){super.N(),this.g&&(Ro.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sc(e){Ho.call(this),this.h=e,this.g={}}qo(sc,Ho);var ic=[];function ac(e,t,n,r){Array.isArray(n)||(n&&(ic[0]=n.toString()),n=ic);for(var s=0;s<n.length;s++){var i=Cl(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function oc(e){xl(e.g,function(e,t){this.g.hasOwnProperty(t)&&Pl(e)},e),e.g={}}function lc(){this.g=!0}function cc(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return zl(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}sc.prototype.N=function(){sc.$.N.call(this),oc(this)},sc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lc.prototype.Ea=function(){this.g=!1},lc.prototype.info=function(){};var uc={},dc=null;function hc(){return dc=dc||new Vl}function fc(e){Qo.call(this,uc.Ta,e)}function pc(e){const t=hc();Ul(t,new fc(t))}function mc(e,t){Qo.call(this,uc.STAT_EVENT,e),this.stat=t}function gc(e){const t=hc();Ul(t,new mc(t,e))}function yc(e,t){Qo.call(this,uc.Ua,e),this.size=t}function vc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ro.setTimeout(function(){e()},t)}uc.Ta="serverreachability",qo(fc,Qo),uc.STAT_EVENT="statevent",qo(mc,Qo),uc.Ua="timingevent",qo(yc,Qo);var bc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wc(){}function kc(e){return e.h||(e.h=e.i())}function Ec(){}wc.prototype.h=null;var Sc,Tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nc(){Qo.call(this,"d")}function Ic(){Qo.call(this,"c")}function _c(){}function Cc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new sc(this),this.P=jc,e=il?125:void 0,this.V=new Zl(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ac}function Ac(){this.i=null,this.g="",this.h=!1}qo(Nc,Qo),qo(Ic,Qo),qo(_c,wc),_c.prototype.g=function(){return new XMLHttpRequest},_c.prototype.i=function(){return{}},Sc=new _c;var jc=45e3,Dc={},Pc={};function Rc(e,t,n){e.L=1,e.v=Zc(Qc(t)),e.s=n,e.S=!0,Mc(e,null)}function Mc(e,t){e.G=Date.now(),Vc(e),e.A=Qc(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),hu(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ac,e.g=fd(e.l,n?t:null,!e.s),0<e.O&&(e.M=new rc(Bo(e.Pa,e,e.g),e.O)),ac(e.U,e.g,"readystatechange",e.nb),t=e.I?wl(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),pc(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Oc(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Lc(e,t,n){let r,s=!0;for(;!e.J&&e.C<n.length;){if(r=Fc(e,n),r==Pc){4==t&&(e.o=4,gc(14),s=!1),cc(e.j,e.m,null,"[Incomplete Response]");break}if(r==Dc){e.o=4,gc(15),cc(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}cc(e.j,e.m,r,null),Hc(e,r)}Oc(e)&&r!=Pc&&r!=Dc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,gc(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),id(t),t.M=!0,gc(11))):(cc(e.j,e.m,n,"[Invalid Chunked Response]"),qc(e),zc(e))}function Fc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pc:(n=Number(t.substring(n,r)),isNaN(n)?Dc:(r+=1)+n>t.length?Pc:(t=t.slice(r,r+n),e.C=r+n,t))}function Vc(e){e.Y=Date.now()+e.P,Uc(e,e.P)}function Uc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=vc(Bo(e.lb,e),t)}function Bc(e){e.B&&(Ro.clearTimeout(e.B),e.B=null)}function zc(e){0==e.l.H||e.J||ld(e.l,e)}function qc(e){Bc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ec(e.V),oc(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Hc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||bu(n.i,e)))if(!e.K&&bu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;od(n),$u(n)}sd(n),gc(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=vc(Bo(n.ib,n),6e3));if(1>=vu(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ud(n,11)}else if((e.K||n.g==e)&&od(n),!Yo(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=c[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(xu(i,i.h),i.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Jc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=hd(r,r.J?r.pa:null,r.Y),a.K){wu(r.i,a);var o=a,l=r.L;l&&o.setTimeout(l),o.B&&(Bc(o),Vc(o)),r.g=a}else rd(r);0<n.j.length&&Zu(n)}else"stop"!=c[0]&&"close"!=c[0]||ud(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ud(n,7):Yu(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}pc()}catch(c){}}function Kc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mo(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mo(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}(Ao=Cc.prototype).setTimeout=function(e){this.P=e},Ao.nb=function(e){e=e.target;const t=this.M;t&&3==Hu(e)?t.l():this.Pa(e)},Ao.Pa=function(e){try{if(e==this.g)e:{const u=Hu(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||il||this.g&&(this.h.h||this.g.ja()||Ku(this.g)))){this.J||4!=u||7==t||pc(),Bc(this);var n=this.g.da();this.ca=n;t:if(Oc(this)){var r=Ku(this.g);e="";var s=r.length,i=4==Hu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qc(this),zc(this);var a="";break t}this.h.i=new Ro.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yo(o)){var c=o;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,gc(12),qc(this),zc(this);break e}cc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hc(this,n)}this.S?(Lc(this,u,a),il&&this.i&&3==u&&(ac(this.U,this.V,"tick",this.mb),this.V.start())):(cc(this.j,this.m,a,null),Hc(this,a)),4==u&&qc(this),this.i&&!this.J&&(4==u?ld(this.l,this):(this.i=!1,Vc(this)))}else(function(e){const t={};e=(e.g&&2<=Hu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Yo(e[r]))continue;var n=Wl(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,gc(12)):(this.o=0,gc(13)),qc(this),zc(this)}}}catch(u){}},Ao.mb=function(){if(this.g){var e=Hu(this.g),t=this.g.ja();this.C<t.length&&(Bc(this),Lc(this,e,t),this.i&&4!=e&&Vc(this))}},Ao.cancel=function(){this.J=!0,qc(this)},Ao.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(pc(),gc(17)),qc(this),this.o=2,zc(this)):Uc(this,this.Y-e)};var Wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Gc){this.h=e.h,Xc(this,e.j),this.s=e.s,this.g=e.g,Yc(this,e.m),this.l=e.l;var t=e.i,n=new lu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$c(this,n),this.o=e.o}else e&&(t=String(e).match(Wc))?(this.h=!1,Xc(this,t[1]||"",!0),this.s=eu(t[2]||""),this.g=eu(t[3]||"",!0),Yc(this,t[4]),this.l=eu(t[5]||"",!0),$c(this,t[6]||"",!0),this.o=eu(t[7]||"")):(this.h=!1,this.i=new lu(null,this.h))}function Qc(e){return new Gc(e)}function Xc(e,t,n){e.j=n?eu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $c(e,t,n){t instanceof lu?(e.i=t,function(e,t){t&&!e.j&&(cu(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(uu(this,t),hu(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=tu(t,au)),e.i=new lu(t,e.h))}function Jc(e,t,n){e.i.set(t,n)}function Zc(e){return Jc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function eu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tu(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,nu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tu(t,ru,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tu(t,ru,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(tu(n,"/"==n.charAt(0)?iu:su,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",tu(n,ou)),e.join("")};var ru=/[#\/\?@]/g,su=/[#\?:]/g,iu=/[#\?]/g,au=/[#\?@]/g,ou=/#/g;function lu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function cu(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function uu(e,t){cu(e),t=fu(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function du(e,t){return cu(e),t=fu(e,t),e.g.has(t)}function hu(e,t,n){uu(e,t),0<n.length&&(e.i=null,e.g.set(fu(e,t),Wo(n)),e.h+=n.length)}function fu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ao=lu.prototype).add=function(e,t){cu(this),this.i=null,e=fu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ao.forEach=function(e,t){cu(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Ao.ta=function(){cu(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},Ao.Z=function(e){cu(this);let t=[];if("string"===typeof e)du(this,e)&&(t=t.concat(this.g.get(fu(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ao.set=function(e,t){return cu(this),this.i=null,du(this,e=fu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ao.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ao.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")};var pu=class{constructor(e,t){this.g=e,this.map=t}};function mu(e){this.l=e||gu,Ro.PerformanceNavigationTiming?e=0<(e=Ro.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ro.g&&Ro.g.Ka&&Ro.g.Ka()&&Ro.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gu=10;function yu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function vu(e){return e.h?1:e.g?e.g.size:0}function bu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xu(e,t){e.g?e.g.add(t):e.h=t}function wu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ku(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Wo(e.i)}mu.prototype.cancel=function(){if(this.i=ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Eu,Su=class{stringify(e){return Ro.JSON.stringify(e,void 0)}parse(e){return Ro.JSON.parse(e,void 0)}};function Tu(){this.g=new Su}function Nu(e,t,n){const r=n||"";try{Kc(e,function(e,n){let s=e;Oo(e)&&(s=zl(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(AM){throw t.push(r+"type="+encodeURIComponent("_badmap")),AM}}function Iu(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function _u(e){this.l=e.fc||null,this.j=e.ob||!1}function Cu(e,t){Vl.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Au,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qo(_u,wc),_u.prototype.g=function(){return new Cu(this.l,this.j)},_u.prototype.i=(Eu={},function(){return Eu}),qo(Cu,Vl);var Au=0;function ju(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Du(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Pu(e)}function Pu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ao=Cu.prototype).open=function(e,t){if(this.readyState!=Au)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Pu(this)},Ao.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ro).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ao.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Du(this)),this.readyState=Au},Ao.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pu(this)),this.g&&(this.readyState=3,Pu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ro.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ju(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ao.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Du(this):Pu(this),3==this.readyState&&ju(this)}},Ao.Za=function(e){this.g&&(this.response=this.responseText=e,Du(this))},Ao.Ya=function(e){this.g&&(this.response=e,Du(this))},Ao.ka=function(){this.g&&Du(this)},Ao.setRequestHeader=function(e,t){this.v.append(e,t)},Ao.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ao.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ru=Ro.JSON.parse;function Mu(e){Vl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ou,this.L=this.M=!1}qo(Mu,Vl);var Ou="",Lu=/^https?$/i,Fu=["POST","PUT"];function Vu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Uu(e),zu(e)}function Uu(e){e.F||(e.F=!0,Ul(e,"complete"),Ul(e,"error"))}function Bu(e){if(e.h&&"undefined"!=typeof Po&&(!e.C[1]||4!=Hu(e)||2!=e.da()))if(e.v&&4==Hu(e))tc(e.La,0,e);else if(Ul(e,"readystatechange"),4==Hu(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var s=String(e.I).match(Wc)[1]||null;!s&&Ro.self&&Ro.self.location&&(s=Ro.self.location.protocol.slice(0,-1)),r=!Lu.test(s?s.toLowerCase():"")}n=r}if(n)Ul(e,"complete"),Ul(e,"success");else{e.m=6;try{var i=2<Hu(e)?e.g.statusText:""}catch(a){i=""}e.j=i+" ["+e.da()+"]",Uu(e)}}finally{zu(e)}}}function zu(e,t){if(e.g){qu(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ul(e,"ready");try{n.onreadystatechange=r}catch(AM){}}}function qu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ro.clearTimeout(e.A),e.A=null)}function Hu(e){return e.g?e.g.readyState:0}function Ku(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ou:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Yd){return null}}function Wu(e){let t="";return xl(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Gu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Jc(e,t,n))}function Qu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xu(e){this.Ga=0,this.j=[],this.l=new lc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qu("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qu("baseRetryDelayMs",5e3,e),this.hb=Qu("retryDelaySeedMs",1e4,e),this.eb=Qu("forwardChannelMaxRetries",2,e),this.xa=Qu("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new mu(e&&e.concurrentRequestLimit),this.Ja=new Tu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Yu(e){if(Ju(e),3==e.H){var t=e.W++,n=Qc(e.I);if(Jc(n,"SID",e.K),Jc(n,"RID",t),Jc(n,"TYPE","terminate"),td(e,n),(t=new Cc(e,e.l,t)).L=2,t.v=Zc(Qc(n)),n=!1,Ro.navigator&&Ro.navigator.sendBeacon)try{n=Ro.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ro.Image&&((new Image).src=t.v,n=!0),n||(t.g=fd(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Vc(t)}dd(e)}function $u(e){e.g&&(id(e),e.g.cancel(),e.g=null)}function Ju(e){$u(e),e.u&&(Ro.clearTimeout(e.u),e.u=null),od(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ro.clearTimeout(e.m),e.m=null)}function Zu(e){if(!yu(e.i)&&!e.m){e.m=!0;var t=e.Na;Ql||$l(),Xl||(Ql(),Xl=!0),Yl.add(t,e),e.C=0}}function ed(e,t){var n;n=t?t.m:e.W++;const r=Qc(e.I);Jc(r,"SID",e.K),Jc(r,"RID",n),Jc(r,"AID",e.V),td(e,r),e.o&&e.s&&Gu(r,e.o,e.s),n=new Cc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=nd(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),xu(e.i,n),Rc(n,r,t)}function td(e,t){e.na&&xl(e.na,function(e,n){Jc(t,n,e)}),e.h&&Kc({},function(e,n){Jc(t,n,e)})}function nd(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Bo(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Nu(o,e,"req"+n+"_")}catch(oh){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function rd(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ql||$l(),Xl||(Ql(),Xl=!0),Yl.add(t,e),e.A=0}}function sd(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=vc(Bo(e.Ma,e),cd(e,e.A)),e.A++,!0)}function id(e){null!=e.B&&(Ro.clearTimeout(e.B),e.B=null)}function ad(e){e.g=new Cc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Qc(e.wa);Jc(t,"RID","rpc"),Jc(t,"SID",e.K),Jc(t,"AID",e.V),Jc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Jc(t,"TO",e.qa),Jc(t,"TYPE","xmlhttp"),td(e,t),e.o&&e.s&&Gu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Zc(Qc(t)),n.s=null,n.S=!0,Mc(n,e)}function od(e){null!=e.v&&(Ro.clearTimeout(e.v),e.v=null)}function ld(e,t){var n=null;if(e.g==t){od(e),id(e),e.g=null;var r=2}else{if(!bu(e.i,t))return;n=t.F,wu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;Ul(r=hc(),new yc(r,n)),Zu(e)}else rd(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==r&&function(e,t){return!(vu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=vc(Bo(e.Na,e,t),cd(e,e.C)),e.C++,!0))}(e,t)||2==r&&sd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:ud(e,5);break;case 4:ud(e,10);break;case 3:ud(e,6);break;default:ud(e,2)}}function cd(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ud(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Bo(e.pb,e);n||(n=new Gc("//www.google.com/images/cleardot.gif"),Ro.location&&"http"==Ro.location.protocol||Xc(n,"https"),Zc(n)),function(e,t){const n=new lc;if(Ro.Image){const r=new Image;r.onload=zo(Iu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=zo(Iu,n,r,"TestLoadImage: error",!1,t),r.onabort=zo(Iu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=zo(Iu,n,r,"TestLoadImage: timeout",!1,t),Ro.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else gc(2);e.H=0,e.h&&e.h.za(t),dd(e),Ju(e)}function dd(e){if(e.H=0,e.ma=[],e.h){const t=ku(e.i);0==t.length&&0==e.j.length||(Go(e.ma,t),Go(e.ma,e.j),e.i.i.length=0,Wo(e.j),e.j.length=0),e.h.ya()}}function hd(e,t,n){var r=n instanceof Gc?Qc(n):new Gc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Yc(r,r.m);else{var s=Ro.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Gc(null);r&&Xc(i,r),t&&(i.g=t),s&&Yc(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&Jc(r,n,t),Jc(r,"VER",e.ra),td(e,r),r}function fd(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Mu(new _u({ob:!0})):new Mu(e.va)).Oa(e.J),t}function pd(){}function md(){if(rl&&!(10<=Number(fl)))throw Error("Environmental error: no available transport.")}function gd(e,t){Vl.call(this),this.g=new Xu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Yo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Yo(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bd(this)}function yd(e){Nc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vd(){Ic.call(this),this.status=1}function bd(e){this.g=e}function xd(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wd(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function kd(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}(Ao=Mu.prototype).Oa=function(e){this.M=e},Ao.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Sc.g(),this.C=this.u?kc(this.u):kc(Sc),this.g.onreadystatechange=Bo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void Vu(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=Ro.FormData&&e instanceof Ro.FormData,!(0<=Ko(Fu,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qu(this),0<this.B&&((this.L=function(e){return rl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bo(this.ua,this)):this.A=tc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Vu(this,i)}},Ao.ua=function(){"undefined"!=typeof Po&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ul(this,"timeout"),this.abort(8))},Ao.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ul(this,"complete"),Ul(this,"abort"),zu(this))},Ao.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zu(this,!0)),Mu.$.N.call(this)},Ao.La=function(){this.s||(this.G||this.v||this.l?Bu(this):this.kb())},Ao.kb=function(){Bu(this)},Ao.isActive=function(){return!!this.g},Ao.da=function(){try{return 2<Hu(this)?this.g.status:-1}catch(Eu){return-1}},Ao.ja=function(){try{return this.g?this.g.responseText:""}catch(Eu){return""}},Ao.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ru(t)}},Ao.Ia=function(){return this.m},Ao.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ao=Xu.prototype).ra=8,Ao.H=1,Ao.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Cc(this,this.l,e);let i=this.s;if(this.U&&(i?(i=wl(i),El(i,this.U)):i=this.U),null!==this.o||this.O||(s.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=nd(this,s,t),Jc(n=Qc(this.I),"RID",e),Jc(n,"CVER",22),this.F&&Jc(n,"X-HTTP-Session-Id",this.F),td(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Wu(i)))+"&"+t:this.o&&Gu(n,this.o,i)),xu(this.i,s),this.bb&&Jc(n,"TYPE","init"),this.P?(Jc(n,"$req",t),Jc(n,"SID","null"),s.aa=!0,Rc(s,n,null)):Rc(s,n,t),this.H=2}}else 3==this.H&&(e?ed(this,e):0==this.j.length||yu(this.i)||ed(this))},Ao.Ma=function(){if(this.u=null,ad(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=vc(Bo(this.jb,this),e)}},Ao.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gc(10),$u(this),ad(this))},Ao.ib=function(){null!=this.v&&(this.v=null,$u(this),sd(this),gc(19))},Ao.pb=function(e){e?(this.l.info("Successfully pinged google.com"),gc(2)):(this.l.info("Failed to ping google.com"),gc(1))},Ao.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ao=pd.prototype).Ba=function(){},Ao.Aa=function(){},Ao.za=function(){},Ao.ya=function(){},Ao.isActive=function(){return!0},Ao.Va=function(){},md.prototype.g=function(e,t){return new gd(e,t)},qo(gd,Vl),gd.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;gc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=hd(e,null,e.Y),Zu(e)},gd.prototype.close=function(){Yu(this.g)},gd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=zl(e),e=n);t.j.push(new pu(t.fb++,e)),3==t.H&&Zu(t)},gd.prototype.N=function(){this.g.h=null,delete this.j,Yu(this.g),delete this.g,gd.$.N.call(this)},qo(yd,Nc),qo(vd,Ic),qo(bd,pd),bd.prototype.Ba=function(){Ul(this.g,"a")},bd.prototype.Aa=function(e){Ul(this.g,new yd(e))},bd.prototype.za=function(e){Ul(this.g,new vd)},bd.prototype.ya=function(){Ul(this.g,"b")},qo(xd,function(){this.blockSize=-1}),xd.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},xd.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(0==s)for(;i<=n;)wd(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){wd(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){wd(this,r),s=0;break}}this.h=s,this.i+=t},xd.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ed={};function Sd(e){return-128<=e&&128>e?function(e,t){var n=Ed;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new kd([0|e],0>e?-1:0)}):new kd([0|e],0>e?-1:0)}function Td(e){if(isNaN(e)||!isFinite(e))return Id;if(0>e)return Dd(Td(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Nd;return new kd(t,0)}var Nd=4294967296,Id=Sd(0),_d=Sd(1),Cd=Sd(16777216);function Ad(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function jd(e){return-1==e.h}function Dd(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new kd(n,~e.h).add(_d)}function Pd(e,t){return e.add(Dd(t))}function Rd(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Md(e,t){this.g=e,this.h=t}function Od(e,t){if(Ad(t))throw Error("division by zero");if(Ad(e))return new Md(Id,Id);if(jd(e))return t=Od(Dd(e),t),new Md(Dd(t.g),Dd(t.h));if(jd(t))return t=Od(e,Dd(t)),new Md(Dd(t.g),t.h);if(30<e.g.length){if(jd(e)||jd(t))throw Error("slowDivide_ only works with positive integers.");for(var n=_d,r=t;0>=r.X(e);)n=Ld(n),r=Ld(r);var s=Fd(n,1),i=Fd(r,1);for(r=Fd(r,2),n=Fd(n,2);!Ad(r);){var a=i.add(r);0>=a.X(e)&&(s=s.add(n),i=a),r=Fd(r,1),n=Fd(n,1)}return t=Pd(e,s.R(t)),new Md(s,t)}for(s=Id;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=Td(n)).R(t);jd(a)||0<a.X(e);)a=(i=Td(n-=r)).R(t);Ad(i)&&(i=_d),s=s.add(i),e=Pd(e,a)}return new Md(s,e)}function Ld(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new kd(n,e.h)}function Fd(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new kd(s,e.h)}(Ao=kd.prototype).ea=function(){if(jd(this))return-Dd(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Nd+r)*t,t*=Nd}return e},Ao.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ad(this))return"0";if(jd(this))return"-"+Dd(this).toString(e);for(var t=Td(Math.pow(e,6)),n=this,r="";;){var s=Od(n,t).g,i=((0<(n=Pd(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ad(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},Ao.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ao.X=function(e){return jd(e=Pd(this,e))?-1:Ad(e)?0:1},Ao.abs=function(){return jd(this)?Dd(this):this},Ao.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(65535&this.D(s))+(65535&e.D(s)),a=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=a>>>16,i&=65535,a&=65535,n[s]=a<<16|i}return new kd(n,-2147483648&n[n.length-1]?-1:0)},Ao.R=function(e){if(Ad(this)||Ad(e))return Id;if(jd(this))return jd(e)?Dd(this).R(Dd(e)):Dd(Dd(this).R(e));if(jd(e))return Dd(this.R(Dd(e)));if(0>this.X(Cd)&&0>e.X(Cd))return Td(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,a=65535&this.D(r),o=e.D(s)>>>16,l=65535&e.D(s);n[2*r+2*s]+=a*l,Rd(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Rd(n,2*r+2*s+1),n[2*r+2*s+1]+=a*o,Rd(n,2*r+2*s+1),n[2*r+2*s+2]+=i*o,Rd(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new kd(n,0)},Ao.gb=function(e){return Od(this,e).h},Ao.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new kd(n,this.h&e.h)},Ao.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new kd(n,this.h|e.h)},Ao.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new kd(n,this.h^e.h)},md.prototype.createWebChannel=md.prototype.g,gd.prototype.send=gd.prototype.u,gd.prototype.open=gd.prototype.m,gd.prototype.close=gd.prototype.close,bc.NO_ERROR=0,bc.TIMEOUT=8,bc.HTTP_ERROR=6,xc.COMPLETE="complete",Ec.EventType=Tc,Tc.OPEN="a",Tc.CLOSE="b",Tc.ERROR="c",Tc.MESSAGE="d",Vl.prototype.listen=Vl.prototype.O,Mu.prototype.listenOnce=Mu.prototype.P,Mu.prototype.getLastError=Mu.prototype.Sa,Mu.prototype.getLastErrorCode=Mu.prototype.Ia,Mu.prototype.getStatus=Mu.prototype.da,Mu.prototype.getResponseJson=Mu.prototype.Wa,Mu.prototype.getResponseText=Mu.prototype.ja,Mu.prototype.send=Mu.prototype.ha,Mu.prototype.setWithCredentials=Mu.prototype.Oa,xd.prototype.digest=xd.prototype.l,xd.prototype.reset=xd.prototype.reset,xd.prototype.update=xd.prototype.j,kd.prototype.add=kd.prototype.add,kd.prototype.multiply=kd.prototype.R,kd.prototype.modulo=kd.prototype.gb,kd.prototype.compare=kd.prototype.X,kd.prototype.toNumber=kd.prototype.ea,kd.prototype.toString=kd.prototype.toString,kd.prototype.getBits=kd.prototype.D,kd.fromNumber=Td,kd.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Dd(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Td(Math.pow(n,8)),s=Id,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=Td(Math.pow(n,a)),s=s.R(a).add(Td(o))):s=(s=s.R(r)).add(Td(o))}return s};var Vd=Do.createWebChannelTransport=function(){return new md},Ud=Do.getStatEventTarget=function(){return hc()},Bd=Do.ErrorCode=bc,zd=Do.EventType=xc,qd=Do.Event=uc,Hd=Do.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Kd=Do.FetchXmlHttpFactory=_u,Wd=Do.WebChannel=Ec,Gd=Do.XhrIo=Mu,Qd=Do.Md5=xd,Xd=Do.Integer=kd;const Yd="@firebase/firestore";class $d{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$d.UNAUTHENTICATED=new $d(null),$d.GOOGLE_CREDENTIALS=new $d("google-credentials-uid"),$d.FIRST_PARTY=new $d("first-party-uid"),$d.MOCK_USER=new $d("mock-user");let Jd="9.23.0";const Zd=new Tt("@firebase/firestore");function eh(){return Zd.logLevel}function th(e){if(Zd.logLevel<=xt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(sh);Zd.debug("Firestore (".concat(Jd,"): ").concat(e),...s)}}function nh(e){if(Zd.logLevel<=xt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(sh);Zd.error("Firestore (".concat(Jd,"): ").concat(e),...s)}}function rh(e){if(Zd.logLevel<=xt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(sh);Zd.warn("Firestore (".concat(Jd,"): ").concat(e),...s)}}function sh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Jd,") INTERNAL ASSERTION FAILED: ")+e;throw nh(t),new Error(t)}function ah(e,t){e||ih()}function oh(e,t){return e}const lh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ch extends rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class uh{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class hh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($d.UNAUTHENTICATED))}shutdown(){}}class fh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ph{constructor(e){this.t=e,this.currentUser=$d.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new uh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new uh,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{th("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(th("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new uh)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(th("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ah("string"==typeof t.accessToken),new dh(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ah(null===e||"string"==typeof e),new $d(e)}}class mh{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=$d.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class gh{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new mh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t($d.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vh{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&th("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,th("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{th("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):th("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ah("string"==typeof e.token),this.T=e.token,new yh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class xh{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=bh(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function wh(e,t){return e<t?-1:e>t?1:0}function kh(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Eh(e){return e+"\0"}class Sh{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ch(lh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ch(lh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ch(lh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ch(lh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sh.fromMillis(Date.now())}static fromDate(e){return Sh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Sh(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wh(this.nanoseconds,e.nanoseconds):wh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Th{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Th(e)}static min(){return new Th(new Sh(0,0))}static max(){return new Th(new Sh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Nh{constructor(e,t,n){void 0===t?t=0:t>e.length&&ih(),void 0===n?n=e.length-t:n>e.length-t&&ih(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Nh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nh?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ih extends Nh{construct(e,t,n){return new Ih(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new ch(lh.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Ih(e)}static emptyPath(){return new Ih([])}}const _h=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ch extends Nh{construct(e,t,n){return new Ch(e,t,n)}static isValidIdentifier(e){return _h.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ch.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ch(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new ch(lh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ch(lh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ch(lh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new ch(lh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ch(t)}static emptyPath(){return new Ch([])}}class Ah{constructor(e){this.path=e}static fromPath(e){return new Ah(Ih.fromString(e))}static fromName(e){return new Ah(Ih.fromString(e).popFirst(5))}static empty(){return new Ah(Ih.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ih.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ih.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ah(new Ih(e.slice()))}}class jh{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Dh(e){return e.fields.find(e=>2===e.kind)}function Ph(e){return e.fields.filter(e=>2!==e.kind)}jh.UNKNOWN_ID=-1;class Rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mh(0,Fh.min())}}function Oh(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Th.fromTimestamp(1e9===r?new Sh(n+1,0):new Sh(n,r));return new Fh(s,Ah.empty(),t)}function Lh(e){return new Fh(e.readTime,e.key,-1)}class Fh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Fh(Th.min(),Ah.empty(),-1)}static max(){return new Fh(Th.max(),Ah.empty(),-1)}}function Vh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ah.comparator(e.documentKey,t.documentKey),0!==n?n:wh(e.largestBatchId,t.largestBatchId))}const Uh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function zh(e){if(e.code!==lh.FAILED_PRECONDITION||e.message!==Uh)throw e;th("LocalStore","Unexpectedly lost primary lease")}class qh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ih(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qh((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof qh?t:qh.resolve(t)}catch(e){return qh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):qh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):qh.reject(t)}static resolve(e){return new qh((t,n)=>{t(e)})}static reject(e){return new qh((t,n)=>{n(e)})}static waitFor(e){return new qh((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=qh.resolve(!1);for(const n of e)t=t.next(e=>e?qh.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new qh((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new qh((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}class Hh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new uh,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Gh(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=Jh(t.target.error);this.v.reject(new Gh(e,n))}}static open(e,t,n,r){try{return new Hh(t,e.transaction(r,n))}catch(e){throw new Gh(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(th("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Xh(t)}}class Kh{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===Kh.S(Je())&&nh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return th("SimpleDb","Removing database:",e),Yh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!tt())return!1;if(Kh.C())return!0;const e=Je(),t=Kh.S(e),n=0<t&&t<10,r=Kh.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/goal.kashmir",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(th("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Gh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ch(lh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ch(lh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Gh(e,r))},r.onupgradeneeded=e=>{th("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next(()=>{th("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.$(e);const t=Hh.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.P(),e)).catch(e=>(t.abort(e),qh.reject(e))).toPromise();return i.catch(()=>{}),await t.R,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(th("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Wh{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Yh(this.L.delete())}}class Gh extends ch{constructor(e,t){super(lh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Qh(e){return"IndexedDbTransactionError"===e.name}class Xh{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(th("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(th("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Yh(n)}add(e){return th("SimpleDb","ADD",this.store.name,e,e),Yh(this.store.add(e))}get(e){return Yh(this.store.get(e)).next(t=>(void 0===t&&(t=null),th("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return th("SimpleDb","DELETE",this.store.name,e),Yh(this.store.delete(e))}count(){return th("SimpleDb","COUNT",this.store.name),Yh(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new qh((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new qh((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}J(e,t){th("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new qh((n,r)=>{t.onerror=e=>{const t=Jh(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new qh((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new Wh(s),a=t(s.primaryKey,s.value,i);if(a instanceof qh){const e=a.catch(e=>(i.done(),qh.reject(e)));n.push(e)}i.isDone?r():null===i.K?s.continue():s.continue(i.K)}}).next(()=>qh.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yh(e){return new qh((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Jh(e.target.error);n(t)}})}let $h=!1;function Jh(e){const t=Kh.S(Je());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ch("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $h||($h=!0,setTimeout(()=>{throw e},0)),e}}return e}class Zh{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){th("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{th("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){Qh(e)?th("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await zh(e)}await this.et(6e4)})}}class ef{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.st(t,e))}st(e,t){const n=new Set;let r=t,s=!0;return qh.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return th("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.rt(r,n)).next(n=>(th("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}rt(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Lh(t);Vh(r,n)>0&&(n=r)}),new Fh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function nf(e){return null==e}function rf(e){return 0===e&&1/e==-1/0}function sf(e){return"number"==typeof e&&Number.isInteger(e)&&!rf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function af(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=lf(t)),t=of(e.get(n),t);return lf(t)}function of(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function lf(e){return e+"\x01\x01"}function cf(e){const t=e.length;if(ah(t>=2),2===t)return ah("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ih.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&ih(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:ih()}i=t+2}return new Ih(r)}tf.ct=-1;const uf=["userId","batchId"];function df(e,t){return[e,af(t)]}function hf(e,t,n){return[e,af(t),n]}const ff={},pf=["prefixPath","collectionGroup","readTime","documentId"],mf=["prefixPath","collectionGroup","documentId"],gf=["collectionGroup","readTime","prefixPath","documentId"],yf=["canonicalId","targetId"],vf=["targetId","path"],bf=["path","targetId"],xf=["collectionId","parent"],wf=["indexId","uid"],kf=["uid","sequenceNumber"],Ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sf=["indexId","uid","orderedDocumentKey"],Tf=["userId","collectionPath","documentId"],Nf=["userId","collectionPath","largestBatchId"],If=["userId","collectionGroup","largestBatchId"],_f=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cf=[..._f,"documentOverlays"],Af=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jf=Af,Df=[...jf,"indexConfiguration","indexState","indexEntries"];class Pf extends Bh{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Rf(e,t){const n=oh(e);return Kh.M(n.ht,t)}function Mf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Of(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ff{constructor(e,t){this.comparator=e,this.root=t||Uf.EMPTY}insert(e,t){return new Ff(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Uf.BLACK,null,null))}remove(e){return new Ff(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Uf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Uf{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Uf.RED,this.left=null!=r?r:Uf.EMPTY,this.right=null!=s?s:Uf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Uf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Uf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Uf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Uf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Uf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ih();if(this.right.isRed())throw ih();const e=this.left.check();if(e!==this.right.check())throw ih();return e+(this.isRed()?0:1)}}Uf.EMPTY=null,Uf.RED=!0,Uf.BLACK=!1,Uf.EMPTY=new class{constructor(){this.size=0}get key(){throw ih()}get value(){throw ih()}get color(){throw ih()}get left(){throw ih()}get right(){throw ih()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Uf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bf{constructor(e){this.comparator=e,this.data=new Ff(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zf(this.data.getIterator())}getIteratorFrom(e){return new zf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Bf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bf(this.comparator);return t.data=e,t}}class zf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qf(e){return e.hasNext()?e.getNext():void 0}class Hf{constructor(e){this.fields=e,e.sort(Ch.comparator)}static empty(){return new Hf([])}unionWith(e){let t=new Bf(Ch.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Hf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Kf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Kf("Invalid base64 string: "+e):e}}(e);return new Wf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wf.EMPTY_BYTE_STRING=new Wf("");const Gf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qf(e){if(ah(!!e),"string"==typeof e){let t=0;const n=Gf.exec(e);if(ah(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xf(e.seconds),nanos:Xf(e.nanos)}}function Xf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yf(e){return"string"==typeof e?Wf.fromBase64String(e):Wf.fromUint8Array(e)}function $f(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jf(e){const t=e.mapValue.fields.__previous_value__;return $f(t)?Jf(t):t}function Zf(e){const t=Qf(e.mapValue.fields.__local_write_time__.timestampValue);return new Sh(t.seconds,t.nanos)}class ep{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class tp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tp&&e.projectId===this.projectId&&e.database===this.database}}const np={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rp={nullValue:"NULL_VALUE"};function sp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$f(e)?4:vp(e)?9007199254740991:10:ih()}function ip(e,t){if(e===t)return!0;const n=sp(e);if(n!==sp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zf(e).isEqual(Zf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qf(e.timestampValue),r=Qf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yf(e.bytesValue).isEqual(Yf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xf(e.geoPointValue.latitude)===Xf(t.geoPointValue.latitude)&&Xf(e.geoPointValue.longitude)===Xf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xf(e.integerValue)===Xf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Xf(e.doubleValue),r=Xf(t.doubleValue);return n===r?rf(n)===rf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return kh(e.arrayValue.values||[],t.arrayValue.values||[],ip);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Mf(n)!==Mf(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!ip(n[s],r[s])))return!1;return!0}(e,t);default:return ih()}}function ap(e,t){return void 0!==(e.values||[]).find(e=>ip(e,t))}function op(e,t){if(e===t)return 0;const n=sp(e),r=sp(t);if(n!==r)return wh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Xf(e.integerValue||e.doubleValue),r=Xf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return lp(e.timestampValue,t.timestampValue);case 4:return lp(Zf(e),Zf(t));case 5:return wh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Yf(e),r=Yf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=wh(n[s],r[s]);if(0!==e)return e}return wh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=wh(Xf(e.latitude),Xf(t.latitude));return 0!==n?n:wh(Xf(e.longitude),Xf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=op(n[s],r[s]);if(e)return e}return wh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===np.mapValue&&t===np.mapValue)return 0;if(e===np.mapValue)return 1;if(t===np.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=wh(r[a],i[a]);if(0!==e)return e;const t=op(n[r[a]],s[i[a]]);if(0!==t)return t}return wh(r.length,i.length)}(e.mapValue,t.mapValue);default:throw ih()}}function lp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wh(e,t);const n=Qf(e),r=Qf(t),s=wh(n.seconds,r.seconds);return 0!==s?s:wh(n.nanos,r.nanos)}function cp(e){return up(e)}function up(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Yf(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ah.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=up(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(up(e.fields[s]));return n+"}"}(e.mapValue):ih();var t,n}function dp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function hp(e){return!!e&&"integerValue"in e}function fp(e){return!!e&&"arrayValue"in e}function pp(e){return!!e&&"nullValue"in e}function mp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gp(e){return!!e&&"mapValue"in e}function yp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Of(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=yp(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function vp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function bp(e){return"nullValue"in e?rp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?dp(tp.empty(),Ah.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ih()}function xp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?dp(tp.empty(),Ah.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?np:ih()}function wp(e,t){const n=op(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kp(e,t){const n=op(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Ep{constructor(e){this.value=e}static empty(){return new Ep({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yp(t)}setAll(e){let t=Ch.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=yp(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());gp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ip(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];gp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Of(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ep(yp(this.value))}}function Sp(e){const t=[];return Of(e.fields,(e,n)=>{const r=new Ch([e]);if(gp(n)){const e=Sp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Hf(t)}class Tp{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Tp(e,0,Th.min(),Th.min(),Th.min(),Ep.empty(),0)}static newFoundDocument(e,t,n,r){return new Tp(e,1,t,Th.min(),n,r,0)}static newNoDocument(e,t){return new Tp(e,2,t,Th.min(),Th.min(),Ep.empty(),0)}static newUnknownDocument(e,t){return new Tp(e,3,t,Th.min(),Th.min(),Ep.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Th.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ep.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ep.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Th.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Np{constructor(e,t){this.position=e,this.inclusive=t}}function Ip(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Ah.comparator(Ah.fromName(a.referenceValue),n.key):op(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function _p(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ip(e.position[n],t.position[n]))return!1;return!0}class Cp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ap(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class jp{}class Dp extends jp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new zp(e,t,n):"array-contains"===t?new Wp(e,n):"in"===t?new Gp(e,n):"not-in"===t?new Qp(e,n):"array-contains-any"===t?new Xp(e,n):new Dp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new qp(e,n):new Hp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(op(t,this.value)):null!==t&&sp(this.value)===sp(t)&&this.matchesComparison(op(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ih()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Pp extends jp{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Pp(e,t)}matches(e){return Rp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Rp(e){return"and"===e.op}function Mp(e){return"or"===e.op}function Op(e){return Lp(e)&&Rp(e)}function Lp(e){for(const t of e.filters)if(t instanceof Pp)return!1;return!0}function Fp(e){if(e instanceof Dp)return e.field.canonicalString()+e.op.toString()+cp(e.value);if(Op(e))return e.filters.map(e=>Fp(e)).join(",");{const t=e.filters.map(e=>Fp(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Vp(e,t){return e instanceof Dp?function(e,t){return t instanceof Dp&&e.op===t.op&&e.field.isEqual(t.field)&&ip(e.value,t.value)}(e,t):e instanceof Pp?function(e,t){return t instanceof Pp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Vp(n,t.filters[r]),!0)}(e,t):void ih()}function Up(e,t){const n=e.filters.concat(t);return Pp.create(n,e.op)}function Bp(e){return e instanceof Dp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(cp(e.value))}(e):e instanceof Pp?function(e){return e.op.toString()+" {"+e.getFilters().map(Bp).join(" ,")+"}"}(e):"Filter"}class zp extends Dp{constructor(e,t,n){super(e,t,n),this.key=Ah.fromName(n.referenceValue)}matches(e){const t=Ah.comparator(e.key,this.key);return this.matchesComparison(t)}}class qp extends Dp{constructor(e,t){super(e,"in",t),this.keys=Kp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hp extends Dp{constructor(e,t){super(e,"not-in",t),this.keys=Kp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Kp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ah.fromName(e.referenceValue))}class Wp extends Dp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fp(t)&&ap(t.arrayValue,this.value)}}class Gp extends Dp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ap(this.value.arrayValue,t)}}class Qp extends Dp{constructor(e,t){super(e,"not-in",t)}matches(e){if(ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ap(this.value.arrayValue,t)}}class Xp extends Dp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ap(this.value.arrayValue,e))}}class Yp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.dt=null}}function $p(e){return new Yp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Jp(e){const t=oh(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Fp(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),nf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>cp(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>cp(e)).join(",")),t.dt=e}return t.dt}function Zp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ap(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_p(e.startAt,t.startAt)&&_p(e.endAt,t.endAt)}function em(e){return Ah.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function tm(e,t){return e.filters.filter(e=>e instanceof Dp&&e.field.isEqual(t))}function nm(e,t,n){let r=rp,s=!0;for(const i of tm(e,t)){let e=rp,t=!0;switch(i.op){case"<":case"<=":e=bp(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=rp}wp({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];wp({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function rm(e,t,n){let r=np,s=!0;for(const i of tm(e,t)){let e=np,t=!0;switch(i.op){case">=":case">":e=xp(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=np}kp({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];kp({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class sm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function im(e,t,n,r,s,i,a,o){return new sm(e,t,n,r,s,i,a,o)}function am(e){return new sm(e)}function om(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function cm(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function um(e){return null!==e.collectionGroup}function dm(e){const t=oh(e);if(null===t.wt){t.wt=[];const e=cm(t),n=lm(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Cp(e)),t.wt.push(new Cp(Ch.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Cp(Ch.keyField(),e))}}}return t.wt}function hm(e){const t=oh(e);if(!t._t)if("F"===t.limitType)t._t=$p(t.path,t.collectionGroup,dm(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of dm(t)){const t="desc"===s.dir?"asc":"desc";e.push(new Cp(s.field,t))}const n=t.endAt?new Np(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Np(t.startAt.position,t.startAt.inclusive):null;t._t=$p(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function fm(e,t){t.getFirstInequalityField(),cm(e);const n=e.filters.concat([t]);return new sm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pm(e,t,n){return new sm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mm(e,t){return Zp(hm(e),hm(t))&&e.limitType===t.limitType}function gm(e){return"".concat(Jp(hm(e)),"|lt:").concat(e.limitType)}function ym(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Bp(e)).join(", "),"]")),nf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>cp(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>cp(e)).join(",")),"Target(".concat(t,")")}(hm(e)),"; limitType=").concat(e.limitType,")")}function vm(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ah.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of dm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ip(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,dm(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ip(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,dm(e),t))}(e,t)}function bm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xm(e){return(t,n)=>{let r=!1;for(const s of dm(e)){const e=wm(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function wm(e,t,n){const r=e.field.isKeyField()?Ah.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?op(r,s):ih()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ih()}}class km{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Of(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Lf(this.inner)}size(){return this.innerSize}}const Em=new Ff(Ah.comparator);function Sm(){return Em}const Tm=new Ff(Ah.comparator);function Nm(){let e=Tm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Im(e){let t=Tm;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function _m(){return Am()}function Cm(){return Am()}function Am(){return new km(e=>e.toString(),(e,t)=>e.isEqual(t))}const jm=new Ff(Ah.comparator),Dm=new Bf(Ah.comparator);function Pm(){let e=Dm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Rm=new Bf(wh);function Mm(){return Rm}function Om(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(t)?"-0":t}}function Lm(e){return{integerValue:""+e}}function Fm(e,t){return sf(t)?Lm(t):Om(e,t)}class Vm{constructor(){this._=void 0}}function Um(e,t,n){return e instanceof qm?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$f(t)&&(t=Jf(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hm?Km(e,t):e instanceof Wm?Gm(e,t):function(e,t){const n=zm(e,t),r=Xm(n)+Xm(e.gt);return hp(n)&&hp(e.gt)?Lm(r):Om(e.serializer,r)}(e,t)}function Bm(e,t,n){return e instanceof Hm?Km(e,t):e instanceof Wm?Gm(e,t):n}function zm(e,t){return e instanceof Qm?hp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class qm extends Vm{}class Hm extends Vm{constructor(e){super(),this.elements=e}}function Km(e,t){const n=Ym(t);for(const r of e.elements)n.some(e=>ip(e,r))||n.push(r);return{arrayValue:{values:n}}}class Wm extends Vm{constructor(e){super(),this.elements=e}}function Gm(e,t){let n=Ym(t);for(const r of e.elements)n=n.filter(e=>!ip(e,r));return{arrayValue:{values:n}}}class Qm extends Vm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Xm(e){return Xf(e.integerValue||e.doubleValue)}function Ym(e){return fp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $m{constructor(e,t){this.field=e,this.transform=t}}class Jm{constructor(e,t){this.version=e,this.transformResults=t}}class Zm{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zm}static exists(e){return new Zm(void 0,e)}static updateTime(e){return new Zm(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class tg{}function ng(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new hg(e.key,Zm.none()):new og(e.key,e.data,Zm.none());{const n=e.data,r=Ep.empty();let s=new Bf(Ch.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new lg(e.key,r,new Hf(s.toArray()),Zm.none())}}function rg(e,t,n){e instanceof og?function(e,t,n){const r=e.value.clone(),s=ug(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof lg?function(e,t,n){if(!eg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ug(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(cg(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sg(e,t,n,r){return e instanceof og?function(e,t,n,r){if(!eg(e.precondition,t))return n;const s=e.value.clone(),i=dg(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof lg?function(e,t,n,r){if(!eg(e.precondition,t))return n;const s=dg(e.fieldTransforms,r,t),i=t.data;return i.setAll(cg(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return eg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ig(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=zm(r.transform,e||null);null!=s&&(null===n&&(n=Ep.empty()),n.set(r.field,s))}return n||null}function ag(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&kh(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hm&&t instanceof Hm||e instanceof Wm&&t instanceof Wm?kh(e.elements,t.elements,ip):e instanceof Qm&&t instanceof Qm?ip(e.gt,t.gt):e instanceof qm&&t instanceof qm}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class og extends tg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class lg extends tg{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ug(e,t,n){const r=new Map;ah(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Bm(a,o,n[s]))}return r}function dg(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Um(e,i,t))}return r}class hg extends tg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fg extends tg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pg{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&rg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=sg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=sg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Cm();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=ng(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Th.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pm())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(e,t)=>ag(e,t))&&kh(this.baseMutations,e.baseMutations,(e,t)=>ag(e,t))}}class mg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ah(e.mutations.length===n.length);let r=jm;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new mg(e,t,n,r)}}class gg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class yg{constructor(e,t){this.count=e,this.unchangedNames=t}}var vg,bg;function xg(e){switch(e){default:return ih();case lh.CANCELLED:case lh.UNKNOWN:case lh.DEADLINE_EXCEEDED:case lh.RESOURCE_EXHAUSTED:case lh.INTERNAL:case lh.UNAVAILABLE:case lh.UNAUTHENTICATED:return!1;case lh.INVALID_ARGUMENT:case lh.NOT_FOUND:case lh.ALREADY_EXISTS:case lh.PERMISSION_DENIED:case lh.FAILED_PRECONDITION:case lh.ABORTED:case lh.OUT_OF_RANGE:case lh.UNIMPLEMENTED:case lh.DATA_LOSS:return!0}}function wg(e){if(void 0===e)return nh("GRPC error has no .code"),lh.UNKNOWN;switch(e){case vg.OK:return lh.OK;case vg.CANCELLED:return lh.CANCELLED;case vg.UNKNOWN:return lh.UNKNOWN;case vg.DEADLINE_EXCEEDED:return lh.DEADLINE_EXCEEDED;case vg.RESOURCE_EXHAUSTED:return lh.RESOURCE_EXHAUSTED;case vg.INTERNAL:return lh.INTERNAL;case vg.UNAVAILABLE:return lh.UNAVAILABLE;case vg.UNAUTHENTICATED:return lh.UNAUTHENTICATED;case vg.INVALID_ARGUMENT:return lh.INVALID_ARGUMENT;case vg.NOT_FOUND:return lh.NOT_FOUND;case vg.ALREADY_EXISTS:return lh.ALREADY_EXISTS;case vg.PERMISSION_DENIED:return lh.PERMISSION_DENIED;case vg.FAILED_PRECONDITION:return lh.FAILED_PRECONDITION;case vg.ABORTED:return lh.ABORTED;case vg.OUT_OF_RANGE:return lh.OUT_OF_RANGE;case vg.UNIMPLEMENTED:return lh.UNIMPLEMENTED;case vg.DATA_LOSS:return lh.DATA_LOSS;default:return ih()}}(bg=vg||(vg={}))[bg.OK=0]="OK",bg[bg.CANCELLED=1]="CANCELLED",bg[bg.UNKNOWN=2]="UNKNOWN",bg[bg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bg[bg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bg[bg.NOT_FOUND=5]="NOT_FOUND",bg[bg.ALREADY_EXISTS=6]="ALREADY_EXISTS",bg[bg.PERMISSION_DENIED=7]="PERMISSION_DENIED",bg[bg.UNAUTHENTICATED=16]="UNAUTHENTICATED",bg[bg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bg[bg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bg[bg.ABORTED=10]="ABORTED",bg[bg.OUT_OF_RANGE=11]="OUT_OF_RANGE",bg[bg.UNIMPLEMENTED=12]="UNIMPLEMENTED",bg[bg.INTERNAL=13]="INTERNAL",bg[bg.UNAVAILABLE=14]="UNAVAILABLE",bg[bg.DATA_LOSS=15]="DATA_LOSS";class kg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Eg}static getOrCreateInstance(){return null===Eg&&(Eg=new kg),Eg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Eg=null;function Sg(){return new TextEncoder}const Tg=new Xd([4294967295,4294967295],0);function Ng(e){const t=Sg().encode(e),n=new Qd;return n.update(t),new Uint8Array(n.digest())}function Ig(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Xd([n,r],0),new Xd([s,i],0)]}class _g{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Cg("Invalid padding: ".concat(t));if(n<0)throw new Cg("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Cg("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Cg("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Xd.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Xd.fromNumber(n)));return 1===r.compare(Tg)&&(r=new Xd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Ng(e),[n,r]=Ig(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new _g(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Ng(e),[n,r]=Ig(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Cg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ag{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,jg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ag(Th.min(),r,new Ff(wh),Sm(),Pm())}}class jg{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jg(n,t,Pm(),Pm(),Pm())}}class Dg{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Pg{constructor(e,t){this.targetId=e,this.Vt=t}}class Rg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Mg{constructor(){this.St=0,this.Dt=Fg(),this.Ct=Wf.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Pm(),t=Pm(),n=Pm();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ih()}}),new jg(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Fg()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Og{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Sm(),this.zt=Lg(),this.Wt=new Ff(wh)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:ih()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const i=s.target;if(em(i))if(0===r){const e=new Ah(i.path);this.Yt(n,e,Tp.newNoDocument(e,Th.min()))}else ah(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=kg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,i,a,o,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(i=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===i?void 0:i.length)&&void 0!==a?a:0,padding:null!==(l=null===(o=null==u?void 0:u.bits)||void 0===o?void 0:o.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=Yf(s).toUint8Array()}catch(e){if(e instanceof Kf)return rh("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new _g(o,i,a)}catch(e){return rh(e instanceof Cg?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const s=this.Gt.ue(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());t.vt(i)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const s=this.se(r);if(s){if(n.current&&em(s.target)){const t=new Ah(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Tp.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=Pm();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Ag(e,t,this.Wt,this.jt,n);return this.jt=Sm(),this.zt=Lg(),this.Wt=new Ff(wh),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Mg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Bf(wh),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||th("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Mg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Lg(){return new Ff(Ah.comparator)}function Fg(){return new Ff(Ah.comparator)}const Vg={asc:"ASCENDING",desc:"DESCENDING"},Ug={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bg={and:"AND",or:"OR"};class zg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qg(e,t){return e.useProto3Json||nf(t)?t:{value:t}}function Hg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wg(e,t){return Hg(e,t.toTimestamp())}function Gg(e){return ah(!!e),Th.fromTimestamp(function(e){const t=Qf(e);return new Sh(t.seconds,t.nanos)}(e))}function Qg(e,t){return function(e){return new Ih(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Xg(e){const t=Ih.fromString(e);return ah(yy(t)),t}function Yg(e,t){return Qg(e.databaseId,t.path)}function $g(e,t){const n=Xg(t);if(n.get(1)!==e.databaseId.projectId)throw new ch(lh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ch(lh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ah(ty(n))}function Jg(e,t){return Qg(e.databaseId,t)}function Zg(e){const t=Xg(e);return 4===t.length?Ih.emptyPath():ty(t)}function ey(e){return new Ih(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ty(e){return ah(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ny(e,t,n){return{name:Yg(e,t),fields:n.value.mapValue.fields}}function ry(e,t,n){const r=$g(e,t.name),s=Gg(t.updateTime),i=t.createTime?Gg(t.createTime):Th.min(),a=new Ep({mapValue:{fields:t.fields}}),o=Tp.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function sy(e,t){let n;if(t instanceof og)n={update:ny(e,t.key,t.value)};else if(t instanceof hg)n={delete:Yg(e,t.key)};else if(t instanceof lg)n={update:ny(e,t.key,t.data),updateMask:gy(t.fieldMask)};else{if(!(t instanceof fg))return ih();n={verify:Yg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof qm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qm)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw ih()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ih()}(e,t.precondition)),n}function iy(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Zm.updateTime(Gg(e.updateTime)):void 0!==e.exists?Zm.exists(e.exists):Zm.none()}(t.currentDocument):Zm.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)ah("REQUEST_TIME"===t.setToServerValue),n=new qm;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Hm(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Wm(e)}else"increment"in t?n=new Qm(e,t.increment):ih();const r=Ch.fromServerFormat(t.fieldPath);return new $m(r,n)}(e,t)):[];if(t.update){t.update.name;const s=$g(e,t.update.name),i=new Ep({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Hf(t.map(e=>Ch.fromServerFormat(e)))}(t.updateMask);return new lg(s,i,e,n,r)}return new og(s,i,n,r)}if(t.delete){const r=$g(e,t.delete);return new hg(r,n)}if(t.verify){const r=$g(e,t.verify);return new fg(r,n)}return ih()}function ay(e,t){return{documents:[Jg(e,t.path)]}}function oy(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Jg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Jg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return my(Pp.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:fy(e.field),direction:uy(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const a=qg(e,t.limit);var o;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ly(e){let t=Zg(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ah(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=cy(e);return t instanceof Pp&&Op(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>function(e){return new Cp(py(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,nf(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Np(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Np(n,t)}(n.endAt)),im(t,s,a,i,o,"F",l,c)}function cy(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=py(e.unaryFilter.field);return Dp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=py(e.unaryFilter.field);return Dp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=py(e.unaryFilter.field);return Dp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=py(e.unaryFilter.field);return Dp.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ih()}}(e):void 0!==e.fieldFilter?function(e){return Dp.create(py(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ih()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pp.create(e.compositeFilter.filters.map(e=>cy(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ih()}}(e.compositeFilter.op))}(e):ih()}function uy(e){return Vg[e]}function dy(e){return Ug[e]}function hy(e){return Bg[e]}function fy(e){return{fieldPath:e.canonicalString()}}function py(e){return Ch.fromServerFormat(e.fieldPath)}function my(e){return e instanceof Dp?function(e){if("=="===e.op){if(mp(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NAN"}};if(pp(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mp(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NOT_NAN"}};if(pp(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fy(e.field),op:dy(e.op),value:e.value}}}(e):e instanceof Pp?function(e){const t=e.getFilters().map(e=>my(e));return 1===t.length?t[0]:{compositeFilter:{op:hy(e.op),filters:t}}}(e):ih()}function gy(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function yy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class vy{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Th.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Th.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wf.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new vy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class by{constructor(e){this.fe=e}}function xy(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Yg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Hg(e,t.version.toTimestamp()),createTime:Hg(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ky(t.version)};else{if(!t.isUnknownDocument())return ih();r.unknownDocument={path:n.path.toArray(),version:ky(t.version)}}return r}function wy(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ky(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ey(e){const t=new Sh(e.seconds,e.nanoseconds);return Th.fromTimestamp(t)}function Sy(e,t){const n=(t.baseMutations||[]).map(t=>iy(e.fe,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>iy(e.fe,t)),s=Sh.fromMillis(t.localWriteTimeMs);return new pg(t.batchId,s,n,r)}function Ty(e){const t=Ey(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ey(e.lastLimboFreeSnapshotVersion):Th.min();let r;var s;return void 0!==e.query.documents?(ah(1===(s=e.query).documents.length),r=hm(am(Zg(s.documents[0])))):r=function(e){return hm(ly(e))}(e.query),new vy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Wf.fromBase64String(e.resumeToken))}function Ny(e,t){const n=ky(t.snapshotVersion),r=ky(t.lastLimboFreeSnapshotVersion);let s;s=em(t.target)?ay(e.fe,t.target):oy(e.fe,t.target);const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Jp(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Iy(e){const t=ly({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pm(t,t.limit,"L"):t}function _y(e,t){return new gg(t.largestBatchId,iy(e.fe,t.overlayMutation))}function Cy(e,t){const n=t.path.lastSegment();return[e,af(t.path.popLast()),n]}function Ay(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ky(r.readTime),documentKey:af(r.documentKey.path),largestBatchId:r.largestBatchId}}class jy{getBundleMetadata(e,t){return Dy(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Ey(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Dy(e).put({bundleId:(n=t).id,createTime:ky(Gg(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Py(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Iy(t.bundledQuery),readTime:Ey(t.readTime)};var t})}saveNamedQuery(e,t){return Py(e).put(function(e){return{name:e.name,readTime:ky(Gg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Dy(e){return Rf(e,"bundles")}function Py(e){return Rf(e,"namedQueries")}class Ry{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new Ry(e,n)}getOverlay(e,t){return My(e).get(Cy(this.userId,t)).next(e=>e?_y(this.serializer,e):null)}getOverlays(e,t){const n=_m();return qh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new gg(t,s);r.push(this.we(e,i))}),qh.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(af(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(My(e).J("collectionPathOverlayIndex",r))}),qh.waitFor(s)}getOverlaysForCollection(e,t,n){const r=_m(),s=af(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return My(e).j("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=_y(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=_m();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return My(e).X({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{const a=_y(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}we(e,t){return My(e).put(function(e,t,n){const[r,s,i]=Cy(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:sy(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function My(e){return Rf(e,"documentOverlays")}class Oy{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Xf(e.integerValue));else if("doubleValue"in e){const n=Xf(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),rf(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Yf(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?vp(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ih()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Ah.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Ly(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Fy(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ly(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Oy.Ve=new Oy;class Vy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Fy(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=Fy(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Uy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class By{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class zy{constructor(){this.je=new Vy,this.ze=new Uy(this.je),this.We=new By(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class qy{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new qy(this.indexId,this.documentKey,this.arrayValue,n)}}function Hy(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Ky(e.arrayValue,t.arrayValue),0!==n?n:(n=Ky(e.directionalValue,t.directionalValue),0!==n?n:Ah.comparator(e.documentKey,t.documentKey)))}function Ky(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Wy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){ah(e.collectionGroup===this.collectionId);const t=Dh(e);if(void 0!==t&&!this.en(t))return!1;const n=Ph(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.en(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[s];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[i++],e))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.Ye.length||!this.sn(this.Ye[i++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Gy(e){var t,n;if(ah(e instanceof Dp||e instanceof Pp),e instanceof Dp){if(e instanceof Gp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>Dp.create(e.field,"==",t)))||[];return Pp.create(r,"or")}return e}const r=e.filters.map(e=>Gy(e));return Pp.create(r,e.op)}function Qy(e){if(0===e.getFilters().length)return[];const t=Jy(Gy(e));return ah($y(t)),Xy(t)||Yy(t)?[t]:t.getFilters()}function Xy(e){return e instanceof Dp}function Yy(e){return e instanceof Pp&&Op(e)}function $y(e){return Xy(e)||Yy(e)||function(e){if(e instanceof Pp&&Mp(e)){for(const t of e.getFilters())if(!Xy(t)&&!Yy(t))return!1;return!0}return!1}(e)}function Jy(e){if(ah(e instanceof Dp||e instanceof Pp),e instanceof Dp)return e;if(1===e.filters.length)return Jy(e.filters[0]);const t=e.filters.map(e=>Jy(e));let n=Pp.create(t,e.op);return n=tv(n),$y(n)?n:(ah(n instanceof Pp),ah(Rp(n)),ah(n.filters.length>1),n.filters.reduce((e,t)=>Zy(e,t)))}function Zy(e,t){let n;return ah(e instanceof Dp||e instanceof Pp),ah(t instanceof Dp||t instanceof Pp),n=e instanceof Dp?t instanceof Dp?function(e,t){return Pp.create([e,t],"and")}(e,t):ev(e,t):t instanceof Dp?ev(t,e):function(e,t){if(ah(e.filters.length>0&&t.filters.length>0),Rp(e)&&Rp(t))return Up(e,t.getFilters());const n=Mp(e)?e:t,r=Mp(e)?t:e,s=n.filters.map(e=>Zy(e,r));return Pp.create(s,"or")}(e,t),tv(n)}function ev(e,t){if(Rp(t))return Up(t,e.getFilters());{const n=t.filters.map(t=>Zy(e,t));return Pp.create(n,"or")}}function tv(e){if(ah(e instanceof Dp||e instanceof Pp),e instanceof Dp)return e;const t=e.getFilters();if(1===t.length)return tv(t[0]);if(Lp(e))return e;const n=t.map(e=>tv(e)),r=[];return n.forEach(t=>{t instanceof Dp?r.push(t):t instanceof Pp&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Pp.create(r,e.op)}class nv{constructor(){this.rn=new rv}addToCollectionParentIndex(e,t){return this.rn.add(t),qh.resolve()}getCollectionParents(e,t){return qh.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return qh.resolve()}deleteFieldIndex(e,t){return qh.resolve()}getDocumentsMatchingTarget(e,t){return qh.resolve(null)}getIndexType(e,t){return qh.resolve(0)}getFieldIndexes(e,t){return qh.resolve([])}getNextCollectionGroupToUpdate(e){return qh.resolve(null)}getMinOffset(e,t){return qh.resolve(Fh.min())}getMinOffsetFromCollectionGroup(e,t){return qh.resolve(Fh.min())}updateCollectionGroup(e,t,n){return qh.resolve()}updateIndexEntries(e,t){return qh.resolve()}}class rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bf(Ih.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Bf(Ih.comparator)).toArray()}}const sv=new Uint8Array(0);class iv{constructor(e,t){this.user=e,this.databaseId=t,this.on=new rv,this.un=new km(e=>Jp(e),(e,t)=>Zp(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:n,parent:af(r)};return av(e).put(s)}return qh.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Eh(t),""],!1,!0);return av(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(cf(r.parent))}return n})}addFieldIndex(e,t){const n=lv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=cv(e);return s.next(e=>{n.put(Ay(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=lv(e),r=cv(e),s=ov(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=ov(e);let r=!0;const s=new Map;return qh.forEach(this.cn(t),t=>this.an(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=Pm();const r=[];return qh.forEach(s,(s,i)=>{var a;th("IndexedDbIndexManager","Using index ".concat((a=s,"id=".concat(a.indexId,"|cg=").concat(a.collectionGroup,"|f=").concat(a.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(",")))," to execute ").concat(Jp(t)));const o=function(e,t){const n=Dh(t);if(void 0===n)return null;for(const r of tm(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),l=function(e,t){const n=new Map;for(const r of Ph(t))for(const t of tm(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of Ph(t)){const t=0===s.kind?nm(e,s.fieldPath,e.startAt):rm(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Np(n,r)}(i,s),u=function(e,t){const n=[];let r=!0;for(const s of Ph(t)){const t=0===s.kind?rm(e,s.fieldPath,e.endAt):nm(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Np(n,r)}(i,s),d=this.hn(s,i,c),h=this.hn(s,i,u),f=this.ln(s,i,l),p=this.fn(s.indexId,o,d,c.inclusive,h,u.inclusive,f);return qh.forEach(p,s=>n.H(s,t.limit).next(t=>{t.forEach(t=>{const n=Ah.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return qh.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Qy(Pp.create(e.filters,"and")).map(t=>$p(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.dn(t[u/l]):sv,d=this.wn(e,o,n[u%l],r),h=this._n(e,o,s[u%l],i),f=a.map(t=>this.wn(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}wn(e,t,n,r){const s=new qy(e,Ah.empty(),t,n);return r?s:s.Je()}_n(e,t,n,r){const s=new qy(e,Ah.empty(),t,n);return r?s.Je():s}an(e,t){const n=new Wy(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.cn(t);return qh.forEach(r,t=>this.an(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Bf(Ch.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}mn(e,t){const n=new zy;for(const r of Ph(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.He(r.kind);Oy.Ve._e(e,s)}return n.Qe()}dn(e){const t=new zy;return Oy.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new zy;return Oy.Ve._e(dp(this.databaseId,t),n.He(function(e){const t=Ph(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new zy);let s=0;for(const i of Ph(e)){const e=n[s++];for(const n of r)if(this.yn(t,i.fieldPath)&&fp(e))r=this.pn(r,i,e);else{const t=n.He(i.kind);Oy.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new zy;n.seed(e.Qe()),Oy.Ve._e(i,n.He(t.kind)),s.push(n)}return s}yn(e,t){return!!e.filters.find(e=>e instanceof Dp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=lv(e),r=cv(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return qh.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Mh(t.sequenceNumber,new Fh(Ey(t.readTime),new Ah(cf(t.documentKey)),t.largestBatchId)):Mh.empty(),r=e.fields.map(e=>{let[t,n]=e;return new Rh(Ch.fromServerFormat(t),n)});return new jh(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:wh(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=lv(e),s=cv(e);return this.Tn(e).next(e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>qh.forEach(t,t=>s.put(Ay(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return qh.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?qh.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),qh.forEach(s,n=>this.En(e,t,n).next(t=>{const s=this.An(r,n);return t.isEqual(s)?qh.resolve():this.vn(e,r,n,t,s)}))))})}Rn(e,t,n,r){return ov(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return ov(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=ov(e);let s=new Bf(Hy);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(e,r)=>{s=s.add(new qy(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>s)}An(e,t){let n=new Bf(Hy);const r=this.mn(t,e);if(null==r)return n;const s=Dh(t);if(null!=s){const i=e.data.field(s.fieldPath);if(fp(i))for(const s of i.arrayValue.values||[])n=n.add(new qy(t.indexId,e.key,this.dn(s),r))}else n=n.add(new qy(t.indexId,e.key,sv,r));return n}vn(e,t,n,r,s){th("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=qf(i),l=qf(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=qf(a)):t?(s(o),o=qf(i)):(o=qf(i),l=qf(a))}}(r,s,Hy,r=>{i.push(this.Rn(e,t,n,r))},r=>{i.push(this.Pn(e,t,n,r))}),qh.waitFor(i)}Tn(e){let t=1;return cv(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Hy(e,t)).filter((e,t,n)=>!t||0!==Hy(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=Hy(i,e),s=Hy(i,t);if(0===n)r[0]=e.Je();else if(n>0&&s<0)r.push(i),r.push(i.Je());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.bn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,sv,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,sv,[]];s.push(IDBKeyRange.bound(e,t))}return s}bn(e,t){return Hy(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uv)}getMinOffset(e,t){return qh.mapArray(this.cn(t),t=>this.an(e,t).next(e=>e||ih())).next(uv)}}function av(e){return Rf(e,"collectionParents")}function ov(e){return Rf(e,"indexEntries")}function lv(e){return Rf(e,"indexConfiguration")}function cv(e){return Rf(e,"indexState")}function uv(e){ah(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Vh(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Fh(t.readTime,t.documentKey,n)}const dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new hv(e,hv.DEFAULT_COLLECTION_PERCENTILE,hv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fv(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.X({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{ah(1===o)}));const c=[];for(const u of n.mutations){const e=hf(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return qh.waitFor(i).next(()=>c)}function pv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ih();t=e.noDocument}return JSON.stringify(t).length}hv.DEFAULT_COLLECTION_PERCENTILE=10,hv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hv.DEFAULT=new hv(41943040,hv.DEFAULT_COLLECTION_PERCENTILE,hv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hv.DISABLED=new hv(-1,0,0);class mv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){ah(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new mv(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yv(e).X({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=vv(e),i=yv(e);return i.add({}).next(a=>{ah("number"==typeof a);const o=new pg(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>sy(e.fe,t)),s=n.mutations.map(t=>sy(e.fe,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new Bf((e,t)=>wh(e.canonicalString(),t.canonicalString()));for(const e of r){const t=hf(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,ff))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Vn[a]=o.keys()}),qh.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return yv(e).get(t).next(e=>e?(ah(e.userId===this.userId),Sy(this.serializer,e)):null)}Sn(e,t){return this.Vn[t]?qh.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return yv(e).X({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(ah(t.batchId>=n),s=Sy(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return yv(e).X({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yv(e).j("userMutationsIndex",t).next(e=>e.map(e=>Sy(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=df(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return vv(e).X({range:r},(n,r,i)=>{const[a,o,l]=n,c=cf(o);if(a===this.userId&&t.path.isEqual(c))return yv(e).get(l).next(e=>{if(!e)throw ih();ah(e.userId===this.userId),s.push(Sy(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bf(wh);const r=[];return t.forEach(t=>{const s=df(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=vv(e).X({range:i},(e,r,s)=>{const[i,a,o]=e,l=cf(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),qh.waitFor(r).next(()=>this.Dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=df(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new Bf(wh);return vv(e).X({range:i},(e,t,s)=>{const[i,o,l]=e,c=cf(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.Dn(e,a))}Dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(yv(e).get(t).next(e=>{if(null===e)throw ih();ah(e.userId===this.userId),n.push(Sy(this.serializer,e))}))}),qh.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return fv(e.ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),qh.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return qh.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return vv(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=cf(e[1]);r.push(t)}else n.done()}).next(()=>{ah(0===r.length)})})}containsKey(e,t){return gv(e,this.userId,t)}xn(e){return bv(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gv(e,t,n){const r=df(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return vv(e).X({range:i,Y:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function yv(e){return Rf(e,"mutations")}function vv(e){return Rf(e,"documentMutations")}function bv(e){return Rf(e,"mutationQueues")}class xv{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new xv(0)}static Mn(){return new xv(-1)}}class wv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const n=new xv(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(e=>Th.fromTimestamp(new Sh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>kv(e).delete(t.targetId)).next(()=>this.$n(e)).next(t=>(ah(t.targetCount>0),t.targetCount-=1,this.On(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return kv(e).X((i,a)=>{const o=Ty(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>qh.waitFor(s)).next(()=>r)}forEachTarget(e,t){return kv(e).X((e,n)=>{const r=Ty(n);t(r)})}$n(e){return Ev(e).get("targetGlobalKey").next(e=>(ah(null!==e),e))}On(e,t){return Ev(e).put("targetGlobalKey",t)}Fn(e,t){return kv(e).put(Ny(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Jp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return kv(e).X({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const i=Ty(n);Zp(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Sv(e);return t.forEach(t=>{const i=af(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),qh.waitFor(r)}removeMatchingKeys(e,t,n){const r=Sv(e);return qh.forEach(t,t=>{const s=af(t.path);return qh.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Sv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Sv(e);let s=Pm();return r.X({range:n,Y:!0},(e,t,n)=>{const r=cf(e[1]),i=new Ah(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=af(t.path),r=IDBKeyRange.bound([n],[Eh(n)],!1,!0);let s=0;return Sv(e).X({index:"documentTargetsIndex",Y:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}le(e,t){return kv(e).get(t).next(e=>e?Ty(e):null)}}function kv(e){return Rf(e,"targets")}function Ev(e){return Rf(e,"targetGlobal")}function Sv(e){return Rf(e,"targetDocuments")}function Tv(e,t){let[n,r]=e,[s,i]=t;const a=wh(n,s);return 0===a?wh(r,i):a}class Nv{constructor(e){this.Ln=e,this.buffer=new Bf(Tv),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Tv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Iv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){th("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Qh(e)?th("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await zh(e)}await this.Qn(3e5)})}}class _v{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return qh.resolve(tf.ct);const n=new Nv(t);return this.jn.forEachTarget(e,e=>n.Kn(e.sequenceNumber)).next(()=>this.jn.Wn(e,e=>n.Kn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(th("LruGarbageCollector","Garbage collection skipped; disabled"),qh.resolve(dv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(th("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),dv):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(th("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),eh()<=xt.DEBUG&&th("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),qh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Cv(e,t){return new _v(e,t)}class Av{constructor(e,t){this.db=e,this.garbageCollector=Cv(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Jn(e){let t=0;return this.Wn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(e,n)=>t(n))}addReference(e,t,n){return jv(e,n)}removeReference(e,t,n){return jv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return jv(e,t)}Xn(e,t){return function(e,t){let n=!1;return bv(e).Z(r=>gv(e,r,t).next(e=>(e&&(n=!0),qh.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(i,a)=>{if(a<=t){const t=this.Xn(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Th.min()),Sv(e).delete([0,af(i.path)])))});r.push(t)}}).next(()=>qh.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return jv(e,t)}Yn(e,t){const n=Sv(e);let r,s=tf.ct;return n.X({index:"documentTargetsIndex"},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==tf.ct&&t(new Ah(cf(r)),s),s=l,r=o):s=tf.ct}).next(()=>{s!==tf.ct&&t(new Ah(cf(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jv(e,t){return Sv(e).put(function(e,t){return{targetId:0,path:af(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Dv{constructor(){this.changes=new km(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Lv(e).put(n)}removeEntry(e,t,n){return Lv(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],wy(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Zn(e,n)))}getEntry(e,t){let n=Tp.newInvalidDocument(t);return Lv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fv(t))},(e,r)=>{n=this.ts(t,r)}).next(()=>n)}es(e,t){let n={size:0,document:Tp.newInvalidDocument(t)};return Lv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fv(t))},(e,r)=>{n={document:this.ts(t,r),size:pv(r)}}).next(()=>n)}getEntries(e,t){let n=Sm();return this.ns(e,t,(e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)}).next(()=>n)}ss(e,t){let n=Sm(),r=new Ff(Ah.comparator);return this.ns(e,t,(e,t)=>{const s=this.ts(e,t);n=n.insert(e,s),r=r.insert(e,pv(t))}).next(()=>({documents:n,rs:r}))}ns(e,t,n){if(t.isEmpty())return qh.resolve();let r=new Bf(Uv);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Fv(r.first()),Fv(r.last())),i=r.getIterator();let a=i.getNext();return Lv(e).X({index:"documentKeyIndex",range:s},(e,t,r)=>{const s=Ah.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Uv(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.G(Fv(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r){const s=t.path,i=[s.popLast().toArray(),s.lastSegment(),wy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lv(e).j(IDBKeyRange.bound(i,a,!0)).next(e=>{let n=Sm();for(const s of e){const e=this.ts(Ah.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(vm(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=Sm();const i=Vv(t,n),a=Vv(t,Fh.max());return Lv(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.ts(Ah.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Mv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Ov(e).get("remoteDocumentGlobalKey").next(e=>(ah(!!e),e))}Zn(e,t){return Ov(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=ry(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ah.fromSegments(t.noDocument.path),r=Ey(t.noDocument.readTime);n=Tp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ih();{const e=Ah.fromSegments(t.unknownDocument.path),r=Ey(t.unknownDocument.version);n=Tp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Sh(e[0],e[1]);return Th.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Th.min()))return e}return Tp.newInvalidDocument(e)}}function Rv(e){return new Pv(e)}class Mv extends Dv{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new km(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Bf((e,t)=>wh(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.us.get(s);if(t.push(this.os.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=xy(this.os.serializer,i);r=r.add(s.path.popLast());const l=pv(o);n+=l-a.size,t.push(this.os.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=xy(this.os.serializer,i.convertToNoDocument(Th.min()));t.push(this.os.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.os.updateMetadata(e,n)),qh.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(e=>{let{documents:t,rs:n}=e;return n.forEach((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Ov(e){return Rf(e,"remoteDocumentGlobal")}function Lv(e){return Rf(e,"remoteDocumentsV14")}function Fv(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Vv(e,t){const n=t.documentKey.path.toArray();return[e,wy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Uv(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=wh(n[i],r[i]),s)return s;return s=wh(n.length,r.length),s||(s=wh(n[n.length-2],r[r.length-2]),s||wh(n[n.length-1],r[r.length-1]))}class Bv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&sg(n.mutation,e,Hf.empty(),Sh.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Pm()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pm();const r=_m();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Nm();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=_m();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Pm()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Sm();const i=Am(),a=Am();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof lg)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),sg(a.mutation,t,a.mutation.getFieldMask(),Sh.now())):i.set(t.key,Hf.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Bv(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Am();let r=new Ff((e,t)=>e-t),s=Pm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Hf.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Pm()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Cm();l.forEach(e=>{if(!s.has(e)){const r=ng(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return qh.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ah.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):um(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):qh.resolve(_m());let a=-1,o=s;return i.next(t=>qh.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?qh.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Pm())).next(e=>({batchId:a,changes:Im(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ah(t)).next(e=>{let t=Nm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=Nm();return this.indexManager.getCollectionParents(e,r).next(i=>qh.forEach(i,i=>{const a=function(e,t){return new sm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Tp.newInvalidDocument(r)))});let n=Nm();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&sg(i.mutation,s,Hf.empty(),Sh.now()),vm(t,s)&&(n=n.insert(e,s))}),n})}}class qv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return qh.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Gg(n.createTime)}),qh.resolve()}getNamedQuery(e,t){return qh.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Iy(e.bundledQuery),readTime:Gg(e.readTime)}}(t)),qh.resolve()}}class Hv{constructor(){this.overlays=new Ff(Ah.comparator),this.ls=new Map}getOverlay(e,t){return qh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_m();return qh.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),qh.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),qh.resolve()}getOverlaysForCollection(e,t,n){const r=_m(),s=t.length+1,i=new Ah(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return qh.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Ff((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=_m(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=_m(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return qh.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gg(t,n));let s=this.ls.get(t);void 0===s&&(s=Pm(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class Kv{constructor(){this.fs=new Bf(Wv.ds),this.ws=new Bf(Wv._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Wv(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Wv(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new Ah(new Ih([])),n=new Wv(t,e),r=new Wv(t,e+1),s=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),s.push(e.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ah(new Ih([])),n=new Wv(t,e),r=new Wv(t,e+1);let s=Pm();return this.ws.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Wv(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Wv{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ah.comparator(e.key,t.key)||wh(e.As,t.As)}static _s(e,t){return wh(e.As,t.As)||Ah.comparator(e.key,t.key)}}class Gv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Bf(Wv.ds)}checkEmpty(e){return qh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new pg(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Rs=this.Rs.add(new Wv(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return qh.resolve(i)}lookupMutationBatch(e,t){return qh.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return qh.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return qh.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return qh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Wv(t,0),r=new Wv(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);s.push(t)}),qh.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bf(wh);return t.forEach(e=>{const t=new Wv(e,0),r=new Wv(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),qh.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ah.isDocumentKey(s)||(s=s.child(""));const i=new Wv(new Ah(s),0);let a=new Bf(wh);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)},i),qh.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ah(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return qh.forEach(t.mutations,r=>{const s=new Wv(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Wv(t,0),r=this.Rs.firstAfterOrEqual(n);return qh.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,qh.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qv{constructor(e){this.Ds=e,this.docs=new Ff(Ah.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qh.resolve(n?n.document.mutableCopy():Tp.newInvalidDocument(t))}getEntries(e,t){let n=Sm();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Tp.newInvalidDocument(e))}),qh.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Sm();const i=t.path,a=new Ah(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Vh(Lh(a),n)<=0||(r.has(a.key)||vm(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return qh.resolve(s)}getAllFromCollectionGroup(e,t,n,r){ih()}Cs(e,t){return qh.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Xv(this)}getSize(e){return qh.resolve(this.size)}}class Xv extends Dv{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),qh.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Yv{constructor(e){this.persistence=e,this.xs=new km(e=>Jp(e),Zp),this.lastRemoteSnapshotVersion=Th.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Kv,this.targetCount=0,this.Ms=xv.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),qh.resolve()}getLastRemoteSnapshotVersion(e){return qh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qh.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),qh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),qh.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new xv(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,qh.resolve()}updateTargetData(e,t){return this.Fn(t),qh.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,qh.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),qh.waitFor(s).next(()=>r)}getTargetCount(e){return qh.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return qh.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),qh.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),qh.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),qh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return qh.resolve(n)}containsKey(e,t){return qh.resolve(this.ks.containsKey(t))}}class $v{constructor(e,t){this.$s={},this.overlays={},this.Os=new tf(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Yv(this),this.indexManager=new nv,this.remoteDocumentCache=function(e){return new Qv(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new by(t),this.qs=new qv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Gv(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){th("MemoryPersistence","Starting transaction:",e);const r=new Jv(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return qh.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Jv extends Bh{constructor(e){super(),this.currentSequenceNumber=e}}class Zv{constructor(e){this.persistence=e,this.Qs=new Kv,this.js=null}static zs(e){return new Zv(e)}get Ws(){if(this.js)return this.js;throw ih()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),qh.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),qh.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),qh.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qh.forEach(this.Ws,n=>{const r=Ah.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Th.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return qh.or([()=>qh.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class eb{constructor(e){this.serializer=e}O(e,t,n,r){const s=new Hh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uf,{unique:!0}),e.createObjectStore("documentMutations")}(e),tb(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=qh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tb(e)),i=i.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Th.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store("mutations").j().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uf,{unique:!0});const r=t.store("mutations"),s=n.map(e=>r.put(e));return qh.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.Ys(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),n<7&&r>=7&&(i=i.next(()=>this.Zs(s))),n<8&&r>=8&&(i=i.next(()=>this.ti(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.ei(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Tf});t.createIndex("collectionPathOverlayIndex",Nf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",If,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:pf});t.createIndex("documentKeyIndex",mf),t.createIndex("collectionGroupIndex",gf)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(i=i.next(()=>this.si(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:wf}).createIndex("sequenceNumberIndex",kf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ef}).createIndex("documentKeyIndex",Sf,{unique:!1})}(e))),i}Xs(e){let t=0;return e.store("remoteDocuments").X((e,n)=>{t+=pv(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next(t=>qh.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next(n=>qh.forEach(n,n=>{ah(n.userId===t.userId);const r=Sy(this.serializer,n);return fv(e,t.userId,r).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.X((n,s)=>{const i=new Ih(n),a=function(e){return[0,af(e)]}(i);r.push(t.get(a).next(n=>n?qh.resolve():(n=>t.put({targetId:0,path:af(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>qh.waitFor(r))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:xf});const n=t.store("collectionParents"),r=new rv,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:af(r)})}};return t.store("remoteDocuments").X({Y:!0},(e,t)=>{const n=new Ih(e);return s(n.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},(e,t)=>{let[n,r,i]=e;const a=cf(r);return s(a.popLast())}))}ei(e){const t=e.store("targets");return t.X((e,n)=>{const r=Ty(n),s=Ny(this.serializer,r);return t.put(s)})}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X((e,n)=>{const s=t.store("remoteDocumentsV14"),i=(a=n,a.document?new Ah(Ih.fromString(a.document.name).popFirst(5)):a.noDocument?Ah.fromSegments(a.noDocument.path):a.unknownDocument?Ah.fromSegments(a.unknownDocument.path):ih()).path.toArray();var a;const o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(o))}).next(()=>qh.waitFor(r))}si(e,t){const n=t.store("mutations"),r=Rv(this.serializer),s=new $v(Zv.zs,this.serializer.fe);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Pm();Sy(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),qh.forEach(n,(e,n)=>{const i=new $d(n),a=Ry.de(this.serializer,i),o=s.getIndexManager(i),l=mv.de(i,this.serializer,o,s.referenceDelegate);return new zv(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new Pf(t,tf.ct),e).next()})})}}function tb(e){e.createObjectStore("targetDocuments",{keyPath:vf}).createIndex("documentTargetsIndex",bf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yf,{unique:!0}),e.createObjectStore("targetGlobal")}const nb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rb{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=s,this.window=i,this.document=a,this.ri=l,this.oi=c,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!rb.D())throw new ch(lh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Av(this,r),this.di=t+"main",this.serializer=new by(o),this.wi=new Kh(this.di,this.ui,new eb(this.serializer)),this.Bs=new wv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rv(this.serializer),this.qs=new jy,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&nh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ch(lh.FAILED_PRECONDITION,nb);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new tf(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ib(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Qh(e))return th("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return th("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return sb(e).get("owner").next(e=>qh.resolve(this.Ri(e)))}Pi(e){return ib(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Rf(e,"clientMetadata");return t.j().next(e=>{const n=this.Si(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return qh.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?qh.resolve(!0):sb(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ch(lh.FAILED_PRECONDITION,nb);return!1}}return!(!this.networkEnabled||!this.inForeground)||ib(e).j().next(e=>void 0===this.Si(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&th("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Pf(e,tf.ct);return this.Ai(t).next(()=>this.Pi(t))}),this.wi.close(),this.Mi()}Si(e,t){return e.filter(e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>ib(e).j().next(e=>this.Si(e,18e5).map(e=>e.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return mv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iv(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Ry.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){th("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?Df:14===i?jf:13===i?Af:12===i?Cf:11===i?_f:void ih();var i;let a;return this.wi.runTransaction(e,r,s,r=>(a=new Pf(r,this.Os?this.Os.next():tf.ct),"readwrite-primary"===t?this.Ti(a).next(e=>!!e||this.Ei(a)).next(t=>{if(!t)throw nh("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ch(lh.FAILED_PRECONDITION,Uh);return n(a)}).next(e=>this.vi(a).next(()=>e)):this.Oi(a).next(()=>n(a)))).then(e=>(a.raiseOnCommittedEvent(),e))}Oi(e){return sb(e).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ch(lh.FAILED_PRECONDITION,nb)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sb(e).put("owner",t)}static D(){return Kh.D()}Ai(e){const t=sb(e);return t.get("owner").next(e=>this.Ri(e)?(th("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qh.resolve())}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(nh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return th("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return nh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){nh("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function sb(e){return Rf(e,"owner")}function ib(e){return Rf(e,"clientMetadata")}function ab(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ob{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Pm(),r=Pm();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ob(e,t.fromCache,n,r)}}class lb{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(om(t))return qh.resolve(null);let n=hm(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=pm(t,null,"F"),n=hm(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Pm(...r);return this.Ui.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,r);return this.zi(t,i,s,n.readTime)?this.Ki(e,pm(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,r){return om(t)||r.isEqual(Th.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(s=>{const i=this.ji(t,s);return this.zi(t,i,n,r)?this.Qi(e,t):(eh()<=xt.DEBUG&&th("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ym(t)),this.Wi(e,i,t,Oh(r,-1)))})}ji(e,t){let n=new Bf(xm(e));return t.forEach((t,r)=>{vm(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return eh()<=xt.DEBUG&&th("QueryEngine","Using full collection scan to execute query:",ym(t)),this.Ui.getDocumentsMatchingQuery(e,t,Fh.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class cb{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Ff(wh),this.Yi=new km(e=>Jp(e),Zp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ub(e,t,n,r){return new cb(e,t,n,r)}async function db(e,t){const n=oh(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Pm();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({er:e,removedBatchIds:s,addedBatchIds:i}))})})}function hb(e){const t=oh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function fb(e,t,n){let r=Pm(),s=Pm();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Sm();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Th.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):th("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{nr:r,sr:s}})}function pb(e,t){const n=oh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function mb(e,t){const n=oh(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(s=>s?(r=s,qh.resolve(r)):n.Bs.allocateTargetId(e).next(s=>(r=new vy(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function gb(e,t,n){const r=oh(e),s=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Qh(e))throw e;th("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function yb(e,t,n){const r=oh(e);let s=Th.min(),i=Pm();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=oh(e),s=r.Yi.get(n);return void 0!==s?qh.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,hm(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:Th.min(),n?i:Pm())).next(e=>(vb(r,bm(t),e),{documents:e,ir:i})))}function vb(e,t,n){let r=e.Xi.get(t)||Th.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class bb{constructor(){this.activeTargetIds=Mm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xb{constructor(){this.Hr=new bb,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new bb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wb{Yr(e){}shutdown(){}}class kb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){th("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){th("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eb=null;function Sb(){return null===Eb?Eb=268435456+Math.round(2147483648*Math.random()):Eb++,"0x"+Eb.toString(16)}const Tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nb{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ib="WebChannelConnection";class _b extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const i=Sb(),a=this.To(e,t);th("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={};return this.Eo(o,r,s),this.Ao(e,a,o,n).then(t=>(th("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw rh("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}vo(e,t,n,r,s,i){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Tb[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=Sb();return new Promise((i,a)=>{const o=new Gd;o.setWithCredentials(!0),o.listenOnce(zd.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Bd.NO_ERROR:const t=o.getResponseJson();th(Ib,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Bd.TIMEOUT:th(Ib,"RPC '".concat(e,"' ").concat(s," timed out")),a(new ch(lh.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const n=o.getStatus();if(th(Ib,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(lh).indexOf(t)>=0?t:lh.UNKNOWN}(t.status);a(new ch(e,t.message))}else a(new ch(lh.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ch(lh.UNAVAILABLE,"Connection failed."));break;default:ih()}}finally{th(Ib,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);th(Ib,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Sb(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Vd(),a=Ud(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new Kd({})),this.Eo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");th(Ib,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new Nb({ro:t=>{h?th(Ib,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(th(Ib,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),th(Ib,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Wd.EventType.OPEN,()=>{h||th(Ib,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,Wd.EventType.CLOSE,()=>{h||(h=!0,th(Ib,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,Wd.EventType.ERROR,t=>{h||(h=!0,rh(Ib,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new ch(lh.UNAVAILABLE,"The operation could not be completed")))}),p(u,Wd.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];ah(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){th(Ib,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=vg[e];if(void 0!==t)return wg(t)}(t),s=a.message;void 0===n&&(n=lh.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.wo(new ch(n,s)),u.close()}else th(Ib,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f._o(s)}}),p(a,qd.STAT_EVENT,t=>{t.stat===Hd.PROXY?th(Ib,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Hd.NOPROXY&&th(Ib,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function Cb(){return"undefined"!=typeof window?window:null}function Ab(){return"undefined"!=typeof document?document:null}function jb(e){return new zg(e,!0)}class Db{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&th("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Pb{constructor(e,t,n,r,s,i,a,o){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Db(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===lh.RESOURCE_EXHAUSTED?(nh(t.toString()),nh("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===lh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new ch(lh.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return th("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(th("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rb extends Pb{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ih()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(ah(void 0===t||"string"==typeof t),Wf.fromBase64String(t||"")):(ah(void 0===t||t instanceof Uint8Array),Wf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?lh.UNKNOWN:wg(e.code);return new ch(t,e.message||"")}(a);n=new Rg(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=$g(e,r.document.name),i=Gg(r.document.updateTime),a=r.document.createTime?Gg(r.document.createTime):Th.min(),o=new Ep({mapValue:{fields:r.document.fields}}),l=Tp.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Dg(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=$g(e,r.document),i=r.readTime?Gg(r.readTime):Th.min(),a=Tp.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Dg([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=$g(e,r.document),i=r.removedTargetIds||[];n=new Dg([],i,s,null)}else{if(!("filter"in t))return ih();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new yg(r,s),a=e.targetId;n=new Pg(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Th.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Th.min():t.readTime?Gg(t.readTime):Th.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=ey(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=em(r)?{documents:ay(e,r)}:{query:oy(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Kg(e,t.resumeToken);const r=qg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Th.min())>0){n.readTime=Hg(e,t.snapshotVersion.toTimestamp());const r=qg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ih()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=ey(this.serializer),t.removeTarget=e,this.Wo(t)}}class Mb extends Pb{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ah(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(ah(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Gg(e.updateTime):Gg(t);return n.isEqual(Th.min())&&(n=Gg(t)),new Jm(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Gg(e.commitTime);return this.listener.cu(n,t)}return ah(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ey(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>sy(this.serializer,e))};this.Wo(t)}}class Ob extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new ch(lh.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,i]=r;return this.connection.Io(e,t,n,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===lh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ch(lh.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.vo(e,t,n,i,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===lh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ch(lh.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Lb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(nh(t),this.mu=!1):th("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Fb{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Gb(this)&&(th("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=oh(e);t.vu.add(4),await Ub(t),t.bu.set("Unknown"),t.vu.delete(4),await Vb(t)}(this))})}),this.bu=new Lb(n,r)}}async function Vb(e){if(Gb(e))for(const t of e.Ru)await t(!0)}async function Ub(e){for(const t of e.Ru)await t(!1)}function Bb(e,t){const n=oh(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Wb(n)?Kb(n):dx(n).Ko()&&qb(n,t))}function zb(e,t){const n=oh(e),r=dx(n);n.Au.delete(t),r.Ko()&&Hb(n,t),0===n.Au.size&&(r.Ko()?r.jo():Gb(n)&&n.bu.set("Unknown"))}function qb(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Th.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dx(e).su(t)}function Hb(e,t){e.Vu.qt(t),dx(e).iu(t)}function Kb(e){e.Vu=new Og({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),dx(e).start(),e.bu.gu()}function Wb(e){return Gb(e)&&!dx(e).Uo()&&e.Au.size>0}function Gb(e){return 0===oh(e).vu.size}function Qb(e){e.Vu=void 0}async function Xb(e){e.Au.forEach((t,n)=>{qb(e,t)})}async function Yb(e,t){Qb(e),Wb(e)?(e.bu.Iu(t),Kb(e)):e.bu.set("Unknown")}async function $b(e,t,n){if(e.bu.set("Online"),t instanceof Rg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){th("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Jb(e,n)}else if(t instanceof Dg?e.Vu.Ht(t):t instanceof Pg?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Th.min()))try{const t=await hb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Wf.EMPTY_BYTE_STRING,r.snapshotVersion)),Hb(e,t);const s=new vy(r.target,t,n,r.sequenceNumber);qb(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){th("RemoteStore","Failed to raise snapshot:",t),await Jb(e,t)}}async function Jb(e,t,n){if(!Qh(t))throw t;e.vu.add(1),await Ub(e),e.bu.set("Offline"),n||(n=()=>hb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{th("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Vb(e)})}function Zb(e,t){return t().catch(n=>Jb(e,n,t))}async function ex(e){const t=oh(e),n=hx(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;tx(t);)try{const e=await pb(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,nx(t,e)}catch(e){await Jb(t,e)}rx(t)&&sx(t)}function tx(e){return Gb(e)&&e.Eu.length<10}function nx(e,t){e.Eu.push(t);const n=hx(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function rx(e){return Gb(e)&&!hx(e).Uo()&&e.Eu.length>0}function sx(e){hx(e).start()}async function ix(e){hx(e).hu()}async function ax(e){const t=hx(e);for(const n of e.Eu)t.uu(n.mutations)}async function ox(e,t,n){const r=e.Eu.shift(),s=mg.from(r,t,n);await Zb(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ex(e)}async function lx(e,t){t&&hx(e).ou&&await async function(e,t){if(xg(n=t.code)&&n!==lh.ABORTED){const n=e.Eu.shift();hx(e).Qo(),await Zb(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ex(e)}var n}(e,t),rx(e)&&sx(e)}async function cx(e,t){const n=oh(e);n.asyncQueue.verifyOperationInProgress(),th("RemoteStore","RemoteStore received new credentials");const r=Gb(n);n.vu.add(3),await Ub(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Vb(n)}async function ux(e,t){const n=oh(e);t?(n.vu.delete(2),await Vb(n)):t||(n.vu.add(2),await Ub(n),n.bu.set("Unknown"))}function dx(e){return e.Su||(e.Su=function(e,t,n){const r=oh(e);return r.fu(),new Rb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Xb.bind(null,e),ao:Yb.bind(null,e),nu:$b.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Wb(e)?Kb(e):e.bu.set("Unknown")):(await e.Su.stop(),Qb(e))})),e.Su}function hx(e){return e.Du||(e.Du=function(e,t,n){const r=oh(e);return r.fu(),new Mb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ix.bind(null,e),ao:lx.bind(null,e),au:ax.bind(null,e),cu:ox.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await ex(e)):(await e.Du.stop(),e.Eu.length>0&&(th("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class fx{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new uh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new fx(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ch(lh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function px(e,t){if(nh("AsyncQueue","".concat(t,": ").concat(e)),Qh(e))return new ch(lh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class mx{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ah.comparator(t.key,n.key):(e,t)=>Ah.comparator(e.key,t.key),this.keyedMap=Nm(),this.sortedSet=new Ff(this.comparator)}static emptySet(e){return new mx(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mx))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new mx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class gx{constructor(){this.Cu=new Ff(Ah.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ih():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class yx{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new yx(e,t,mx.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class vx{constructor(){this.Nu=void 0,this.listeners=[]}}class bx{constructor(){this.queries=new km(e=>gm(e),mm),this.onlineState="Unknown",this.ku=new Set}}async function xx(e,t){const n=oh(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new vx),s)try{i.Nu=await n.onListen(r)}catch(e){const n=px(e,"Initialization of query '".concat(ym(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Mu(n.onlineState),i.Nu&&t.$u(i.Nu)&&Sx(n)}async function wx(e,t){const n=oh(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function kx(e,t){const n=oh(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&Sx(n)}function Ex(e,t,n){const r=oh(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function Sx(e){e.ku.forEach(e=>{e.next()})}class Tx{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yx(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=yx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Nx{constructor(e){this.key=e}}class Ix{constructor(e){this.key=e}}class _x{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pm(),this.mutatedKeys=Pm(),this.tc=xm(e),this.ec=new mx(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new gx,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=vm(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.tc(u,o)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ih()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return this.Xu=a,0!==s.length||o?{snapshot:new yx(this.query,e.ec,r,s,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new gx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Pm(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Ix(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Nx(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Pm();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return yx.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Cx{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ax{constructor(e){this.key=e,this.fc=!1}}class jx{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new km(e=>gm(e),mm),this._c=new Map,this.mc=new Set,this.gc=new Ff(Ah.comparator),this.yc=new Map,this.Ic=new Kv,this.Tc={},this.Ec=new Map,this.Ac=xv.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Dx(e,t){const n=Yx(e);let r,s;const i=n.wc.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const e=await mb(n.localStore,hm(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await Px(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&Bb(n.remoteStore,e)}return s}async function Px(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await yb(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i);return Hx(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const i=await yb(e.localStore,t,!0),a=new _x(t,i.ir),o=a.sc(i.documents),l=jg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Hx(e,n,c.cc);const u=new Cx(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Rx(e,t){const n=oh(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(e=>!mm(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await gb(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),zb(n.remoteStore,r.targetId),zx(n,r.targetId)}).catch(zh)):(zx(n,r.targetId),await gb(n.localStore,r.targetId,!0))}async function Mx(e,t){const n=oh(e);try{const e=await function(e,t){const n=oh(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Wf.EMPTY_BYTE_STRING,Th.min()).withLastLimboFreeSnapshotVersion(Th.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Bs.updateTargetData(e,c))});let o=Sm(),l=Pm();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(fb(e,i,t.documentUpdates).next(e=>{o=e.nr,l=e.sr})),!r.isEqual(Th.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return qh.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ji=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(ah(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?ah(r.fc):e.removedDocuments.size>0&&(ah(r.fc),r.fc=!1))}),await Gx(n,e,t)}catch(e){await zh(e)}}function Ox(e,t,n){const r=oh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=oh(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)}),r&&Sx(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lx(e,t,n){const r=oh(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),i=s&&s.key;if(i){let e=new Ff(Ah.comparator);e=e.insert(i,Tp.newNoDocument(i,Th.min()));const n=Pm().add(i),s=new Ag(Th.min(),new Map,new Ff(wh),e,n);await Mx(r,s),r.gc=r.gc.remove(i),r.yc.delete(t),Wx(r)}else await gb(r.localStore,t,!1).then(()=>zx(r,t,n)).catch(zh)}async function Fx(e,t){const n=oh(e),r=t.batch.batchId;try{const e=await function(e,t){const n=oh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=qh.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);ah(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Pm();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Bx(n,r,null),Ux(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gx(n,e)}catch(e){await zh(e)}}async function Vx(e,t,n){const r=oh(e);try{const e=await function(e,t){const n=oh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ah(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Bx(r,t,n),Ux(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Gx(r,e)}catch(n){await zh(n)}}function Ux(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Bx(e,t,n){const r=oh(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function zx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||qx(e,t)})}function qx(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(zb(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Wx(e))}function Hx(e,t,n){for(const r of n)r instanceof Nx?(e.Ic.addReference(r.key,t),Kx(e,r)):r instanceof Ix?(th("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||qx(e,r.key)):ih()}function Kx(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(th("SyncEngine","New document in limbo: "+n),e.mc.add(r),Wx(e))}function Wx(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Ah(Ih.fromString(t)),r=e.Ac.next();e.yc.set(r,new Ax(n)),e.gc=e.gc.insert(n,r),Bb(e.remoteStore,new vy(hm(am(n.path)),r,"TargetPurposeLimboResolution",tf.ct))}}async function Gx(e,t,n){const r=oh(e),s=[],i=[],a=[];r.wc.isEmpty()||(r.wc.forEach((e,o)=>{a.push(r.Rc(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=ob.Li(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.dc.nu(s),await async function(e,t){const n=oh(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>qh.forEach(t,t=>qh.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>qh.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Qh(e))throw e;th("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,i))}async function Qx(e,t){const n=oh(e);if(!n.currentUser.isEqual(t)){th("SyncEngine","User change. New user:",t.toKey());const e=await db(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new ch(lh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gx(n,e.er)}}function Xx(e,t){const n=oh(e),r=n.yc.get(t);if(r&&r.fc)return Pm().add(r.key);{let e=Pm();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Yx(e){const t=oh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lx.bind(null,t),t.dc.nu=kx.bind(null,t.eventManager),t.dc.Pc=Ex.bind(null,t.eventManager),t}function $x(e){const t=oh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vx.bind(null,t),t}class Jx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=jb(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ub(this.persistence,new lb,e.initialUser,this.serializer)}createPersistence(e){return new $v(Zv.zs,this.serializer)}createSharedClientState(e){return new xb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zx extends Jx{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await $x(this.Vc.syncEngine),await ex(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return ub(this.persistence,new lb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Iv(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ef(t,this.persistence);return new Zh(e.asyncQueue,n)}createPersistence(e){const t=ab(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hv.withCacheSize(this.cacheSizeBytes):hv.DEFAULT;return new rb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Cb(),Ab(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new xb}}class ew{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ox(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qx.bind(null,this.syncEngine),await ux(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bx}createDatastore(e){const t=jb(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new _b(r));var r;return function(e,t,n,r){return new Ob(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>Ox(this.syncEngine,e,0),i=kb.D()?new kb:new wb,new Fb(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new jx(e,t,n,r,s,i);return a&&(o.vc=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=oh(e);th("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Ub(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class tw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):nh("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nw{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$d.UNAUTHENTICATED,this.clientId=xh.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{th("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(th("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ch(lh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(AM){const n=px(AM,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function rw(e,t){e.asyncQueue.verifyOperationInProgress(),th("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await db(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aw(e);th("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>cx(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>cx(t.remoteStore,n)),e._onlineComponents=t}function iw(e){return"FirebaseError"===e.name?e.code===lh.FAILED_PRECONDITION||e.code===lh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function aw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){th("FirestoreClient","Using user provided OfflineComponentProvider");try{await rw(e,e._uninitializedComponentsProvider._offline)}catch(AM){const n=AM;if(!iw(n))throw n;rh("Error using user provided cache. Falling back to memory cache: "+n),await rw(e,new Jx)}}else th("FirestoreClient","Using default OfflineComponentProvider"),await rw(e,new Jx);return e._offlineComponents}async function ow(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(th("FirestoreClient","Using user provided OnlineComponentProvider"),await sw(e,e._uninitializedComponentsProvider._online)):(th("FirestoreClient","Using default OnlineComponentProvider"),await sw(e,new ew))),e._onlineComponents}function lw(e){return ow(e).then(e=>e.syncEngine)}async function cw(e){const t=await ow(e),n=t.eventManager;return n.onListen=Dx.bind(null,t.syncEngine),n.onUnlisten=Rx.bind(null,t.syncEngine),n}function uw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new uh;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new tw({next:n=>{t.enqueueAndForget(()=>wx(e,a)),n.fromCache&&"server"===r.source?s.reject(new ch(lh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Tx(n,i,{includeMetadataChanges:!0,Ku:!0});return xx(e,a)}(await cw(e),e.asyncQueue,t,n,r)),r.promise}function dw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hw=new Map;function fw(e,t,n){if(!n)throw new ch(lh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pw(e){if(!Ah.isDocumentKey(e))throw new ch(lh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mw(e){if(Ah.isDocumentKey(e))throw new ch(lh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ih()}function yw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ch(lh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gw(e);throw new ch(lh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class vw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ch(lh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ch(lh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ch(lh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ch(lh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ch(lh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ch(lh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class bw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ch(lh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ch(lh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hh;switch(e.type){case"firstParty":return new gh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ch(lh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hw.get(e);t&&(th("ComponentProvider","Removing Datastore"),hw.delete(e),t.terminate())}(this),Promise.resolve()}}class xw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xw(this.firestore,e,this._key)}}class ww{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ww(this.firestore,e,this._query)}}class kw extends ww{constructor(e,t,n){super(e,t,am(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xw(this.firestore,null,new Ah(e))}withConverter(e){return new kw(this.firestore,e,this._path)}}function Ew(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=pt(e),fw("collection","path",t),e instanceof bw){const n=Ih.fromString(t,...r);return mw(n),new kw(e,null,n)}{if(!(e instanceof xw||e instanceof kw))throw new ch(lh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ih.fromString(t,...r));return mw(n),new kw(e.firestore,null,n)}}function Sw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=pt(e),1===arguments.length&&(t=xh.A()),fw("doc","path",t),e instanceof bw){const n=Ih.fromString(t,...r);return pw(n),new xw(e,null,new Ah(n))}{if(!(e instanceof xw||e instanceof kw))throw new ch(lh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ih.fromString(t,...r));return pw(n),new xw(e.firestore,e instanceof kw?e.converter:null,new Ah(n))}}class Tw{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Db(this,"async_queue_retry"),this.Xc=()=>{const e=Ab();e&&th("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Ab();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ab();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new uh;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Qh(e))throw e;th("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw nh("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=fx.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&ih()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Nw(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Iw extends bw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Tw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cw(this),this._firestoreClient.terminate()}}function _w(e){return e._firestoreClient||Cw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Cw(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new ep(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dw(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new nw(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function Aw(e,t,n){const r=new uh;return e.asyncQueue.enqueue(async()=>{try{await rw(e,n),await sw(e,t),r.resolve()}catch(e){const n=e;if(!iw(n))throw n;rh("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}}).then(()=>r.promise)}function jw(e){if(e._initialized||e._terminated)throw new ch(lh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dw(Wf.fromBase64String(e))}catch(e){throw new ch(lh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Dw(Wf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ch(lh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ch(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rw{constructor(e){this._methodName=e}}class Mw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ch(lh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ch(lh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wh(this._lat,e._lat)||wh(this._long,e._long)}}const Ow=/^__.*__$/;class Lw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new lg(e,this.data,this.fieldMask,t,this.fieldTransforms):new og(e,this.data,t,this.fieldTransforms)}}class Fw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new lg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ih()}}class Uw{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Uw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return nk(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Vw(this.ca)&&Ow.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Bw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jb(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Uw({ca:e,methodName:t,ga:n,path:Ch.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zw(e){const t=e._freezeSettings(),n=jb(e._databaseId);return new Bw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qw(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(i.merge||i.mergeFields?2:0,t,n,s);Jw("Data must be an object, but it was:",a,r);const o=Yw(r,a);let l,c;if(i.merge)l=new Hf(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Zw(t,r,n);if(!a.contains(s))throw new ch(lh.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));rk(e,s)||e.push(s)}l=new Hf(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Lw(new Ep(o),l,c)}class Hw extends Rw{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hw}}class Kw extends Rw{_toFieldTransform(e){return new $m(e.path,new qm)}isEqual(e){return e instanceof Kw}}function Ww(e,t,n,r){const s=e.ya(1,t,n);Jw("Data must be an object, but it was:",s,r);const i=[],a=Ep.empty();Of(r,(e,r)=>{const o=tk(t,e,n);r=pt(r);const l=s.da(o);if(r instanceof Hw)i.push(o);else{const e=Xw(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new Hf(i);return new Fw(a,o,s.fieldTransforms)}function Gw(e,t,n,r,s,i){const a=e.ya(1,t,n),o=[Zw(t,r,n)],l=[s];if(i.length%2!=0)throw new ch(lh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(Zw(t,i[h])),l.push(i[h+1]);const c=[],u=Ep.empty();for(let h=o.length-1;h>=0;--h)if(!rk(c,o[h])){const e=o[h];let t=l[h];t=pt(t);const n=a.da(e);if(t instanceof Hw)c.push(e);else{const r=Xw(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Hf(c);return new Fw(u,d,a.fieldTransforms)}function Qw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Xw(n,e.ya(r?4:3,t))}function Xw(e,t){if($w(e=pt(e)))return Jw("Unsupported field value:",t,e),Yw(e,t);if(e instanceof Rw)return function(e,t){if(!Vw(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Xw(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=pt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Sh.fromDate(e);return{timestampValue:Hg(t.serializer,n)}}if(e instanceof Sh){const n=new Sh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Hg(t.serializer,n)}}if(e instanceof Mw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dw)return{bytesValue:Kg(t.serializer,e._byteString)};if(e instanceof xw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Qg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(gw(e)))}(e,t)}function Yw(e,t){const n={};return Lf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Of(e,(e,r)=>{const s=Xw(r,t.ha(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function $w(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sh||e instanceof Mw||e instanceof Dw||e instanceof xw||e instanceof Rw)}function Jw(e,t,n){if(!$w(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=gw(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Zw(e,t,n){if((t=pt(t))instanceof Pw)return t._internalPath;if("string"==typeof t)return tk(e,t);throw nk("Field path arguments must be of type string or ",e,!1,void 0,n)}const ek=new RegExp("[~\\*/\\[\\]]");function tk(e,t,n){if(t.search(ek)>=0)throw nk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Pw(...t.split("."))._internalPath}catch(r){throw nk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function nk(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new ch(lh.INVALID_ARGUMENT,o+e+l)}function rk(e,t){return e.some(e=>e.isEqual(t))}class sk{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ik(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ak("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ik extends sk{data(){return super.data()}}function ak(e,t){return"string"==typeof t?tk(e,t):t instanceof Pw?t._internalPath:t._delegate._internalPath}function ok(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ch(lh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lk{}class ck extends lk{}function uk(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof lk&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof hk).length,n=e.filter(e=>e instanceof dk).length;if(t>1||t>0&&n>0)throw new ch(lh.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class dk extends ck{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dk(e,t,n)}_apply(e){const t=this._parse(e);return yk(e._query,t),new ww(e.firestore,e.converter,fm(e._query,t))}_parse(e){const t=zw(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new ch(lh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){gk(a,i);const t=[];for(const n of a)t.push(mk(r,e,n));o={arrayValue:{values:t}}}else o=mk(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||gk(a,i),o=Qw(n,"where",a,"in"===i||"not-in"===i);return Dp.create(s,i,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class hk extends lk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hk(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Pp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)yk(n,s),n=fm(n,s)}(e._query,t),new ww(e.firestore,e.converter,fm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fk extends ck{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fk(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ch(lh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ch(lh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Cp(t,n);return function(e,t){if(null===lm(e)){const n=cm(e);null!==n&&vk(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new ww(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new sm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function pk(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ak("orderBy",e);return fk._create(n,t)}function mk(e,t,n){if("string"==typeof(n=pt(n))){if(""===n)throw new ch(lh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(t)&&-1!==n.indexOf("/"))throw new ch(lh.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ih.fromString(n));if(!Ah.isDocumentKey(r))throw new ch(lh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return dp(e,new Ah(r))}if(n instanceof xw)return dp(e,n._key);throw new ch(lh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gw(n),"."))}function gk(e,t){if(!Array.isArray(e)||0===e.length)throw new ch(lh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function yk(e,t){if(t.isInequality()){const n=cm(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ch(lh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const s=lm(e);null!==s&&vk(e,r,s)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ch(lh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ch(lh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function vk(e,t,n){if(!n.isEqual(t))throw new ch(lh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class bk{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ih()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Of(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Mw(Xf(e.latitude),Xf(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Jf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zf(e));default:return null}}convertTimestamp(e){const t=Qf(e);return new Sh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ih.fromString(e);ah(yy(n));const r=new tp(n.get(1),n.get(3)),s=new Ah(n.popFirst(5));return r.isEqual(t)||nh("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function xk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class wk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kk extends sk{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ek(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ak("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ek extends kk{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Sk{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new wk(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ek(this._firestore,this._userDataWriter,n.key,n,new wk(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ch(lh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Ek(e._firestore,e._userDataWriter,n.doc.key,n.doc,new wk(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Ek(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Tk(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Tk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ih()}}class Nk extends bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xw(this.firestore,null,t)}}function Ik(e){e=yw(e,ww);const t=yw(e.firestore,Iw),n=_w(t),r=new Nk(t);return ok(e._query),uw(n,e._query).then(n=>new Sk(t,r,e,n))}function _k(e,t,n){e=yw(e,xw);const r=yw(e.firestore,Iw),s=zw(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=pt(t))||t instanceof Pw?Gw(s,"updateDoc",e._key,t,n,o):Ww(s,"updateDoc",e._key,t),Dk(r,[i.toMutation(e._key,Zm.exists(!0))])}function Ck(e){return Dk(yw(e.firestore,Iw),[new hg(e._key,Zm.none())])}function Ak(e,t){const n=yw(e.firestore,Iw),r=Sw(e),s=xk(e.converter,t);return Dk(n,[qw(zw(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Zm.exists(!1))]).then(()=>r)}function jk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=pt(e);let o={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Nw(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(Nw(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof xw)d=yw(e.firestore,Iw),h=am(e._key.path),u={next:t=>{n[l]&&n[l](Pk(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=yw(e,ww);d=yw(t.firestore,Iw),h=t._query;const r=new Nk(d);u={next:e=>{n[l]&&n[l](new Sk(d,r,t,e))},error:n[l+1],complete:n[l+2]},ok(e._query)}return function(e,t,n,r){const s=new tw(r),i=new Tx(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>xx(await cw(e),i)),()=>{s.Dc(),e.asyncQueue.enqueueAndForget(async()=>wx(await cw(e),i))}}(_w(d),h,c,u)}function Dk(e,t){return function(e,t){const n=new uh;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=$x(e);try{const e=await function(e,t){const n=oh(e),r=Sh.now(),s=t.reduce((e,t)=>e.add(t.key),Pm());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Sm(),l=Pm();return n.Zi.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=ig(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new lg(e.key,t,Sp(t.value.mapValue),Zm.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Im(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Ff(wh)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Gx(r,e.changes),await ex(r.remoteStore)}catch(e){const t=px(e,"Failed to persist write");n.reject(t)}}(await lw(e),t,n)),n.promise}(_w(e),t)}function Pk(e,t,n){const r=n.docs.get(t._key),s=new Nk(e);return new kk(e,s,t._key,r,new wk(n.hasPendingWrites,n.fromCache),t.converter)}function Rk(){return new Kw("serverTimestamp")}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Jd=e}(jn),In(new mt("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Iw(new ph(e.getProvider("auth-internal")),new vh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ch(lh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tp(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Rn(Yd,"3.13.0",e),Rn(Yd,"3.13.0","esm2017")}();const Mk="firebasestorage.googleapis.com",Ok="storageBucket";class Lk extends rt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Uk(e),"Firebase Storage: ".concat(t," (").concat(Uk(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lk.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Fk,Vk;function Uk(e){return"storage/"+e}function Bk(){return new Lk(Fk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function zk(){return new Lk(Fk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qk(){return new Lk(Fk.CANCELED,"User canceled the upload/download.")}function Hk(){return new Lk(Fk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kk(e){return new Lk(Fk.INVALID_ARGUMENT,e)}function Wk(){return new Lk(Fk.APP_DELETED,"The Firebase app was deleted.")}function Gk(e,t){return new Lk(Fk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Qk(e){throw new Lk(Fk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Fk||(Fk={}));class Xk{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Xk.makeFromUrl(e,t)}catch(AM){return new Xk(e,"")}if(""===n.path)return n;throw r=e,new Lk(Fk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===Mk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Xk(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Lk(Fk.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Yk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function $k(e){return"string"===typeof e||e instanceof String}function Jk(e){return Zk()&&e instanceof Blob}function Zk(){return"undefined"!==typeof Blob&&!Ze()}function eE(e,t,n,r){if(r<t)throw Kk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Kk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function tE(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function nE(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function rE(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Vk||(Vk={}));class sE{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new iE(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Vk.NO_ERROR,s=n.getStatus();if(!t||rE(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Vk.ABORT;return void e(!1,new iE(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new iE(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(AM){r(AM)}else if(null!==s){const e=Bk();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Wk():qk())}else{r(zk())}};this.canceled_?t(0,new iE(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class iE{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function aE(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function oE(){const e=aE();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Zk())return new Blob(n);throw new Lk(Fk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function lE(e){if("undefined"===typeof atob)throw t="base-64",new Lk(Fk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const cE="raw",uE="base64",dE="base64url",hE="data_url";class fE{constructor(e,t){this.data=e,this.contentType=t||null}}function pE(e,t){switch(e){case cE:return new fE(mE(t));case uE:case dE:return new fE(gE(e,t));case hE:return new fE(function(e){const t=new yE(e);return t.base64?gE(uE,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(AM){throw Gk(hE,"Malformed data URL.")}return mE(t)}(t.rest)}(t),new yE(t).contentType)}throw Bk()}function mE(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function gE(e,t){switch(e){case uE:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Gk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case dE:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Gk(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=lE(t)}catch(AM){if(AM.message.includes("polyfill"))throw AM;throw Gk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class yE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Gk(hE,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class vE{constructor(e,t){let n=0,r="";Jk(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Jk(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new vE(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new vE(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Zk()){const e=t.map(e=>e instanceof vE?e.data_:e);return new vE(oE.apply(null,e))}{const e=t.map(e=>$k(e)?pE(cE,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new vE(r,!0)}}uploadData(){return this.data_}}function bE(e){let t;try{t=JSON.parse(e)}catch(AM){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function xE(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function wE(e,t){return t}class kE{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||wE}}let EE=null;function SE(){if(EE)return EE;const e=[];e.push(new kE("bucket")),e.push(new kE("generation")),e.push(new kE("metageneration")),e.push(new kE("name","fullPath",!0));const t=new kE("name");t.xform=function(e,t){return function(e){return!$k(e)||e.length<2?e:xE(e)}(t)},e.push(t);const n=new kE("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kE("timeCreated")),e.push(new kE("updated")),e.push(new kE("md5Hash",null,!0)),e.push(new kE("cacheControl",null,!0)),e.push(new kE("contentDisposition",null,!0)),e.push(new kE("contentEncoding",null,!0)),e.push(new kE("contentLanguage",null,!0)),e.push(new kE("contentType",null,!0)),e.push(new kE("metadata","customMetadata",!0)),EE=e,EE}function TE(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Xk(n,r);return t._makeStorageReference(s)}})}(r,e),r}function NE(e,t,n){const r=bE(t);if(null===r)return null;return TE(e,r,n)}function IE(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class _E{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function CE(e){if(!e)throw Bk()}function AE(e,t){return function(n,r){const s=NE(e,r,t);return CE(null!==s),s}}function jE(e,t){return function(n,r){const s=NE(e,r,t);return CE(null!==s),function(e,t,n,r){const s=bE(t);if(null===s)return null;if(!$k(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return tE("/b/"+a(s)+"/o/"+a(i),n,r)+nE({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function DE(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Lk(Fk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Lk(Fk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new Lk(Fk.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new Lk(Fk.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function PE(e){const t=DE(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new Lk(Fk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function RE(e,t,n){const r=tE(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new _E(r,"GET",AE(e,n),s);return i.errorHandler=PE(t),i}function ME(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function OE(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=ME(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+IE(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=vE.getBlob(c,r,u);if(null===d)throw Hk();const h={name:l.fullPath},f=tE(i,e.host,e._protocol),p=e.maxUploadRetryTime,m=new _E(f,"POST",AE(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=DE(t),m}class LE{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function FE(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(AM){CE(!1)}return CE(!!n&&-1!==(t||["active"]).indexOf(n)),n}const VE=262144;function UE(e,t,n,r,s,i,a,o){const l=new LE(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Lk(Fk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;s>0&&(u=Math.min(u,s));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(d,h);if(null===m)throw Hk();const g=t.maxUploadRetryTime,y=new _E(n,"POST",function(e,n){const s=FE(e,["active","final"]),a=l.current+u,o=r.size();let c;return c="final"===s?AE(t,i)(e,n):null,new LE(a,o,"final"===s,c)},g);return y.headers=p,y.body=m.uploadData(),y.progressCallback=o||null,y.errorHandler=DE(e),y}const BE="running",zE="paused",qE="success",HE="canceled",KE="error";function WE(e){switch(e){case"running":case"pausing":case"canceling":return BE;case"paused":return zE;case"success":return qE;case"canceled":return HE;default:return KE}}class GE{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function QE(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then(()=>e(...n))}}class XE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vk.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vk.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vk.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw Qk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qk("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(AM){return-1}}getResponse(){if(!this.sent_)throw Qk("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qk("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class YE extends XE{initXhr(){this.xhr_.responseType="text"}}function $E(){return new YE}class JE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=SE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Fk.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(rE(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=zk()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Fk.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a=ME(t,r,s),o={name:a.fullPath},l=tE(i,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=IE(a,n),d=e.maxUploadRetryTime,h=new _E(l,"POST",function(e){let t;FE(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(AM){CE(!1)}return CE($k(t)),t},d);return h.urlParams=o,h.headers=c,h.body=u,h.errorHandler=DE(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,$E,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=function(e,t,n,r){const s=e.maxUploadRetryTime,i=new _E(n,"POST",function(e){const t=FE(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(AM){CE(!1)}n||CE(!1);const s=Number(n);return CE(!isNaN(s)),new LE(s,r.size(),"final"===t)},s);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=DE(t),i}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,$E,t,n);this._request=s,s.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=VE*this._chunkMultiplier,t=new LE(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,s)=>{let i;try{i=UE(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(AM){return this._error=AM,void this._transition("error")}const a=this._ref.storage._makeRequest(i,$E,r,s,!1);this._request=a,a.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(VE*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=RE(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,$E,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=OE(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,$E,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=qk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const s=new GE(t||void 0,n||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WE(this._state)){case qE:QE(this._resolve.bind(null,this.snapshot))();break;case HE:case KE:QE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WE(this._state)){case BE:case zE:e.next&&QE(e.next.bind(e,this.snapshot))();break;case qE:e.complete&&QE(e.complete.bind(e))();break;default:e.error&&QE(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ZE{constructor(e,t){this._service=e,this._location=t instanceof Xk?t:Xk.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ZE(e,t)}get root(){const e=new Xk(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xE(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Xk(this._location.bucket,e);return new ZE(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Lk(Fk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function eS(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=tE(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new _E(r,"GET",jE(e,n),s);return i.errorHandler=PE(t),i}(e.storage,e._location,SE());return e.storage.makeRequestWithTokens(t,$E).then(e=>{if(null===e)throw new Lk(Fk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function tS(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Xk(e._location.bucket,n);return new ZE(e.storage,r)}function nS(e,t){if(e instanceof iS){const n=e;if(null==n._bucket)throw new Lk(Fk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ok+"' property when initializing the app?");const r=new ZE(n,n._bucket);return null!=t?nS(r,t):r}return void 0!==t?tS(e,t):e}function rS(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof iS)return new ZE(e,t);throw Kk("To use ref(service, url), the first argument must be a Storage instance.")}return nS(e,t)}function sS(e,t){const n=null===t||void 0===t?void 0:t[Ok];return null==n?null:Xk.makeFromBucketSpec(n,e)}class iS{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Mk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Xk.makeFromBucketSpec(r,this._host):sS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Xk.makeFromBucketSpec(this._url,e):this._bucket=sS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ZE(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Yk(Wk());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=nE(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new sE(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const aS="@firebase/storage",oS="0.11.2",lS="storage";function cS(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new JE(e,new vE(t),n)}(e=pt(e),t,n)}function uS(e){return eS(e=pt(e))}function dS(e,t){return rS(e=pt(e),t)}function hS(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new iS(r,s,i,n,jn)}In(new mt(lS,hS,"PUBLIC").setMultipleInstances(!0)),Rn(aS,oS,""),Rn(aS,oS,"esm2017");const fS=Dn({apiKey:"AIzaSyCyH8h0OqHmI3vXsW_ee1qugqCAHRiL3vk",authDomain:"soccer-app-e81d0.firebaseapp.com",projectId:"soccer-app-e81d0",storageBucket:"soccer-app-e81d0.appspot.com",messagingSenderId:"199836947592",appId:"1:199836947592:web:8388db5a944f98b6d57b3d",measurementId:"G-JQZVTJX6TJ"}),pS=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();e=pt(e);const t=_n(e,$a);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=_n(e,$a);if(n.isInitialized()){const e=n.getImmediate();if(at(t,n.getOptions()))return e;throw eo.create("already-initialized")}const r=n.initialize({options:t})}(e)}(fS),function(e,t){const n="string"==typeof e?e:t||"(default)",r=_n("object"==typeof e?e:Pn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ge("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=yw(e,bw))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&rh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$d.MOCK_USER;else{t=$e(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ch(lh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $d(i)}e._authCredentials=new fh(new dh(t,n))}}(r,...e)}return r}(fS)),mS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();const t=_n(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=_n(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(at(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;$n(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Vi,persistence:[Js,Ms,Ls]}),r=Xe("authTokenSyncURL");if(r){const e=(s=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>qi)return;const r=null===t||void 0===t?void 0:t.token;Hi!==r&&(Hi=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){pt(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){pt(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var s;const i=We("auth");return i&&ss(n,"http://".concat(i)),n}(fS),gS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn(),t=arguments.length>1?arguments[1]:void 0;e=pt(e);const n=_n(e,lS).getImmediate({identifier:t}),r=Ge("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:$e(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(fS);(function(e,t){jw(e=yw(e,Iw));const n=_w(e);if(n._uninitializedComponentsProvider)throw new ch(lh.FAILED_PRECONDITION,"SDK cache is already specified.");rh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),s=new ew;return Aw(n,s,new Zx(s,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))})(pS).catch(e=>{"failed-precondition"===e.code?console.warn("Firebase persistence failed: Multiple tabs open"):"unimplemented"===e.code&&console.warn("Firebase persistence not supported")});var yS=n(579);const vS=(0,s.createContext)();function bS(){return(0,s.useContext)(vS)}function xS(e){let{children:t}=e;const[n,r]=(0,s.useState)(),[i,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=function(e,t,n,r){return pt(e).onAuthStateChanged(t,n,r)}(mS,e=>{r(e),a(!1)});return e},[]);const o={currentUser:n,isAdmin:!!n,signup:function(e,t){return async function(e,t,n){var r;const s=ns(e),i={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Zr(s,i,"signUpPassword");a=Es(s,e)}else a=Es(s,i).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Zr(s,i,"signUpPassword");return Es(s,e)}return Promise.reject(e)});const o=await a.catch(e=>Promise.reject(e)),l=await Ss._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}(mS,e,t)},login:function(e,t){return function(e,t,n){return js(pt(e),gs.credential(t,n))}(mS,e,t)},logout:function(){return function(e){return pt(e).signOut()}(mS)}};return(0,yS.jsx)(vS.Provider,{value:o,children:!i&&t})}const wS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kS=(()=>new Set(wS))(),ES=(e,t,n)=>n>t?t:n<e?e:n,SS={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},TS=At(At({},SS),{},{transform:e=>ES(0,1,e)}),NS=At(At({},SS),{},{default:1}),IS=e=>Math.round(1e5*e)/1e5,_S=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const CS=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,AS=(e,t)=>n=>Boolean("string"===typeof n&&CS.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),jS=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[s,i,a,o]=r.match(_S);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},DS=At(At({},SS),{},{transform:e=>Math.round((e=>ES(0,255,e))(e))}),PS={test:AS("rgb","red"),parse:jS("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+DS.transform(t)+", "+DS.transform(n)+", "+DS.transform(r)+", "+IS(TS.transform(s))+")"}};const RS={test:AS("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:PS.transform},MS=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),OS=MS("deg"),LS=MS("%"),FS=MS("px"),VS=MS("vh"),US=MS("vw"),BS=(()=>At(At({},LS),{},{parse:e=>LS.parse(e)/100,transform:e=>LS.transform(100*e)}))(),zS={test:AS("hsl","hue"),parse:jS("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+LS.transform(IS(n))+", "+LS.transform(IS(r))+", "+IS(TS.transform(s))+")"}},qS={test:e=>PS.test(e)||RS.test(e)||zS.test(e),parse:e=>PS.test(e)?PS.parse(e):zS.test(e)?zS.parse(e):RS.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?PS.transform(e):zS.transform(e),getAnimatableNone:e=>{const t=qS.parse(e);return t.alpha=0,qS.transform(t)}},HS=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const KS="number",WS="color",GS=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function QS(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(GS,e=>(qS.test(e)?(r.color.push(i),s.push(WS),n.push(qS.parse(e))):e.startsWith("var(")?(r.var.push(i),s.push("var"),n.push(e)):(r.number.push(i),s.push(KS),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:a,indexes:r,types:s}}function XS(e){return QS(e).values}function YS(e){const{split:t,types:n}=QS(e),r=t.length;return e=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],void 0!==e[i]){const t=n[i];s+=t===KS?IS(e[i]):t===WS?qS.transform(e[i]):e[i]}return s}}const $S=e=>"number"===typeof e?0:qS.test(e)?qS.getAnimatableNone(e):e;const JS={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(_S))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(HS))||void 0===n?void 0:n.length)||0)>0},parse:XS,createTransformer:YS,getAnimatableNone:function(e){const t=XS(e);return YS(e)(t.map($S))}},ZS=new Set(["brightness","contrast","saturate","opacity"]);function eT(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(_S)||[];if(!r)return e;const s=n.replace(r,"");let i=ZS.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const tT=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,nT=At(At({},JS),{},{getAnimatableNone:e=>{const t=e.match(tT);return t?t.map(eT).join(" "):e}}),rT=At(At({},SS),{},{transform:Math.round}),sT=At(At({borderWidth:FS,borderTopWidth:FS,borderRightWidth:FS,borderBottomWidth:FS,borderLeftWidth:FS,borderRadius:FS,borderTopLeftRadius:FS,borderTopRightRadius:FS,borderBottomRightRadius:FS,borderBottomLeftRadius:FS,width:FS,maxWidth:FS,height:FS,maxHeight:FS,top:FS,right:FS,bottom:FS,left:FS,inset:FS,insetBlock:FS,insetBlockStart:FS,insetBlockEnd:FS,insetInline:FS,insetInlineStart:FS,insetInlineEnd:FS,padding:FS,paddingTop:FS,paddingRight:FS,paddingBottom:FS,paddingLeft:FS,paddingBlock:FS,paddingBlockStart:FS,paddingBlockEnd:FS,paddingInline:FS,paddingInlineStart:FS,paddingInlineEnd:FS,margin:FS,marginTop:FS,marginRight:FS,marginBottom:FS,marginLeft:FS,marginBlock:FS,marginBlockStart:FS,marginBlockEnd:FS,marginInline:FS,marginInlineStart:FS,marginInlineEnd:FS,fontSize:FS,backgroundPositionX:FS,backgroundPositionY:FS},{rotate:OS,rotateX:OS,rotateY:OS,rotateZ:OS,scale:NS,scaleX:NS,scaleY:NS,scaleZ:NS,skew:OS,skewX:OS,skewY:OS,distance:FS,translateX:FS,translateY:FS,translateZ:FS,x:FS,y:FS,z:FS,perspective:FS,transformPerspective:FS,opacity:TS,originX:BS,originY:BS,originZ:FS}),{},{zIndex:rT,fillOpacity:TS,strokeOpacity:TS,numOctaves:rT}),iT=At(At({},sT),{},{color:qS,backgroundColor:qS,outlineColor:qS,fill:qS,stroke:qS,borderColor:qS,borderTopColor:qS,borderRightColor:qS,borderBottomColor:qS,borderLeftColor:qS,filter:nT,WebkitFilter:nT}),aT=e=>iT[e],oT=()=>({x:{min:0,max:0},y:{min:0,max:0}}),lT=e=>Boolean(e&&e.getVelocity),cT=new Set(["width","height","top","left","right","bottom",...wS]),uT=e=>t=>t.test(e),dT=[SS,FS,LS,OS,US,VS,{test:e=>"auto"===e,parse:e=>e}],hT=e=>dT.find(uT(e));function fT(e,t){return t?"".concat(e,". For more information and steps for solving, visit https://motion.dev/troubleshooting/").concat(t):e}var pT;let mT=()=>{},gT=()=>{};"undefined"!==typeof process&&"production"!==(null===(pT={NODE_ENV:"production",PUBLIC_URL:"/goal.kashmir",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===pT?void 0:pT.NODE_ENV)&&(mT=(e,t,n)=>{e||"undefined"===typeof console||console.warn(fT(t,n))},gT=(e,t,n)=>{if(!e)throw new Error(fT(t,n))});const yT=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),vT=e=>t=>"string"===typeof t&&t.startsWith(e),bT=vT("--"),xT=vT("var(--"),wT=e=>!!xT(e)&&kT.test(e.split("/*")[0].trim()),kT=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function ET(e){return"string"===typeof e&&e.split("/*")[0].includes("var(--")}const ST=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function TT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;gT(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'),"max-css-var-depth");const[r,s]=function(e){const t=ST.exec(e);if(!t)return[,];const[,n,r,s]=t;return["--".concat(null!==n&&void 0!==n?n:r),s]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return yT(e)?parseFloat(e):e}return wT(s)?TT(s,t,n+1):s}const NT=e=>180*e/Math.PI,IT=e=>{const t=NT(Math.atan2(e[1],e[0]));return CT(t)},_T={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:IT,rotateZ:IT,skewX:e=>NT(Math.atan(e[1])),skewY:e=>NT(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},CT=e=>((e%=360)<0&&(e+=360),e),AT=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),jT=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),DT={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:AT,scaleY:jT,scale:e=>(AT(e)+jT(e))/2,rotateX:e=>CT(NT(Math.atan2(e[6],e[5]))),rotateY:e=>CT(NT(Math.atan2(-e[2],e[0]))),rotateZ:IT,rotate:IT,skewX:e=>NT(Math.atan(e[4])),skewY:e=>NT(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function PT(e){return e.includes("scale")?1:0}function RT(e,t){if(!e||"none"===e)return PT(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,s;if(n)r=DT,s=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=_T,s=t}if(!s)return PT(t);const i=r[t],a=s[1].split(",").map(MT);return"function"===typeof i?i(a):a[i]}function MT(e){return parseFloat(e.trim())}const OT=e=>e===SS||e===FS,LT=new Set(["x","y","z"]),FT=wS.filter(e=>!LT.has(e));const VT={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return RT(n,"x")},y:(e,t)=>{let{transform:n}=t;return RT(n,"y")}};VT.translateX=VT.x,VT.translateY=VT.y;const UT=e=>e,BT={},zT=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],qT={value:null,addProjectionMetrics:null};function HT(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=zT.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){a.has(t)&&(u.schedule(t),e()),l++,t(o)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),a.delete(e)},process:e=>{o=e,s?i=!0:(s=!0,[n,r]=[r,n],n.forEach(c),t&&qT.value&&qT.value.frameloop[t].push(l),l=0,n.clear(),s=!1,i&&(i=!1,u.process(e)))}};return u}(i,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:p}=a,m=()=>{const i=BT.useManualTiming?s.timestamp:performance.now();n=!1,BT.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1)),s.timestamp=i,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(m))},g=zT.reduce((t,i)=>{const o=a[i];return t[i]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(m)),o.schedule(t,i,a)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<zT.length;t++)a[zT[t]].cancel(e)},state:s,steps:a}}const{schedule:KT,cancel:WT,state:GT,steps:QT}=HT("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:UT,!0),XT=new Set;let YT=!1,$T=!1,JT=!1;function ZT(){if($T){const e=Array.from(XT).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return FT.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[r,s]=t;null===(n=e.getValue(r))||void 0===n||n.set(s)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}$T=!1,YT=!1,XT.forEach(e=>e.complete(JT)),XT.clear()}function eN(){XT.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&($T=!0)})}class tN{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(XT.add(this),YT||(YT=!0,KT.read(eN),KT.resolveKeyframes(ZT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=null===r||void 0===r?void 0:r.get(),i=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,i);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=i),r&&void 0===s&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),XT.delete(this)}cancel(){"scheduled"===this.state&&(XT.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const nN=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function rN(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||nN(e))}function sN(e,t){let n=aT(e);return n!==nT&&(n=JS),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const iN=new Set(["auto","none","0"]);class aN extends tN{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),wT(n))){const r=TT(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!cT.has(n)||2!==e.length)return;const[r,s]=e,i=hT(r),a=hT(s);if(ET(r)!==ET(s)&&VT[n])this.needsMeasurement=!0;else if(i!==a)if(OT(i)&&OT(a))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else VT[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||rN(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"===typeof t&&!iN.has(t)&&QS(t).values.length&&(r=e[s]),s++}if(r&&n)for(const i of t)e[i]=sN(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=VT[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=VT[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,r]=e;t.getValue(n).set(r)}),this.resolveNoneKeyframes()}}function oN(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const lN=e=>1e3*e,cN=e=>e/1e3;function uN(e,t){-1===e.indexOf(t)&&e.push(t)}function dN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class hN{constructor(){this.subscriptions=[]}add(e){return uN(this.subscriptions,e),()=>dN(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function fN(e){let t;return()=>(void 0===t&&(t=e()),t)}const pN=fN(()=>void 0!==window.ScrollTimeline),mN=e=>null!==e;function gN(e,t,n){let{repeat:r,repeatType:s="loop"}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=e.filter(mN),o=i<0||r&&"loop"!==s&&r%2===1?0:a.length-1;return o&&void 0!==n?n:a[o]}class yN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const vN={layout:0,mainThread:0,waapi:0},bN=e=>Array.isArray(e)&&"number"===typeof e[0],xN={};function wN(e,t){const n=fN(e);return()=>{var e;return null!==(e=xN[t])&&void 0!==e?e:n()}}const kN=wN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(AM){return!1}return!0},"linearEasing"),EN=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(1e4*e(i/(s-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},SN=e=>{let[t,n,r,s]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(s,")")},TN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:SN([0,.65,.55,1]),circOut:SN([.55,0,1,.45]),backIn:SN([.31,.01,.66,-.59]),backOut:SN([.33,1.53,.69,.99])};function NN(e,t){return e?"function"===typeof e?kN()?EN(e,t):"ease-out":bN(e)?SN(e):Array.isArray(e)?e.map(e=>NN(e,t)||TN.easeOut):TN[e]:void 0}function IN(e,t,n){let{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=NN(o,s);Array.isArray(d)&&(u.easing=d),qT.value&&vN.waapi++;const h={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:"reverse"===a?"alternate":"normal"};c&&(h.pseudoElement=c);const f=e.animate(u,h);return qT.value&&f.finished.finally(()=>{vN.waapi--}),f}function _N(e){return"function"===typeof e&&"applyToOptions"in e}const CN=["type"];class AN extends yN{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=i,this.options=e,gT("string"!==typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function(e){let{type:t}=e,n=oN(e,CN);return _N(t)&&kN()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(s=n.ease)&&void 0!==s||(n.ease="easeOut"),n);var r,s}(e);this.animation=IN(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=gN(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===o||void 0===o||o(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(AM){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e;const t=null===(e=this.options)||void 0===e?void 0:e.element;var n,r;!this.isPseudoElement&&null!==t&&void 0!==t&&t.isConnected&&(null===(n=(r=this.animation).commitStyles)||void 0===n||n.call(r))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return cN(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cN(e)}get time(){return cN(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=lN(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){var e;return null!==(e=this.manualStartTime)&&void 0!==e?e:Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&pN()?(this.animation.timeline=t,UT):n(this)}}const jN=new Set(["opacity","clipPath","filter","transform"]),{schedule:DN,cancel:PN}=HT(queueMicrotask,!1);let RN;function MN(){RN=void 0}const ON={now:()=>(void 0===RN&&ON.set(GT.isProcessing||BT.useManualTiming?GT.timestamp:performance.now()),RN),set:e=>{RN=e,queueMicrotask(MN)}};function LN(e,t){return t?e*(1e3/t):0}const FN={current:void 0};class VN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=ON.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=ON.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hN);const n=this.events[e].add(t);return"change"===e?()=>{n(),KT.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return FN.current&&FN.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ON.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return LN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function UN(e,t){return new VN(e,t)}const BN=[...dT,qS,JS],zN=new WeakMap;function qN(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function HN(e){return"string"===typeof e||Array.isArray(e)}const KN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],WN=["initial",...KN];function GN(e){return qN(e.animate)||WN.some(t=>HN(e[t]))}function QN(e){return Boolean(GN(e)||e.variants)}const XN={current:null},YN={current:!1},$N="undefined"!==typeof window;function JN(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ZN(e,t,n,r){if("function"===typeof t){const[s,i]=JN(r);t=t(void 0!==n?n:e.custom,s,i)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[s,i]=JN(r);t=t(void 0!==n?n:e.custom,s,i)}return t}const eI=["willChange"],tI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let nI={};function rI(e){nI=e}class sI{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:i,blockInitialAnimation:a,visualState:o}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=tN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=ON.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,KT.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget=At({},c),this.initialValues=n.initial?At({},c):{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=i,this.options=l,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=GN(n),this.isVariantNode=QN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{},this),{willChange:h}=d,f=oN(d,eI);for(const p in f){const e=f[p];void 0!==c[p]&&lT(e)&&e.set(c[p])}}mount(e){var t,n;if(this.hasBeenMounted)for(const s in this.initialValues){var r;null===(r=this.values.get(s))||void 0===r||r.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s]}this.current=e,zN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(YN.current||function(){if(YN.current=!0,$N)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>XN.current=e.matches;e.addEventListener("change",t),t()}else XN.current=!1}(),this.shouldReduceMotion=XN.current),this.shouldSkipAnimations=null!==(t=this.skipAnimationsConfig)&&void 0!==t&&t,null===(n=this.parent)||void 0===n||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),WT(this.notifyUpdate),WT(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&jN.has(e)&&this.current instanceof HTMLElement){const{factory:n,keyframes:r,times:s,ease:i,duration:a}=t.accelerate,o=new AN({element:this.current,name:e,keyframes:r,times:s,ease:i,duration:lN(a)}),l=n(o);return void this.valueSubscriptions.set(e,()=>{l(),o.cancel()})}const n=kS.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&KT.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;"undefined"!==typeof window&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in nI){const t=nI[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<tI.length;n++){const t=tI[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],i=n[r];if(lT(s))e.addValue(r,s);else if(lT(i))e.addValue(r,UN(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,UN(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=UN(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(yT(r)||nN(r))?r=parseFloat(r):!(e=>BN.find(uT(e)))(r)&&JS.test(t)&&(r=sN(e,t)),this.setBaseTarget(e,lT(r)?r.get():r)),lT(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const s=ZN(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);s&&(n=s[e])}if(t&&void 0!==n)return n;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||lT(s)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new hN),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){DN.render(this.render)}}class iI extends sI{constructor(){super(...arguments),this.KeyframeResolver=aN}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){const n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lT(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}function aI(e){return e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase()))}const oI=(e,t)=>t&&"number"===typeof e?t.transform(e):e,lI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cI=wS.length;function uI(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(kS.has(l))a=!0;else if(bT(l))s[l]=e;else{const t=oI(e,sT[l]);l.startsWith("origin")?(o=!0,i[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",s=!0;for(let i=0;i<cI;i++){const a=wS[i],o=e[a];if(void 0===o)continue;let l=!0;if("number"===typeof o)l=o===(a.startsWith("scale")?1:0);else{const e=parseFloat(o);l=a.startsWith("scale")?1===e:0===e}if(!l||n){const e=oI(o,sT[a]);l||(s=!1,r+="".concat(lI[a]||a,"(").concat(e,") ")),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const dI={offset:"stroke-dashoffset",array:"stroke-dasharray"},hI={offset:"strokeDashoffset",array:"strokeDasharray"};const fI=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"],pI=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function mI(e,t,n,r,s){let{attrX:i,attrY:a,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:u=0}=t;if(uI(e,oN(t,fI),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;var f,p;(d.transform&&(h.transform=d.transform,delete d.transform),h.transform||d.transformOrigin)&&(h.transformOrigin=null!==(f=d.transformOrigin)&&void 0!==f?f:"50% 50%",delete d.transformOrigin);h.transform&&(h.transformBox=null!==(p=null===s||void 0===s?void 0:s.transformBox)&&void 0!==p?p:"fill-box",delete d.transformBox);for(const m of pI)void 0!==d[m]&&(h[m]=d[m],delete d[m]);void 0!==i&&(d.x=i),void 0!==a&&(d.y=a),void 0!==o&&(d.scale=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=s?dI:hI;e[i.offset]="".concat(-r),e[i.array]="".concat(t," ").concat(n)}(d,l,c,u,!1)}const gI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),yI=e=>"string"===typeof e&&"svg"===e.toLowerCase();function vI(e,t,n,r){let{style:s,vars:i}=t;const a=e.style;let o;for(o in s)a[o]=s[o];for(o in null===r||void 0===r||r.applyProjectionStyles(a,n),i)a.setProperty(o,i[o])}function bI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xI={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!FS.test(e))return e;e=parseFloat(e)}const n=bI(e,t.target.x),r=bI(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},wI=(e,t,n)=>e+(t-e)*n,kI={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,i=JS.parse(e);if(i.length>5)return s;const a=JS.createTransformer(e),o="number"!==typeof i[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;i[0+o]/=l,i[1+o]/=c;const u=wI(l,c,.5);return"number"===typeof i[2+o]&&(i[2+o]/=u),"number"===typeof i[3+o]&&(i[3+o]/=u),a(i)}};const EI={borderRadius:At(At({},xI),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:xI,borderTopRightRadius:xI,borderBottomLeftRadius:xI,borderBottomRightRadius:xI,boxShadow:kI};function SI(e,t){let{layout:n,layoutId:r}=t;return kS.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!EI[e]||"opacity"===e)}function TI(e,t,n){const r=e.style,s=null===t||void 0===t?void 0:t.style,i={};if(!r)return i;for(const o in r){var a;(lT(r[o])||s&&lT(s[o])||SI(o,e)||void 0!==(null===n||void 0===n||null===(a=n.getValue(o))||void 0===a?void 0:a.liveStyle))&&(i[o]=r[o])}return i}function NI(e,t,n){const r=TI(e,t,n);for(const s in e)if(lT(e[s])||lT(t[s])){r[-1!==wS.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}class II extends iI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=oT}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(kS.has(t)){const e=aT(t);return e&&e.default||0}return t=gI.has(t)?t:aI(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return NI(e,t,n)}build(e,t,n){mI(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){vI(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(gI.has(s)?s:aI(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=yI(e.tagName),super.mount(e)}}function _I(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function CI(e){return void 0===e||1===e}function AI(e){let{scale:t,scaleX:n,scaleY:r}=e;return!CI(t)||!CI(n)||!CI(r)}function jI(e){return AI(e)||DI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function DI(e){return PI(e.x)||PI(e.y)}function PI(e){return e&&"0%"!==e}function RI(e,t,n){return n+t*(e-n)}function MI(e,t,n,r,s){return void 0!==s&&(e=RI(e,s,r)),RI(e,n,r)+t}function OI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=MI(e.min,t,n,r,s),e.max=MI(e.max,t,n,r,s)}function LI(e,t){let{x:n,y:r}=t;OI(e.x,n.translate,n.scale,n.originPoint),OI(e.y,r.translate,r.scale,r.originPoint)}const FI=.999999999999,VI=1.0000000000001;function UI(e,t){e.min=e.min+t,e.max=e.max+t}function BI(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;OI(e,t,n,wI(e.min,e.max,s),r)}function zI(e,t){BI(e.x,t.x,t.scaleX,t.scale,t.originX),BI(e.y,t.y,t.scaleY,t.scale,t.originY)}function qI(e,t){return _I(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}class HI extends iI{constructor(){super(...arguments),this.type="html",this.renderInstance=vI}readValueFromInstance(e,t){var n,r;if(kS.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?PT(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return RT(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),s=(bT(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof s?s.trim():s}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return qI(e,n)}build(e,t,n){uI(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return TI(e,t,n)}}const KI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function WI(e){return"string"===typeof e&&!e.includes("-")&&!!(KI.indexOf(e)>-1||/[A-Z]/.test(e))}const GI=(e,t)=>{var n;return(null!==(n=t.isSVG)&&void 0!==n?n:WI(e))?new II(t):new HI(t,{allowProjection:e!==s.Fragment})},QI=(0,s.createContext)({}),XI=(0,s.createContext)({strict:!1}),YI=(0,s.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$I=(0,s.createContext)({});function JI(e){const{initial:t,animate:n}=function(e,t){if(GN(e)){const{initial:t,animate:n}=e;return{initial:!1===t||HN(t)?t:void 0,animate:HN(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,s.useContext)($I));return(0,s.useMemo)(()=>({initial:t,animate:n}),[ZI(t),ZI(n)])}function ZI(e){return Array.isArray(e)?e.join(" "):e}const e_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function t_(e,t,n){for(const r in t)lT(t[r])||SI(r,n)||(e[r]=t[r])}function n_(e,t){const n={};return t_(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,s.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return uI(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),n}function r_(e,t){const n={},r=n_(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const s_=()=>At(At({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function i_(e,t,n,r){const i=(0,s.useMemo)(()=>{const n=s_();return mI(n,t,yI(r),e.transformTemplate,e.style),At(At({},n.attrs),{},{style:At({},n.style)})},[t]);if(e.style){const t={};t_(t,e.style,e),i.style=At(At({},t),i.style)}return i}const a_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function o_(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||a_.has(e)}let l_=e=>!o_(e);try{"function"===typeof(c_=require("@emotion/is-prop-valid").default)&&(l_=e=>e.startsWith("on")?!o_(e):c_(e))}catch(jM){}var c_;function u_(e,t,n,r,i){let{latestValues:a}=r,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0;const c=((null!==l&&void 0!==l?l:WI(e))?i_:r_)(t,a,i,e),u=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(l_(s)||!0===n&&o_(s)||!t&&!o_(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(t,"string"===typeof e,o),d=e!==s.Fragment?At(At(At({},u),c),{},{ref:n}):{},{children:h}=t,f=(0,s.useMemo)(()=>lT(h)?h.get():h,[h]);return(0,s.createElement)(e,At(At({},d),{},{children:f}))}function d_(e){return lT(e)?e.get():e}const h_=(0,s.createContext)(null);function f_(e){const t=(0,s.useRef)(null);return null===t.current&&(t.current=e()),t.current}const p_=["transitionEnd","transition"];function m_(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=d_(i[h]);let{initial:a,animate:o}=e;const l=GN(e),c=QN(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const d=u?o:a;if(d&&"boolean"!==typeof d&&!qN(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=ZN(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=oN(r,p_);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}const g_=e=>(t,n)=>{const r=(0,s.useContext)($I),i=(0,s.useContext)(h_),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:i}=e;return{latestValues:m_(t,n,r,s),renderState:i()}}(e,t,r,i);return n?a():f_(a)},y_=g_({scrapeMotionValuesFromProps:TI,createRenderState:e_}),v_=g_({scrapeMotionValuesFromProps:NI,createRenderState:s_}),b_="undefined"!==typeof window,x_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let w_=!1;function k_(){return function(){if(w_)return;const e={};for(const t in x_)e[t]={isEnabled:e=>x_[t].some(t=>!!e[t])};rI(e),w_=!0}(),nI}const E_=Symbol.for("motionComponentSymbol");function S_(e,t,n){const r=(0,s.useRef)(n);(0,s.useInsertionEffect)(()=>{r.current=n});const i=(0,s.useRef)(null);return(0,s.useCallback)(n=>{var s;n&&(null===(s=e.onMount)||void 0===s||s.call(e,n));t&&(n?t.mount(n):t.unmount());const a=r.current;if("function"===typeof a)if(n){const e=a(n);"function"===typeof e&&(i.current=e)}else i.current?(i.current(),i.current=null):a(n);else a&&(a.current=n)},[t])}const T_="data-"+aI("framerAppearId"),N_=(0,s.createContext)({});function I_(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const __=b_?s.useLayoutEffect:s.useEffect;function C_(e,t,n,r,i,a){var o,l,c,u;const{visualElement:d}=(0,s.useContext)($I),h=(0,s.useContext)(XI),f=(0,s.useContext)(h_),p=(0,s.useContext)(YI),m=p.reducedMotion,g=p.skipAnimations,y=(0,s.useRef)(null),v=(0,s.useRef)(!1);r=r||h.renderer,!y.current&&r&&(y.current=r(e,{visualState:t,parent:d,props:n,presenceContext:f,blockInitialAnimation:!!f&&!1===f.initial,reducedMotionConfig:m,skipAnimations:g,isSVG:a}),v.current&&y.current&&(y.current.manuallyAnimateOnMount=!0));const b=y.current,x=(0,s.useContext)(N_);!b||b.projection||!i||"html"!==b.type&&"svg"!==b.type||function(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:A_(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:Boolean(a)||o&&I_(o),visualElement:e,animationType:"string"===typeof i?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(y.current,n,i,x);const w=(0,s.useRef)(!1);(0,s.useInsertionEffect)(()=>{b&&w.current&&b.update(n,f)});const k=n[T_],E=(0,s.useRef)(Boolean(k)&&!(null!==(o=(l=window).MotionHandoffIsComplete)&&void 0!==o&&o.call(l,k))&&(null===(c=(u=window).MotionHasOptimisedAnimation)||void 0===c?void 0:c.call(u,k)));return __(()=>{v.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),E.current&&b.animationState&&b.animationState.animateChanges())}),(0,s.useEffect)(()=>{b&&(!E.current&&b.animationState&&b.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,k)}),E.current=!1),b.enteringChildren=void 0)}),b}function A_(e){if(e)return!1!==e.options.allowProjection?e.projection:A_(e.parent)}function j_(e){var t,n;let{forwardMotionProps:r=!1,type:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;a&&function(e){const t=k_();for(const n in e)t[n]=At(At({},t[n]),e[n]);rI(t)}(a);const l=i?"svg"===i:WI(e),c=l?v_:y_;function u(t,n){let i;const a=At(At(At({},(0,s.useContext)(YI)),t),{},{layoutId:D_(t)}),{isStatic:u}=a,d=JI(t),h=c(t,u);if(!u&&b_){!function(){(0,s.useContext)(XI).strict;0}();const t=function(e){const t=k_(),{drag:n,layout:r}=t;if(!n&&!r)return{};const s=At(At({},n),r);return{MeasureLayout:null!==n&&void 0!==n&&n.isEnabled(e)||null!==r&&void 0!==r&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(a);i=t.MeasureLayout,d.visualElement=C_(e,h,a,o,t.ProjectionNode,l)}return(0,yS.jsxs)($I.Provider,{value:d,children:[i&&d.visualElement?(0,yS.jsx)(i,At({visualElement:d.visualElement},a)):null,u_(e,t,S_(h,d.visualElement,n),h,u,r,l)]})}u.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(t=null!==(n=e.displayName)&&void 0!==n?n:e.name)&&void 0!==t?t:"",")"));const d=(0,s.forwardRef)(u);return d[E_]=e,d}function D_(e){let{layoutId:t}=e;const n=(0,s.useContext)(QI).id;return n&&void 0!==t?n+"-"+t:t}function P_(e,t){if("undefined"===typeof Proxy)return j_;const n=new Map,r=(n,r)=>j_(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(s,i)=>"create"===i?r:(n.has(i)||n.set(i,j_(i,void 0,e,t)),n.get(i))})}class R_{constructor(e){this.isMounted=!1,this.node=e}update(){}}function M_(e,t,n){const r=e.getProps();return ZN(r,t,void 0!==n?n:r.custom,e)}const O_=["inherit"];function L_(e,t){if(null!==e&&void 0!==e&&e.inherit&&t){const{inherit:n}=e,r=oN(e,O_);return At(At({},t),r)}return e}function F_(e,t){var n,r;const s=null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e;return s!==e?L_(s,e):s}const V_=e=>Array.isArray(e),U_=["transitionEnd","transition"];function B_(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,UN(n))}function z_(e){return V_(e)?e[e.length-1]||0:e}function q_(e,t){const n=e.getValue("willChange");if(r=n,Boolean(lT(r)&&r.add))return n.add(t);if(!n&&BT.WillChange){const n=new BT.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function H_(e){return e.props[T_]}const K_=(e,t)=>n=>t(e(n)),W_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(K_)};function G_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Q_(e,t){return n=>n>0?t:e}const X_=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},Y_=[RS,PS,zS];function $_(e){const t=(e=>Y_.find(t=>t.test(e)))(e);if(mT(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),"color-not-animatable"),!Boolean(t))return!1;let n=t.parse(e);return t===zS&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let i=0,a=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;i=G_(s,e,t+1/3),a=G_(s,e,t),o=G_(s,e,t-1/3)}else i=a=o=r;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:s}}(n)),n}const J_=(e,t)=>{const n=$_(e),r=$_(t);if(!n||!r)return Q_(e,t);const s=At({},n);return e=>(s.red=X_(n.red,r.red,e),s.green=X_(n.green,r.green,e),s.blue=X_(n.blue,r.blue,e),s.alpha=wI(n.alpha,r.alpha,e),PS.transform(s))},Z_=new Set(["none","hidden"]);function eC(e,t){return n=>wI(e,t,n)}function tC(e){return"number"===typeof e?eC:"string"===typeof e?wT(e)?Q_:qS.test(e)?J_:sC:Array.isArray(e)?nC:"object"===typeof e?qS.test(e)?J_:rC:Q_}function nC(e,t){const n=[...e],r=n.length,s=e.map((e,n)=>tC(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function rC(e,t){const n=At(At({},e),t),r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=tC(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const sC=(e,t)=>{const n=JS.createTransformer(t),r=QS(e),s=QS(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Z_.has(e)&&!s.values.length||Z_.has(t)&&!r.values.length?function(e,t){return Z_.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):W_(nC(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){var s;const a=t.types[i],o=e.indexes[a][r[a]],l=null!==(s=e.values[o])&&void 0!==s?s:0;n[i]=l,r[a]++}return n}(r,s),s.values),n):(mT(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),"complex-values-different"),Q_(e,t))};function iC(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return wI(e,t,n);return tC(e)(e,t)}const aC=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return KT.update(t,e)},stop:()=>WT(t),now:()=>GT.isProcessing?GT.timestamp:ON.now()}},oC=2e4;function lC(e){let t=0;let n=e.next(t);for(;!n.done&&t<oC;)t+=50,n=e.next(t);return t>=oC?1/0:t}function cC(e,t,n){const r=Math.max(t-5,0);return LN(n-e(r),t-r)}const uC={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dC=.001;function hC(e){let t,n,{duration:r=uC.duration,bounce:s=uC.bounce,velocity:i=uC.velocity,mass:a=uC.mass}=e;mT(r<=lN(uC.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-s;o=ES(uC.minDamping,uC.maxDamping,o),r=ES(uC.minDuration,uC.maxDuration,cN(r)),o<1?(t=e=>{const t=e*o,n=t*r,s=t-i,a=pC(e,o),l=Math.exp(-n);return dC-s/a*l},n=e=>{const n=e*o*r,s=n*i+i,a=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=pC(Math.pow(e,2),o);return(-t(e)+dC>0?-1:1)*((s-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const l=function(e,t,n){let r=n;for(let s=1;s<fC;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=lN(r),isNaN(l))return{stiffness:uC.stiffness,damping:uC.damping,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:r}}}const fC=12;function pC(e,t){return e*Math.sqrt(1-t*t)}const mC=["duration","bounce"],gC=["stiffness","damping","mass"];function yC(e,t){return t.some(t=>void 0!==e[t])}function vC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uC.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uC.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t=At({velocity:uC.velocity,stiffness:uC.stiffness,damping:uC.damping,mass:uC.mass,isResolvedFromDuration:!1},e);if(!yC(e,gC)&&yC(e,mC))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,i=2*ES(.05,1,1-(e.bounce||0))*Math.sqrt(s);t=At(At({},t),{},{mass:uC.mass,stiffness:s,damping:i})}else{const n=hC(e);t=At(At(At({},t),n),{},{mass:uC.mass}),t.isResolvedFromDuration=!0}return t}(At(At({},n),{},{velocity:-cN(n.velocity||0)})),p=h||0,m=c/(2*Math.sqrt(l*u)),g=a-i,y=cN(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?uC.restSpeed.granular:uC.restSpeed.default),s||(s=v?uC.restDelta.granular:uC.restDelta.default),m<1){const e=pC(y,m);b=t=>{const n=Math.exp(-m*y*t);return a-n*((p+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>a-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return a-n*((p+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const x={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)o.done=e>=d;else{let n=0===e?p:0;m<1&&(n=0===e?lN(p):cC(b,e,t));const i=Math.abs(n)<=r,l=Math.abs(a-t)<=s;o.done=i&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(lC(x),oC),t=EN(t=>x.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return x}function bC(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,y=void 0===o?g:o(g);y!==g&&(m=y-h);const v=e=>-m*Math.exp(-e/s),b=e=>y+v(e),x=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,k;const E=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,k=vC({keyframes:[f.value,p(f.value)],velocity:cC(b,e,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==w||(t=!0,x(e),E(e)),void 0!==w&&e>=w?k.next(e-w):(!t&&x(e),f)}}}vC.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(At(At({},e),{},{keyframes:[0,t]})),r=Math.min(lC(n),oC);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:cN(r)}}(e,100,vC);return e.ease=t.ease,e.duration=lN(t.duration),e.type="keyframes",e};const xC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function wC(e,t,n,r){if(e===t&&n===r)return UT;const s=t=>function(e,t,n,r,s){let i,a,o=0;do{a=t+(n-t)/2,i=xC(a,r,s)-e,i>0?n=a:t=a}while(Math.abs(i)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:xC(s(e),t,r)}const kC=wC(.42,0,1,1),EC=wC(0,0,.58,1),SC=wC(.42,0,.58,1),TC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,NC=e=>t=>1-e(1-t),IC=wC(.33,1.53,.69,.99),_C=NC(IC),CC=TC(_C),AC=e=>(e*=2)<1?.5*_C(e):.5*(2-Math.pow(2,-10*(e-1))),jC=e=>1-Math.sin(Math.acos(e)),DC=NC(jC),PC=TC(jC),RC={linear:UT,easeIn:kC,easeInOut:SC,easeOut:EC,circIn:jC,circInOut:PC,circOut:DC,backIn:_C,backInOut:CC,backOut:IC,anticipate:AC},MC=e=>{if(bN(e)){gT(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,r,s]=e;return wC(t,n,r,s)}return"string"===typeof e?(gT(void 0!==RC[e],"Invalid easing type '".concat(e,"'"),"invalid-easing-type"),RC[e]):e},OC=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function LC(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(gT(i===t.length,"Both input and output ranges must be the same length","range-length"),1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||BT.mix||iC,i=e.length-1;for(let a=0;a<i;a++){let n=s(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||UT:t;n=W_(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=OC(e[r],e[r+1],n);return o[r](s)};return n?t=>c(ES(e[0],e[i-1],t)):c}function FC(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=OC(0,t,r);e.push(wI(n,1,s))}}(t,e.length-1),t}function VC(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(MC):MC(s),a={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:FC(n),t),l=LC(o,n,{ease:Array.isArray(i)?i:(c=n,u=i,c.map(()=>u||SC).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}const UC={decay:bC,inertia:bC,tween:VC,keyframes:VC,spring:vC};function BC(e){"string"===typeof e.type&&(e.type=UC[e.type])}const zC=e=>e/100;class qC extends yN{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==ON.now()&&this.tick(ON.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},vN.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;BC(e);const{type:t=VC,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const o=t||VC;o!==VC&&"number"!==typeof a[0]&&(this.mixKeyframes=W_(zC,iC(a[0],a[1])),a=[0,100]);const l=o(At(At({},e),{},{keyframes:a}));"mirror"===s&&(this.mirroredGenerator=o(At(At({},e),{},{keyframes:[...a].reverse(),velocity:-i}))),null===l.calculatedDuration&&(l.calculatedDuration=lC(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(u){const e=Math.min(this.currentTime,r)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/a)):"mirror"===d&&(b=i)),v=ES(0,1,n)*a}const x=y?{done:!1,value:c[0]}:b.next(v);s&&(x.value=s(x.value));let{done:w}=x;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&f!==bC&&(x.value=gN(c,this.options,m,this.speed)),p&&p(x.value),k&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return cN(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+cN(e)}get time(){return cN(this.currentTime)}set time(e){var t;e=lN(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ON.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=cN(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=aC,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const s=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=s):null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:s),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ON.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,vN.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}const HC={anticipate:AC,backInOut:CC,circInOut:PC};function KC(e){"string"===typeof e.ease&&e.ease in HC&&(e.ease=HC[e.ease])}const WC=["motionValue","onUpdate","onComplete","element"];class GC extends AN{constructor(e){KC(e),BC(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const t=this.options,{motionValue:n,onUpdate:r,onComplete:s,element:i}=t,a=oN(t,WC);if(!n)return;if(void 0!==e)return void n.set(e);const o=new qC(At(At({},a),{},{autoplay:!1})),l=Math.max(10,ON.now()-this.startTime),c=ES(0,10,l-10);n.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const QC=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!JS.test(e)&&"0"!==e||e.startsWith("url(")));function XC(e){e.duration=0,e.type="keyframes"}const YC=new Set(["opacity","clipPath","filter","transform"]),$C=fN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const JC=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class ZC extends yN{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d}=e,h=oN(e,JC);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=ON.now();const f=At({autoplay:n,delay:r,type:s,repeat:i,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d},h),p=(null===d||void 0===d?void 0:d.KeyframeResolver)||tN;this.keyframeResolver=new p(l,(e,t,n)=>this.onKeyframesResolved(e,t,f,!n),c,u,d),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){var s;this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=ON.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],a=QC(s,t),o=QC(i,t);return mT(a===o,"You are trying to animate ".concat(t,' from "').concat(s,'" to "').concat(i,'". "').concat(a?i:s,'" is not an animatable value.'),"value-not-animatable"),!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||_N(n))&&r)}(e,i,a,o)||(!BT.instantAnimations&&l||null===u||void 0===u||u(gN(e,n,t)),e[0]=e[e.length-1],XC(n),n.repeat=0);const d=At(At({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),h=!c&&function(e){var t;const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:a,type:o}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return $C()&&r&&YC.has(r)&&("transform"!==r||!c)&&!l&&!s&&"mirror"!==i&&0!==a&&"inertia"!==o}(d),f=null===(s=d.motionValue)||void 0===s||null===(s=s.owner)||void 0===s?void 0:s.current,p=h?new GC(At(At({},d),{},{element:f})):new qC(d);p.finished.then(()=>{this.notifyFinished()}).catch(UT),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),JT=!0,eN(),ZT(),JT=!1);return this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const eA={type:"spring",stiffness:500,damping:25,restSpeed:10},tA={type:"keyframes",duration:.8},nA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rA=(e,t)=>{let{keyframes:n}=t;return n.length>2?tA:kS.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:eA:nA},sA=e=>null!==e;const iA=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const aA=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return a=>{const o=F_(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=lN(l);const u=At(At({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:s});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u}=e,d=oN(e,iA);return!!Object.keys(d).length})(o)||Object.assign(u,rA(e,u)),u.duration&&(u.duration=lN(u.duration)),u.repeatDelay&&(u.repeatDelay=lN(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(XC(u),0===u.delay&&(d=!0)),(BT.instantAnimations||BT.skipAnimations||null!==s&&void 0!==s&&s.shouldSkipAnimations)&&(d=!0,XC(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!i&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:s="loop"}=t;const i=e.filter(sA),a=r&&"loop"!==s&&r%2===1?0:i.length-1;return a&&void 0!==n?n:i[a]}(u.keyframes,o);if(void 0!==e)return void KT.update(()=>{u.onUpdate(e),u.onComplete()})}return o.isSync?new qC(u):new ZC(u)}},oA=["transition","transitionEnd"];function lA(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function cA(e,t){var n;let{delay:r=0,transitionOverride:s,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a,transitionEnd:o}=t,l=oN(t,oA);const c=e.getDefaultTransition();a=a?L_(a,c):c;const u=null===(n=a)||void 0===n?void 0:n.reduceMotion;s&&(a=s);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const p in l){var f;const t=e.getValue(p,null!==(f=e.latestValues[p])&&void 0!==f?f:null),n=l[p];if(void 0===n||h&&lA(h,p))continue;const s=At({delay:r},F_(a||{},p)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(n)&&n===i&&!s.velocity)continue;let o=!1;if(window.MotionHandoffAnimation){const t=H_(e);if(t){const e=window.MotionHandoffAnimation(t,p,KT);null!==e&&(s.startTime=e,o=!0)}}q_(e,p);const c=null!==u&&void 0!==u?u:e.shouldReduceMotion;t.start(aA(p,t,n,c&&cT.has(p)?{type:!1}:s,e,o));const m=t.animation;m&&d.push(m)}if(o){const t=()=>KT.update(()=>{o&&function(e,t){let n=M_(e,t)||{},{transitionEnd:r={},transition:s={}}=n,i=oN(n,U_);i=At(At({},i),r);for(const a in i)B_(e,a,z_(i[a]))}(e,o)});d.length?Promise.all(d).then(t):t()}return d}function uA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*r;return"function"===typeof n?n(i,a):1===s?i*r:o-i*r}function dA(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=M_(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const a=s?()=>Promise.all(cA(e,s,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(dA(l,t,At(At({},a),{},{delay:n+("function"===typeof r?0:r)+uA(e.variantChildren,l,r,s,i)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,s,a,o,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then(()=>t())}return Promise.all([a(),o(r.delay)])}const hA=WN.length;function fA(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&fA(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<hA;n++){const r=WN[n],s=e.props[r];(HN(s)||!1===s)&&(t[r]=s)}return t}function pA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const mA=["transition","transitionEnd"],gA=[...KN].reverse(),yA=KN.length;function vA(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>dA(e,t,r));n=Promise.all(s)}else if("string"===typeof t)n=dA(e,t,r);else{const s="function"===typeof t?M_(e,t,r.custom):t;n=Promise.all(cA(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function bA(e){let t=vA(e),n=kA(),r=!0;const s=t=>(n,r)=>{var s;const i=M_(e,r,"exit"===t?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);if(i){const{transition:e,transitionEnd:t}=i,r=oN(i,mA);n=At(At(At({},n),r),t)}return n};function i(i){const{props:a}=e,o=fA(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<yA;t++){const h=gA[t],f=n[h],p=void 0!==a[h]?a[h]:o[h],m=HN(p),g=h===i?f.isActive:null;!1===g&&(d=t);let y=p===o[h]&&p!==a[h]&&m;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys=At({},u),!f.isActive&&null===g||!p&&!f.prevProp||qN(p)||"boolean"===typeof p)continue;if("exit"===h&&f.isActive&&!0!==g){f.prevResolvedValues&&(u=At(At({},u),f.prevResolvedValues));continue}const v=xA(f.prevProp,p);let b=v||h===i&&f.isActive&&!y&&m||t>d&&m,x=!1;const w=Array.isArray(p)?p:[p];let k=w.reduce(s(h),{});!1===g&&(k={});const{prevResolvedValues:E={}}=f,S=At(At({},E),k),T=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=k[e],n=E[e];if(u.hasOwnProperty(e))continue;let r=!1;r=V_(t)&&V_(n)?!pA(t,n):t!==n,r?void 0!==t&&null!==t?T(e):c.add(e):void 0!==t&&c.has(e)?T(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=k,f.isActive&&(u=At(At({},u),k)),r&&e.blockInitialAnimation&&(b=!1);const N=y&&v;b&&(!N||x)&&l.push(...w.map(t=>{const n={type:h};if("string"===typeof t&&r&&!N&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,s=M_(r,t);if(r.enteringChildren&&s){const{delayChildren:t}=s.transition||{};n.delay=uA(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof a.initial){const n=M_(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){var s;if(n[t].isActive===r)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const a=i(t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=kA()}}}function xA(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!pA(t,e)}function wA(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kA(){return{animate:wA(!0),whileInView:wA(),whileHover:wA(),whileTap:wA(),whileDrag:wA(),whileFocus:wA(),exit:wA()}}let EA=0;const SA={animation:{Feature:class extends R_{constructor(e){super(e),e.animationState||(e.animationState=bA(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends R_{constructor(){super(...arguments),this.id=EA++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},TA={x:!1,y:!1};function NA(){return TA.x||TA.y}function IA(e){return[e("x"),e("y")]}function _A(e){return e.max-e.min}function CA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=wI(t.min,t.max,e.origin),e.scale=_A(n)/_A(t),e.translate=wI(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function AA(e,t,n,r){CA(e.x,t.x,n.x,r?r.originX:void 0),CA(e.y,t.y,n.y,r?r.originY:void 0)}function jA(e,t,n){e.min=n.min+t.min,e.max=e.min+_A(t)}function DA(e,t,n){e.min=t.min-n.min,e.max=e.min+_A(t)}function PA(e,t,n){DA(e.x,t.x,n.x),DA(e.y,t.y,n.y)}const RA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const MA=new Set(["INPUT","SELECT","TEXTAREA"]);function OA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function LA(e){return"object"===typeof e&&null!==e}function FA(e){return LA(e)&&"ownerSVGElement"in e}function VA(e,t,n){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let s=document;t&&(s=t.current);const i=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:s.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e).filter(e=>null!=e)}const UA=new WeakMap;let BA;const zA=(e,t,n)=>(r,s)=>s&&s[0]?s[0][e+"Size"]:FA(r)&&"getBBox"in r?r.getBBox()[t]:r[n],qA=zA("inline","width","offsetWidth"),HA=zA("block","height","offsetHeight");function KA(e){var t;let{target:n,borderBoxSize:r}=e;null===(t=UA.get(n))||void 0===t||t.forEach(e=>{e(n,{get width(){return qA(n,r)},get height(){return HA(n,r)}})})}function WA(e){e.forEach(KA)}function GA(e,t){BA||"undefined"!==typeof ResizeObserver&&(BA=new ResizeObserver(WA));const n=VA(e);return n.forEach(e=>{var n;let r=UA.get(e);r||(r=new Set,UA.set(e,r)),r.add(t),null===(n=BA)||void 0===n||n.observe(e)}),()=>{n.forEach(e=>{const n=UA.get(e);var r;(null===n||void 0===n||n.delete(t),null!==n&&void 0!==n&&n.size)||(null===(r=BA)||void 0===r||r.unobserve(e))})}}const QA=new Set;let XA;function YA(e){return QA.add(e),XA||(XA=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};QA.forEach(t=>t(e))},window.addEventListener("resize",XA)),()=>{QA.delete(e),QA.size||"function"!==typeof XA||(window.removeEventListener("resize",XA),XA=void 0)}}function $A(e,t){return"function"===typeof e?YA(e):GA(e,t)}const JA=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function ZA(e){return{point:{x:e.pageX,y:e.pageY}}}function ej(e,t,n,r){return OA(e,t,(e=>t=>JA(t)&&e(t,ZA(t)))(n),r)}const tj=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},nj=(e,t)=>Math.abs(e-t);const rj=new Set(["auto","scroll"]);class sj{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:i=3,element:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=oj(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=nj(e.x,t.x),r=nj(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=GT;this.history.push(At(At({},r),{},{timestamp:s}));const{onStart:i,onMove:a}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ij(t,this.transformPagePoint),KT.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(!this.dragSnapToOrigin&&this.startEvent||s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=oj("pointercancel"===e.type?this.lastMoveEventInfo:ij(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!JA(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const o=ij(ZA(e),this.transformPagePoint),{point:l}=o,{timestamp:c}=GT;this.history=[At(At({},l),{},{timestamp:c})];const{onSessionStart:u}=t;u&&u(e,oj(o,this.history)),this.removeListeners=W_(ej(this.contextWindow,"pointermove",this.handlePointerMove),ej(this.contextWindow,"pointerup",this.handlePointerUp),ej(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){const e=getComputedStyle(t);(rj.has(e.overflowX)||rj.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s=r.x-t.x,i=r.y-t.y;0===s&&0===i||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s,this.lastMoveEventInfo.point.y+=i):this.history.length>0&&(this.history[0].x-=s,this.history[0].y-=i),this.scrollPositions.set(e,r),KT.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),WT(this.updatePoint)}}function ij(e,t){return t?{point:t(e.point)}:e}function aj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function oj(e,t){let{point:n}=e;return{point:n,delta:aj(n,cj(t)),offset:aj(n,lj(t)),velocity:uj(t,.1)}}function lj(e){return e[0]}function cj(e){return e[e.length-1]}function uj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=cj(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>lN(t)));)n--;if(!r)return{x:0,y:0};r===e[0]&&e.length>2&&s.timestamp-r.timestamp>2*lN(t)&&(r=e[1]);const i=cN(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function dj(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function hj(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const fj=.35;function pj(e,t,n){return{min:mj(e,t),max:mj(e,n)}}function mj(e,t){return"number"===typeof e?e:e[t]||0}const gj=new WeakMap;class yj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new sj(e,{onSessionStart:e=>{t&&this.snapToCursor(ZA(e).point),this.stopAnimation()},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?TA[i]?null:(TA[i]=!0,()=>{TA[i]=!1}):TA.x||TA.y?null:(TA.x=TA.y=!0,()=>{TA.x=TA.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),IA(e=>{let t=this.getAxisMotionValue(e).get()||0;if(LS.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=_A(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&KT.update(()=>s(e,t),!1,!0),q_(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),i&&KT.update(()=>i(e,t),!1,!0)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>{const{dragSnapToOrigin:e}=this.getProps();(e||this.constraints)&&this.startAnimation({x:0,y:0})}},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:tj(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&KT.postRender(()=>a(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!bj(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?wI(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?wI(s,e,n.max):Math.min(e,s)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&I_(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:s,right:i}=t;return{x:dj(e.x,r,i),y:dj(e.y,n,s)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fj;return!1===e?e=0:!0===e&&(e=fj),{x:pj(e,"left","right"),y:pj(e,"top","bottom")}}(n),s!==this.constraints&&!I_(t)&&r&&this.constraints&&!this.hasMutatedConstraints&&IA(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!I_(e))return!1;const n=e.current;gT(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=qI(e,n),{scroll:s}=t;return s&&(UI(r.x,s.offset.x),UI(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:hj(e.x,t.x),y:hj(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=_I(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=IA(a=>{if(!bj(a,t,this.currentDirection))return;let l=o&&o[a]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d=At(At({type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},s),l);return this.startAxisValueAnimation(a,d)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return q_(this.visualElement,e),n.start(aA(e,n,0,t,this.visualElement,!1))}stopAnimation(){IA(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){IA(t=>{const{drag:n}=this.getProps();if(!bj(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t],a=s.get()||0;s.set(e[t]-wI(n,i,.5)+a)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!I_(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};IA(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=_A(e),s=_A(t);return s>r?n=OC(t.min,t.max-r,e.min):r>s&&(n=OC(e.min,e.max-s,t.min)),ES(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),IA(t=>{if(!bj(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(wI(s,i,r[t]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;gj.set(this.visualElement,this);const e=this.visualElement.current,t=ej(e,"pointerdown",t=>{const{drag:n,dragListener:r=!0}=this.getProps(),s=t.target,i=s!==e&&function(e){return MA.has(e.tagName)||!0===e.isContentEditable}(s);n&&r&&!i&&this.start(t)});let n;const r=()=>{const{dragConstraints:t}=this.getProps();I_(t)&&t.current&&(this.constraints=this.resolveRefConstraints(),n||(n=function(e,t,n){const r=$A(e,vj(n)),s=$A(t,vj(n));return()=>{r(),s()}}(e,t.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),KT.read(r);const a=OA(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(IA(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{a(),t(),i(),o&&o(),n&&n()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=fj,dragMomentum:a=!0}=e;return At(At({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:a})}}function vj(e){let t=!0;return()=>{t?t=!1:e()}}function bj(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const xj=e=>(t,n)=>{e&&KT.update(()=>e(t,n),!1,!0)};const wj={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kj(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,s.useContext)(h_);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=(0,s.useId)();(0,s.useEffect)(()=>{if(e)return i(a)},[e]);const o=(0,s.useCallback)(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}let Ej=!1;class Sj extends s.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),Ej&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions(At(At({},s.options),{},{layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()}))),wj.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:i}=n;return i?(i.isPresent=s,e.layoutDependency!==t&&i.setOptions(At(At({},i.options),{},{layoutDependency:t})),Ej=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||KT.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),DN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;Ej=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Tj(e){const[t,n]=kj(),r=(0,s.useContext)(QI);return(0,yS.jsx)(Sj,At(At({},e),{},{layoutGroup:r,switchLayoutGroup:(0,s.useContext)(N_),isPresent:t,safeToRemove:n}))}function Nj(e,t){const n=ON.now(),r=s=>{let{timestamp:i}=s;const a=i-n;a>=t&&(WT(r),e(a-t))};return KT.setup(r,!0),()=>WT(r)}const Ij=["TopLeft","TopRight","BottomLeft","BottomRight"],_j=Ij.length,Cj=e=>"string"===typeof e?parseFloat(e):e,Aj=e=>"number"===typeof e||FS.test(e);function jj(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Dj=Rj(0,.5,DC),Pj=Rj(.5,.95,UT);function Rj(e,t,n){return r=>r<e?0:r>t?1:n(OC(e,t,r))}function Mj(e,t){e.min=t.min,e.max=t.max}function Oj(e,t){Mj(e.x,t.x),Mj(e.y,t.y)}function Lj(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Fj(e,t,n,r,s){return e=RI(e-=t,1/n,r),void 0!==s&&(e=RI(e,1/s,r)),e}function Vj(e,t,n,r,s){let[i,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;LS.test(t)&&(t=parseFloat(t),t=wI(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=wI(i.min,i.max,r);e===i&&(o-=t),e.min=Fj(e.min,t,n,o,s),e.max=Fj(e.max,t,n,o,s)}(e,t[i],t[a],t[o],t.scale,r,s)}const Uj=["x","scaleX","originX"],Bj=["y","scaleY","originY"];function zj(e,t,n,r){Vj(e.x,t,Uj,n?n.x:void 0,r?r.x:void 0),Vj(e.y,t,Bj,n?n.y:void 0,r?r.y:void 0)}function qj(e){return 0===e.translate&&1===e.scale}function Hj(e){return qj(e.x)&&qj(e.y)}function Kj(e,t){return e.min===t.min&&e.max===t.max}function Wj(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Gj(e,t){return Wj(e.x,t.x)&&Wj(e.y,t.y)}function Qj(e){return _A(e.x)/_A(e.y)}function Xj(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Yj{constructor(){this.members=[]}add(e){uN(this.members,e);for(let t=this.members.length-1;t>=0;t--){const n=this.members[t];if(n===e||n===this.lead||n===this.prevLead)continue;const r=n.instance;r&&!1===r.isConnected&&!1!==n.isPresent&&!n.snapshot&&dN(this.members,n)}e.scheduleRender()}remove(e){if(dN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r],t=e.instance;if(!1!==e.isPresent&&(!t||!1!==t.isConnected)){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const r=n.options.layoutDependency,s=e.options.layoutDependency;if(!(void 0!==r&&void 0!==s&&r===s)){const r=n.instance;r&&!1===r.isConnected&&!n.snapshot||(e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const $j=(e,t)=>e.depth-t.depth;class Jj{constructor(){this.children=[],this.isDirty=!1}add(e){uN(this.children,e),this.isDirty=!0}remove(e){dN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($j),this.isDirty=!1,this.children.forEach(e)}}const Zj={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},eD=["","X","Y","Z"];let tD=0;function nD(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function rD(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=H_(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",KT,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&rD(r)}function sD(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=tD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qT.value&&(Zj.nodes=Zj.calculatedTargetDeltas=Zj.calculatedProjections=0),this.nodes.forEach(oD),this.nodes.forEach(pD),this.nodes.forEach(mD),this.nodes.forEach(lD),qT.addProjectionMetrics&&qT.addProjectionMetrics(Zj)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jj)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new hN),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=FA(e)&&!(FA(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const s=()=>this.root.updateBlockedByResize=!1;KT.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=Nj(s,250),wj.hasAnimatedSinceResize&&(wj.hasAnimatedSinceResize=!1,this.nodes.forEach(fD)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||i.getDefaultTransition()||wD,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Gj(this.targetLayout,s),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=At(At({},F_(a,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else n||fD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),WT(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gD),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(uD);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(dD);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hD),this.nodes.forEach(iD),this.nodes.forEach(aD)):this.nodes.forEach(dD),this.clearAllSnapshots();const e=ON.now();GT.delta=ES(0,1e3/60,e-GT.timestamp),GT.timestamp=e,GT.isProcessing=!0,QT.update.process(GT),QT.preRender.process(GT),QT.render.process(GT),GT.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cD),this.sharedNodes.forEach(yD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,KT.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){KT.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||_A(this.snapshot.measuredBox.x)||_A(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Hj(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||jI(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),SD((r=n).x),SD(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(ND))){const{scroll:e}=this.root;e&&(UI(n.x,e.offset.x),UI(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Oj(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:s,options:i}=t;t!==this.root&&s&&i.layoutScroll&&(s.wasRoot&&Oj(n,e),UI(n.x,s.offset.x),UI(n.y,s.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Oj(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&zI(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),jI(e.latestValues)&&zI(n,e.latestValues)}return jI(this.latestValues)&&zI(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Oj(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!jI(e.latestValues))continue;AI(e.latestValues)&&e.updateSnapshot();const r=oT();Oj(r,e.measurePageBox()),zj(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return jI(this.latestValues)&&zj(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=At(At(At({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==GT.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:i}=this.options;if(!this.layout||!s&&!i)return;this.resolvedRelativeTargetAt=GT.timestamp;const a=this.getClosestProjectingParent();var o,l,c;(a&&this.linkedParentVersion!==a.layoutVersion&&!a.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(a&&a.layout?this.createRelativeTarget(a,this.layout.layoutBox,a.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,l=this.relativeTarget,c=this.relativeParent.target,jA(o.x,l.x,c.x),jA(o.y,l.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Oj(this.target,this.layout.layoutBox),LI(this.target,this.targetDelta)):Oj(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,a&&Boolean(a.resumingFrom)===Boolean(this.resumingFrom)&&!a.options.layoutScroll&&a.target&&1!==this.animationProgress?this.createRelativeTarget(a,this.target,a.target):this.relativeParent=this.relativeTarget=void 0),qT.value&&Zj.calculatedTargetDeltas++)}getClosestProjectingParent(){if(this.parent&&!AI(this.parent.latestValues)&&!DI(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},PA(this.relativeTargetOrigin,t,n),Oj(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===GT.timestamp&&(r=!1),r)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;Oj(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let i,a;t.x=t.y=1;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:s}=i.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zI(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,LI(e,a)),r&&jI(i.latestValues)&&zI(e,i.latestValues))}t.x<VI&&t.x>FI&&(t.x=1),t.y<VI&&t.y>FI&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Lj(this.prevProjectionDelta.x,this.projectionDelta.x),Lj(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),AA(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&Xj(this.projectionDelta.x,this.prevProjectionDelta.x)&&Xj(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),qT.value&&Zj.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s=At({},this.latestValues),i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(xD));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;vD(i.x,e.x,n),vD(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(PA(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){bD(e.x,t.x,n.x,r),bD(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),d&&function(e,t){return Kj(e.x,t.x)&&Kj(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Oj(d,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,i){var a,o;if(s)e.opacity=wI(0,null!==(a=n.opacity)&&void 0!==a?a:1,Dj(r)),e.opacityExit=wI(null!==(o=t.opacity)&&void 0!==o?o:1,0,Pj(r));else if(i){var l,c;e.opacity=wI(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let u=0;u<_j;u++){const s="border".concat(Ij[u],"Radius");let i=jj(t,s),a=jj(n,s);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||Aj(i)===Aj(a)?(e[s]=Math.max(wI(Cj(i),Cj(a),r),0),(LS.test(a)||LS.test(i))&&(e[s]+="%")):e[s]=a)}(t.rotate||n.rotate)&&(e.rotate=wI(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(WT(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=KT.update(()=>{wj.hasAnimatedSinceResize=!0,vN.layout++,this.motionValue||(this.motionValue=UN(0)),this.currentAnimation=function(e,t,n){const r=lT(e)?e:UN(e);return r.start(aA("",r,t,n)),r.animation}(this.motionValue,[0,1e3],At(At({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{vN.layout--},onComplete:()=>{vN.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&TD(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=_A(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=_A(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Oj(t,n),zI(t,s),AA(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Yj);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&nD("z",e,r,this.animationValues);for(let s=0;s<eD.length;s++)nD("rotate".concat(eD[s]),e,r,this.animationValues),nD("skew".concat(eD[s]),e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=d_(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=d_(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!jI(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const s=r.animationValues||r.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(null===n||void 0===n?void 0:n.z)||0;if((s||i||a)&&(r="translate3d(".concat(s,"px, ").concat(i,"px, ").concat(a,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:i,skewX:a,skewY:o}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),s&&(r+="rotateX(".concat(s,"deg) ")),i&&(r+="rotateY(".concat(i,"deg) ")),a&&(r+="skewX(".concat(a,"deg) ")),o&&(r+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+="scale(".concat(o,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(i=n(s,i)),e.transform=i;const{x:a,y:o}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*a.origin,"% ").concat(100*o.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=s.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const u in EI){if(void 0===s[u])continue;const{correct:t,applyTo:n,isCSSVariable:a}=EI[u],o="none"===i?s[u]:t(s[u],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else a?this.options.visualElement.renderState.vars[u]=o:e[u]=o}this.options.layoutId&&(e.pointerEvents=r===this?d_(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(uD),this.root.sharedNodes.clear()}}}function iD(e){e.updateLayout()}function aD(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;"size"===s?IA(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],s=_A(r);r.min=t[e].min,r.max=r.min+s}):TD(s,n.layoutBox,t)&&IA(r=>{const s=i?n.measuredBox[r]:n.layoutBox[r],a=_A(t[r]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};AA(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?AA(o,e.applyTransform(r,!0),n.measuredBox):AA(o,t,n.layoutBox);const l=!Hj(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const a={x:{min:0,max:0},y:{min:0,max:0}};PA(a,n.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};PA(o,t,i.layoutBox),Gj(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function oD(e){qT.value&&Zj.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function lD(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function cD(e){e.clearSnapshot()}function uD(e){e.clearMeasurements()}function dD(e){e.isLayoutDirty=!1}function hD(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fD(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pD(e){e.resolveTargetDelta()}function mD(e){e.calcProjection()}function gD(e){e.resetSkewAndRotation()}function yD(e){e.removeLeadSnapshot()}function vD(e,t,n){e.translate=wI(t.translate,0,n),e.scale=wI(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bD(e,t,n,r){e.min=wI(t.min,n.min,r),e.max=wI(t.max,n.max,r)}function xD(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const wD={duration:.45,ease:[.4,0,.1,1]},kD=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ED=kD("applewebkit/")&&!kD("chrome/")?Math.round:UT;function SD(e){e.min=ED(e.min),e.max=ED(e.max)}function TD(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Qj(t),s=Qj(n),i=.2,!(Math.abs(r-s)<=i));var r,s,i}function ND(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const ID=sD({attachResizeListener:(e,t)=>OA(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||(null===(e=document.body)||void 0===e?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||(null===(t=document.body)||void 0===t?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),_D={current:void 0},CD=sD({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_D.current){const e=new ID({});e.mount(window),e.setOptions({layoutScroll:!0}),_D.current=e}return _D.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),AD={pan:{Feature:class extends R_{constructor(){super(...arguments),this.removePointerDownListener=UT}onPointerDown(e){this.session=new sj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:xj(e),onStart:xj(t),onMove:xj(n),onEnd:(e,t)=>{delete this.session,r&&KT.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=ej(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends R_{constructor(e){super(e),this.removeGroupControls=UT,this.removeListeners=UT,this.controls=new yj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||UT}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}},ProjectionNode:CD,MeasureLayout:Tj}};function jD(e,t){const n=VA(e),r=new AbortController;return[n,At(At({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function DD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,s,i]=jD(e,n);return r.forEach(e=>{let n,r=!1,i=!1;const a=t=>{n&&(n(t),n=void 0),e.removeEventListener("pointerleave",l)},o=e=>{r=!1,window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",o),i&&(i=!1,a(e))},l=e=>{"touch"!==e.pointerType&&(r?i=!0:a(e))};e.addEventListener("pointerenter",r=>{if("touch"===r.pointerType||NA())return;i=!1;const a=t(e,r);"function"===typeof a&&(n=a,e.addEventListener("pointerleave",l,s))},s),e.addEventListener("pointerdown",()=>{r=!0,window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",o,s)},s)}),i}function PD(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&KT.postRender(()=>s(t,ZA(t)))}function RD(e){return LA(e)&&"offsetHeight"in e}const MD=(e,t)=>!!t&&(e===t||MD(e,t.parentElement)),OD=new WeakSet;function LD(e){return t=>{"Enter"===t.key&&e(t)}}function FD(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function VD(e){return JA(e)&&!NA()}const UD=new WeakSet;function BD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,s,i]=jD(e,n),a=e=>{const r=e.currentTarget;if(!VD(e))return;if(UD.has(e))return;OD.add(r),n.stopPropagation&&UD.add(e);const i=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),OD.has(r)&&OD.delete(r),VD(e)&&"function"===typeof i&&i(e,{success:t})},o=e=>{a(e,r===window||r===document||n.useGlobalTarget||MD(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),RD(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=LD(()=>{if(OD.has(n))return;FD(n,"down");const e=LD(()=>{FD(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>FD(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,s)),t=e,RA.has(t.tagName)||!0===t.isContentEditable||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function zD(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&KT.postRender(()=>s(t,ZA(t)))}const qD=["root"],HD=new WeakMap,KD=new WeakMap,WD=e=>{const t=HD.get(e.target);t&&t(e)},GD=e=>{e.forEach(WD)};function QD(e,t,n){const r=function(e){let{root:t}=e,n=oN(e,qD);const r=t||document;KD.has(r)||KD.set(r,{});const s=KD.get(r),i=JSON.stringify(n);return s[i]||(s[i]=new IntersectionObserver(GD,At({root:t},n))),s[i]}(t);return HD.set(e,n),r.observe(e),()=>{HD.delete(e),r.unobserve(e)}}const XD={some:0,all:1};const YD={inView:{Feature:class extends R_{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:XD[r]};return QD(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends R_{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:n}=this.node.props;this.unmount=BD(e,(e,t)=>(zD(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return zD(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:t,stopPropagation:!1===(null===n||void 0===n?void 0:n.tap)})}unmount(){}}},focus:{Feature:class extends R_{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(AM){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=W_(OA(this.node.current,"focus",()=>this.onFocus()),OA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends R_{mount(){const{current:e}=this.node;e&&(this.unmount=DD(e,(e,t)=>(PD(this.node,t,"Start"),e=>PD(this.node,e,"End"))))}unmount(){}}}},$D={layout:{ProjectionNode:CD,MeasureLayout:Tj}},JD=P_(At(At(At(At({},SA),YD),AD),$D),GI);function ZD(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function eP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=ZD(t,e);return n||"function"!==typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"===typeof n?n():ZD(t[e],null)}}}}(...t),t)}class tP extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){const e=t.offsetParent,n=RD(e)&&e.offsetWidth||0,r=RD(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left,s.bottom=r-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function nP(e){var t,n;let{children:r,isPresent:i,anchorX:a,anchorY:o,root:l,pop:c}=e;const u=(0,s.useId)(),d=(0,s.useRef)(null),h=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=(0,s.useContext)(YI),p=null!==(t=null===(n=r.props)||void 0===n?void 0:n.ref)&&void 0!==t?t:null===r||void 0===r?void 0:r.ref,m=eP(d,p);return(0,s.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:r,right:s,bottom:p}=h.current;if(i||!1===c||!d.current||!e||!t)return;const m="left"===a?"left: ".concat(r):"right: ".concat(s),g="bottom"===o?"bottom: ".concat(p):"top: ".concat(n);d.current.dataset.motionPopId=u;const y=document.createElement("style");f&&(y.nonce=f);const v=null!==l&&void 0!==l?l:document.head;return v.appendChild(y),y.sheet&&y.sheet.insertRule('\n          [data-motion-pop-id="'.concat(u,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(m,"px !important;\n            ").concat(g,"px !important;\n          }\n        ")),()=>{v.contains(y)&&v.removeChild(y)}},[i]),(0,yS.jsx)(tP,{isPresent:i,childRef:d,sizeRef:h,pop:c,children:!1===c?r:s.cloneElement(r,{ref:m})})}const rP=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:i,custom:a,presenceAffectsLayout:o,mode:l,anchorX:c,anchorY:u,root:d}=e;const h=f_(sP),f=(0,s.useId)();let p=!0,m=(0,s.useMemo)(()=>(p=!1,{id:f,initial:n,isPresent:r,custom:a,onExitComplete:e=>{h.set(e,!0);for(const t of h.values())if(!t)return;i&&i()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[r,h,i]);return o&&p&&(m=At({},m)),(0,s.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[r]),s.useEffect(()=>{!r&&!h.size&&i&&i()},[r]),t=(0,yS.jsx)(nP,{pop:"popLayout"===l,isPresent:r,anchorX:c,anchorY:u,root:d,children:t}),(0,yS.jsx)(h_.Provider,{value:m,children:t})};function sP(){return new Map}const iP=e=>e.key||"";function aP(e){const t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}const oP=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",anchorY:u="top",root:d}=e;const[h,f]=kj(l),p=(0,s.useMemo)(()=>aP(t),[t]),m=l&&!h?[]:p.map(iP),g=(0,s.useRef)(!0),y=(0,s.useRef)(p),v=f_(()=>new Map),b=(0,s.useRef)(new Set),[x,w]=(0,s.useState)(p),[k,E]=(0,s.useState)(p);__(()=>{g.current=!1,y.current=p;for(let e=0;e<k.length;e++){const t=iP(k[e]);m.includes(t)?(v.delete(t),b.current.delete(t)):!0!==v.get(t)&&v.set(t,!1)}},[k,m.length,m.join("-")]);const S=[];if(p!==x){let e=[...p];for(let t=0;t<k.length;t++){const n=k[t],r=iP(n);m.includes(r)||(e.splice(t,0,n),S.push(n))}return"wait"===o&&S.length&&(e=S),E(aP(e)),w(p),null}const{forceRender:T}=(0,s.useContext)(QI);return(0,yS.jsx)(yS.Fragment,{children:k.map(e=>{const t=iP(e),s=!(l&&!h)&&(p===k||m.includes(t));return(0,yS.jsx)(rP,{isPresent:s,initial:!(g.current&&!r)&&void 0,custom:n,presenceAffectsLayout:a,mode:o,root:d,onExitComplete:s?void 0:()=>{if(b.current.has(t))return;if(b.current.add(t),!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null===T||void 0===T||T(),E(y.current),l&&(null===f||void 0===f||f()),i&&i())},anchorX:c,anchorY:u,children:e},t)})})},lP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},cP=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)};var uP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dP=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],hP=(0,s.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c}=e,u=oN(e,dP);return(0,s.createElement)("svg",At(At(At({ref:t},uP),{},{width:r,height:r,stroke:n,strokeWidth:a?24*Number(i)/Number(r):i,className:lP("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(u)&&{"aria-hidden":"true"}),u),[...c.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),fP=["className"],pP=(e,t)=>{const n=(0,s.forwardRef)((n,r)=>{let{className:i}=n,a=oN(n,fP);return(0,s.createElement)(hP,At({ref:r,iconNode:t,className:lP("lucide-".concat((o=cP(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),i)},a));var o});return n.displayName=cP(e),n},mP=pP("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),gP=pP("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),yP=pP("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),vP=pP("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),bP=pP("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),xP=pP("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]),wP=pP("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),kP=pP("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),EP=pP("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),SP=pP("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),TP=pP("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function NP(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=NP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function IP(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=NP(e))&&(r&&(r+=" "),r+=t);return r}const _P=function(){return{nextPart:arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,validators:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,classGroupId:arguments.length>2?arguments[2]:void 0}},CP="-",AP=[],jP=e=>{const t=RP(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return PP(e);const n=e.split(CP),r=""===n[0]&&n.length>1?1:0;return DP(n,r,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=r[e],s=n[e];return t?s?((e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(s,t):t:s||AP}return n[e]||AP}}},DP=(e,t,n)=>{if(0===e.length-t)return n.classGroupId;const r=e[t],s=n.nextPart.get(r);if(s){const n=DP(e,t+1,s);if(n)return n}const i=n.validators;if(null===i)return;const a=0===t?e.join(CP):e.slice(t).join(CP),o=i.length;for(let l=0;l<o;l++){const e=i[l];if(e.validator(a))return e.classGroupId}},PP=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?"arbitrary.."+r:void 0})(),RP=e=>{const{theme:t,classGroups:n}=e;return MP(n,t)},MP=(e,t)=>{const n=_P();for(const r in e){const s=e[r];OP(s,n,r,t)}return n},OP=(e,t,n,r)=>{const s=e.length;for(let i=0;i<s;i++){const s=e[i];LP(s,t,n,r)}},LP=(e,t,n,r)=>{"string"!==typeof e?"function"!==typeof e?UP(e,t,n,r):VP(e,t,n,r):FP(e,t,n)},FP=(e,t,n)=>{(""===e?t:BP(t,e)).classGroupId=n},VP=(e,t,n,r)=>{zP(e)?OP(e(r),t,n,r):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},UP=(e,t,n,r)=>{const s=Object.entries(e),i=s.length;for(let a=0;a<i;a++){const[e,i]=s[a];OP(i,BP(t,e),n,r)}},BP=(e,t)=>{let n=e;const r=t.split(CP),s=r.length;for(let i=0;i<s;i++){const e=r[i];let t=n.nextPart.get(e);t||(t=_P(),n.nextPart.set(e,t)),n=t}return n},zP=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,qP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(s,i)=>{n[s]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(s(e,t),t):void 0},set(e,t){e in n?n[e]=t:s(e,t)}}},HP=[],KP=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),WP=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,s=0,i=0;const a=e.length;for(let u=0;u<a;u++){const a=e[u];if(0===r&&0===s){if(":"===a){t.push(e.slice(i,u)),i=u+1;continue}if("/"===a){n=u;continue}}"["===a?r++:"]"===a?r--:"("===a?s++:")"===a&&s--}const o=0===t.length?e:e.slice(i);let l=o,c=!1;o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0);return KP(t,c,l,n&&n>i?n-i:void 0)};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):KP(HP,!1,t,void 0,!0)}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},GP=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let r=[];for(let s=0;s<e.length;s++){const i=e[s],a="["===i[0],o=t.has(i);a||o?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(i)):r.push(i)}return r.length>0&&(r.sort(),n.push(...r)),n}},QP=/\s+/,XP=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=XP(e[r]))&&(n&&(n+=" "),n+=t);return n},YP=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let s,i,a,o;const l=e=>{const t=i(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,a=[],o=e.trim().split(QP);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!f,m=r(p?h.substring(0,f):h);if(!m){if(!p){l=e+(l.length>0?" "+l:l);continue}if(m=r(h),!m){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=0===u.length?"":1===u.length?u[0]:i(u).join(":"),y=d?g+"!":g,v=y+m;if(a.indexOf(v)>-1)continue;a.push(v);const b=s(m,p);for(let n=0;n<b.length;++n){const e=b[n];a.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,s);return a(e,n),n};return o=t=>{const r=n.reduce((e,t)=>t(e),e());return s=(e=>At({cache:qP(e.cacheSize),parseClassName:WP(e),sortModifiers:GP(e)},jP(e)))(r),i=s.cache.get,a=s.cache.set,o=l,l(t)},function(){return o(function(){let e,t,n=0,r="";for(;n<arguments.length;){var s;(e=(s=n++)<0||arguments.length<=s?void 0:arguments[s])&&(t=XP(e))&&(r&&(r+=" "),r+=t)}return r}(...arguments))}},$P=[],JP=e=>{const t=t=>t[e]||$P;return t.isThemeGetter=!0,t},ZP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,eR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tR=/^\d+\/\d+$/,nR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,iR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oR=e=>tR.test(e),lR=e=>!!e&&!Number.isNaN(Number(e)),cR=e=>!!e&&Number.isInteger(Number(e)),uR=e=>e.endsWith("%")&&lR(e.slice(0,-1)),dR=e=>nR.test(e),hR=()=>!0,fR=e=>rR.test(e)&&!sR.test(e),pR=()=>!1,mR=e=>iR.test(e),gR=e=>aR.test(e),yR=e=>!bR(e)&&!TR(e),vR=e=>DR(e,OR,pR),bR=e=>ZP.test(e),xR=e=>DR(e,LR,fR),wR=e=>DR(e,FR,lR),kR=e=>DR(e,RR,pR),ER=e=>DR(e,MR,gR),SR=e=>DR(e,UR,mR),TR=e=>eR.test(e),NR=e=>PR(e,LR),IR=e=>PR(e,VR),_R=e=>PR(e,RR),CR=e=>PR(e,OR),AR=e=>PR(e,MR),jR=e=>PR(e,UR,!0),DR=(e,t,n)=>{const r=ZP.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},PR=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=eR.exec(e);return!!r&&(r[1]?t(r[1]):n)},RR=e=>"position"===e||"percentage"===e,MR=e=>"image"===e||"url"===e,OR=e=>"length"===e||"size"===e||"bg-size"===e,LR=e=>"length"===e,FR=e=>"number"===e,VR=e=>"family-name"===e,UR=e=>"shadow"===e,BR=(Symbol.toStringTag,()=>{const e=JP("color"),t=JP("font"),n=JP("text"),r=JP("font-weight"),s=JP("tracking"),i=JP("leading"),a=JP("breakpoint"),o=JP("container"),l=JP("spacing"),c=JP("radius"),u=JP("shadow"),d=JP("inset-shadow"),h=JP("text-shadow"),f=JP("drop-shadow"),p=JP("blur"),m=JP("perspective"),g=JP("aspect"),y=JP("ease"),v=JP("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",TR,bR],x=()=>[TR,bR,l],w=()=>[oR,"full","auto",...x()],k=()=>[cR,"none","subgrid",TR,bR],E=()=>["auto",{span:["full",cR,TR,bR]},cR,TR,bR],S=()=>[cR,"auto",TR,bR],T=()=>["auto","min","max","fr",TR,bR],N=()=>["auto",...x()],I=()=>[oR,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],_=()=>[e,TR,bR],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",_R,kR,{position:[TR,bR]}],A=()=>["auto","cover","contain",CR,vR,{size:[TR,bR]}],j=()=>[uR,NR,xR],D=()=>["","none","full",c,TR,bR],P=()=>["",lR,NR,xR],R=()=>[lR,uR,_R,kR],M=()=>["","none",p,TR,bR],O=()=>["none",lR,TR,bR],L=()=>["none",lR,TR,bR],F=()=>[lR,TR,bR],V=()=>[oR,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dR],breakpoint:[dR],color:[hR],container:[dR],"drop-shadow":[dR],ease:["in","out","in-out"],font:[yR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dR],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dR],shadow:[dR],spacing:["px",lR],text:[dR],"text-shadow":[dR],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oR,bR,TR,g]}],container:["container"],columns:[{columns:[lR,bR,TR,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[cR,"auto",TR,bR]}],basis:[{basis:[oR,"full","auto",o,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[lR,oR,"auto","initial","none",bR]}],grow:[{grow:["",lR,TR,bR]}],shrink:[{shrink:["",lR,TR,bR]}],order:[{order:[cR,"first","last","none",TR,bR]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":T()}],"auto-rows":[{"auto-rows":T()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[o,"screen",...I()]}],"min-w":[{"min-w":[o,"screen","none",...I()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,NR,xR]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,TR,wR]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",uR,bR]}],"font-family":[{font:[IR,bR,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,TR,bR]}],"line-clamp":[{"line-clamp":[lR,"none",TR,wR]}],leading:[{leading:[i,...x()]}],"list-image":[{"list-image":["none",TR,bR]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",TR,bR]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:_()}],"text-color":[{text:_()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[lR,"from-font","auto",TR,xR]}],"text-decoration-color":[{decoration:_()}],"underline-offset":[{"underline-offset":[lR,"auto",TR,bR]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",TR,bR]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",TR,bR]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:C()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},cR,TR,bR],radial:["",TR,bR],conic:[cR,TR,bR]},AR,ER]}],"bg-color":[{bg:_()}],"gradient-from-pos":[{from:j()}],"gradient-via-pos":[{via:j()}],"gradient-to-pos":[{to:j()}],"gradient-from":[{from:_()}],"gradient-via":[{via:_()}],"gradient-to":[{to:_()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:P()}],"border-w-x":[{"border-x":P()}],"border-w-y":[{"border-y":P()}],"border-w-s":[{"border-s":P()}],"border-w-e":[{"border-e":P()}],"border-w-t":[{"border-t":P()}],"border-w-r":[{"border-r":P()}],"border-w-b":[{"border-b":P()}],"border-w-l":[{"border-l":P()}],"divide-x":[{"divide-x":P()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":P()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:_()}],"border-color-x":[{"border-x":_()}],"border-color-y":[{"border-y":_()}],"border-color-s":[{"border-s":_()}],"border-color-e":[{"border-e":_()}],"border-color-t":[{"border-t":_()}],"border-color-r":[{"border-r":_()}],"border-color-b":[{"border-b":_()}],"border-color-l":[{"border-l":_()}],"divide-color":[{divide:_()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[lR,TR,bR]}],"outline-w":[{outline:["",lR,NR,xR]}],"outline-color":[{outline:_()}],shadow:[{shadow:["","none",u,jR,SR]}],"shadow-color":[{shadow:_()}],"inset-shadow":[{"inset-shadow":["none",d,jR,SR]}],"inset-shadow-color":[{"inset-shadow":_()}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:_()}],"ring-offset-w":[{"ring-offset":[lR,xR]}],"ring-offset-color":[{"ring-offset":_()}],"inset-ring-w":[{"inset-ring":P()}],"inset-ring-color":[{"inset-ring":_()}],"text-shadow":[{"text-shadow":["none",h,jR,SR]}],"text-shadow-color":[{"text-shadow":_()}],opacity:[{opacity:[lR,TR,bR]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[lR]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":_()}],"mask-image-linear-to-color":[{"mask-linear-to":_()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":_()}],"mask-image-t-to-color":[{"mask-t-to":_()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":_()}],"mask-image-r-to-color":[{"mask-r-to":_()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":_()}],"mask-image-b-to-color":[{"mask-b-to":_()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":_()}],"mask-image-l-to-color":[{"mask-l-to":_()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":_()}],"mask-image-x-to-color":[{"mask-x-to":_()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":_()}],"mask-image-y-to-color":[{"mask-y-to":_()}],"mask-image-radial":[{"mask-radial":[TR,bR]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":_()}],"mask-image-radial-to-color":[{"mask-radial-to":_()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[lR]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":_()}],"mask-image-conic-to-color":[{"mask-conic-to":_()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:C()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",TR,bR]}],filter:[{filter:["","none",TR,bR]}],blur:[{blur:M()}],brightness:[{brightness:[lR,TR,bR]}],contrast:[{contrast:[lR,TR,bR]}],"drop-shadow":[{"drop-shadow":["","none",f,jR,SR]}],"drop-shadow-color":[{"drop-shadow":_()}],grayscale:[{grayscale:["",lR,TR,bR]}],"hue-rotate":[{"hue-rotate":[lR,TR,bR]}],invert:[{invert:["",lR,TR,bR]}],saturate:[{saturate:[lR,TR,bR]}],sepia:[{sepia:["",lR,TR,bR]}],"backdrop-filter":[{"backdrop-filter":["","none",TR,bR]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[lR,TR,bR]}],"backdrop-contrast":[{"backdrop-contrast":[lR,TR,bR]}],"backdrop-grayscale":[{"backdrop-grayscale":["",lR,TR,bR]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lR,TR,bR]}],"backdrop-invert":[{"backdrop-invert":["",lR,TR,bR]}],"backdrop-opacity":[{"backdrop-opacity":[lR,TR,bR]}],"backdrop-saturate":[{"backdrop-saturate":[lR,TR,bR]}],"backdrop-sepia":[{"backdrop-sepia":["",lR,TR,bR]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",TR,bR]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[lR,"initial",TR,bR]}],ease:[{ease:["linear","initial",y,TR,bR]}],delay:[{delay:[lR,TR,bR]}],animate:[{animate:["none",v,TR,bR]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,TR,bR]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:O()}],"rotate-x":[{"rotate-x":O()}],"rotate-y":[{"rotate-y":O()}],"rotate-z":[{"rotate-z":O()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[TR,bR,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:V()}],"translate-x":[{"translate-x":V()}],"translate-y":[{"translate-y":V()}],"translate-z":[{"translate-z":V()}],"translate-none":["translate-none"],accent:[{accent:_()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:_()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",TR,bR]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",TR,bR]}],fill:[{fill:["none",..._()]}],"stroke-w":[{stroke:[lR,NR,xR,wR]}],stroke:[{stroke:["none",..._()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),zR=YP(BR);function qR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zR(IP(t))}const HR=()=>{const{currentUser:e,logout:t}=bS(),n=re(),r=te(),[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=()=>{l(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const c=async()=>{try{await t(),n("/login"),a(!1)}catch(e){console.error("Failed to log out",e)}},u=[{name:"Dashboard",path:"/",icon:mP},{name:"News",path:"/news",icon:gP},{name:"Tournaments",path:"/tournaments",icon:yP},{name:"Teams",path:"/teams",icon:vP},{name:"Players",path:"/players",icon:bP},{name:"Leaderboard",path:"/leaderboard",icon:xP}];return e&&u.push({name:"Admin",path:"/admin",icon:wP}),(0,yS.jsxs)(yS.Fragment,{children:[(0,yS.jsxs)(JD.nav,{initial:{y:-100},animate:{y:0},className:qR("fixed top-0 inset-x-0 z-50 transition-all duration-300 border-b border-transparent",o?"bg-dark-bg/80 backdrop-blur-xl border-white/5 shadow-lg shadow-black/20":"bg-transparent backdrop-blur-sm"),children:[(0,yS.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yS.jsxs)("div",{className:"flex items-center justify-between h-16 md:h-20",children:[(0,yS.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2 group cursor-pointer",onClick:()=>n("/"),children:[(0,yS.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 flex items-center justify-center text-white shadow-lg shadow-brand-500/20 group-hover:scale-105 transition-transform",children:(0,yS.jsx)(yP,{size:20,className:"text-white fill-current"})}),(0,yS.jsxs)("div",{className:"flex flex-col",children:[(0,yS.jsxs)("span",{className:"font-display font-bold text-xl tracking-tight text-white leading-none",children:["Goal",(0,yS.jsx)("span",{className:"text-brand-400",children:"Kashmir"})]}),(0,yS.jsx)("span",{className:"text-[10px] text-slate-400 font-medium tracking-wider uppercase",children:"Premium League"})]})]}),(0,yS.jsx)("div",{className:"hidden md:flex items-center space-x-1",children:u.map(e=>{const t=r.pathname===e.path;return(0,yS.jsxs)(Re,{to:e.path,className:"relative px-4 py-2 rounded-lg group",children:[(0,yS.jsx)("span",{className:qR("relative z-10 flex items-center gap-2 text-sm font-medium transition-colors",t?"text-white":"text-slate-400 group-hover:text-white"),children:e.name}),t&&(0,yS.jsx)(JD.div,{layoutId:"navbar-indicator",className:"absolute inset-0 bg-white/10 rounded-lg border border-white/5",transition:{type:"spring",bounce:.2,duration:.6}})]},e.name)})}),(0,yS.jsx)("div",{className:"hidden md:flex items-center gap-4",children:e?(0,yS.jsxs)("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-300 hover:text-red-400 transition-colors",children:[(0,yS.jsx)(kP,{size:18}),(0,yS.jsx)("span",{children:"Logout"})]}):(0,yS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yS.jsx)(Re,{to:"/login",className:"text-sm font-medium text-slate-300 hover:text-white transition-colors",children:"Login"}),(0,yS.jsx)(Re,{to:"/signup",className:"px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white text-sm font-medium rounded-lg shadow-lg shadow-brand-500/20 transition-all hover:scale-105 active:scale-95",children:"Sign Up"})]})}),(0,yS.jsx)("div",{className:"md:hidden",children:(0,yS.jsx)("button",{onClick:()=>a(!i),className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/5 transition-colors",children:i?(0,yS.jsx)(EP,{size:24}):(0,yS.jsx)(SP,{size:24})})})]})}),(0,yS.jsx)(oP,{children:i&&(0,yS.jsx)(JD.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-dark-bg/95 backdrop-blur-xl border-t border-white/5 overflow-hidden",children:(0,yS.jsxs)("div",{className:"px-4 pt-4 pb-6 space-y-2",children:[u.map(e=>(0,yS.jsxs)(Me,{to:e.path,onClick:()=>a(!1),className:e=>{let{isActive:t}=e;return qR("flex items-center justify-between p-4 rounded-xl border border-transparent transition-all",t?"bg-brand-500/10 border-brand-500/20 text-brand-400":"bg-white/5 text-slate-400 border-white/5 hover:bg-white/10 hover:text-white")},children:[(0,yS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yS.jsx)(e.icon,{size:20}),(0,yS.jsx)("span",{className:"font-medium",children:e.name})]}),(0,yS.jsx)(TP,{size:16,className:"opacity-50"})]},e.name)),(0,yS.jsx)("div",{className:"h-px bg-white/10 my-4"}),e?(0,yS.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 p-4 rounded-xl bg-red-500/10 text-red-500 border border-red-500/20 font-medium hover:bg-red-500/20 transition-colors",children:[(0,yS.jsx)(kP,{size:20}),"Logout"]}):(0,yS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yS.jsx)(Re,{to:"/login",onClick:()=>a(!1),className:"flex justify-center p-4 rounded-xl bg-white/5 text-slate-200 border border-white/5 font-medium hover:bg-white/10",children:"Login"}),(0,yS.jsx)(Re,{to:"/signup",onClick:()=>a(!1),className:"flex justify-center p-4 rounded-xl bg-brand-600 text-white font-medium shadow-lg hover:bg-brand-500",children:"Sign Up"})]})]})})})]}),(0,yS.jsx)("div",{className:"h-16 md:h-20"})]})},KR=(0,s.createContext)(),WR=()=>(0,s.useContext)(KR),GR=e=>{let{children:t}=e;const[n,r]=(0,s.useState)([]),[i,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[d,h]=(0,s.useState)([]),[f,p]=(0,s.useState)(!0);(0,s.useEffect)(()=>{p(!0);let e={teams:!1,players:!1,matches:!1,tournaments:!1,lineups:!1};const t=()=>{e.teams&&e.players&&e.matches&&e.tournaments&&e.lineups&&p(!1)},n=jk(Ew(pS,"teams"),n=>{r(n.docs.map(e=>At({id:e.id},e.data()))),e.teams=!0,t()},e=>{console.error("Error fetching teams (likely permission denied):",e)}),s=jk(Ew(pS,"players"),n=>{a(n.docs.map(e=>At({id:e.id},e.data()))),e.players=!0,t()},e=>{console.error("Error fetching players:",e)}),i=jk(Ew(pS,"matches"),n=>{l(n.docs.map(e=>At({id:e.id},e.data()))),e.matches=!0,t()},e=>{console.error("Error fetching matches:",e)}),o=jk(Ew(pS,"tournaments"),n=>{u(n.docs.map(e=>At({id:e.id},e.data()))),e.tournaments=!0,t()},e=>{console.error("Error fetching tournaments:",e)}),c=jk(Ew(pS,"lineups"),n=>{h(n.docs.map(e=>At({id:e.id},e.data()))),e.lineups=!0,t()},n=>{console.error("Error fetching lineups:",n),e.lineups=!0,t()}),d=setTimeout(()=>{p(!1)},5e3);return()=>{clearTimeout(d),n(),s(),i(),o(),c()}},[]);const m={teams:n,players:i,matches:o,tournaments:c,lineups:d,loading:f};return(0,yS.jsx)(KR.Provider,{value:m,children:t})},QR=e=>{let{lineup:t,players:n}=e;if(!t||!t.starting11||0===t.starting11.length)return(0,yS.jsx)("div",{className:"text-center text-gray-400 py-8",children:(0,yS.jsx)("p",{children:"No lineup available"})});const r=e=>n.find(t=>t.id===e),s=(()=>{const e={Goalkeeper:[],Defender:[],Midfielder:[],Forward:[]};return t.starting11.forEach(t=>{const n=r(t);n&&e[n.position]&&e[n.position].push(n)}),e})(),i=e=>{let{player:t}=e;return(0,yS.jsxs)("div",{className:"bg-green-700 rounded-lg p-2 text-center shadow-lg border-2 border-green-500 min-w-[70px]",children:[(0,yS.jsx)("div",{className:"text-xs font-bold text-white truncate",children:t.name.split(" ").pop()}),(0,yS.jsx)("div",{className:"text-[10px] text-green-200",children:t.position.substring(0,3).toUpperCase()})]})};return(0,yS.jsxs)("div",{className:"bg-gradient-to-b from-green-800 to-green-900 rounded-lg p-4 relative overflow-hidden",children:[(0,yS.jsxs)("div",{className:"absolute inset-0 opacity-20",children:[(0,yS.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-px h-full bg-white"}),(0,yS.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 border-2 border-white rounded-full"})]}),(0,yS.jsxs)("div",{className:"relative space-y-4",children:[s.Forward.length>0&&(0,yS.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Forward.map(e=>(0,yS.jsx)(i,{player:e},e.id))}),s.Midfielder.length>0&&(0,yS.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Midfielder.map(e=>(0,yS.jsx)(i,{player:e},e.id))}),s.Defender.length>0&&(0,yS.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Defender.map(e=>(0,yS.jsx)(i,{player:e},e.id))}),s.Goalkeeper.length>0&&(0,yS.jsx)("div",{className:"flex justify-center gap-2 flex-wrap",children:s.Goalkeeper.map(e=>(0,yS.jsx)(i,{player:e},e.id))})]}),t.bench&&t.bench.length>0&&(0,yS.jsxs)("div",{className:"mt-4 pt-4 border-t border-green-700",children:[(0,yS.jsx)("div",{className:"text-xs text-green-200 mb-2 font-semibold",children:"Bench"}),(0,yS.jsx)("div",{className:"flex gap-2 flex-wrap",children:t.bench.map(e=>{const t=r(e);return t?(0,yS.jsx)("div",{className:"bg-gray-700 rounded px-2 py-1 text-xs text-white",children:t.name.split(" ").pop()},t.id):null})})]})]})},XR=pP("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),YR=pP("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),$R=pP("shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),JR=pP("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ZR=pP("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),eM=pP("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),tM=()=>{const{matches:e,players:t,teams:n,tournaments:r,lineups:i,loading:a}=WR(),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(null),d={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};(0,s.useEffect)(()=>{(!o||"All"===o)&&r.length>0&&l(r[0].name)},[r,o]);const h=o&&"All"!==o?e.filter(e=>e.competition===o):e,f=o&&"All"!==o?n.filter(e=>(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(o)).map(e=>e.name):null,p=f?t.filter(e=>f.includes(e.team)):t,m=h.filter(e=>"live"===e.status),g=h.filter(e=>"scheduled"===e.status),y=h.filter(e=>"finished"===e.status).slice(0,5),v=[...p].sort((e,t)=>(t.goals||0)-(e.goals||0)).slice(0,5),b=o&&"All"!==o?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"All";if(!e||0===e.length)return[];const r={};return e.filter(e=>!n||"All"===n||(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(n)).forEach(e=>{r[e.name]={id:e.id,name:e.name,shortName:e.shortName||e.name.substring(0,3).toUpperCase(),played:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,points:0,form:[]}}),t.filter(e=>("All"===n||!n||e.competition===n)&&"finished"===e.status).forEach(e=>{const t=r[e.teamA],n=r[e.teamB];if(!t||!n)return;t.played++,n.played++;const s=Number(e.scoreA),i=Number(e.scoreB);t.goalsFor+=s,t.goalsAgainst+=i,n.goalsFor+=i,n.goalsAgainst+=s,s>i?(t.wins++,t.points+=3,n.losses++,t.form.push("W"),n.form.push("L")):s<i?(n.wins++,n.points+=3,t.losses++,n.form.push("W"),t.form.push("L")):(t.draws++,n.draws++,t.points+=1,n.points+=1,t.form.push("D"),n.form.push("D"))}),Object.values(r).sort((e,t)=>{if(t.points!==e.points)return t.points-e.points;const n=e.goalsFor-e.goalsAgainst,r=t.goalsFor-t.goalsAgainst;return r!==n?r-n:t.goalsFor-e.goalsFor})}(n,e,o):[],x=b.slice(0,5),w=e=>n.find(t=>t.name===e)||{};return a&&0===e.length?(0,yS.jsx)("div",{className:"flex h-[80vh] items-center justify-center",children:(0,yS.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,yS.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"}),(0,yS.jsx)("div",{className:"text-slate-400 font-medium animate-pulse",children:"Loading Match Data..."})]})}):(0,yS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,yS.jsxs)(JD.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-white mb-2",children:"Match Center"}),(0,yS.jsx)("p",{className:"text-slate-400",children:"Track live scores, fixtures, and statistics in real-time."})]}),(0,yS.jsxs)("div",{className:"flex flex-wrap gap-2 bg-dark-card/50 backdrop-blur-sm p-1.5 rounded-xl border border-white/5",children:[(0,yS.jsx)("button",{onClick:()=>l("All"),className:qR("px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300","All"===o?"bg-brand-500 text-white shadow-lg shadow-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:"All matches"}),r.map(e=>(0,yS.jsx)("button",{onClick:()=>l(e.name),className:qR("px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300",o===e.name?"bg-brand-500 text-white shadow-lg shadow-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:e.name},e.id))]})]}),(0,yS.jsxs)(JD.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,yS.jsxs)("div",{className:"lg:col-span-8 space-y-8",children:[(0,yS.jsxs)(JD.section,{variants:d,children:[(0,yS.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,yS.jsxs)("div",{className:"relative",children:[(0,yS.jsx)("span",{className:"h-3 w-3 absolute -top-1 -right-1 bg-red-500 rounded-full animate-ping"}),(0,yS.jsx)(XR,{className:"text-red-500"})]}),(0,yS.jsx)("h2",{className:"text-xl font-display font-bold text-white",children:"Live Now"})]}),m.length>0?(0,yS.jsx)("div",{className:"grid gap-4",children:m.map(e=>{const n=c===e.id,r=(s=e.id,i.filter(e=>e.matchId===s));var s;const a=w(e.teamA),o=w(e.teamB);return(0,yS.jsxs)(JD.div,{layout:!0,className:"glass-card rounded-2xl overflow-hidden group hover:border-brand-500/30 transition-colors",children:[(0,yS.jsxs)("div",{className:"p-5 md:p-6",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,yS.jsxs)("span",{className:"px-3 py-1 rounded-full bg-red-500/10 text-red-500 text-xs font-bold uppercase tracking-wider border border-red-500/20 flex items-center gap-2",children:[(0,yS.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse"}),"Live \u2022 ",e.currentMinute,"'"]}),(0,yS.jsxs)("div",{className:"hidden md:flex items-center gap-4 text-xs font-medium text-slate-400",children:[e.stadium&&(0,yS.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,yS.jsx)(YR,{size:14})," ",e.stadium]}),(0,yS.jsx)("span",{className:"px-2 py-1 bg-white/5 rounded text-slate-300",children:e.competition})]})]}),(0,yS.jsxs)("div",{className:"flex items-center justify-between gap-4 md:gap-8",children:[(0,yS.jsxs)("div",{className:"flex-1 flex flex-col items-center md:flex-row md:items-center gap-4 text-center md:text-left",children:[(0,yS.jsx)("div",{className:"h-12 w-12 md:h-14 md:w-14 rounded-full bg-slate-800 flex items-center justify-center text-xl font-bold text-slate-400 ring-2 ring-white/5",children:e.teamA.charAt(0)}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"text-lg md:text-xl font-bold text-white",children:e.teamA}),a.manager&&(0,yS.jsxs)("div",{className:"text-xs text-slate-500 hidden md:block",children:["Mgr: ",a.manager]})]})]}),(0,yS.jsx)("div",{className:"px-6 py-3 bg-black/40 rounded-xl border border-white/5 backdrop-blur-md",children:(0,yS.jsxs)("span",{className:"font-impact text-4xl md:text-5xl tracking-wider text-white",children:[e.scoreA," ",(0,yS.jsx)("span",{className:"text-slate-600 mx-2",children:"-"})," ",e.scoreB]})}),(0,yS.jsxs)("div",{className:"flex-1 flex flex-col items-center md:flex-row-reverse md:items-center gap-4 text-center md:text-right",children:[(0,yS.jsx)("div",{className:"h-12 w-12 md:h-14 md:w-14 rounded-full bg-slate-800 flex items-center justify-center text-xl font-bold text-slate-400 ring-2 ring-white/5",children:e.teamB.charAt(0)}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"text-lg md:text-xl font-bold text-white",children:e.teamB}),o.manager&&(0,yS.jsxs)("div",{className:"text-xs text-slate-500 hidden md:block",children:["Mgr: ",o.manager]})]})]})]}),(0,yS.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,yS.jsxs)(Re,{to:"/live/".concat(e.id),className:"flex items-center gap-2 px-5 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg text-sm font-semibold transition-all shadow-lg shadow-brand-500/20",children:[(0,yS.jsx)(XR,{size:16})," Match Center"]}),r.length>0&&(0,yS.jsxs)("button",{onClick:()=>u(n?null:e.id),className:"flex items-center gap-2 px-5 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-sm font-semibold transition-all border border-white/5",children:[(0,yS.jsx)($R,{size:16})," ",n?"Hide Lineups":"Lineups"]})]})]}),(0,yS.jsx)(oP,{children:n&&(0,yS.jsx)(JD.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-white/5 bg-black/20",children:(0,yS.jsx)("div",{className:"p-6 grid md:grid-cols-2 gap-8",children:r.map(e=>(0,yS.jsxs)("div",{children:[(0,yS.jsxs)("h4",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-4 border-b border-white/5 pb-2",children:[e.teamName," XI"]}),(0,yS.jsx)(QR,{lineup:e,players:t})]},e.id))})})})]},e.id)})}):(0,yS.jsxs)("div",{className:"p-8 rounded-2xl border border-dashed border-white/10 bg-white/5 flex flex-col items-center justify-center text-center",children:[(0,yS.jsx)(JR,{className:"w-10 h-10 text-slate-500 mb-3"}),(0,yS.jsx)("h3",{className:"text-slate-300 font-medium",children:"No Live Matches"}),(0,yS.jsx)("p",{className:"text-slate-500 text-sm",children:"Check upcoming fixtures below."})]})]}),(0,yS.jsxs)(JD.section,{variants:d,children:[(0,yS.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yS.jsxs)("h2",{className:"text-xl font-display font-bold text-white flex items-center gap-2",children:[(0,yS.jsx)(ZR,{className:"text-brand-400",size:20})," Upcoming"]})}),(0,yS.jsx)("div",{className:"grid gap-3 max-h-[400px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",children:g.length>0?g.map(e=>(0,yS.jsxs)("div",{className:"group relative bg-dark-card hover:bg-dark-surface p-4 rounded-xl border border-white/5 hover:border-brand-500/30 transition-all duration-300 flex flex-col sm:flex-row items-center justify-between gap-4 shrink-0",children:[(0,yS.jsxs)("div",{className:"flex-shrink-0 flex sm:flex-col items-center gap-2 sm:gap-0 px-3 py-2 bg-white/5 rounded-lg border border-white/5 min-w-[70px] text-center",children:[(0,yS.jsx)("span",{className:"text-xs font-bold text-brand-400 uppercase",children:e.date?new Date(e.date).toLocaleDateString("en-US",{month:"short"}):"TBA"}),(0,yS.jsx)("span",{className:"text-lg font-bold text-white",children:e.date?new Date(e.date).toLocaleDateString("en-US",{day:"numeric"}):"-"}),(0,yS.jsx)("span",{className:"text-[10px] text-slate-400 mt-0.5",children:e.time||"TBD"})]}),(0,yS.jsxs)("div",{className:"flex-grow flex flex-col md:flex-row items-center gap-6 justify-center",children:[(0,yS.jsx)("div",{className:"flex items-center gap-3 w-1/3 justify-end text-right",children:(0,yS.jsx)("span",{className:"font-bold text-slate-200",children:e.teamA})}),(0,yS.jsx)("div",{className:"px-3 py-1 bg-black/30 rounded text-xs font-medium text-slate-500",children:"VS"}),(0,yS.jsx)("div",{className:"flex items-center gap-3 w-1/3 justify-start text-left",children:(0,yS.jsx)("span",{className:"font-bold text-slate-200",children:e.teamB})})]}),(0,yS.jsx)("div",{className:"flex-shrink-0 flex items-center gap-3 opacity-50 group-hover:opacity-100 transition-opacity",children:(0,yS.jsx)("span",{className:"text-xs text-slate-400 bg-white/5 px-2 py-1 rounded",children:e.competition})}),(0,yS.jsx)(Re,{to:"/live/".concat(e.id),className:"absolute inset-0"})]},e.id)):(0,yS.jsx)("div",{className:"text-slate-500 text-sm text-center py-6",children:"No upcoming matches scheduled."})})]}),(0,yS.jsxs)(JD.section,{variants:d,children:[(0,yS.jsxs)("h2",{className:"text-xl font-display font-bold text-white mb-4 flex items-center gap-2",children:[(0,yS.jsx)(JR,{className:"text-slate-400",size:20})," Recent Results"]}),(0,yS.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:y.length>0?y.map(e=>(0,yS.jsx)("div",{className:"p-4 rounded-xl bg-dark-card border border-white/5 flex flex-col gap-3 group hover:bg-dark-surface hover:border-brand-500/30 transition-all cursor-pointer",children:(0,yS.jsxs)(Re,{to:"/live/".concat(e.id),className:"block",children:[(0,yS.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,yS.jsx)("span",{children:e.competition}),(0,yS.jsx)("span",{children:e.date&&new Date(e.date).toLocaleDateString()})]}),(0,yS.jsx)("div",{className:"flex justify-between items-center",children:(0,yS.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yS.jsx)("span",{className:qR("font-medium",e.scoreA>e.scoreB?"text-white":"text-slate-400"),children:e.teamA}),(0,yS.jsx)("span",{className:qR("font-bold px-2 py-0.5 rounded",e.scoreA>e.scoreB?"bg-brand-500/10 text-brand-400":"bg-white/5 text-slate-500"),children:e.scoreA})]}),(0,yS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yS.jsx)("span",{className:qR("font-medium",e.scoreB>e.scoreA?"text-white":"text-slate-400"),children:e.teamB}),(0,yS.jsx)("span",{className:qR("font-bold px-2 py-0.5 rounded",e.scoreB>e.scoreA?"bg-brand-500/10 text-brand-400":"bg-white/5 text-slate-500"),children:e.scoreB})]})]})}),(0,yS.jsx)("div",{className:"mt-3 pt-2 border-t border-white/5 text-center",children:(0,yS.jsx)("span",{className:"text-[10px] font-bold text-brand-400 uppercase tracking-widest group-hover:text-brand-300 transition-colors",children:"Match Report \u2192"})})]})},e.id)):(0,yS.jsx)("div",{className:"text-slate-500 text-sm",children:"No recent matches."})})]})]}),(0,yS.jsxs)("div",{className:"lg:col-span-4 space-y-8",children:[(0,yS.jsxs)(JD.div,{variants:d,className:"glass-card rounded-2xl p-6",children:[(0,yS.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yS.jsxs)("h3",{className:"font-display font-bold text-white flex items-center gap-2",children:[(0,yS.jsx)(yP,{size:18,className:"text-yellow-500"})," Standings"]}),(0,yS.jsxs)(Re,{to:"/leaderboard",className:"text-xs text-brand-400 hover:text-brand-300 font-medium flex items-center",children:["View All ",(0,yS.jsx)(TP,{size:14})]})]}),"All"===o?(0,yS.jsxs)("div",{className:"text-center py-8 px-4 bg-white/5 rounded-xl border border-dashed border-white/10",children:[(0,yS.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:"Select a tournament filter"}),(0,yS.jsx)("p",{className:"text-xs text-slate-500",children:"Choose a competition from the top to view its table."})]}):x.length>0?(0,yS.jsx)("div",{className:"overflow-hidden rounded-xl border border-white/5",children:(0,yS.jsxs)("table",{className:"w-full text-sm",children:[(0,yS.jsx)("thead",{className:"bg-white/5 text-slate-400 text-xs uppercase",children:(0,yS.jsxs)("tr",{children:[(0,yS.jsx)("th",{className:"py-2.5 px-3 text-left font-semibold",children:"Club"}),(0,yS.jsx)("th",{className:"py-2.5 px-3 text-center font-semibold",children:"P"}),(0,yS.jsx)("th",{className:"py-2.5 px-3 text-center font-semibold text-white",children:"Pts"})]})}),(0,yS.jsx)("tbody",{className:"divide-y divide-white/5 bg-black/20",children:x.map((e,t)=>(0,yS.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,yS.jsx)("td",{className:"py-2.5 px-3",children:(0,yS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yS.jsx)("span",{className:qR("text-xs font-bold w-4 text-slate-500",0===t&&"text-yellow-500",1===t&&"text-slate-300",2===t&&"text-amber-700"),children:t+1}),(0,yS.jsx)("span",{className:"font-medium text-slate-200 truncate max-w-[100px]",children:e.name})]})}),(0,yS.jsx)("td",{className:"py-2.5 px-3 text-center text-slate-400 text-xs",children:e.played}),(0,yS.jsx)("td",{className:"py-2.5 px-3 text-center font-bold text-white",children:e.points})]},e.id))})]})}):(0,yS.jsx)("div",{className:"text-slate-500 text-sm text-center",children:"No standings data."})]}),(0,yS.jsxs)(JD.div,{variants:d,className:"glass-card rounded-2xl p-6",children:[(0,yS.jsxs)("h3",{className:"font-display font-bold text-white mb-6 flex items-center gap-2",children:[(0,yS.jsx)(eM,{size:18,className:"text-brand-400"})," Top Performers"]}),(0,yS.jsx)("div",{className:"space-y-4",children:v.length>0?v.map((e,t)=>(0,yS.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,yS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yS.jsxs)("div",{className:"relative",children:[(0,yS.jsx)("div",{className:"h-10 w-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold border border-white/5",children:e.name.charAt(0)}),(0,yS.jsx)("div",{className:"absolute -bottom-1 -right-1 h-4 w-4 rounded-full bg-dark-bg border border-white/10 flex items-center justify-center text-[10px] text-slate-400 font-bold",children:t+1})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-bold text-sm text-white group-hover:text-brand-400 transition-colors",children:e.name}),(0,yS.jsx)("div",{className:"text-xs text-slate-500",children:e.team})]})]}),(0,yS.jsxs)("div",{className:"text-right",children:[(0,yS.jsx)("span",{className:"text-lg font-impact text-brand-500",children:e.goals}),(0,yS.jsx)("span",{className:"block text-[10px] text-slate-500 uppercase font-bold",children:"Goals"})]})]},e.id)):(0,yS.jsx)("div",{className:"text-slate-500 text-sm",children:"No player stats available."})}),(0,yS.jsx)("div",{className:"mt-6 pt-4 border-t border-white/5",children:(0,yS.jsx)(Re,{to:"/players",className:"block w-full text-center py-2 text-xs font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:"View Player Stats"})})]})]})]})]})},nM=()=>{const{tournaments:e,loading:t}=WR(),{isAdmin:n}=bS();return t&&0===e.length?(0,yS.jsx)("div",{className:"text-center text-white py-20",children:"Loading Tournaments..."}):(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,yS.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Tournaments"}),n&&(0,yS.jsxs)(Re,{to:"/admin/tournaments",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded flex items-center",children:[(0,yS.jsx)("span",{className:"mr-2",children:"+"})," Add Tournament"]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(e=>(0,yS.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300",children:(0,yS.jsxs)("div",{className:"p-6",children:[(0,yS.jsx)("div",{className:"flex justify-between items-start",children:(0,yS.jsxs)("div",{children:[(0,yS.jsx)("h2",{className:"text-xl font-bold text-white",children:e.name}),(0,yS.jsx)("div",{className:"mt-2 flex items-center",children:(0,yS.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("ongoing"===e.status?"bg-green-100 text-green-800":"finished"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]})}),(0,yS.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("p",{className:"text-gray-400",children:"Start Date"}),(0,yS.jsx)("p",{className:"text-white",children:e.startDate?new Date(e.startDate).toLocaleDateString():"TBD"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("p",{className:"text-gray-400",children:"End Date"}),(0,yS.jsx)("p",{className:"text-white",children:e.endDate?new Date(e.endDate).toLocaleDateString():"TBD"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("p",{className:"text-gray-400",children:"Teams"}),(0,yS.jsx)("p",{className:"text-white",children:e.teamsCount})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("p",{className:"text-gray-400",children:"Matches"}),(0,yS.jsx)("p",{className:"text-white",children:e.matchesCount})]})]}),(0,yS.jsx)("div",{className:"mt-6",children:(0,yS.jsx)(Re,{to:"/leaderboard",className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"View Details"})})]})},e.id)),0===e.length&&(0,yS.jsx)("div",{className:"col-span-full text-center text-gray-400 py-10",children:"No tournaments found."})]})]})},rM=pP("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sM=pP("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),iM=()=>{const{teams:e,loading:t}=WR(),{isAdmin:n}=bS(),[r,i]=(0,s.useState)(""),a={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};if(t&&0===e.length)return(0,yS.jsx)("div",{className:"flex h-[80vh] items-center justify-center",children:(0,yS.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,yS.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"}),(0,yS.jsx)("div",{className:"text-slate-400 font-medium animate-pulse",children:"Loading Teams..."})]})});const o=e.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()));return(0,yS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,yS.jsxs)(JD.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-white mb-2",children:"Clubs"}),(0,yS.jsx)("p",{className:"text-slate-400",children:"Manage and view all competing teams."})]}),n&&(0,yS.jsxs)(Re,{to:"/admin/teams",className:"flex items-center gap-2 px-5 py-2.5 bg-brand-600 hover:bg-brand-500 text-white rounded-xl text-sm font-semibold transition-all shadow-lg shadow-brand-500/20 hover:scale-105 active:scale-95",children:[(0,yS.jsx)(rM,{size:18})," Add New Team"]})]}),(0,yS.jsxs)(JD.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"relative max-w-md",children:[(0,yS.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yS.jsx)(sM,{className:"h-5 w-5 text-slate-500"})}),(0,yS.jsx)("input",{type:"text",placeholder:"Search teams...",className:"block w-full pl-10 pr-3 py-3 border border-white/10 rounded-xl leading-5 bg-white/5 text-slate-300 placeholder-slate-500 focus:outline-none focus:bg-white/10 focus:ring-1 focus:ring-brand-500/50 focus:border-brand-500/50 sm:text-sm transition-colors",value:r,onChange:e=>i(e.target.value)})]}),(0,yS.jsx)(JD.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>(0,yS.jsxs)(JD.div,{variants:a,whileHover:{y:-5},className:"group relative glass-card rounded-2xl overflow-hidden hover:border-brand-500/30 transition-all duration-300",children:[(0,yS.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-brand-500/20 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,yS.jsxs)("div",{className:"p-6 flex items-start space-x-5 relative z-10",children:[(0,yS.jsx)("div",{className:"flex-shrink-0 h-20 w-20 rounded-2xl bg-slate-800 border border-white/5 flex items-center justify-center text-3xl font-display font-bold text-slate-600 shadow-inner group-hover:border-brand-500/20 group-hover:text-brand-500 transition-colors",children:e.logoUrl?(0,yS.jsx)("img",{src:e.logoUrl,alt:e.name,className:"h-full w-full rounded-2xl object-cover"}):(0,yS.jsx)("span",{children:e.name.charAt(0)})}),(0,yS.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yS.jsx)("h2",{className:"text-xl font-display font-bold text-white truncate mb-1",children:e.name}),(0,yS.jsxs)("div",{className:"flex flex-col gap-1.5 text-sm text-slate-400",children:[(0,yS.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,yS.jsx)(YR,{size:14,className:"text-slate-500"}),(0,yS.jsx)("span",{className:"truncate",children:e.stadium||"Unknown Stadium"})]}),(0,yS.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,yS.jsx)(wP,{size:14,className:"text-slate-500"}),(0,yS.jsxs)("span",{className:"truncate",children:["Mgr: ",e.manager||e.coach||"N/A"]})]})]})]})]}),(0,yS.jsxs)("div",{className:"px-6 py-4 border-t border-white/5 bg-black/20 flex justify-between items-center relative z-10",children:[(0,yS.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[(0,yS.jsx)(vP,{size:14}),(0,yS.jsxs)("span",{children:["Squad: ",e.players||0]})]}),(0,yS.jsx)("span",{className:qR("text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border tracking-wide","Inactive"===e.status?"bg-slate-800 text-slate-400 border-slate-700":"Suspended"===e.status?"bg-red-900/20 text-red-500 border-red-500/20":"Dissolved"===e.status?"bg-black text-slate-600 border-slate-800":"bg-green-500/10 text-brand-400 border-brand-500/20"),children:e.status||"Active"})]})]},e.id))}),0===o.length&&(0,yS.jsxs)(JD.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[(0,yS.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/5 text-slate-500 mb-4",children:(0,yS.jsx)(yP,{size:32,strokeWidth:1.5})}),(0,yS.jsx)("h3",{className:"text-lg font-medium text-white mb-1",children:"No teams found"}),(0,yS.jsx)("p",{className:"text-slate-400",children:"Try adjusting your search criteria."})]})]})},aM=pP("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),oM=pP("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),lM=pP("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),cM=()=>{const{players:e,loading:t}=WR(),[n,r]=(0,s.useState)("All"),[i,a]=(0,s.useState)(""),{isAdmin:o}=bS(),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)({}),h=(e,t,n)=>{d(r=>At(At({},r),{},{[e]:At(At({},r[e]),{},{[t]:Number(n)})}))},f=e.filter(e=>{const t="All"===n||e.position===n,r=e.name.toLowerCase().includes(i.toLowerCase())||e.team.toLowerCase().includes(i.toLowerCase());return t&&r});return t&&0===e.length?(0,yS.jsx)("div",{className:"flex h-[80vh] items-center justify-center",children:(0,yS.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,yS.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"}),(0,yS.jsx)("div",{className:"text-slate-400 font-medium animate-pulse",children:"Loading Players..."})]})}):(0,yS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,yS.jsxs)(JD.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("h1",{className:"text-3xl md:text-4xl font-display font-bold text-white mb-2",children:"Players"}),(0,yS.jsx)("p",{className:"text-slate-400",children:"View performance stats and player details."})]}),o&&(0,yS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yS.jsxs)(Re,{to:"/admin/players",className:"flex items-center gap-2 px-4 py-2 bg-brand-600 hover:bg-brand-500 text-white rounded-lg text-sm font-semibold transition-all shadow-lg shadow-brand-500/20",children:[(0,yS.jsx)(rM,{size:16})," Add Player"]}),l?(0,yS.jsxs)(yS.Fragment,{children:[(0,yS.jsxs)("button",{onClick:async()=>{if(window.confirm("Save all changes?"))try{const e=Object.entries(u).map(e=>{let[t,n]=e;return _k(Sw(pS,"players",t),n)});await Promise.all(e),d({}),c(!1),alert("Changes saved!")}catch(e){console.error("Save failed:",e),alert("Error saving changes")}},className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-400 text-white rounded-lg text-sm font-medium transition-colors",children:[(0,yS.jsx)(aM,{size:16})," Save"]}),(0,yS.jsxs)("button",{onClick:()=>{c(!1),d({})},className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 rounded-lg text-sm font-medium transition-colors",children:[(0,yS.jsx)(EP,{size:16})," Cancel"]})]}):(0,yS.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 text-white border border-white/5 rounded-lg text-sm font-medium transition-colors",children:[(0,yS.jsx)(oM,{size:16})," Quick Edit"]})]})]}),(0,yS.jsxs)(JD.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex flex-col sm:flex-row gap-4",children:[(0,yS.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,yS.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yS.jsx)(sM,{className:"h-5 w-5 text-slate-500"})}),(0,yS.jsx)("input",{type:"text",placeholder:"Search players or teams...",className:"block w-full pl-10 pr-3 py-2.5 border border-white/10 rounded-xl leading-5 bg-white/5 text-slate-300 placeholder-slate-500 focus:outline-none focus:bg-white/10 focus:ring-1 focus:ring-brand-500/50 focus:border-brand-500/50 sm:text-sm transition-colors",value:i,onChange:e=>a(e.target.value)})]}),(0,yS.jsxs)("div",{className:"relative max-w-xs",children:[(0,yS.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yS.jsx)(lM,{className:"h-4 w-4 text-slate-500"})}),(0,yS.jsx)("select",{className:"block w-full pl-9 pr-10 py-2.5 border border-white/10 rounded-xl leading-5 bg-dark-card text-slate-300 focus:outline-none focus:ring-1 focus:ring-brand-500/50 sm:text-sm appearance-none cursor-pointer",value:n,onChange:e=>r(e.target.value),children:["All","Forward","Midfielder","Defender","Goalkeeper"].map(e=>(0,yS.jsx)("option",{value:e,children:"All"===e?"All Positions":e},e))})]})]}),(0,yS.jsxs)(JD.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card rounded-2xl overflow-hidden border border-white/5",children:[(0,yS.jsx)("div",{className:"overflow-x-auto",children:(0,yS.jsxs)("table",{className:"min-w-full divide-y divide-white/5",children:[(0,yS.jsx)("thead",{className:"bg-white/5",children:(0,yS.jsxs)("tr",{children:[(0,yS.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Player"}),(0,yS.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Team"}),(0,yS.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Position"}),(0,yS.jsx)("th",{className:"px-6 py-4 text-center text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Matches"}),(0,yS.jsx)("th",{className:"px-6 py-4 text-center text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Goals"}),(0,yS.jsx)("th",{className:"px-6 py-4 text-center text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Assists"}),(0,yS.jsx)("th",{className:"px-6 py-4 text-center text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Cards"})]})}),(0,yS.jsx)("tbody",{className:"divide-y divide-white/5 bg-transparent",children:f.map(e=>{const t=u[e.id],n=At(At({},e),t);return(0,yS.jsxs)("tr",{className:"hover:bg-white/5 transition-colors group",children:[(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yS.jsx)("div",{className:"h-8 w-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-300",children:e.name.charAt(0)}),(0,yS.jsx)("div",{className:"text-sm font-medium text-white",children:e.name})]})}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yS.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[(0,yS.jsx)(vP,{size:14,className:"text-slate-500"}),e.team]})}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yS.jsx)("span",{className:qR("px-2.5 py-0.5 rounded-full text-xs font-medium border","Forward"===e.position?"bg-red-500/10 text-red-400 border-red-500/20":"Midfielder"===e.position?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":"Defender"===e.position?"bg-blue-500/10 text-blue-400 border-blue-500/20":"bg-green-500/10 text-green-400 border-green-500/20"),children:e.position})}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l?(0,yS.jsx)("input",{type:"number",className:"w-16 bg-black/50 border border-white/10 rounded px-2 py-1 text-white text-center focus:ring-1 focus:ring-brand-500 outline-none",value:n.matches||0,onChange:t=>h(e.id,"matches",t.target.value)}):(0,yS.jsx)("span",{className:"text-sm text-slate-400",children:n.matches})}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l?(0,yS.jsx)("input",{type:"number",className:"w-16 bg-black/50 border border-white/10 rounded px-2 py-1 text-white text-center focus:ring-1 focus:ring-brand-500 outline-none",value:n.goals||0,onChange:t=>h(e.id,"goals",t.target.value)}):(0,yS.jsx)("span",{className:qR("text-sm font-bold",n.goals>0?"text-brand-400":"text-slate-600"),children:n.goals||0})}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l?(0,yS.jsx)("input",{type:"number",className:"w-16 bg-black/50 border border-white/10 rounded px-2 py-1 text-white text-center focus:ring-1 focus:ring-brand-500 outline-none",value:n.assists||0,onChange:t=>h(e.id,"assists",t.target.value)}):(0,yS.jsx)("span",{className:qR("text-sm font-medium",n.assists>0?"text-blue-400":"text-slate-600"),children:n.assists||0})}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yS.jsxs)("div",{className:"flex justify-center gap-1",children:[Array(n.yellowCards||0).fill(0).map((e,t)=>(0,yS.jsx)("div",{className:"h-4 w-3 bg-yellow-400 rounded-sm shadow-sm"},"y-".concat(t))),Array(n.redCards||0).fill(0).map((e,t)=>(0,yS.jsx)("div",{className:"h-4 w-3 bg-red-500 rounded-sm shadow-sm"},"r-".concat(t))),!n.yellowCards&&!n.redCards&&(0,yS.jsx)("span",{className:"text-slate-700",children:"-"})]})})]},e.id)})})]})}),0===f.length&&(0,yS.jsxs)("div",{className:"text-center py-20",children:[(0,yS.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/5 text-slate-500 mb-4",children:(0,yS.jsx)(bP,{size:32,strokeWidth:1.5})}),(0,yS.jsx)("h3",{className:"text-lg font-medium text-white mb-1",children:"No players found"}),(0,yS.jsx)("p",{className:"text-slate-400",children:"Try adjusting your filters."})]})]})]})},uM=()=>{const{teams:e,matches:t,tournaments:n,loading:r}=WR(),[i,a]=(0,s.useState)("All"),o=["All",...n.map(e=>e.name)],l=(()=>{if(r||0===e.length)return[];const n={};e.filter(e=>{if("All"===i)return!0;return(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(i)}).forEach(e=>{n[e.name]={id:e.id,name:e.name,shortName:e.shortName||e.name.substring(0,3).toUpperCase(),played:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,points:0,form:[]}});return t.filter(e=>("All"===i||!i||e.competition===i)&&"finished"===e.status).forEach(e=>{const t=n[e.teamA],r=n[e.teamB];if(!t||!r)return;t.played++,r.played++;const s=Number(e.scoreA),i=Number(e.scoreB);t.goalsFor+=s,t.goalsAgainst+=i,r.goalsFor+=i,r.goalsAgainst+=s,s>i?(t.wins++,t.points+=3,r.losses++,t.form.push("W"),r.form.push("L")):s<i?(r.wins++,r.points+=3,t.losses++,r.form.push("W"),t.form.push("L")):(t.draws++,r.draws++,t.points+=1,r.points+=1,t.form.push("D"),r.form.push("D"))}),Object.values(n).sort((e,t)=>{if(t.points!==e.points)return t.points-e.points;const n=e.goalsFor-e.goalsAgainst,r=t.goalsFor-t.goalsAgainst;return r!==n?r-n:t.goalsFor-e.goalsFor})})();return r&&0===e.length?(0,yS.jsx)("div",{className:"text-center text-white py-20",children:"Loading Standings..."}):(0,yS.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,yS.jsxs)("div",{className:"mb-8",children:[(0,yS.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:"Leaderboard"}),(0,yS.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[o.length>1&&o.map(e=>(0,yS.jsx)("button",{onClick:()=>a("All"===e?"All":e),className:"px-4 py-2 rounded-md font-medium ".concat(i===e||"All"===i&&"All"===e?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e},e)),0===n.length&&(0,yS.jsx)("div",{className:"text-gray-400",children:"No tournaments found."})]}),(0,yS.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,yS.jsxs)("div",{className:"overflow-x-auto",children:[(0,yS.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,yS.jsx)("thead",{className:"bg-gray-700",children:(0,yS.jsxs)("tr",{children:[(0,yS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"#"}),(0,yS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Team"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"P"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"W"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"D"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"L"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"GF"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"GA"}),(0,yS.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"GD"}),(0,yS.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"PTS"}),(0,yS.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Form"})]})}),(0,yS.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:l.map((e,t)=>{const n=e.goalsFor-e.goalsAgainst;return(0,yS.jsxs)("tr",{className:"hover:bg-gray-700 transition-colors",children:[(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-300",children:t+1}),(0,yS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-white font-medium",children:e.name}),(0,yS.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.played}),(0,yS.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.wins}),(0,yS.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.draws}),(0,yS.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.losses}),(0,yS.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.goalsFor}),(0,yS.jsx)("td",{className:"px-3 py-4 text-center text-gray-300",children:e.goalsAgainst}),(0,yS.jsxs)("td",{className:"px-3 py-4 text-center font-medium ".concat(n>0?"text-green-400":n<0?"text-red-400":"text-gray-300"),children:[n>0?"+":"",n]}),(0,yS.jsx)("td",{className:"px-6 py-4 text-center font-bold text-yellow-400",children:e.points}),(0,yS.jsx)("td",{className:"px-6 py-4",children:(0,yS.jsx)("div",{className:"flex justify-center space-x-1",children:e.form.slice(-5).map((e,t)=>(0,yS.jsx)("span",{className:"w-5 h-5 flex items-center justify-center rounded-full text-xs text-white ".concat("W"===e?"bg-green-500":"D"===e?"bg-yellow-500":"bg-red-500"),children:e},t))})})]},e.id)})})]}),0===l.length&&(0,yS.jsx)("div",{className:"text-center py-10 text-gray-400",children:"No standings data available. Add teams and finish matches to see them here."})]})})]})})},dM=e=>{var t,n;let{lineup:r,players:i,onSubstitutionComplete:a}=e;const[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1),f=e=>i.find(t=>t.id===e);return(0,yS.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg border-2 border-yellow-500",children:[(0,yS.jsx)("h3",{className:"text-lg font-bold mb-4 text-yellow-400 flex items-center",children:"\ud83d\udd04 Make Substitution"}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Player to Replace (Starting 11)"}),(0,yS.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600",children:[(0,yS.jsx)("option",{value:"",children:"Select player to replace"}),r.starting11.map(e=>{const t=f(e);return t?(0,yS.jsxs)("option",{value:e,children:[t.name," (",t.position,")"]},e):null})]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Substitute (Bench)"}),(0,yS.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600",children:[(0,yS.jsx)("option",{value:"",children:"Select substitute"}),r.bench&&r.bench.map(e=>{const t=f(e);return t?(0,yS.jsxs)("option",{value:e,children:[t.name," (",t.position,")"]},e):null})]})]})]}),o&&c&&(0,yS.jsx)("div",{className:"bg-gray-700 p-3 rounded mb-4 text-sm",children:(0,yS.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,yS.jsxs)("span",{className:"text-red-400",children:["\u2b07\ufe0f ",null===(t=f(o))||void 0===t?void 0:t.name]}),(0,yS.jsx)("span",{className:"text-gray-400",children:"\u2192"}),(0,yS.jsxs)("span",{className:"text-green-400",children:["\u2b06\ufe0f ",null===(n=f(c))||void 0===n?void 0:n.name]})]})}),(0,yS.jsx)("button",{onClick:async()=>{if(o&&c){h(!0);try{const t=f(o),n=f(c),s=r.starting11.map(e=>e===o?c:e),i=r.bench.map(e=>e===c?o:e);if(await _k(Sw(pS,"lineups",r.id),{starting11:s,bench:i,lastSubstitution:{playerOut:o,playerIn:c,playerOutName:null===t||void 0===t?void 0:t.name,playerInName:null===n||void 0===n?void 0:n.name,timestamp:new Date}}),r.matchId)try{await Ak(Ew(pS,"matches",r.matchId,"events"),{type:"substitution",team:r.teamName,playerOut:(null===t||void 0===t?void 0:t.name)||"Unknown",playerIn:(null===n||void 0===n?void 0:n.name)||"Unknown",minute:(new Date).getMinutes(),timestamp:new Date})}catch(e){console.error("Error adding substitution event:",e)}l(""),u(""),a&&a(),alert("Substitution: ".concat(null===t||void 0===t?void 0:t.name," \u27a1\ufe0f ").concat(null===n||void 0===n?void 0:n.name))}catch(e){console.error("Error making substitution:",e),alert("Error making substitution: "+e.message)}finally{h(!1)}}else alert("Please select both a player to replace and a substitute")},disabled:!o||!c||d,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded transition-colors",children:d?"Making Substitution...":"Confirm Substitution"}),(0,yS.jsx)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"This will swap the selected players between starting 11 and bench"})]})},hM=()=>{const{matchId:e}=function(){let{matches:e}=s.useContext(J),t=e[e.length-1];return t?t.params:{}}(),[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)([]),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[p,m]=(0,s.useState)(!0),[g,y]=(0,s.useState)(""),{isAdmin:v}=bS(),{players:b,lineups:x,teams:w}=WR();(0,s.useEffect)(()=>{const t=jk(Sw(pS,"matches",e),e=>{e.exists()?(n(At({id:e.id},e.data())),m(!1)):(y("Match not found"),m(!1))},e=>{console.error("Error getting match:",e),y("Error loading match data"),m(!1)}),r=jk(Ew(pS,"matches",e,"events"),e=>{const t=[];e.forEach(e=>{t.push(At({id:e.id},e.data()))}),i(t.sort((e,t)=>t.minute-e.minute))},e=>{console.error("Error getting events:",e)});return()=>{t(),r()}},[e]),(0,s.useEffect)(()=>{if(e&&x){const t=x.filter(t=>t.matchId===e);o(t)}},[e,x]);const k=async(n,r)=>{const s="A"===n?"scoreA":"scoreB",i=(t[s]||0)+1;try{if(await _k(Sw(pS,"matches",e),{[s]:i}),await Ak(Ew(pS,"matches",e,"events"),{type:"goal",team:"A"===n?t.teamA:t.teamB,minute:t.currentMinute||0,player:r?r.name:"Unknown Player",playerId:r?r.id:null,timestamp:Date.now()}),r&&r.id){const e=Sw(pS,"players",r.id),t=b.find(e=>e.id===r.id);await _k(e,{goals:((null===t||void 0===t?void 0:t.goals)||0)+1})}d(null)}catch(a){console.error("Error recording goal:",a),alert("Error recording goal. Check console.")}},E=async(n,r)=>{if(r>0)return void(e=>{d({team:e})})(n);if(r<0)return void(e=>{f({team:e})})(n);const s="A"===n?"scoreA":"scoreB",i=(t[s]||0)+r;if(!(i<0))try{await _k(Sw(pS,"matches",e),{[s]:i})}catch(a){console.error("Error updating score:",a)}},S=async n=>{const r=(t.currentMinute||0)+n;if(!(r<0))try{await _k(Sw(pS,"matches",e),{currentMinute:r})}catch(s){console.error("Error updating minute:",s)}};return p?(0,yS.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,yS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):g?(0,yS.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:[(0,yS.jsx)("p",{className:"font-bold",children:"Error"}),(0,yS.jsx)("p",{children:g})]}):t?(0,yS.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,yS.jsxs)("div",{className:"max-w-4xl mx-auto",children:[v&&(0,yS.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 border border-green-600",children:[(0,yS.jsx)("h3",{className:"text-green-400 font-bold mb-2",children:"Admin Controls (Live Updates)"}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,yS.jsxs)("div",{className:"p-2 border border-gray-600 rounded",children:[(0,yS.jsx)("p",{className:"text-white mb-2",children:t.teamA}),(0,yS.jsx)("button",{onClick:()=>E("A",1),className:"bg-green-600 text-white px-3 py-1 rounded mx-1 hover:bg-green-700",children:"+ Goal"}),(0,yS.jsx)("button",{onClick:()=>E("A",-1),className:"bg-red-600 text-white px-3 py-1 rounded mx-1 hover:bg-red-700",children:"- Goal"})]}),(0,yS.jsxs)("div",{className:"p-2 border border-gray-600 rounded",children:[(0,yS.jsxs)("p",{className:"text-white mb-2",children:["Minute: ",t.currentMinute,"'"]}),(0,yS.jsx)("button",{onClick:()=>S(-1),className:"bg-red-600 text-white px-3 py-1 rounded mx-1 hover:bg-red-700",children:"-1 Min"}),(0,yS.jsx)("button",{onClick:()=>S(1),className:"bg-blue-600 text-white px-3 py-1 rounded mx-1 hover:bg-blue-700",children:"+1 Min"}),(0,yS.jsx)("button",{onClick:()=>S(5),className:"bg-blue-600 text-white px-3 py-1 rounded mx-1 hover:bg-blue-700",children:"+5 Min"}),(0,yS.jsx)("div",{className:"mt-2",children:(0,yS.jsx)("button",{onClick:async()=>{const n="live"===t.status?"finished":"live";try{await _k(Sw(pS,"matches",e),{status:n})}catch(r){console.error("Error updating status:",r)}},className:"px-4 py-1 rounded text-white ".concat("live"===t.status?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"),children:"live"===t.status?"End Match":"Start Match"})})]}),(0,yS.jsxs)("div",{className:"p-2 border border-gray-600 rounded",children:[(0,yS.jsx)("p",{className:"text-white mb-2",children:t.teamB}),(0,yS.jsx)("button",{onClick:()=>E("B",1),className:"bg-green-600 text-white px-3 py-1 rounded mx-1 hover:bg-green-700",children:"+ Goal"}),(0,yS.jsx)("button",{onClick:()=>E("B",-1),className:"bg-red-600 text-white px-3 py-1 rounded mx-1 hover:bg-red-700",children:"- Goal"})]})]}),u&&(0,yS.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg border border-yellow-500 shadow-xl",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,yS.jsxs)("h4",{className:"text-yellow-400 font-bold uppercase tracking-wider",children:["Select Scorer for ","A"===u.team?t.teamA:t.teamB]}),(0,yS.jsx)("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-white",children:(0,yS.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:[b.filter(e=>e.team===("A"===u.team?t.teamA:t.teamB)).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,yS.jsx)("button",{onClick:()=>k(u.team,e),className:"bg-gray-600 hover:bg-green-600 text-white text-xs py-2 px-3 rounded transition-colors text-left truncate",title:e.name,children:e.name},e.id)),(0,yS.jsx)("button",{onClick:()=>k(u.team,null),className:"bg-gray-500 hover:bg-gray-400 text-white text-xs py-2 px-3 rounded transition-colors",children:"Unknown Player"})]})]}),h&&(0,yS.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg border border-red-500 shadow-xl",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,yS.jsxs)("h4",{className:"text-red-400 font-bold uppercase tracking-wider",children:["Cancel Goal for ","A"===h.team?t.teamA:t.teamB]}),(0,yS.jsx)("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-white",children:(0,yS.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,yS.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:r.filter(e=>"goal"===e.type&&e.team===("A"===h.team?t.teamA:t.teamB)).length>0?r.filter(e=>"goal"===e.type&&e.team===("A"===h.team?t.teamA:t.teamB)).map(n=>(0,yS.jsxs)("div",{className:"flex justify-between items-center bg-gray-600 p-2 rounded",children:[(0,yS.jsxs)("span",{className:"text-sm text-white",children:[n.player," (",n.minute,"')"]}),(0,yS.jsx)("button",{onClick:()=>(async n=>{const r="A"===(n.team===t.teamA?"A":"B")?"scoreA":"scoreB",s=Math.max(0,(t[r]||0)-1);try{if(await _k(Sw(pS,"matches",e),{[r]:s}),await Ck(Sw(pS,"matches",e,"events",n.id)),n.playerId){const e=Sw(pS,"players",n.playerId),t=b.find(e=>e.id===n.playerId);t&&await _k(e,{goals:Math.max(0,(t.goals||0)-1)})}f(null)}catch(i){console.error("Error cancelling goal:",i),alert("Error cancelling goal. Check console.")}})(n),className:"bg-red-600 hover:bg-red-700 text-white text-[10px] py-1 px-3 rounded font-bold uppercase transition-colors",children:"Revoke"})]},n.id)):(0,yS.jsx)("div",{className:"text-center text-gray-400 py-4 text-sm",children:"No goal events found to cancel."})})]})]}),(0,yS.jsxs)("div",{className:"bg-gray-800 rounded-t-lg p-6 text-center shadow-lg border-b border-gray-700",children:[(0,yS.jsxs)("div",{className:"text-sm text-gray-400 mb-2 uppercase tracking-[0.2em]",children:[t.competition," \u2022 ","live"===t.status?"Live":"Finished"]}),(0,yS.jsx)("div",{className:"text-[11px] text-gray-500 mb-4 flex items-center justify-center gap-1",children:(0,yS.jsxs)("span",{children:["\ud83c\udfdf\ufe0f ",t.stadium||(T=t.teamA,(w||[]).find(e=>e.name===T)||{}).stadium||"Unknown Stadium"]})}),(0,yS.jsxs)("div",{className:"flex items-start justify-center space-x-4",children:[(0,yS.jsxs)("div",{className:"flex-1 text-right",children:[(0,yS.jsx)("div",{className:"text-2xl font-bold text-white",children:t.teamA}),(0,yS.jsxs)("div",{className:"text-xs text-gray-400 mb-3 italic",children:["Manager: ",t.managerA||"N/A"]}),(0,yS.jsx)("div",{className:"space-y-1",children:r.filter(e=>"goal"===e.type&&e.team===t.teamA).sort((e,t)=>e.minute-t.minute).map((e,t)=>(0,yS.jsxs)("div",{className:"text-[11px] text-gray-300 flex items-center justify-end gap-1.5",children:[(0,yS.jsx)("span",{children:e.player}),(0,yS.jsxs)("span",{className:"text-gray-500 font-mono",children:[e.minute,"'"]}),(0,yS.jsx)("span",{className:"text-yellow-500",children:"\u26bd"})]},t))})]}),(0,yS.jsxs)("div",{className:"mx-6 text-center min-w-[120px]",children:[(0,yS.jsxs)("div",{className:"text-6xl font-black text-white tracking-tighter mb-2",children:[t.scoreA," - ",t.scoreB]}),(0,yS.jsx)("div",{className:"text-sm",children:"live"===t.status?(0,yS.jsxs)("div",{className:"inline-flex items-center gap-2 bg-red-900/30 text-red-500 px-3 py-1 rounded-full font-bold border border-red-500/20",children:[(0,yS.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,yS.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,yS.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),t.currentMinute,"'"]}):(0,yS.jsx)("span",{className:"bg-gray-700 text-gray-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest",children:"Full Time"})})]}),(0,yS.jsxs)("div",{className:"flex-1 text-left",children:[(0,yS.jsx)("div",{className:"text-2xl font-bold text-white",children:t.teamB}),(0,yS.jsxs)("div",{className:"text-xs text-gray-400 mb-3 italic",children:["Manager: ",t.managerB||"N/A"]}),(0,yS.jsx)("div",{className:"space-y-1",children:r.filter(e=>"goal"===e.type&&e.team===t.teamB).sort((e,t)=>e.minute-t.minute).map((e,t)=>(0,yS.jsxs)("div",{className:"text-[11px] text-gray-300 flex items-center justify-start gap-1.5",children:[(0,yS.jsx)("span",{className:"text-yellow-500",children:"\u26bd"}),(0,yS.jsx)("span",{children:e.player}),(0,yS.jsxs)("span",{className:"text-gray-500 font-mono",children:[e.minute,"'"]})]},t))})]})]})]}),(0,yS.jsxs)("div",{className:"bg-gray-700 p-4 grid grid-cols-3 gap-4 text-center text-sm",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-medium",children:"Possession"}),(0,yS.jsxs)("div",{className:"flex items-center justify-center mt-1",children:[(0,yS.jsxs)("span",{className:"w-10 text-right",children:[t.possessionA||50,"%"]}),(0,yS.jsx)("div",{className:"mx-2 w-32 h-2 bg-gray-600 rounded-full overflow-hidden",children:(0,yS.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(t.possessionA||50,"%")}})}),(0,yS.jsxs)("span",{className:"w-10 text-left",children:[t.possessionB||50,"%"]})]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-medium",children:"Shots"}),(0,yS.jsxs)("div",{children:[t.shotsA||0," - ",t.shotsB||0]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-medium",children:"Shots on Target"}),(0,yS.jsxs)("div",{children:[t.shotsOnTargetA||0," - ",t.shotsOnTargetB||0]})]})]}),a.length>0&&(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 mt-6 rounded-lg",children:[(0,yS.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Team Lineups"}),(0,yS.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(e=>(0,yS.jsxs)("div",{className:"space-y-4",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yS.jsx)("h4",{className:"text-lg font-semibold",children:e.teamName}),v&&"live"===t.status&&(0,yS.jsx)("button",{onClick:()=>c(l===e.id?null:e.id),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded text-sm",children:l===e.id?"Hide Substitution":"\ud83d\udd04 Make Substitution"})]}),v&&l===e.id&&(0,yS.jsx)(dM,{lineup:e,players:b,onSubstitutionComplete:()=>c(null)}),(0,yS.jsx)(QR,{lineup:e,players:b})]},e.id))})]}),(0,yS.jsxs)("div",{className:"bg-gray-800 rounded-b-lg p-6",children:[(0,yS.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Match Events"}),r.length>0?(0,yS.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,yS.jsxs)("div",{className:"flex items-center p-3 bg-gray-700 rounded-lg",children:[(0,yS.jsxs)("div",{className:"w-16 text-center text-sm text-gray-400",children:[e.minute,"'"]}),(0,yS.jsxs)("div",{className:"flex-1",children:["goal"===e.type&&(0,yS.jsxs)("div",{className:"flex items-center",children:[(0,yS.jsx)("span",{className:"text-green-400 mr-2",children:"\u26bd"}),(0,yS.jsx)("span",{className:"font-medium",children:e.player}),(0,yS.jsxs)("span",{className:"text-gray-400 ml-2",children:["scores for ",e.team]})]}),"substitution"===e.type&&(0,yS.jsxs)("div",{className:"flex items-center",children:[(0,yS.jsx)("span",{className:"text-yellow-400 mr-2",children:"\ud83d\udd04"}),(0,yS.jsxs)("span",{className:"text-gray-200",children:[(0,yS.jsxs)("span",{className:"text-red-400",children:["\u2b07\ufe0f ",e.playerOut]}),(0,yS.jsx)("span",{className:"mx-2 text-gray-500",children:"\u2192"}),(0,yS.jsxs)("span",{className:"text-green-400",children:["\u2b06\ufe0f ",e.playerIn]})]}),(0,yS.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.team,")"]})]})]})]},e.id))}):(0,yS.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No events to display"})]})]})}):(0,yS.jsx)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4",role:"alert",children:(0,yS.jsx)("p",{children:"Match data not available"})});var T},fM=()=>{var e,t;const[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),{login:d}=bS(),h=re(),f=(null===(e=te().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return(0,yS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,yS.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Sign in to your account"}),(0,yS.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Or"," ",(0,yS.jsx)(Re,{to:"/",className:"font-medium text-green-500 hover:text-green-400",children:"continue as guest"})]})]}),o&&(0,yS.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",role:"alert",children:[(0,yS.jsx)("p",{className:"font-bold",children:"Error"}),(0,yS.jsx)("p",{children:o})]}),(0,yS.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault();try{l(""),u(!0),await d(n,i),h(f,{replace:!0})}catch(t){l("Failed to sign in: "+t.message),console.error(t)}u(!1)},children:[(0,yS.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"}),(0,yS.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,yS.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:n,onChange:e=>r(e.target.value)})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,yS.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Password",value:i,onChange:e=>a(e.target.value)})]})]}),(0,yS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yS.jsxs)("div",{className:"flex items-center",children:[(0,yS.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-600 rounded"}),(0,yS.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-300",children:"Remember me"})]}),(0,yS.jsx)("div",{className:"text-sm",children:(0,yS.jsx)("a",{href:"#",className:"font-medium text-green-500 hover:text-green-400",children:"Forgot your password?"})})]}),(0,yS.jsx)("div",{children:(0,yS.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:c?"Signing in...":"Sign in"})}),(0,yS.jsx)("div",{className:"text-center mt-4",children:(0,yS.jsxs)("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",(0,yS.jsx)(Re,{to:"/signup",className:"font-medium text-green-500 hover:text-green-400",children:"Sign up"})]})})]})]})})},pM=()=>{const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),{signup:d}=bS(),h=re();return(0,yS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,yS.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Create a new account"}),(0,yS.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Already have an account?"," ",(0,yS.jsx)(Re,{to:"/login",className:"font-medium text-green-500 hover:text-green-400",children:"Sign in"})]})]}),o&&(0,yS.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",role:"alert",children:[(0,yS.jsx)("p",{className:"font-bold",children:"Error"}),(0,yS.jsx)("p",{children:o})]}),(0,yS.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),n!==i)return l("Passwords do not match");try{l(""),u(!0),await d(e,n),h("/")}catch(r){l("Failed to create an account: "+r.message),console.error(r)}u(!1)},children:[(0,yS.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,yS.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:e=>t(e.target.value)})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,yS.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:e=>r(e.target.value)})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),(0,yS.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:i,onChange:e=>a(e.target.value)})]})]}),(0,yS.jsx)("div",{children:(0,yS.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:c?"Creating account...":"Sign up"})})]})]})})},mM=()=>(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,yS.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,yS.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"})}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,yS.jsxs)(Re,{to:"/admin/matches",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,yS.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Matches"}),(0,yS.jsx)("p",{className:"text-gray-400",children:"Update live scores and match details"})]}),(0,yS.jsxs)(Re,{to:"/admin/teams",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,yS.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Teams"}),(0,yS.jsx)("p",{className:"text-gray-400",children:"Add, edit, and remove teams"})]}),(0,yS.jsxs)(Re,{to:"/admin/players",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,yS.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Players"}),(0,yS.jsx)("p",{className:"text-gray-400",children:"Update player stats and info"})]}),(0,yS.jsxs)(Re,{to:"/admin/lineups",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,yS.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"\u26bd Manage Lineups"}),(0,yS.jsx)("p",{className:"text-gray-400",children:"Set starting 11 and bench players for matches"})]}),(0,yS.jsxs)(Re,{to:"/admin/tournaments",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,yS.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Manage Tournaments"}),(0,yS.jsx)("p",{className:"text-gray-400",children:"Create and manage tournaments"})]}),(0,yS.jsxs)(Re,{to:"/admin/news",className:"bg-gray-800 p-6 rounded-lg shadow-lg hover:bg-gray-700 transition duration-300",children:[(0,yS.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udcf0 Manage News"}),(0,yS.jsx)("p",{className:"text-gray-400",children:"Publish articles and announcements"})]})]})]}),gM=()=>{const{matches:e,teams:t,tournaments:n}=WR(),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)({teamA:"",teamB:"",scoreA:0,scoreB:0,status:"scheduled",currentMinute:0,competition:"",date:"",time:"",managerA:"",managerB:""}),[l,c]=(0,s.useState)(""),u=()=>a.competition?t.filter(e=>(Array.isArray(e.tournaments)?e.tournaments:"string"===typeof e.tournaments?e.tournaments.split(",").map(e=>e.trim()):[]).includes(a.competition)):[],[d,h]=(0,s.useState)(null),f=e=>{const{name:n,value:r}=e.target;o(e=>{const s=At({},e);if(s[n]=n.includes("score")||"currentMinute"===n?parseInt(r)||0:r,"competition"===n&&(s.teamA="",s.teamB="",s.managerA="",s.managerB=""),"teamA"===n&&r){const e=t.find(e=>e.name===r);e&&(s.managerA=e.manager||"")}if("teamB"===n&&r){const e=t.find(e=>e.name===r);e&&(s.managerB=e.manager||"")}return s})},p=e=>{o(At(At({},e),{},{managerA:e.managerA||"",managerB:e.managerB||""})),h(e.id),c("")},m=async(t,n,r)=>{const s=e.find(e=>e.id===t);if(!s)return;const i="A"===n?(s.scoreA||0)+r:(s.scoreB||0)+r;if(!(i<0))try{await _k(Sw(pS,"matches",t),{["A"===n?"scoreA":"scoreB"]:i})}catch(a){console.error("Error updating score: ",a)}},g=e.filter(e=>"live"===e.status),y=e.filter(e=>"live"!==e.status);return(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,yS.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Matches"}),l&&(0,yS.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:l}),g.length>0&&(0,yS.jsxs)("div",{className:"mb-8 p-4 bg-gray-800 rounded-lg border border-green-500",children:[(0,yS.jsxs)("h3",{className:"text-xl font-bold mb-4 text-green-400 flex items-center",children:[(0,yS.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live Matches Control"]}),(0,yS.jsx)("div",{className:"grid gap-4",children:g.map(e=>(0,yS.jsxs)("div",{className:"bg-gray-700 p-4 rounded flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,yS.jsxs)("div",{className:"text-center md:text-left flex-1",children:[(0,yS.jsxs)("div",{className:"font-medium text-gray-300",children:[e.competition," - ",e.currentMinute,"'"]}),(0,yS.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-4 text-2xl font-bold mt-2",children:[(0,yS.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,yS.jsx)("span",{children:e.teamA}),(0,yS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yS.jsx)("button",{onClick:()=>m(e.id,"A",-1),className:"w-8 h-8 rounded bg-gray-600 hover:bg-gray-500 text-sm",children:"-"}),(0,yS.jsx)("span",{children:e.scoreA}),(0,yS.jsx)("button",{onClick:()=>m(e.id,"A",1),className:"w-8 h-8 rounded bg-green-600 hover:bg-green-500 text-sm",children:"+"})]})]}),(0,yS.jsx)("span",{className:"text-gray-400",children:"vs"}),(0,yS.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,yS.jsx)("span",{children:e.teamB}),(0,yS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yS.jsx)("button",{onClick:()=>m(e.id,"B",-1),className:"w-8 h-8 rounded bg-gray-600 hover:bg-gray-500 text-sm",children:"-"}),(0,yS.jsx)("span",{children:e.scoreB}),(0,yS.jsx)("button",{onClick:()=>m(e.id,"B",1),className:"w-8 h-8 rounded bg-green-600 hover:bg-green-500 text-sm",children:"+"})]})]})]})]}),(0,yS.jsxs)("div",{className:"flex gap-2",children:[(0,yS.jsx)("button",{onClick:()=>p(e),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm",children:"Edit Info"}),(0,yS.jsx)("button",{onClick:()=>(async(e,t)=>{try{await _k(Sw(pS,"matches",e),{status:t}),c("Match marked as ".concat(t,"!")),setTimeout(()=>c(""),3e3)}catch(n){console.error("Error updating status: ",n)}})(e.id,"finished"),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm",children:"End Match"})]})]},e.id))})]}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:d?"Edit Match":"Add New Match"}),(0,yS.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(!0),c("");(d?_k(Sw(pS,"matches",d),a):Ak(Ew(pS,"matches"),a)).catch(e=>{console.error("Error saving match: ",e),alert("Error saving: "+e.message)}),c(d?"Match updated successfully!":"Match added successfully!"),o({teamA:"",teamB:"",scoreA:0,scoreB:0,status:"scheduled",currentMinute:0,competition:"",date:"",time:"",managerA:"",managerB:""}),h(null),window.scrollTo(0,0),setTimeout(()=>c(""),3e3),i(!1)},className:"grid grid-cols-1 gap-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Competition / Tournament"}),(0,yS.jsxs)("select",{name:"competition",value:a.competition,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,yS.jsx)("option",{value:"",disabled:!0,children:"Select Competition"}),n.map(e=>(0,yS.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Home Team"}),(0,yS.jsxs)("select",{name:"teamA",value:a.teamA,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,yS.jsx)("option",{value:"",disabled:!0,children:"Select Home Team"}),u().map(e=>(0,yS.jsx)("option",{value:e.name,disabled:e.name===a.teamB,children:e.name},e.id))]}),(0,yS.jsx)("input",{type:"text",name:"managerA",placeholder:"Home Manager",value:a.managerA||"",onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full mt-2 text-sm"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Away Team"}),(0,yS.jsxs)("select",{name:"teamB",value:a.teamB,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,yS.jsx)("option",{value:"",disabled:!0,children:"Select Away Team"}),u().map(e=>(0,yS.jsx)("option",{value:e.name,disabled:e.name===a.teamA,children:e.name},e.id))]}),(0,yS.jsx)("input",{type:"text",name:"managerB",placeholder:"Away Manager",value:a.managerB||"",onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full mt-2 text-sm"})]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Match Date"}),(0,yS.jsx)("input",{type:"date",name:"date",value:a.date,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Match Time"}),(0,yS.jsx)("input",{type:"time",name:"time",value:a.time,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,yS.jsxs)("div",{className:"w-full",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Home Score"}),(0,yS.jsx)("input",{type:"number",name:"scoreA",placeholder:"0",value:a.scoreA,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{className:"w-full",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Away Score"}),(0,yS.jsx)("input",{type:"number",name:"scoreB",placeholder:"0",value:a.scoreB,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Match Status"}),(0,yS.jsxs)("select",{name:"status",value:a.status,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full",children:[(0,yS.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,yS.jsx)("option",{value:"live",children:"Live"}),(0,yS.jsx)("option",{value:"finished",children:"Finished"})]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Current Minute"}),(0,yS.jsx)("input",{type:"number",name:"currentMinute",placeholder:"0'",value:a.currentMinute,onChange:f,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,yS.jsx)("button",{type:"submit",disabled:r,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(r?"opacity-50 cursor-not-allowed":""),children:r?"Saving...":d?"Update Match":"Add Match"}),d&&(0,yS.jsx)("button",{type:"button",onClick:()=>{h(null),o({teamA:"",teamB:"",scoreA:0,scoreB:0,status:"scheduled",currentMinute:0,competition:"",date:"",time:""})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,yS.jsx)("h3",{className:"text-xl font-bold mb-4",children:"All Matches"}),(0,yS.jsxs)("div",{className:"grid gap-4",children:[y.map(e=>(0,yS.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex justify-between items-center",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsxs)("div",{className:"font-bold text-lg",children:[e.teamA," ",(0,yS.jsx)("span",{className:"text-green-400",children:e.scoreA})," - ",(0,yS.jsx)("span",{className:"text-green-400",children:e.scoreB})," ",e.teamB]}),(0,yS.jsxs)("div",{className:"text-sm text-gray-400",children:[e.competition," \u2022 ",e.status," ","live"===e.status&&"\u2022 ".concat(e.currentMinute,"'")]})]}),(0,yS.jsxs)("div",{className:"flex gap-2",children:[(0,yS.jsx)("button",{onClick:()=>p(e),className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm",children:"Edit"}),(0,yS.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this match?"))try{await Ck(Sw(pS,"matches",e)),c("Match deleted successfully!"),setTimeout(()=>c(""),3e3)}catch(t){console.error("Error deleting match: ",t)}})(e.id),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm",children:"Delete"})]})]},e.id)),0===y.length&&!r&&(0,yS.jsx)("p",{className:"text-center text-gray-400",children:"No scheduled or finished matches found."})]})]})},yM=()=>{const{teams:e,tournaments:t}=WR(),[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)({name:"",shortName:"",founded:"",stadium:"",manager:"",status:"Active",players:0,tournaments:[]}),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(""),d=e=>{const{name:t,value:n}=e.target;a(e=>At(At({},e),{},{[t]:"founded"===t||"players"===t?Number(n):n}))};return(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,yS.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Teams"}),c&&(0,yS.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:c}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:o?"Edit Team":"Add New Team"}),(0,yS.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(!0),u("");const t=At(At({},i),{},{tournaments:Array.isArray(i.tournaments)?i.tournaments:[]});(o?_k(Sw(pS,"teams",o),t):Ak(Ew(pS,"teams"),t)).catch(e=>{console.error("Error saving team: ",e),alert("Error saving team: "+e.message),u("")}),u(o?"Team updated successfully!":"Team added successfully!"),a({name:"",shortName:"",founded:"",stadium:"",manager:"",status:"Active",players:0,tournaments:[]}),l(null),window.scrollTo(0,0),setTimeout(()=>u(""),3e3),r(!1)},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Team Name"}),(0,yS.jsx)("input",{type:"text",name:"name",placeholder:"Team Name",value:i.name,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Short Name"}),(0,yS.jsx)("input",{type:"text",name:"shortName",placeholder:"e.g. MUN",value:i.shortName,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Founded Year"}),(0,yS.jsx)("input",{type:"number",name:"founded",placeholder:"Year",value:i.founded,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Stadium"}),(0,yS.jsx)("input",{type:"text",name:"stadium",placeholder:"Stadium",value:i.stadium,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Manager Name"}),(0,yS.jsx)("input",{type:"text",name:"manager",placeholder:"Manager's Name",value:i.manager||"",onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Squad Size"}),(0,yS.jsx)("input",{type:"number",name:"players",placeholder:"0",value:i.players,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Team Status"}),(0,yS.jsxs)("select",{name:"status",value:i.status||"Active",onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",children:[(0,yS.jsx)("option",{value:"Active",children:"Active"}),(0,yS.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,yS.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,yS.jsx)("option",{value:"Dissolved",children:"Dissolved"})]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Participating Tournaments"}),(0,yS.jsxs)("div",{className:"flex flex-wrap gap-2 bg-gray-700 p-2 rounded min-h-[42px] items-center",children:[t.map(e=>(0,yS.jsx)("button",{type:"button",onClick:()=>{return t=e.name,void a(e=>{const n=Array.isArray(e.tournaments)?e.tournaments:[];return n.includes(t)?At(At({},e),{},{tournaments:n.filter(e=>e!==t)}):At(At({},e),{},{tournaments:[...n,t]})});var t},className:"text-xs px-2 py-1 rounded transition-colors ".concat(Array.isArray(i.tournaments)&&i.tournaments.includes(e.name)?"bg-green-600 text-white shadow-sm":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:e.name},e.id)),0===t.length&&(0,yS.jsx)("span",{className:"text-gray-500 text-xs italic",children:"No tournaments available. Create one first."})]})]}),(0,yS.jsx)("button",{type:"submit",disabled:n,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":o?"Update Team":"Add Team"}),o&&(0,yS.jsx)("button",{type:"button",onClick:()=>{l(null),a({name:"",shortName:"",founded:"",stadium:"",manager:"",status:"Active",players:0,tournaments:""})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.map(e=>(0,yS.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex justify-between items-center",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsxs)("div",{className:"font-bold text-lg",children:[e.name," (",e.shortName,")"]}),(0,yS.jsxs)("div",{className:"text-sm text-gray-400",children:["Stadium: ",e.stadium," \u2022 Manager: ",e.manager||"N/A"]})]}),(0,yS.jsxs)("div",{className:"flex gap-2",children:[(0,yS.jsx)("button",{onClick:()=>(e=>{a(At(At({},e),{},{tournaments:Array.isArray(e.tournaments)?e.tournaments:[]})),l(e.id),u("")})(e),className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm",children:"Edit"}),(0,yS.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this team?"))try{await Ck(Sw(pS,"teams",e)),u("Team deleted successfully!"),setTimeout(()=>u(""),3e3)}catch(t){console.error("Error deleting team: ",t)}})(e.id),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm",children:"Delete"})]})]},e.id)),0===e.length&&!n&&(0,yS.jsx)("p",{className:"text-center text-gray-400 col-span-full",children:"No teams found."})]})]})},vM=()=>{const{players:e,teams:t}=WR(),[n,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)({name:"",team:"",position:"Forward",nationality:"",age:"",matches:0,goals:0,assists:0,yellowCards:0,redCards:0}),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(""),d=e=>{const{name:t,value:n}=e.target,r=["age","matches","goals","assists","yellowCards","redCards"];a(e=>At(At({},e),{},{[t]:r.includes(t)?Number(n):n}))};return(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,yS.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Players"}),c&&(0,yS.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:c}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:o?"Edit Player":"Add New Player"}),(0,yS.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(!0),u("");(o?_k(Sw(pS,"players",o),i):Ak(Ew(pS,"players"),i)).catch(e=>{console.error("Error saving player: ",e),alert("Error saving player: "+e.message)}),u(o?"Player updated successfully!":"Player added successfully!"),a({name:"",team:"",position:"Forward",nationality:"",age:"",matches:0,goals:0,assists:0,yellowCards:0,redCards:0}),l(null),window.scrollTo(0,0),setTimeout(()=>u(""),3e3),r(!1)},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,yS.jsxs)("div",{className:"md:col-span-2",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Player Name"}),(0,yS.jsx)("input",{type:"text",name:"name",placeholder:"Full Name",value:i.name,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Team"}),(0,yS.jsxs)("select",{name:"team",value:i.team,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0,children:[(0,yS.jsx)("option",{value:"",disabled:!0,children:"Select Team"}),t.map(e=>(0,yS.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Position"}),(0,yS.jsx)("select",{name:"position",value:i.position,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full",children:["Forward","Midfielder","Defender","Goalkeeper"].map(e=>(0,yS.jsx)("option",{value:e,children:e},e))})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Nationality"}),(0,yS.jsx)("input",{type:"text",name:"nationality",placeholder:"Nationality",value:i.nationality,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Age"}),(0,yS.jsx)("input",{type:"number",name:"age",placeholder:"0",value:i.age,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Matches"}),(0,yS.jsx)("input",{type:"number",name:"matches",placeholder:"0",value:i.matches,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Goals"}),(0,yS.jsx)("input",{type:"number",name:"goals",placeholder:"0",value:i.goals,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Assists"}),(0,yS.jsx)("input",{type:"number",name:"assists",placeholder:"0",value:i.assists,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Yellow Cards"}),(0,yS.jsx)("input",{type:"number",name:"yellowCards",placeholder:"0",value:i.yellowCards,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Red Cards"}),(0,yS.jsx)("input",{type:"number",name:"redCards",placeholder:"0",value:i.redCards,onChange:d,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsx)("button",{type:"submit",disabled:n,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":o?"Update Player":"Add Player"}),o&&(0,yS.jsx)("button",{type:"button",onClick:()=>{l(null),a({name:"",team:"",position:"Forward",nationality:"",age:"",matches:0,goals:0,assists:0,yellowCards:0,redCards:0})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,yS.jsxs)("div",{className:"overflow-x-auto",children:[(0,yS.jsxs)("table",{className:"w-full text-left text-gray-300",children:[(0,yS.jsx)("thead",{className:"bg-gray-800 text-xs uppercase",children:(0,yS.jsxs)("tr",{children:[(0,yS.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,yS.jsx)("th",{className:"px-4 py-3",children:"Team"}),(0,yS.jsx)("th",{className:"px-4 py-3",children:"Pos"}),(0,yS.jsx)("th",{className:"px-4 py-3",children:"Stats"}),(0,yS.jsx)("th",{className:"px-4 py-3",children:"Action"})]})}),(0,yS.jsx)("tbody",{children:e.map(e=>(0,yS.jsxs)("tr",{className:"border-b border-gray-700 bg-gray-800 hover:bg-gray-700",children:[(0,yS.jsx)("td",{className:"px-4 py-3 font-medium text-white",children:e.name}),(0,yS.jsx)("td",{className:"px-4 py-3",children:e.team}),(0,yS.jsx)("td",{className:"px-4 py-3",children:e.position}),(0,yS.jsxs)("td",{className:"px-4 py-3",children:[e.goals," G, ",e.assists," A"]}),(0,yS.jsxs)("td",{className:"px-4 py-3",children:[(0,yS.jsx)("button",{onClick:()=>(e=>{a(e),l(e.id),u("")})(e),className:"text-blue-500 hover:text-blue-400 mr-3",children:"Edit"}),(0,yS.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this player?"))try{await Ck(Sw(pS,"players",e)),u("Player deleted successfully!"),setTimeout(()=>u(""),3e3)}catch(t){console.error("Error deleting player: ",t)}})(e.id),className:"text-red-500 hover:text-red-400",children:"Delete"})]})]},e.id))})]}),0===e.length&&!n&&(0,yS.jsx)("p",{className:"text-center text-gray-400 mt-4",children:"No players found."})]})]})},bM=()=>{const{tournaments:e}=WR(),[t,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(""),[a,o]=(0,s.useState)({name:"",startDate:"",endDate:"",teamsCount:0,matchesCount:0,status:"upcoming",type:"league"}),[l,c]=(0,s.useState)(null),u=e=>{const{name:t,value:n}=e.target;o(e=>At(At({},e),{},{[t]:"teamsCount"===t||"matchesCount"===t?Number(n):n}))};return(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,yS.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Manage Tournaments"}),r&&(0,yS.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:r}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-8",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:l?"Edit Tournament":"Add New Tournament"}),(0,yS.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(!0),i("");(l?_k(Sw(pS,"tournaments",l),a):Ak(Ew(pS,"tournaments"),a)).catch(e=>{console.error("Error saving tournament: ",e),alert("Error saving: "+e.message)}),i(l?"Tournament updated successfully!":"Tournament added successfully!"),o({name:"",startDate:"",endDate:"",teamsCount:0,matchesCount:0,status:"upcoming",type:"league"}),c(null),window.scrollTo(0,0),setTimeout(()=>i(""),3e3),n(!1)},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yS.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Tournament Name"}),(0,yS.jsx)("input",{type:"text",name:"name",placeholder:"Tournament Name",value:a.name,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full",required:!0})]}),(0,yS.jsxs)("div",{className:"flex gap-2",children:[(0,yS.jsxs)("div",{className:"w-full",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Start Date"}),(0,yS.jsx)("input",{type:"date",name:"startDate",value:a.startDate,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{className:"w-full",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"End Date"}),(0,yS.jsx)("input",{type:"date",name:"endDate",value:a.endDate,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,yS.jsxs)("div",{className:"flex gap-2",children:[(0,yS.jsxs)("div",{className:"w-full",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Teams Count"}),(0,yS.jsx)("input",{type:"number",name:"teamsCount",placeholder:"0",value:a.teamsCount,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]}),(0,yS.jsxs)("div",{className:"w-full",children:[(0,yS.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Matches Count"}),(0,yS.jsx)("input",{type:"number",name:"matchesCount",placeholder:"0",value:a.matchesCount,onChange:u,className:"bg-gray-700 p-2 rounded text-white w-full"})]})]}),(0,yS.jsxs)("select",{name:"status",value:a.status,onChange:u,className:"bg-gray-700 p-2 rounded text-white",children:[(0,yS.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,yS.jsx)("option",{value:"ongoing",children:"Ongoing"}),(0,yS.jsx)("option",{value:"finished",children:"Finished"})]}),(0,yS.jsxs)("select",{name:"type",value:a.type,onChange:u,className:"bg-gray-700 p-2 rounded text-white",children:[(0,yS.jsx)("option",{value:"league",children:"League"}),(0,yS.jsx)("option",{value:"knockout",children:"Knockout"})]}),(0,yS.jsx)("button",{type:"submit",disabled:t,className:"bg-green-600 hover:bg-green-700 p-2 rounded text-white col-span-full ".concat(t?"opacity-50 cursor-not-allowed":""),children:t?"Saving...":l?"Update Tournament":"Add Tournament"}),l&&(0,yS.jsx)("button",{type:"button",onClick:()=>{c(null),o({name:"",startDate:"",endDate:"",teamsCount:0,matchesCount:0,status:"upcoming",type:"league"})},className:"bg-gray-600 hover:bg-gray-500 p-2 rounded text-white col-span-full",children:"Cancel Edit"})]})]}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(e=>(0,yS.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex justify-between items-start",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-bold text-lg text-white",children:e.name}),(0,yS.jsxs)("div",{className:"text-sm text-gray-400",children:[e.status," \u2022 ",e.type]}),(0,yS.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.startDate," - ",e.endDate]})]}),(0,yS.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,yS.jsx)("button",{onClick:()=>(e=>{o(e),c(e.id),i("")})(e),className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm text-white",children:"Edit"}),(0,yS.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this tournament?"))try{await Ck(Sw(pS,"tournaments",e)),i("Tournament deleted successfully!"),setTimeout(()=>i(""),3e3)}catch(t){console.error("Error deleting: ",t)}})(e.id),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm text-white",children:"Delete"})]})]},e.id)),0===e.length&&!t&&(0,yS.jsx)("div",{className:"text-gray-400 col-span-full text-center",children:"No tournaments found."})]})]})},xM=()=>{const{matches:e,players:t,teams:n,lineups:r}=WR(),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)({id:"",matchId:"",teamName:"",starting11:[],bench:[]}),[d,h]=(0,s.useState)(""),f=e.find(e=>e.id===i),p=t.filter(e=>e.team===o),m=[...c.starting11,...c.bench],g=e=>{l(e);const t=r.find(t=>t.matchId===i&&t.teamName===e);u(t?{id:t.id,matchId:t.matchId,teamName:t.teamName,starting11:t.starting11||[],bench:t.bench||[]}:{id:"",matchId:i,teamName:e,starting11:[],bench:[]})},y=e=>t.find(t=>t.id===e);return(0,yS.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,yS.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"\u26bd Manage Match Lineups"}),d&&(0,yS.jsx)("div",{className:"bg-green-600 text-white p-3 rounded mb-4 animate-pulse",children:d}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-6",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:"Select Match"}),(0,yS.jsxs)("select",{value:i,onChange:e=>{return t=e.target.value,a(t),l(""),void u({id:"",matchId:"",teamName:"",starting11:[],bench:[]});var t},className:"bg-gray-700 p-3 rounded text-white w-full mb-4",children:[(0,yS.jsx)("option",{value:"",children:"Select a match"}),e.filter(e=>"finished"!==e.status).map(e=>(0,yS.jsxs)("option",{value:e.id,children:[e.competition," - ",e.teamA," vs ",e.teamB,e.date&&" (".concat(new Date(e.date).toLocaleDateString(),")")]},e.id))]}),f&&(0,yS.jsxs)("div",{className:"mt-4",children:[(0,yS.jsx)("h4",{className:"text-lg mb-2",children:"Select Team"}),(0,yS.jsxs)("div",{className:"flex gap-4",children:[(0,yS.jsx)("button",{onClick:()=>g(f.teamA),className:"flex-1 p-3 rounded ".concat(o===f.teamA?"bg-green-600":"bg-gray-700 hover:bg-gray-600"),children:f.teamA}),(0,yS.jsx)("button",{onClick:()=>g(f.teamB),className:"flex-1 p-3 rounded ".concat(o===f.teamB?"bg-green-600":"bg-gray-700 hover:bg-gray-600"),children:f.teamB})]})]})]}),o&&(0,yS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:"Available Players"}),(0,yS.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[p.filter(e=>!m.includes(e.id)).map(e=>(0,yS.jsxs)("div",{className:"bg-gray-700 p-3 rounded flex justify-between items-center",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-medium",children:e.name}),(0,yS.jsx)("div",{className:"text-xs text-gray-400",children:e.position})]}),(0,yS.jsxs)("div",{className:"flex gap-2",children:[(0,yS.jsx)("button",{onClick:()=>{return t=e.id,void(c.starting11.length<11&&u(e=>At(At({},e),{},{starting11:[...e.starting11,t]})));var t},disabled:c.starting11.length>=11,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded text-xs",children:"Starting"}),(0,yS.jsx)("button",{onClick:()=>{return t=e.id,void(c.bench.length<6&&u(e=>At(At({},e),{},{bench:[...e.bench,t]})));var t},disabled:c.bench.length>=6,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-3 py-1 rounded text-xs",children:"Bench"})]})]},e.id)),0===p.filter(e=>!m.includes(e.id)).length&&(0,yS.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"All players assigned"})]})]}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,yS.jsxs)("h3",{className:"text-xl mb-4",children:["Starting 11",(0,yS.jsxs)("span",{className:"ml-2 text-sm ".concat(11===c.starting11.length?"text-green-400":"text-yellow-400"),children:["(",c.starting11.length,"/11)"]})]}),(0,yS.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[c.starting11.map((e,t)=>{const n=y(e);return n?(0,yS.jsxs)("div",{className:"bg-green-900 p-3 rounded flex justify-between items-center",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsxs)("div",{className:"font-medium",children:["#",t+1," ",n.name]}),(0,yS.jsx)("div",{className:"text-xs text-gray-300",children:n.position})]}),(0,yS.jsx)("button",{onClick:()=>(e=>{u(t=>At(At({},t),{},{starting11:t.starting11.filter(t=>t!==e)}))})(e),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs",children:"Remove"})]},e):null}),0===c.starting11.length&&(0,yS.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"No players selected"})]})]}),(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,yS.jsxs)("h3",{className:"text-xl mb-4",children:["Bench",(0,yS.jsxs)("span",{className:"ml-2 text-sm ".concat(6===c.bench.length?"text-green-400":"text-gray-400"),children:["(",c.bench.length,"/6)"]})]}),(0,yS.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[c.bench.map(e=>{const t=y(e);return t?(0,yS.jsxs)("div",{className:"bg-blue-900 p-3 rounded flex justify-between items-center",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("div",{className:"font-medium",children:t.name}),(0,yS.jsx)("div",{className:"text-xs text-gray-300",children:t.position})]}),(0,yS.jsx)("button",{onClick:()=>(e=>{u(t=>At(At({},t),{},{bench:t.bench.filter(t=>t!==e)}))})(e),className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-xs",children:"Remove"})]},e):null}),0===c.bench.length&&(0,yS.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"No bench players"})]})]})]}),o&&(0,yS.jsx)("div",{className:"mt-6 flex justify-center",children:(0,yS.jsx)("button",{onClick:async()=>{if(11===c.starting11.length)try{c.id?(await _k(Sw(pS,"lineups",c.id),{starting11:c.starting11,bench:c.bench,updatedAt:new Date}),h("Lineup updated successfully!")):(await Ak(Ew(pS,"lineups"),{matchId:c.matchId,teamName:c.teamName,starting11:c.starting11,bench:c.bench,createdAt:new Date}),h("Lineup saved successfully!")),setTimeout(()=>h(""),3e3),u({id:"",matchId:"",teamName:"",starting11:[],bench:[]}),a(""),l("")}catch(e){console.error("Error saving lineup:",e),alert("Error saving lineup: "+e.message)}else alert("Please select exactly 11 starting players")},disabled:11!==c.starting11.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-8 py-3 rounded-lg text-lg font-medium",children:"Save Lineup"})}),!i&&(0,yS.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mt-6",children:[(0,yS.jsx)("h3",{className:"text-xl mb-4",children:"\ud83d\udccb How to Create a Lineup"}),(0,yS.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-300",children:[(0,yS.jsx)("li",{children:"Select a match from the dropdown"}),(0,yS.jsx)("li",{children:"Choose which team you want to create a lineup for"}),(0,yS.jsx)("li",{children:"Add 11 players to the Starting 11"}),(0,yS.jsx)("li",{children:"Add up to 6 players to the Bench (optional)"}),(0,yS.jsx)("li",{children:'Click "Save Lineup" to confirm'})]})]})]})},wM=pP("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),kM=pP("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),EM=pP("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),SM=pP("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),TM=()=>{const{isAdmin:e}=bS(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),p=(0,s.useRef)(null),m=(0,s.useRef)(null),g=(0,s.useRef)(null),[y,v]=(0,s.useState)({title:"",excerpt:"",content:"",imageUrl:"",category:"Club News"});(0,s.useEffect)(()=>(b(),()=>{h&&h.getTracks().forEach(e=>e.stop())}),[]);const b=async()=>{i(!0);try{const e=uk(Ew(pS,"news"),pk("createdAt","desc")),t=(await Ik(e)).docs.map(e=>At({id:e.id},e.data()));n(t)}catch(e){console.error("Error fetching news:",e)}finally{i(!1)}},[x,w]=(0,s.useState)(0),[k,E]=(0,s.useState)(""),S=()=>{h&&(h.getTracks().forEach(e=>e.stop()),f(null)),d(!1)},T=()=>{v({title:"",excerpt:"",content:"",imageUrl:"",category:"Club News"}),c(null)};return e?(0,yS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,yS.jsx)("h1",{className:"text-3xl font-display font-bold text-white mb-6",children:"Manage News"}),(0,yS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,yS.jsx)("div",{className:"lg:col-span-1",children:(0,yS.jsxs)("div",{className:"glass-card p-6 rounded-2xl sticky top-24",children:[(0,yS.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center justify-between",children:[(0,yS.jsxs)("div",{className:"flex items-center gap-2",children:[l?(0,yS.jsx)(oM,{size:20,className:"text-brand-400"}):(0,yS.jsx)(rM,{size:20,className:"text-brand-400"}),l?"Edit Article":"New Article"]}),l&&(0,yS.jsx)("button",{type:"button",onClick:T,className:"text-xs text-slate-400 hover:text-white underline",children:"Cancel"})]}),(0,yS.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(l){const e=Sw(pS,"news",l);await _k(e,At(At({},y),{},{updatedAt:Rk()})),alert("News article updated successfully!")}else await Ak(Ew(pS,"news"),At(At({},y),{},{createdAt:Rk()})),alert("News article added successfully!");T(),b()}catch(t){console.error("Error saving news:",t),alert("Error saving news: ".concat(t.message))}},className:"space-y-4",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Title"}),(0,yS.jsx)("input",{type:"text",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-brand-500 outline-none",value:y.title,onChange:e=>v(At(At({},y),{},{title:e.target.value}))})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Category"}),(0,yS.jsxs)("select",{className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-brand-500 outline-none",value:y.category,onChange:e=>v(At(At({},y),{},{category:e.target.value})),children:[(0,yS.jsx)("option",{value:"Club News",children:"Club News"}),(0,yS.jsx)("option",{value:"Match Report",children:"Match Report"}),(0,yS.jsx)("option",{value:"Transfer",children:"Transfer"}),(0,yS.jsx)("option",{value:"Announcement",children:"Announcement"})]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Article Image"}),(0,yS.jsx)("input",{type:"file",ref:g,onChange:async e=>{let t=e.target.files[0];if(t){o(!0),w(0),E("Processing...");try{if(t.type.match(/image.*/)){E("Compressing...");try{const e=await(async e=>new Promise((t,n)=>{const r=document.createElement("img"),s=URL.createObjectURL(e);r.src=s,r.onload=()=>{URL.revokeObjectURL(s);const n=document.createElement("canvas"),i=1e3;let a=r.width,o=r.height;if(r.width>i){const e=i/r.width;a=i,o=r.height*e}n.width=a,n.height=o,n.getContext("2d").drawImage(r,0,0,a,o),n.toBlob(n=>{if(!n)return console.error("Canvas compression failed"),void t(e);const r=new File([n],e.name,{type:"image/jpeg"});t(r)},"image/jpeg",.7)},r.onerror=n=>{URL.revokeObjectURL(s),console.error("Image load failed",n),t(e)}}))(t);e.size<t.size&&(t=e)}catch(n){console.warn("Compression failed, using original file:",n)}}E("Starting Upload...");const e=cS(dS(gS,"news/".concat(Date.now(),"_").concat(t.name)),t);await new Promise((t,n)=>{e.on("state_changed",e=>{const t=e.bytesTransferred/e.totalBytes*100;w(t),E("Uploading ".concat(Math.round(t),"%..."))},e=>{console.error("Upload error:",e),n(e)},()=>{t()})});const r=await uS(e.snapshot.ref);v(e=>At(At({},e),{},{imageUrl:r})),E("Done!")}catch(r){console.error("Error uploading image:",r),alert("Failed to upload image. Error: ".concat(r.code||r.message)),E("Error")}finally{o(!1),e.target.value=null,setTimeout(()=>E(""),2e3)}}},accept:"image/*",className:"hidden"}),(0,yS.jsxs)("div",{className:"space-y-3",children:[(0,yS.jsx)(oP,{children:u&&(0,yS.jsxs)(JD.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"relative overflow-hidden rounded-lg bg-black border border-brand-500/30",children:[(0,yS.jsx)("video",{ref:p,autoPlay:!0,playsInline:!0,className:"w-full aspect-video object-cover",onLoadedMetadata:e=>e.target.play()}),(0,yS.jsx)("canvas",{ref:m,className:"hidden"}),(0,yS.jsxs)("div",{className:"absolute bottom-4 inset-x-0 flex justify-center gap-4",children:[(0,yS.jsx)("button",{type:"button",onClick:async()=>{if(!p.current||!m.current)return;const e=p.current,t=m.current;t.width=e.videoWidth,t.height=e.videoHeight;t.getContext("2d").drawImage(e,0,0,t.width,t.height),S(),o(!0),t.toBlob(async e=>{if(e)try{const t=new File([e],"capture_".concat(Date.now(),".jpg"),{type:"image/jpeg"});console.log("Webcam capture size: ".concat((t.size/1024).toFixed(2)," KB"));const n=dS(gS,"news/".concat(t.name));E("Starting Upload...");const r=cS(n,t);await new Promise((e,t)=>{r.on("state_changed",e=>{const t=e.bytesTransferred/e.totalBytes*100;w(t),E("Uploading ".concat(Math.round(t),"%..."))},e=>{console.error("Upload error:",e),t(e)},()=>{e()})});const s=await uS(r.snapshot.ref);v(e=>At(At({},e),{},{imageUrl:s})),E("Done!")}catch(t){console.error("Error uploading capture:",t),alert("Failed to upload photo. Error: ".concat(t.code||t.message)),E("Error")}finally{o(!1),setTimeout(()=>E(""),2e3)}},"image/jpeg",.6)},className:"h-12 w-12 rounded-full bg-white border-4 border-slate-300 flex items-center justify-center hover:bg-slate-200 transition-colors shadow-lg",children:(0,yS.jsx)("div",{className:"h-10 w-10 rounded-full border-2 border-slate-800"})}),(0,yS.jsx)("button",{type:"button",onClick:S,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full text-white hover:bg-red-500 transition-colors",children:(0,yS.jsx)(EP,{size:20})})]})]})}),(0,yS.jsx)("input",{type:"url",placeholder:"Or paste image URL...",className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-brand-500 outline-none text-sm",value:y.imageUrl,onChange:e=>v(At(At({},y),{},{imageUrl:e.target.value})),disabled:u}),!u&&(0,yS.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,yS.jsxs)("button",{type:"button",onClick:()=>{g.current.click()},disabled:a,className:"flex items-center justify-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm text-slate-300 transition-colors",children:[(0,yS.jsx)(wM,{size:16}),(0,yS.jsx)("span",{children:"Upload from Device"})]}),(0,yS.jsxs)("button",{type:"button",onClick:async()=>{o(!0);try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});f(e),d(!0),p.current&&(p.current.srcObject=e),o(!1)}catch(e){console.error("Error accessing webcam:",e),alert("Could not access camera. Please allow permissions."),o(!1)}},disabled:a,className:"flex items-center justify-center gap-2 px-4 py-2 bg-brand-600/10 hover:bg-brand-600/20 text-brand-400 border border-brand-500/20 rounded-lg text-sm transition-colors",children:[(0,yS.jsx)(kM,{size:16}),(0,yS.jsx)("span",{children:"Camera"})]})]}),y.imageUrl&&!u&&(0,yS.jsxs)("div",{className:"relative mt-2 rounded-lg overflow-hidden aspect-video border border-white/10 bg-black/40 group",children:[(0,yS.jsx)("img",{src:y.imageUrl,alt:"Preview",className:"w-full h-full object-cover"}),(0,yS.jsx)("button",{type:"button",onClick:()=>v(At(At({},y),{},{imageUrl:""})),className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-red-500 transition-colors opacity-0 group-hover:opacity-100",children:(0,yS.jsx)(EP,{size:14})}),a&&(0,yS.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:(0,yS.jsx)("div",{className:"text-white text-xs font-medium animate-pulse",children:"Processing..."})})]})]})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Summary (Excerpt)"}),(0,yS.jsx)("textarea",{required:!0,rows:"2",className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-brand-500 outline-none",value:y.excerpt,onChange:e=>v(At(At({},y),{},{excerpt:e.target.value}))})]}),(0,yS.jsxs)("div",{children:[(0,yS.jsx)("label",{className:"block text-sm font-medium text-slate-400 mb-1",children:"Full Content"}),(0,yS.jsx)("textarea",{required:!0,rows:"6",className:"w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-brand-500 outline-none",value:y.content,onChange:e=>v(At(At({},y),{},{content:e.target.value}))})]}),(0,yS.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-brand-600 hover:bg-brand-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-brand-500/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?(0,yS.jsxs)(yS.Fragment,{children:[(0,yS.jsx)("div",{className:"h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,yS.jsx)("span",{children:k||"Processing..."})]}):(0,yS.jsx)("span",{children:l?"Update Article":"Publish Article"})})]})]})}),(0,yS.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,yS.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Published Articles"}),r?(0,yS.jsx)("div",{className:"text-center py-10 text-slate-400",children:"Loading..."}):(0,yS.jsxs)("div",{className:"space-y-4",children:[t.map(e=>{var t;return(0,yS.jsxs)(JD.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card p-4 rounded-xl flex gap-4 group",children:[(0,yS.jsx)("div",{className:"w-24 h-24 bg-slate-800 rounded-lg overflow-hidden flex-shrink-0 relative",children:e.imageUrl?(0,yS.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}):(0,yS.jsx)("div",{className:"w-full h-full flex items-center justify-center text-slate-600",children:(0,yS.jsx)(EM,{size:24})})}),(0,yS.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yS.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yS.jsxs)("div",{children:[(0,yS.jsx)("span",{className:"text-xs font-bold text-brand-400 uppercase tracking-wider mb-1 block",children:e.category}),(0,yS.jsx)("h3",{className:"font-bold text-white text-lg leading-tight truncate",children:e.title})]}),(0,yS.jsxs)("div",{className:"flex gap-1",children:[(0,yS.jsx)("button",{onClick:()=>(e=>{v({title:e.title,excerpt:e.excerpt,content:e.content,imageUrl:e.imageUrl,category:e.category}),c(e.id),window.scrollTo({top:0,behavior:"smooth"})})(e),className:"text-slate-500 hover:text-brand-400 p-2 transition-colors",children:(0,yS.jsx)(oM,{size:18})}),(0,yS.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this article?"))try{await Ck(Sw(pS,"news",e)),b(),l===e&&T()}catch(t){console.error("Error deleting news:",t)}})(e.id),className:"text-slate-500 hover:text-red-500 p-2 transition-colors",children:(0,yS.jsx)(SM,{size:18})})]})]}),(0,yS.jsx)("p",{className:"text-slate-400 text-sm mt-2 line-clamp-2",children:e.excerpt}),(0,yS.jsx)("div",{className:"mt-2 text-xs text-slate-600",children:null!==(t=e.createdAt)&&void 0!==t&&t.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Just now"})]})]},e.id)}),0===t.length&&(0,yS.jsx)("div",{className:"text-center py-10 bg-white/5 rounded-xl border border-dashed border-white/10 text-slate-500",children:"No news articles yet. Add your first story!"})]})]})]})]}):(0,yS.jsx)("div",{className:"text-white text-center py-20",children:"Access Denied"})},NM=pP("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),IM=()=>{var e;const[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{i(!0);try{const e=uk(Ew(pS,"news"),pk("createdAt","desc")),t=(await Ik(e)).docs.map(e=>At({id:e.id},e.data()));0===t.length?n([{id:1,title:"Season Kickoff Announced",excerpt:"The new season starts this weekend with exciting fixtures.",imageUrl:"https://images.unsplash.com/photo-1579952363873-27f3bade9f55?auto=format&fit=crop&q=80",category:"Announcement",createdAt:{seconds:Date.now()/1e3}},{id:2,title:"Star Player Transfer Rumors",excerpt:"Top clubs are eyeing the league's top scorer.",imageUrl:"https://images.unsplash.com/photo-1518609878373-06d740f60d8b?auto=format&fit=crop&q=80",category:"Transfer",createdAt:{seconds:Date.now()/1e3-86400}}]):n(t)}catch(e){console.error("Error fetching news:",e)}finally{i(!1)}})()},[]);const a={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return r?(0,yS.jsx)("div",{className:"flex h-[80vh] items-center justify-center",children:(0,yS.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,yS.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"}),(0,yS.jsx)("div",{className:"text-slate-400 font-medium animate-pulse",children:"Loading News..."})]})}):(0,yS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-12",children:[(0,yS.jsxs)(JD.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto",children:[(0,yS.jsx)("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-4",children:"Latest News"}),(0,yS.jsx)("p",{className:"text-slate-400 text-lg",children:"Stay updated with the latest match reports, transfer news, and club announcements."})]}),t.length>0?(0,yS.jsxs)(JD.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,yS.jsxs)(JD.div,{variants:a,className:"lg:col-span-2 group cursor-pointer relative rounded-3xl overflow-hidden aspect-[16/9] md:aspect-[21/9]",children:[(0,yS.jsx)("img",{src:t[0].imageUrl||"https://images.unsplash.com/photo-1508098682722-e99c43a406b2?auto=format&fit=crop&q=80",alt:t[0].title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),(0,yS.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-bg via-dark-bg/50 to-transparent"}),(0,yS.jsxs)("div",{className:"absolute bottom-0 left-0 p-8 space-y-3",children:[(0,yS.jsx)("span",{className:"inline-block px-3 py-1 bg-brand-600 text-white text-xs font-bold uppercase tracking-wider rounded-lg shadow-lg",children:t[0].category}),(0,yS.jsx)("h2",{className:"text-2xl md:text-4xl font-display font-bold text-white leading-tight max-w-2xl group-hover:text-brand-400 transition-colors",children:t[0].title}),(0,yS.jsx)("p",{className:"text-slate-300 line-clamp-2 max-w-xl text-sm md:text-base",children:t[0].excerpt}),(0,yS.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 text-xs font-medium pt-2",children:[(0,yS.jsx)(ZR,{size:14}),null!==(e=t[0].createdAt)&&void 0!==e&&e.seconds?new Date(1e3*t[0].createdAt.seconds).toLocaleDateString(void 0,{dateStyle:"long"}):"Today"]})]})]}),t.slice(1).map(e=>{var t;return(0,yS.jsxs)(JD.div,{variants:a,className:"group flex flex-col glass-card rounded-2xl overflow-hidden hover:border-brand-500/30 transition-all duration-300 h-full",children:[(0,yS.jsxs)("div",{className:"relative aspect-video overflow-hidden",children:[(0,yS.jsx)("img",{src:e.imageUrl||"https://images.unsplash.com/photo-1517466787929-bc90951d0974?auto=format&fit=crop&q=80",alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),(0,yS.jsx)("div",{className:"absolute top-4 left-4",children:(0,yS.jsx)("span",{className:"px-2 py-1 bg-black/60 backdrop-blur-md text-white text-[10px] font-bold uppercase tracking-wider rounded border border-white/10",children:e.category})})]}),(0,yS.jsxs)("div",{className:"p-5 flex flex-col flex-1",children:[(0,yS.jsx)("h3",{className:"text-xl font-display font-bold text-white mb-2 line-clamp-2 group-hover:text-brand-400 transition-colors",children:e.title}),(0,yS.jsx)("p",{className:"text-slate-400 text-sm line-clamp-3 mb-4 flex-1",children:e.excerpt}),(0,yS.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-white/5 mt-auto",children:[(0,yS.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1.5",children:[(0,yS.jsx)(ZR,{size:12}),null!==(t=e.createdAt)&&void 0!==t&&t.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Recent"]}),(0,yS.jsxs)("span",{className:"text-xs font-bold text-brand-500 flex items-center gap-1 group-hover:translate-x-1 transition-transform",children:["Read More ",(0,yS.jsx)(NM,{size:12})]})]})]})]},e.id)})]}):(0,yS.jsxs)("div",{className:"text-center py-20 bg-white/5 rounded-3xl border border-dashed border-white/10",children:[(0,yS.jsx)(gP,{className:"w-16 h-16 text-slate-600 mx-auto mb-4",strokeWidth:1.5}),(0,yS.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"No News Yet"}),(0,yS.jsx)("p",{className:"text-slate-400",children:"Check back later for the latest updates from the league."})]})]})};function _M(e){let{children:t}=e;const{currentUser:n}=bS(),r=te();return n?t:(0,yS.jsx)(ve,{to:"/login",state:{from:r},replace:!0})}const CM=function(){return(0,yS.jsx)(GR,{children:(0,yS.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,yS.jsx)(HR,{}),(0,yS.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,yS.jsxs)(we,{children:[(0,yS.jsx)(be,{path:"/",element:(0,yS.jsx)(tM,{})}),(0,yS.jsx)(be,{path:"/tournaments",element:(0,yS.jsx)(nM,{})}),(0,yS.jsx)(be,{path:"/teams",element:(0,yS.jsx)(iM,{})}),(0,yS.jsx)(be,{path:"/players",element:(0,yS.jsx)(cM,{})}),(0,yS.jsx)(be,{path:"/leaderboard",element:(0,yS.jsx)(uM,{})}),(0,yS.jsx)(be,{path:"/news",element:(0,yS.jsx)(IM,{})}),(0,yS.jsx)(be,{path:"/live/:matchId",element:(0,yS.jsx)(hM,{})}),(0,yS.jsx)(be,{path:"/login",element:(0,yS.jsx)(fM,{})}),(0,yS.jsx)(be,{path:"/signup",element:(0,yS.jsx)(pM,{})}),(0,yS.jsx)(be,{path:"/admin",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(mM,{})})}),(0,yS.jsx)(be,{path:"/admin/matches",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(gM,{})})}),(0,yS.jsx)(be,{path:"/admin/teams",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(yM,{})})}),(0,yS.jsx)(be,{path:"/admin/players",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(vM,{})})}),(0,yS.jsx)(be,{path:"/admin/lineups",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(xM,{})})}),(0,yS.jsx)(be,{path:"/admin/tournaments",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(bM,{})})}),(0,yS.jsx)(be,{path:"/admin/news",element:(0,yS.jsx)(_M,{children:(0,yS.jsx)(TM,{})})})]})})]})})};a.createRoot(document.getElementById("root")).render((0,yS.jsx)(s.StrictMode,{children:(0,yS.jsx)(je,{children:(0,yS.jsx)(xS,{children:(0,yS.jsx)(CM,{})})})}))})();
//# sourceMappingURL=main.74438ef9.js.map